function GPlayer(e,t){videojs.options.flash.swf="./TanVodPlayer.swf",videojs.options.flash.flashVars={autostart:"true",reportplaytime:"1",isvr:t.isvr,videoid:"dbdf4ac3bed84f44a9bade194432f8de",file:t.src},videojs(e,{controls:!0,preload:"none"}).ready(function(){var e=this;e.src(t),e.currentTime(0),console.log(e),console.log(e.currentType_),console.log(e.techName_),"Html5"!=e.techName_&&(e.player_.bigPlayButton.hide(),e.controlBar.hide()),e.play()})}!function(e,t){"undefined"==typeof e.HTMLVideoElement&&(t.createElement("video"),t.createElement("audio"),t.createElement("track")),function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){var t,n=Array,r=n.prototype,i=Object,o=i.prototype,a=Function.prototype,s=String,u=s.prototype,l=Number,c=l.prototype,d=r.slice,f=r.splice,p=r.push,h=r.unshift,g=r.concat,y=a.call,m=a.apply,v=Math.max,_=Math.min,b=o.toString,T="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,E=Function.prototype.toString,w=function(e){try{return E.call(e),!0}catch(t){return!1}},S="[object Function]",j="[object GeneratorFunction]";t=function(e){if("function"!=typeof e)return!1;if(T)return w(e);var t=b.call(e);return t===S||t===j};var C,M=RegExp.prototype.exec,O=function(e){try{return M.call(e),!0}catch(t){return!1}},x="[object RegExp]";C=function(e){return"object"!=typeof e?!1:T?O(e):b.call(e)===x};var A,I=String.prototype.valueOf,D=function(e){try{return I.call(e),!0}catch(t){return!1}},P="[object String]";A=function(e){return"string"==typeof e?!0:"object"!=typeof e?!1:T?D(e):b.call(e)===P};var k=i.defineProperty&&function(){try{var e={};i.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(n){return!1}}(),R=function(e){var t;return t=k?function(e,t,n,r){!r&&t in e||i.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)},function(n,r,i){for(var o in r)e.call(r,o)&&t(n,o,r[o],i)}}(o.hasOwnProperty),L=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},N=l.isNaN||function(e){return e!==e},F={ToInteger:function(e){var t=+e;return N(t)?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(e){var n,r,i;if(L(e))return e;if(r=e.valueOf,t(r)&&(n=r.call(e),L(n)))return n;if(i=e.toString,t(i)&&(n=i.call(e),L(n)))return n;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return i(e)},ToUint32:function(e){return e>>>0}},B=function(){};R(a,{bind:function(e){var n=this;if(!t(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r,o=d.call(arguments,1),a=function(){if(this instanceof r){var t=n.apply(this,g.call(o,d.call(arguments)));return i(t)===t?t:this}return n.apply(e,g.call(o,d.call(arguments)))},s=v(0,n.length-o.length),u=[],l=0;s>l;l++)p.call(u,"$"+l);return r=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this, arguments); }")(a),n.prototype&&(B.prototype=n.prototype,r.prototype=new B,B.prototype=null),r}});var U=y.bind(o.hasOwnProperty),H=y.bind(o.toString),K=y.bind(d),V=m.bind(d),q=y.bind(u.slice),G=y.bind(u.split),z=y.bind(u.indexOf),Y=y.bind(p),W=y.bind(o.propertyIsEnumerable),X=y.bind(r.sort),Q=n.isArray||function(e){return"[object Array]"===H(e)},$=1!==[].unshift(0);R(r,{unshift:function(){return h.apply(this,arguments),this.length}},$),R(n,{isArray:Q});var J=i("a"),Z="a"!==J[0]||!(0 in J),ee=function(e){var t=!0,n=!0,r=!1;if(e)try{e.call("foo",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(i){r=!0}return!!e&&!r&&t&&n};R(r,{forEach:function(e){var n,r=F.ToObject(this),i=Z&&A(this)?G(this,""):r,o=-1,a=F.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!t(e))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in i&&("undefined"==typeof n?e(i[o],o,r):e.call(n,i[o],o,r))}},!ee(r.forEach)),R(r,{map:function(e){var r,i=F.ToObject(this),o=Z&&A(this)?G(this,""):i,a=F.ToUint32(o.length),s=n(a);if(arguments.length>1&&(r=arguments[1]),!t(e))throw new TypeError("Array.prototype.map callback must be a function");for(var u=0;a>u;u++)u in o&&("undefined"==typeof r?s[u]=e(o[u],u,i):s[u]=e.call(r,o[u],u,i));return s}},!ee(r.map)),R(r,{filter:function(e){var n,r,i=F.ToObject(this),o=Z&&A(this)?G(this,""):i,a=F.ToUint32(o.length),s=[];if(arguments.length>1&&(r=arguments[1]),!t(e))throw new TypeError("Array.prototype.filter callback must be a function");for(var u=0;a>u;u++)u in o&&(n=o[u],("undefined"==typeof r?e(n,u,i):e.call(r,n,u,i))&&Y(s,n));return s}},!ee(r.filter)),R(r,{every:function(e){var n,r=F.ToObject(this),i=Z&&A(this)?G(this,""):r,o=F.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!t(e))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;o>a;a++)if(a in i&&!("undefined"==typeof n?e(i[a],a,r):e.call(n,i[a],a,r)))return!1;return!0}},!ee(r.every)),R(r,{some:function(e){var n,r=F.ToObject(this),i=Z&&A(this)?G(this,""):r,o=F.ToUint32(i.length);if(arguments.length>1&&(n=arguments[1]),!t(e))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;o>a;a++)if(a in i&&("undefined"==typeof n?e(i[a],a,r):e.call(n,i[a],a,r)))return!0;return!1}},!ee(r.some));var te=!1;r.reduce&&(te="object"==typeof r.reduce.call("es5",function(e,t,n,r){return r})),R(r,{reduce:function(e){var n=F.ToObject(this),r=Z&&A(this)?G(this,""):n,i=F.ToUint32(r.length);if(!t(e))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in r){o=r[a++];break}if(++a>=i)throw new TypeError("reduce of empty array with no initial value")}for(;i>a;a++)a in r&&(o=e(o,r[a],a,n));return o}},!te);var ne=!1;r.reduceRight&&(ne="object"==typeof r.reduceRight.call("es5",function(e,t,n,r){return r})),R(r,{reduceRight:function(e){var n=F.ToObject(this),r=Z&&A(this)?G(this,""):n,i=F.ToUint32(r.length);if(!t(e))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,a=i-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in r){o=r[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>a)return o;do a in r&&(o=e(o,r[a],a,n));while(a--);return o}},!ne);var re=r.indexOf&&-1!==[0,1].indexOf(1,2);R(r,{indexOf:function(e){var t=Z&&A(this)?G(this,""):F.ToObject(this),n=F.ToUint32(t.length);if(0===n)return-1;var r=0;for(arguments.length>1&&(r=F.ToInteger(arguments[1])),r=r>=0?r:v(0,n+r);n>r;r++)if(r in t&&t[r]===e)return r;return-1}},re);var ie=r.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);R(r,{lastIndexOf:function(e){var t=Z&&A(this)?G(this,""):F.ToObject(this),n=F.ToUint32(t.length);if(0===n)return-1;var r=n-1;for(arguments.length>1&&(r=_(r,F.ToInteger(arguments[1]))),r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in t&&e===t[r])return r;return-1}},ie);var oe=function(){var e=[1,2],t=e.splice();return 2===e.length&&Q(t)&&0===t.length}();R(r,{splice:function(e,t){return 0===arguments.length?[]:f.apply(this,arguments)}},!oe);var ae=function(){var e={};return r.splice.call(e,0,0,1),1===e.length}();R(r,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=v(F.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&(n=K(arguments),n.length<2?Y(n,this.length-e):n[1]=F.ToInteger(t)),f.apply(this,n)}},!ae);var se=function(){var e=new n(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),ue=function(){var e=256,t=[];return t[e]="a",t.splice(e+1,0,"b"),"a"===t[e]}();R(r,{splice:function(e,t){for(var n,r=F.ToObject(this),i=[],o=F.ToUint32(r.length),a=F.ToInteger(e),u=0>a?v(o+a,0):_(a,o),l=_(v(F.ToInteger(t),0),o-u),c=0;l>c;)n=s(u+c),U(r,n)&&(i[c]=r[n]),c+=1;var d,f=K(arguments,2),p=f.length;if(l>p){for(c=u;o-l>c;)n=s(c+l),d=s(c+p),U(r,n)?r[d]=r[n]:delete r[d],c+=1;for(c=o;c>o-l+p;)delete r[c-1],c-=1}else if(p>l)for(c=o-l;c>u;)n=s(c+l-1),d=s(c+p-1),U(r,n)?r[d]=r[n]:delete r[d],c-=1;c=u;for(var h=0;h<f.length;++h)r[c]=f[h],c+=1;return r.length=o-l+p,i}},!se||!ue);var le,ce=r.join;try{le="1,2,3"!==Array.prototype.join.call("123",",")}catch(de){le=!0}le&&R(r,{join:function(e){var t="undefined"==typeof e?",":e;return ce.call(A(this)?G(this,""):this,t)}},le);var fe="1,2"!==[1,2].join(void 0);fe&&R(r,{join:function(e){var t="undefined"==typeof e?",":e;return ce.call(this,t)}},fe);var pe=function(e){for(var t=F.ToObject(this),n=F.ToUint32(t.length),r=0;r<arguments.length;)t[n+r]=arguments[r],r+=1;return t.length=n+r,n+r},he=function(){var e={},t=Array.prototype.push.call(e,void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!U(e,0)}();R(r,{push:function(e){return Q(this)?p.apply(this,arguments):pe.apply(this,arguments)}},he);var ge=function(){var e=[],t=e.push(void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!U(e,0)}();R(r,{push:pe},ge),R(r,{slice:function(e,t){var n=A(this)?G(this,""):this;return V(n,arguments)}},Z);var ye=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),me=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),ve=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();R(r,{sort:function(e){if("undefined"==typeof e)return X(this);if(!t(e))throw new TypeError("Array.prototype.sort callback must be a function");return X(this,e)}},ye||!ve||!me);var _e=!{toString:null}.propertyIsEnumerable("toString"),be=function(){}.propertyIsEnumerable("prototype"),Te=!U("x","0"),Ee=function(e){var t=e.constructor;return t&&t.prototype===e},we={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},Se=function(){if("undefined"==typeof e)return!1;for(var t in e)try{!we["$"+t]&&U(e,t)&&null!==e[t]&&"object"==typeof e[t]&&Ee(e[t])}catch(n){return!0}return!1}(),je=function(t){if("undefined"==typeof e||!Se)return Ee(t);try{return Ee(t)}catch(n){return!1}},Ce=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Me=Ce.length,Oe=function(e){return"[object Arguments]"===H(e)},xe=function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&!Q(e)&&t(e.callee)},Ae=Oe(arguments)?Oe:xe;R(i,{keys:function(e){var n=t(e),r=Ae(e),i=null!==e&&"object"==typeof e,o=i&&A(e);if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=[],u=be&&n;if(o&&Te||r)for(var l=0;l<e.length;++l)Y(a,s(l));if(!r)for(var c in e)u&&"prototype"===c||!U(e,c)||Y(a,s(c));if(_e)for(var d=je(e),f=0;Me>f;f++){var p=Ce[f];d&&"constructor"===p||!U(e,p)||Y(a,p)}return a}});var Ie=i.keys&&function(){return 2===i.keys(arguments).length}(1,2),De=i.keys&&function(){var e=i.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Pe=i.keys;R(i,{keys:function(e){return Pe(Ae(e)?K(e):e)}},!Ie||De);var ke,Re,Le=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Ne=new Date(-0x55d318d56a724),Fe=new Date(14496624e5),Be="Mon, 01 Jan -45875 11:59:59 GMT"!==Ne.toUTCString(),Ue=Ne.getTimezoneOffset();-720>Ue?(ke="Tue Jan 02 -45875"!==Ne.toDateString(),Re=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Fe.toString())):(ke="Mon Jan 01 -45875"!==Ne.toDateString(),Re=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Fe.toString()));var He=y.bind(Date.prototype.getFullYear),Ke=y.bind(Date.prototype.getMonth),Ve=y.bind(Date.prototype.getDate),qe=y.bind(Date.prototype.getUTCFullYear),Ge=y.bind(Date.prototype.getUTCMonth),ze=y.bind(Date.prototype.getUTCDate),Ye=y.bind(Date.prototype.getUTCDay),We=y.bind(Date.prototype.getUTCHours),Xe=y.bind(Date.prototype.getUTCMinutes),Qe=y.bind(Date.prototype.getUTCSeconds),$e=y.bind(Date.prototype.getUTCMilliseconds),Je=["Sun","Mon","Tue","Wed","Thu","Fri"],Ze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],et=function(e,t){return Ve(new Date(t,e,0))};R(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=He(this);return 0>e&&Ke(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=He(this),t=Ke(this);return 0>e&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=He(this),t=Ke(this),n=Ve(this);if(0>e&&t>11){if(12===t)return n;var r=et(0,e+1);return r-n+1}return n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=qe(this);return 0>e&&Ge(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=qe(this),t=Ge(this);return 0>e&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=qe(this),t=Ge(this),n=ze(this);if(0>e&&t>11){if(12===t)return n;var r=et(0,e+1);return r-n+1}return n}},Le),R(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ye(this),t=ze(this),n=Ge(this),r=qe(this),i=We(this),o=Xe(this),a=Qe(this);return Je[e]+", "+(10>t?"0"+t:t)+" "+Ze[n]+" "+r+" "+(10>i?"0"+i:i)+":"+(10>o?"0"+o:o)+":"+(10>a?"0"+a:a)+" GMT"}},Le||Be),R(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),r=this.getFullYear();return Je[e]+" "+Ze[n]+" "+(10>t?"0"+t:t)+" "+r}},Le||ke),(Le||Re)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),r=this.getFullYear(),i=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),u=Math.floor(Math.abs(s)/60),l=Math.floor(Math.abs(s)%60);return Je[e]+" "+Ze[n]+" "+(10>t?"0"+t:t)+" "+r+" "+(10>i?"0"+i:i)+":"+(10>o?"0"+o:o)+":"+(10>a?"0"+a:a)+" GMT"+(s>0?"-":"+")+(10>u?"0"+u:u)+(10>l?"0"+l:l)},k&&i.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var tt=-621987552e5,nt="-000001",rt=Date.prototype.toISOString&&-1===new Date(tt).toISOString().indexOf(nt),it=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString();R(Date.prototype,{toISOString:function(){if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=qe(this),t=Ge(this);e+=Math.floor(t/12),t=(t%12+12)%12;var n=[t+1,ze(this),We(this),Xe(this),Qe(this)];e=(0>e?"-":e>9999?"+":"")+q("00000"+Math.abs(e),e>=0&&9999>=e?-4:-6);for(var r=0;r<n.length;++r)n[r]=q("00"+n[r],-2);return e+"-"+K(n,0,2).join("-")+"T"+K(n,2).join(":")+"."+q("000"+$e(this),-3)+"Z"}},rt||it);var ot=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(tt).toJSON().indexOf(nt)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();ot||(Date.prototype.toJSON=function(e){var n=i(this),r=F.ToPrimitive(n);if("number"==typeof r&&!isFinite(r))return null;var o=n.toISOString;if(!t(o))throw new TypeError("toISOString property is not callable");return o.call(n)});var at=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),st=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),ut=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(ut||st||!at){var lt=Math.pow(2,31)-1,ct=N(new Date(1970,0,1,0,0,0,lt+1).getTime());Date=function(e){var t=function(n,r,i,o,a,u,l){var c,d=arguments.length;if(this instanceof e){var f=u,p=l;if(ct&&d>=7&&l>lt){var h=Math.floor(l/lt)*lt,g=Math.floor(h/1e3);f+=g,p-=1e3*g}c=1===d&&s(n)===n?new e(t.parse(n)):d>=7?new e(n,r,i,o,a,f,p):d>=6?new e(n,r,i,o,a,f):d>=5?new e(n,r,i,o,a):d>=4?new e(n,r,i,o):d>=3?new e(n,r,i):d>=2?new e(n,r):d>=1?new e(n):new e}else c=e.apply(this,arguments);return L(c)||R(c,{constructor:t},!0),c},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=function(e,t){var n=t>1?1:0;return r[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)},o=function(t){var n=0,r=t;if(ct&&r>lt){var i=Math.floor(r/lt)*lt,o=Math.floor(i/1e3);n+=o,r-=1e3*o}return l(new e(1970,0,1,0,0,n,r))};for(var a in e)U(e,a)&&(t[a]=e[a]);R(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,R(t.prototype,{constructor:t},!0);var u=function(t){var r=n.exec(t);if(r){var a,s=l(r[1]),u=l(r[2]||1)-1,c=l(r[3]||1)-1,d=l(r[4]||0),f=l(r[5]||0),p=l(r[6]||0),h=Math.floor(1e3*l(r[7]||0)),g=Boolean(r[4]&&!r[8]),y="-"===r[9]?1:-1,m=l(r[10]||0),v=l(r[11]||0),_=f>0||p>0||h>0;return(_?24:25)>d&&60>f&&60>p&&1e3>h&&u>-1&&12>u&&24>m&&60>v&&c>-1&&c<i(s,u+1)-i(s,u)&&(a=60*(24*(i(s,u)+c)+d+m*y),a=1e3*(60*(a+f+v*y)+p)+h,g&&(a=o(a)),a>=-864e13&&864e13>=a)?a:NaN}return e.parse.apply(this,arguments)};return R(t,{parse:u}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var dt=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),ft={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,r=t;++n<ft.size;)r+=e*ft.data[n],ft.data[n]=r%ft.base,r=Math.floor(r/ft.base)},divide:function(e){for(var t=ft.size,n=0;--t>=0;)n+=ft.data[t],ft.data[t]=Math.floor(n/e),n=n%e*ft.base},numToString:function(){for(var e=ft.size,t="";--e>=0;)if(""!==t||0===e||0!==ft.data[e]){var n=s(ft.data[e]);""===t?t=n:t+=q("0000000",0,7-n.length)+n}return t},pow:function Dt(e,t,n){return 0===t?n:t%2===1?Dt(e,t-1,n*e):Dt(e*e,t/2,n)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}},pt=function(e){var t,n,r,i,o,a,u,c;if(t=l(e),t=N(t)?0:Math.floor(t),0>t||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=l(this),N(n))return"NaN";if(-1e21>=n||n>=1e21)return s(n);if(r="",0>n&&(r="-",n=-n),i="0",n>1e-21)if(o=ft.log(n*ft.pow(2,69,1))-69,a=0>o?n*ft.pow(2,-o,1):n/ft.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(ft.multiply(0,a),u=t;u>=7;)ft.multiply(1e7,0),u-=7;for(ft.multiply(ft.pow(10,u,1),0),u=o-1;u>=23;)ft.divide(1<<23),u-=23;ft.divide(1<<u),ft.multiply(1,1),ft.divide(2),i=ft.numToString()}else ft.multiply(0,a),ft.multiply(1<<-o,0),i=ft.numToString()+q("0.00000000000000000000",2,2+t);return t>0?(c=i.length,i=t>=c?r+q("0.0000000000000000000",0,t-c+2)+i:r+q(i,0,c-t)+"."+q(i,c-t)):i=r+i,i};R(c,{toFixed:pt},dt);var ht=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),gt=c.toPrecision;R(c,{toPrecision:function(e){return"undefined"==typeof e?gt.call(this):gt.call(this,e)}},ht),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e="undefined"==typeof/()??/.exec("")[1],t=Math.pow(2,32)-1;u.split=function(n,r){var i=String(this);if("undefined"==typeof n&&0===r)return[];if(!C(n))return G(this,n,r);var o,a,s,u,l=[],c=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),d=0,f=new RegExp(n.source,c+"g");e||(o=new RegExp("^"+f.source+"$(?!\\s)",c));var h="undefined"==typeof r?t:F.ToUint32(r);for(a=f.exec(i);a&&(s=a.index+a[0].length,!(s>d&&(Y(l,q(i,d,a.index)),!e&&a.length>1&&a[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<i.length&&p.apply(l,K(a,1)),u=a[0].length,d=s,l.length>=h)));)f.lastIndex===a.index&&f.lastIndex++,a=f.exec(i);return d===i.length?(u||!f.test(""))&&Y(l,""):Y(l,q(i,d)),l.length>h?q(l,0,h):l}}():"0".split(void 0,0).length&&(u.split=function(e,t){return"undefined"==typeof e&&0===t?[]:G(this,e,t)});var yt=u.replace,mt=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){Y(e,n)}),1===e.length&&"undefined"==typeof e[0]}();mt||(u.replace=function(e,n){var r=t(n),i=C(e)&&/\)[*?]/.test(e.source);if(r&&i){var o=function(t){var r=arguments.length,i=e.lastIndex;e.lastIndex=0;var o=e.exec(t)||[];return e.lastIndex=i,Y(o,arguments[r-2],arguments[r-1]),n.apply(this,o)};return yt.call(this,e,o)}return yt.call(this,e,n)});var vt=u.substr,_t="".substr&&"b"!=="0b".substr(-1);R(u,{substr:function(e,t){var n=e;return 0>e&&(n=v(this.length+e,0)),vt.call(this,n,t)}},_t);var bt="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",Tt="​",Et="["+bt+"]",wt=new RegExp("^"+Et+Et+"*"),St=new RegExp(Et+Et+"*$"),jt=u.trim&&(bt.trim()||!Tt.trim());R(u,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return s(this).replace(wt,"").replace(St,"")}},jt);var Ct=y.bind(String.prototype.trim),Mt=u.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);R(u,{lastIndexOf:function(e){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var t=s(this),n=s(e),r=arguments.length>1?l(arguments[1]):NaN,i=N(r)?1/0:F.ToInteger(r),o=_(v(i,0),t.length),a=n.length,u=o+a;u>0;){u=v(0,u-a);var c=z(q(t,u,o+a),n);if(-1!==c)return u+c}return-1}},Mt);var Ot=u.lastIndexOf;if(R(u,{lastIndexOf:function(e){return Ot.apply(this,arguments)}},1!==u.lastIndexOf.length),(8!==parseInt(bt+"08")||22!==parseInt(bt+"0x16"))&&(parseInt=function(e){var t=/^[\-+]?0[xX]/;return function(n,r){var i=Ct(n),o=l(r)||(t.test(i)?16:10);return e(i,o)}}(parseInt)),1/parseFloat("-0")!==-(1/0)&&(parseFloat=function(e){return function(t){var n=Ct(t),r=e(n);return 0===r&&"-"===q(n,0,1)?-0:r}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){var xt=function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;"undefined"==typeof e?e="Error":"string"!=typeof e&&(e=s(e));var t=this.message;return"undefined"==typeof t?t="":"string"!=typeof t&&(t=s(t)),e?t?e+": "+t:e:t};Error.prototype.toString=xt}if(k){var At=function(e,t){if(W(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.enumerable=!1,Object.defineProperty(e,t,n)}};At(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),At(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var It=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=It}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){var e,n,r,i,o=Function.call,a=Object.prototype,s=o.bind(a.hasOwnProperty),u=o.bind(a.propertyIsEnumerable),l=o.bind(a.toString),c=s(a,"__defineGetter__");c&&(e=o.bind(a.__defineGetter__),n=o.bind(a.__defineSetter__),r=o.bind(a.__lookupGetter__),i=o.bind(a.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){var t=e.__proto__;return t||null===t?t:"[object Function]"===l(e.constructor)?e.constructor.prototype:e instanceof Object?a:null});var d=function(e){try{return e.sentinel=0,0===Object.getOwnPropertyDescriptor(e,"sentinel").value}catch(t){return!1}};if(Object.defineProperty){var f=d({}),p="undefined"==typeof t||d(t.createElement("div"));if(!p||!f)var h=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||h){var g="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(g+e);if(h)try{return h.call(Object,e,t)}catch(n){}var o;if(!s(e,t))return o;if(o={enumerable:u(e,t),configurable:!0},c){var l=e.__proto__,d=e!==a;d&&(e.__proto__=a);var f=r(e,t),p=i(e,t);if(d&&(e.__proto__=l),f||p)return f&&(o.get=f),p&&(o.set=p),o}return o.value=e[t],o.writable=!0,o}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var y,m=!({__proto__:null}instanceof Object),v=function(){if(!t.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(e){return!1}},_=function(){var e,t;return t=new ActiveXObject("htmlfile"),t.write("<script></script>"),t.close(),e=t.parentWindow.Object.prototype,t=null,e},b=function(){var e,n=t.createElement("iframe"),r=t.body||t.documentElement;return n.style.display="none",r.appendChild(n),n.src="javascript:",e=n.contentWindow.Object.prototype,r.removeChild(n),n=null,e};y=m||"undefined"==typeof t?function(){return{__proto__:null}}:function(){var e=v()?_():b();delete e.constructor,delete e.hasOwnProperty,delete e.propertyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf;var t=function(){};return t.prototype=e,y=function(){return new t},new t},Object.create=function(e,t){var n,r=function(){};if(null===e)n=y();else{if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object prototype may only be an Object or null");r.prototype=e,n=new r,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}}var T=function(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){return!1}};if(Object.defineProperty){var E=T({}),w="undefined"==typeof t||T(t.createElement("div"));if(!E||!w)var S=Object.defineProperty,j=Object.defineProperties}if(!Object.defineProperty||S){var C="Property description must be an object: ",M="Object.defineProperty called on non-object: ",O="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,o,s){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(M+t);if("object"!=typeof s&&"function"!=typeof s||null===s)throw new TypeError(C+s);if(S)try{return S.call(Object,t,o,s)}catch(u){}if("value"in s)if(c&&(r(t,o)||i(t,o))){var l=t.__proto__;t.__proto__=a,delete t[o],t[o]=s.value,t.__proto__=l}else t[o]=s.value;else{if(!c&&("get"in s||"set"in s))throw new TypeError(O);"get"in s&&e(t,o,s.get),"set"in s&&n(t,o,s.set)}return t}}(!Object.defineProperties||j)&&(Object.defineProperties=function(e,t){if(j)try{return j.call(Object,e,t)}catch(n){}return Object.keys(t).forEach(function(n){"__proto__"!==n&&Object.defineProperty(e,n,t[n])}),e}),Object.seal||(Object.seal=function(e){if(Object(e)!==e)throw new TypeError("Object.seal can only be called on Objects.");return e}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(x){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(e){if(Object(e)!==e)throw new TypeError("Object.preventExtensions can only be called on Objects.");return e}),Object.isSealed||(Object.isSealed=function(e){if(Object(e)!==e)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(e){if(Object(e)!==e)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var t="";s(e,t);)t+="?";e[t]=!0;var n=s(e,t);return delete e[t],n})})}(window,document),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojs=e()}}(function(){var e;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t){(function(n){var r="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},i=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var o=r["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":3}],2:[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(){},{}],4:[function(e,t){var n=e("../internal/getNative"),r=n(Date,"now"),i=r||function(){return(new Date).getTime()};t.exports=i},{"../internal/getNative":20}],5:[function(e,t){function n(e,t,n){function s(){m&&clearTimeout(m),p&&clearTimeout(p),_=0,p=m=v=void 0}function u(t,n){n&&clearTimeout(n),p=m=v=void 0,t&&(_=i(),h=e.apply(y,f),m||p||(f=y=void 0))}function l(){var e=t-(i()-g);0>=e||e>t?u(v,p):m=setTimeout(l,e)}function c(){u(T,m)}function d(){if(f=arguments,g=i(),y=this,v=T&&(m||!E),b===!1)var n=E&&!m;else{p||E||(_=g);var r=b-(g-_),o=0>=r||r>b;o?(p&&(p=clearTimeout(p)),_=g,h=e.apply(y,f)):p||(p=setTimeout(c,r))}return o&&m?m=clearTimeout(m):m||t===b||(m=setTimeout(l,t)),n&&(o=!0,h=e.apply(y,f)),!o||m||p||(f=y=void 0),h}var f,p,h,g,y,m,v,_=0,b=!1,T=!0;if("function"!=typeof e)throw new TypeError(o);if(t=0>t?0:+t||0,n===!0){var E=!0;T=!1}else r(n)&&(E=!!n.leading,b="maxWait"in n&&a(+n.maxWait||0,t),T="trailing"in n?!!n.trailing:T);return d.cancel=s,d}var r=e("../lang/isObject"),i=e("../date/now"),o="Expected a function",a=Math.max;t.exports=n},{"../date/now":4,"../lang/isObject":33}],6:[function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(r);return t=i(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,o=i(n.length-t,0),a=Array(o);++r<o;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,e.apply(this,s)}}var r="Expected a function",i=Math.max;t.exports=n},{}],7:[function(e,t){function n(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError(o);return n===!1?a=!1:i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:a,maxWait:+t,trailing:s})}var r=e("./debounce"),i=e("../lang/isObject"),o="Expected a function";t.exports=n},{"../lang/isObject":33,"./debounce":5}],8:[function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=n},{}],9:[function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=n},{}],10:[function(e,t){function n(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}t.exports=n},{}],11:[function(e,t){var n=e("./createBaseFor"),r=n();t.exports=r},{"./createBaseFor":18}],12:[function(e,t){function n(e,t){return r(e,t,i)}var r=e("./baseFor"),i=e("../object/keysIn");t.exports=n},{"../object/keysIn":39,"./baseFor":11}],13:[function(e,t){function n(e,t,d,f,p){if(!s(e))return e;var h=a(t)&&(o(t)||l(t)),g=h?void 0:c(t);return r(g||t,function(r,o){if(g&&(o=r,r=t[o]),u(r))f||(f=[]),p||(p=[]),i(e,t,o,n,d,f,p);else{var a=e[o],s=d?d(a,r,o,e,t):void 0,l=void 0===s;l&&(s=r),void 0===s&&(!h||o in e)||!l&&(s===s?s===a:a!==a)||(e[o]=s)}}),e}var r=e("./arrayEach"),i=e("./baseMergeDeep"),o=e("../lang/isArray"),a=e("./isArrayLike"),s=e("../lang/isObject"),u=e("./isObjectLike"),l=e("../lang/isTypedArray"),c=e("../object/keys");
t.exports=n},{"../lang/isArray":30,"../lang/isObject":33,"../lang/isTypedArray":36,"../object/keys":38,"./arrayEach":9,"./baseMergeDeep":14,"./isArrayLike":21,"./isObjectLike":26}],14:[function(e,t){function n(e,t,n,c,d,f,p){for(var h=f.length,g=t[n];h--;)if(f[h]==g)return void(e[n]=p[h]);var y=e[n],m=d?d(y,g,n,e,t):void 0,v=void 0===m;v&&(m=g,a(g)&&(o(g)||u(g))?m=o(y)?y:a(y)?r(y):[]:s(g)||i(g)?m=i(y)?l(y):s(y)?y:{}:v=!1),f.push(g),p.push(m),v?e[n]=c(m,g,d,f,p):(m===m?m!==y:y===y)&&(e[n]=m)}var r=e("./arrayCopy"),i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("./isArrayLike"),s=e("../lang/isPlainObject"),u=e("../lang/isTypedArray"),l=e("../lang/toPlainObject");t.exports=n},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isPlainObject":34,"../lang/isTypedArray":36,"../lang/toPlainObject":37,"./arrayCopy":8,"./isArrayLike":21}],15:[function(e,t){function n(e){return function(t){return null==t?void 0:r(t)[e]}}var r=e("./toObject");t.exports=n},{"./toObject":28}],16:[function(e,t){function n(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}var r=e("../utility/identity");t.exports=n},{"../utility/identity":42}],17:[function(e,t){function n(e){return o(function(t,n){var o=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,l=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),u&&i(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++o<a;){var c=n[o];c&&e(t,c,s)}return t})}var r=e("./bindCallback"),i=e("./isIterateeCall"),o=e("../function/restParam");t.exports=n},{"../function/restParam":6,"./bindCallback":16,"./isIterateeCall":24}],18:[function(e,t){function n(e){return function(t,n,i){for(var o=r(t),a=i(t),s=a.length,u=e?s:-1;e?u--:++u<s;){var l=a[u];if(n(o[l],l,o)===!1)break}return t}}var r=e("./toObject");t.exports=n},{"./toObject":28}],19:[function(e,t){var n=e("./baseProperty"),r=n("length");t.exports=r},{"./baseProperty":15}],20:[function(e,t){function n(e,t){var n=null==e?void 0:e[t];return r(n)?n:void 0}var r=e("../lang/isNative");t.exports=n},{"../lang/isNative":32}],21:[function(e,t){function n(e){return null!=e&&i(r(e))}var r=e("./getLength"),i=e("./isLength");t.exports=n},{"./getLength":19,"./isLength":25}],22:[function(e,t){var n=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}();t.exports=n},{}],23:[function(e,t){function n(e,t){return e="number"==typeof e||r.test(e)?+e:-1,t=null==t?i:t,e>-1&&e%1==0&&t>e}var r=/^\d+$/,i=9007199254740991;t.exports=n},{}],24:[function(e,t){function n(e,t,n){if(!o(n))return!1;var a=typeof t;if("number"==a?r(n)&&i(t,n.length):"string"==a&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}var r=e("./isArrayLike"),i=e("./isIndex"),o=e("../lang/isObject");t.exports=n},{"../lang/isObject":33,"./isArrayLike":21,"./isIndex":23}],25:[function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&r>=e}var r=9007199254740991;t.exports=n},{}],26:[function(e,t){function n(e){return!!e&&"object"==typeof e}t.exports=n},{}],27:[function(e,t){function n(e){for(var t=u(e),n=t.length,l=n&&e.length,d=!!l&&a(l)&&(i(e)||r(e)||s(e)),f=-1,p=[];++f<n;){var h=t[f];(d&&o(h,l)||c.call(e,h))&&p.push(h)}return p}var r=e("../lang/isArguments"),i=e("../lang/isArray"),o=e("./isIndex"),a=e("./isLength"),s=e("../lang/isString"),u=e("../object/keysIn"),l=Object.prototype,c=l.hasOwnProperty;t.exports=n},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isString":35,"../object/keysIn":39,"./isIndex":23,"./isLength":25}],28:[function(e,t){function n(e){if(o.unindexedChars&&i(e)){for(var t=-1,n=e.length,a=Object(e);++t<n;)a[t]=e.charAt(t);return a}return r(e)?e:Object(e)}var r=e("../lang/isObject"),i=e("../lang/isString"),o=e("../support");t.exports=n},{"../lang/isObject":33,"../lang/isString":35,"../support":41}],29:[function(e,t){function n(e){return i(e)&&r(e)&&a.call(e,"callee")&&!s.call(e,"callee")}var r=e("../internal/isArrayLike"),i=e("../internal/isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable;t.exports=n},{"../internal/isArrayLike":21,"../internal/isObjectLike":26}],30:[function(e,t){var n=e("../internal/getNative"),r=e("../internal/isLength"),i=e("../internal/isObjectLike"),o="[object Array]",a=Object.prototype,s=a.toString,u=n(Array,"isArray"),l=u||function(e){return i(e)&&r(e.length)&&s.call(e)==o};t.exports=l},{"../internal/getNative":20,"../internal/isLength":25,"../internal/isObjectLike":26}],31:[function(e,t){function n(e){return r(e)&&a.call(e)==i}var r=e("./isObject"),i="[object Function]",o=Object.prototype,a=o.toString;t.exports=n},{"./isObject":33}],32:[function(e,t){function n(e){return null==e?!1:r(e)?c.test(u.call(e)):o(e)&&(i(e)?c:a).test(e)}var r=e("./isFunction"),i=e("../internal/isHostObject"),o=e("../internal/isObjectLike"),a=/^\[object .+?Constructor\]$/,s=Object.prototype,u=Function.prototype.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"../internal/isHostObject":22,"../internal/isObjectLike":26,"./isFunction":31}],33:[function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],34:[function(e,t){function n(e){var t;if(!a(e)||d.call(e)!=u||o(e)||i(e)||!c.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return s.ownLast?(r(e,function(e,t,r){return n=c.call(r,t),!1}),n!==!1):(r(e,function(e,t){n=t}),void 0===n||c.call(e,n))}var r=e("../internal/baseForIn"),i=e("./isArguments"),o=e("../internal/isHostObject"),a=e("../internal/isObjectLike"),s=e("../support"),u="[object Object]",l=Object.prototype,c=l.hasOwnProperty,d=l.toString;t.exports=n},{"../internal/baseForIn":12,"../internal/isHostObject":22,"../internal/isObjectLike":26,"../support":41,"./isArguments":29}],35:[function(e,t){function n(e){return"string"==typeof e||r(e)&&a.call(e)==i}var r=e("../internal/isObjectLike"),i="[object String]",o=Object.prototype,a=o.toString;t.exports=n},{"../internal/isObjectLike":26}],36:[function(e,t){function n(e){return i(e)&&r(e.length)&&!!O[A.call(e)]}var r=e("../internal/isLength"),i=e("../internal/isObjectLike"),o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",h="[object RegExp]",g="[object Set]",y="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",_="[object Float32Array]",b="[object Float64Array]",T="[object Int8Array]",E="[object Int16Array]",w="[object Int32Array]",S="[object Uint8Array]",j="[object Uint8ClampedArray]",C="[object Uint16Array]",M="[object Uint32Array]",O={};O[_]=O[b]=O[T]=O[E]=O[w]=O[S]=O[j]=O[C]=O[M]=!0,O[o]=O[a]=O[v]=O[s]=O[u]=O[l]=O[c]=O[d]=O[f]=O[p]=O[h]=O[g]=O[y]=O[m]=!1;var x=Object.prototype,A=x.toString;t.exports=n},{"../internal/isLength":25,"../internal/isObjectLike":26}],37:[function(e,t){function n(e){return r(e,i(e))}var r=e("../internal/baseCopy"),i=e("../object/keysIn");t.exports=n},{"../internal/baseCopy":10,"../object/keysIn":39}],38:[function(e,t){var n=e("../internal/getNative"),r=e("../internal/isArrayLike"),i=e("../lang/isObject"),o=e("../internal/shimKeys"),a=e("../support"),s=n(Object,"keys"),u=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?a.enumPrototypes:r(e))?o(e):i(e)?s(e):[]}:o;t.exports=u},{"../internal/getNative":20,"../internal/isArrayLike":21,"../internal/shimKeys":27,"../lang/isObject":33,"../support":41}],39:[function(e,t){function n(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&u(t)&&(o(e)||i(e)||c(e))&&t||0;for(var n=e.constructor,r=-1,f=a(n)&&n.prototype||w,p=f===e,h=Array(t),y=t>0,m=d.enumErrorProps&&(e===E||e instanceof Error),_=d.enumPrototypes&&a(e);++r<t;)h[r]=r+"";for(var O in e)_&&"prototype"==O||m&&("message"==O||"name"==O)||y&&s(O,t)||"constructor"==O&&(p||!j.call(e,O))||h.push(O);if(d.nonEnumShadows&&e!==w){var x=e===S?b:e===E?g:C.call(e),A=M[x]||M[v];for(x==v&&(f=w),t=T.length;t--;){O=T[t];var I=A[O];p&&I||(I?!j.call(e,O):e[O]===f[O])||h.push(O)}}return h}var r=e("../internal/arrayEach"),i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("../lang/isFunction"),s=e("../internal/isIndex"),u=e("../internal/isLength"),l=e("../lang/isObject"),c=e("../lang/isString"),d=e("../support"),f="[object Array]",p="[object Boolean]",h="[object Date]",g="[object Error]",y="[object Function]",m="[object Number]",v="[object Object]",_="[object RegExp]",b="[object String]",T=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],E=Error.prototype,w=Object.prototype,S=String.prototype,j=w.hasOwnProperty,C=w.toString,M={};M[f]=M[h]=M[m]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},M[p]=M[b]={constructor:!0,toString:!0,valueOf:!0},M[g]=M[y]=M[_]={constructor:!0,toString:!0},M[v]={constructor:!0},r(T,function(e){for(var t in M)if(j.call(M,t)){var n=M[t];n[e]=j.call(n,e)}}),t.exports=n},{"../internal/arrayEach":9,"../internal/isIndex":23,"../internal/isLength":25,"../lang/isArguments":29,"../lang/isArray":30,"../lang/isFunction":31,"../lang/isObject":33,"../lang/isString":35,"../support":41}],40:[function(e,t){var n=e("../internal/baseMerge"),r=e("../internal/createAssigner"),i=r(n);t.exports=i},{"../internal/baseMerge":13,"../internal/createAssigner":17}],41:[function(e,t){var n=Array.prototype,r=Error.prototype,i=Object.prototype,o=i.propertyIsEnumerable,a=n.splice,s={};!function(e){var t=function(){this.x=e},n={0:e,length:e},i=[];t.prototype={valueOf:e,y:e};for(var u in new t)i.push(u);s.enumErrorProps=o.call(r,"message")||o.call(r,"name"),s.enumPrototypes=o.call(t,"prototype"),s.nonEnumShadows=!/valueOf/.test(i),s.ownLast="x"!=i[0],s.spliceObjects=(a.call(n,0,1),!n[0]),s.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),t.exports=s},{}],42:[function(e,t){function n(e){return e}t.exports=n},{}],43:[function(e,t){"use strict";var n=e("object-keys");t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test");if("string"==typeof t)return!1;var r=42;e[t]=r;for(t in e)return!1;if(0!==n(e).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0}},{"object-keys":50}],44:[function(e,t){"use strict";var n=e("object-keys"),r=e("function-bind"),i=function(e){return"undefined"!=typeof e&&null!==e},o=e("./hasSymbols")(),a=Object,s=r.call(Function.call,Array.prototype.push),u=r.call(Function.call,Object.prototype.propertyIsEnumerable);t.exports=function(e){if(!i(e))throw new TypeError("target must be an object");var t,r,l,c,d,f,p,h=a(e);for(t=1;t<arguments.length;++t){if(r=a(arguments[t]),c=n(r),o&&Object.getOwnPropertySymbols)for(d=Object.getOwnPropertySymbols(r),l=0;l<d.length;++l)p=d[l],u(r,p)&&s(c,p);for(l=0;l<c.length;++l)p=c[l],f=r[p],u(r,p)&&(h[p]=f)}return h}},{"./hasSymbols":43,"function-bind":49,"object-keys":50}],45:[function(e,t){"use strict";var n=e("define-properties"),r=e("./implementation"),i=e("./polyfill"),o=e("./shim");n(r,{implementation:r,getPolyfill:i,shim:o}),t.exports=r},{"./implementation":44,"./polyfill":52,"./shim":53,"define-properties":46}],46:[function(e,t){"use strict";var n=e("object-keys"),r=e("foreach"),i="function"==typeof Symbol&&"symbol"==typeof Symbol(),o=Object.prototype.toString,a=function(e){return"function"==typeof e&&"[object Function]"===o.call(e)},s=function(){var e={};try{Object.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(n){return!1}},u=Object.defineProperty&&s(),l=function(e,t,n,r){(!(t in e)||a(r)&&r())&&(u?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function(e,t){var o=arguments.length>2?arguments[2]:{},a=n(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t))),r(a,function(n){l(e,n,t[n],o[n])})};c.supportsDescriptors=!!u,t.exports=c},{foreach:47,"object-keys":50}],47:[function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=function(e,t,i){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var a=0;o>a;a++)t.call(i,e[a],a,e);else for(var s in e)n.call(e,s)&&t.call(i,e[s],s,e)}},{}],48:[function(e,t){var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString,o="[object Function]";t.exports=function(e){var t=this;if("function"!=typeof t||i.call(t)!==o)throw new TypeError(n+t);for(var a,s=r.call(arguments,1),u=function(){if(this instanceof a){var n=t.apply(this,s.concat(r.call(arguments)));return Object(n)===n?n:this}return t.apply(e,s.concat(r.call(arguments)))},l=Math.max(0,t.length-s.length),c=[],d=0;l>d;d++)c.push("$"+d);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var f=function(){};f.prototype=t.prototype,a.prototype=new f,f.prototype=null}return a}},{}],49:[function(e,t){var n=e("./implementation");t.exports=Function.prototype.bind||n},{"./implementation":48}],50:[function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Array.prototype.slice,o=e("./isArguments"),a=!{toString:null}.propertyIsEnumerable("toString"),s=function(){}.propertyIsEnumerable("prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=e.constructor;return t&&t.prototype===e},c={$console:!0,$frame:!0,$frameElement:!0,$frames:!0,$parent:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!c["$"+e]&&n.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{l(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),f=function(e){if("undefined"==typeof window||!d)return l(e);try{return l(e)}catch(t){return!1}},p=function(e){var t=null!==e&&"object"==typeof e,i="[object Function]"===r.call(e),l=o(e),c=t&&"[object String]"===r.call(e),d=[];if(!t&&!i&&!l)throw new TypeError("Object.keys called on a non-object");var p=s&&i;if(c&&e.length>0&&!n.call(e,0))for(var h=0;h<e.length;++h)d.push(String(h));if(l&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var y in e)p&&"prototype"===y||!n.call(e,y)||d.push(String(y));if(a)for(var m=f(e),v=0;v<u.length;++v)m&&"constructor"===u[v]||!n.call(e,u[v])||d.push(u[v]);return d};p.shim=function(){if(Object.keys){var e=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!e){var t=Object.keys;Object.keys=function(e){return t(o(e)?i.call(e):e)}}}else Object.keys=p;return Object.keys||p},t.exports=p},{"./isArguments":51}],51:[function(e,t){"use strict";var n=Object.prototype.toString;t.exports=function(e){var t=n.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),r}},{}],52:[function(e,t){"use strict";var n=e("./implementation"),r=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return e!==o},i=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}};t.exports=function(){return Object.assign?r()?n:i()?n:Object.assign:n}},{"./implementation":44}],53:[function(e,t){"use strict";var n=e("define-properties"),r=e("./polyfill");t.exports=function(){var e=r();return n(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e}},{"./polyfill":52,"define-properties":46}],54:[function(e,t){function n(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(i){r=i}return[r,n]}t.exports=n},{}],55:[function(e,t){function n(e){return e.replace(/\n\r?\s*/g,"")}t.exports=function(e){for(var t="",r=0;r<arguments.length;r++)t+=n(e[r])+(arguments[r+1]||"");return t}},{}],56:[function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++)t(e[n])}function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return c(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=f(t,{uri:e}),r.callback=n,r}function o(e,t,n){return t=i(e,t,n),a(t)}function a(e){function t(){4===c.readyState&&a()}function n(){var e=void 0;if(c.response?e=c.response:"text"!==c.responseType&&c.responseType||(e=c.responseText||c.responseXML),b)try{e=JSON.parse(e)}catch(t){}return e}function i(e){clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,s(e,u)}function a(){if(!p){var t;clearTimeout(h),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=u,i=null;0!==t?(r={body:n(),statusCode:t,method:y,headers:{},url:g,rawRequest:c},c.getAllResponseHeaders&&(r.headers=d(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),s(i,r,r.body)}}var s=e.callback;if("undefined"==typeof s)throw new Error("callback argument missing");s=l(s);var u={body:void 0,headers:{},statusCode:0,method:y,url:g,rawRequest:c},c=e.xhr||null;c||(c=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var f,p,h,g=c.url=e.uri||e.url,y=c.method=e.method||"GET",m=e.body||e.data||null,v=c.headers=e.headers||{},_=!!e.sync,b=!1;if("json"in e&&(b=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==y&&"HEAD"!==y&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),m=JSON.stringify(e.json))),c.onreadystatechange=t,c.onload=a,c.onerror=i,c.onprogress=function(){},c.ontimeout=i,c.open(y,g,!_,e.username,e.password),_||(c.withCredentials=!!e.withCredentials),!_&&e.timeout>0&&(h=setTimeout(function(){p=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)},e.timeout)),c.setRequestHeader)for(f in v)v.hasOwnProperty(f)&&c.setRequestHeader(f,v[f]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(m),c}function s(){}var u=e("global/window"),l=e("once"),c=e("is-function"),d=e("parse-headers"),f=e("xtend");t.exports=o,o.XMLHttpRequest=u.XMLHttpRequest||s,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:u.XDomainRequest,n(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),a(n)}})},{"global/window":2,"is-function":57,once:58,"parse-headers":61,xtend:62}],57:[function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n;var r=Object.prototype.toString},{}],58:[function(e,t){function n(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],59:[function(e,t){function n(e,t,n){if(!a(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===s.call(e)?r(e,t,n):"string"==typeof e?i(e,t,n):o(e,t,n)}function r(e,t,n){for(var r=0,i=e.length;i>r;r++)u.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,i=e.length;i>r;r++)t.call(n,e.charAt(r),r,e)}function o(e,t,n){for(var r in e)u.call(e,r)&&t.call(n,e[r],r,e)}var a=e("is-function");t.exports=n;var s=Object.prototype.toString,u=Object.prototype.hasOwnProperty},{"is-function":57}],60:[function(e,t,n){function r(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=r,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],61:[function(e,t){var n=e("trim"),r=e("for-each"),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return r(n(e).split("\n"),function(e){var r=e.indexOf(":"),o=n(e.slice(0,r)).toLowerCase(),a=n(e.slice(r+1));"undefined"==typeof t[o]?t[o]=a:i(t[o])?t[o].push(a):t[o]=[t[o],a]}),t}},{"for-each":59,trim:60}],62:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}t.exports=n;var r=Object.prototype.hasOwnProperty},{}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./button.js"),s=r(a),u=e("./component.js"),l=r(u),c=function(e){function t(n,r){i(this,t),e.call(this,n,r)}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(){this.player_.play()},t}(s["default"]);c.prototype.controlText_="Play Video",l["default"].registerComponent("BigPlayButton",c),n["default"]=c,t.exports=n["default"]},{"./button.js":64,"./component.js":67}],64:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./clickable-component.js"),u=i(s),l=e("./component"),c=i(l),d=e("./utils/events.js"),f=(r(d),e("./utils/fn.js")),p=(r(f),e("./utils/log.js")),h=i(p),g=e("global/document"),y=(i(g),e("object.assign")),m=i(y),v=function(e){function t(n,r){o(this,t),e.call(this,n,r)}return a(t,e),t.prototype.createEl=function(){var e=arguments.length<=0||void 0===arguments[0]?"button":arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];t=m["default"]({className:this.buildCSSClass()},t),"button"!==e&&(h["default"].warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=m["default"]({tabIndex:0},t),n=m["default"]({role:"button"},n)),n=m["default"]({type:"button","aria-live":"polite"},n);var r=c["default"].prototype.createEl.call(this,e,t,n);return this.createControlTextEl(r),r},t.prototype.addChild=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this.constructor.name;return h["default"].warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),c["default"].prototype.addChild.call(this,e,t)},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which||e.prototype.handleKeyPress.call(this,t)},t}(u["default"]);c["default"].registerComponent("Button",v),n["default"]=v,t.exports=n["default"]},{"./clickable-component.js":65,"./component":67,"./utils/events.js":135,"./utils/fn.js":136,"./utils/log.js":139,"global/document":1,"object.assign":45}],65:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./component"),u=i(s),l=e("./utils/dom.js"),c=r(l),d=e("./utils/events.js"),f=r(d),p=e("./utils/fn.js"),h=r(p),g=e("./utils/log.js"),y=i(g),m=e("global/document"),v=i(m),_=e("object.assign"),b=i(_),T=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.emitTapEvents(),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur)}return a(t,e),t.prototype.createEl=function(){var t=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];n=b["default"]({className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&y["default"].error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=b["default"]({role:"button","aria-live":"polite"},r);var i=e.prototype.createEl.call(this,t,n,r);return this.createControlTextEl(i),i},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=c.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_),this.controlTextEl_},t.prototype.controlText=function(e){return e?(this.controlText_=e,this.controlTextEl_.innerHTML=this.localize(this.controlText_),this):this.controlText_||"Need Text"},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.addChild=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e.prototype.addChild.call(this,t,n)},t.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this},t.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),this},t.prototype.handleClick=function(){},t.prototype.handleFocus=function(){f.on(v["default"],"keydown",h.bind(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleClick(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(){f.off(v["default"],"keydown",h.bind(this,this.handleKeyPress))},t}(u["default"]);u["default"].registerComponent("ClickableComponent",T),n["default"]=T,t.exports=n["default"]},{"./component":67,"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/log.js":139,"global/document":1,"object.assign":45}],66:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./button"),s=r(a),u=e("./component"),l=r(u),c=function(e){function t(n,r){i(this,t),e.call(this,n,r),this.controlText(r&&r.controlText||this.localize("Close"))}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.trigger({type:"close",bubbles:!1})},t}(s["default"]);l["default"].registerComponent("CloseButton",c),n["default"]=c,t.exports=n["default"]},{"./button":64,"./component":67}],67:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var a=e("global/window"),s=i(a),u=e("./utils/dom.js"),l=r(u),c=e("./utils/fn.js"),d=r(c),f=e("./utils/guid.js"),p=r(f),h=e("./utils/events.js"),g=r(h),y=e("./utils/log.js"),m=i(y),v=e("./utils/to-title-case.js"),_=i(v),b=e("object.assign"),T=i(b),E=e("./utils/merge-options.js"),w=i(E),S=function(){function e(t,n,r){if(o(this,e),this.player_=!t&&this.play?t=this:t,this.options_=w["default"]({},this.options_),n=this.options_=w["default"](this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+p.newGUID()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},n.initChildren!==!1&&this.initChildren(),this.ready(r),n.reportTouchActivity!==!1&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),l.removeElData(this.el_),this.el_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return m["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=w["default"](this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,n){return l.createEl(e,t,n)},e.prototype.localize=function(e){var t=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages();if(!t||!n)return e;var r=n[t];if(r&&r[e])return r[e];var i=t.split("-")[0],o=n[i];return o&&o[e]?o[e]:e},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){return this.childNameIndex_[e]},e.prototype.addChild=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?this.children_.length:arguments[2],i=void 0,o=void 0;if("string"==typeof t){o=t,n||(n={}),n===!0&&(m["default"].warn("Initializing a child component with `true` is deprecated. Children should be defined in an array when possible, but if necessary use an object instead of `true`."),n={});var a=n.componentClass||_["default"](o);n.name=o;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(this.children_.splice(r,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),
o=o||i.name&&i.name(),o&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children,l=u[r]||null;this.contentEl().insertBefore(i.el(),l)}return i},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,n=this.options_.children;n&&!function(){var r=t.options_,i=function(e){var n=e.name,i=e.opts;if(void 0!==r[n]&&(i=r[n]),i!==!1){i===!0&&(i={}),i.playerOptions=t.options_.playerOptions;var o=t.addChild(n,i);o&&(t[n]=o)}},o=void 0,a=e.getComponent("Tech");o=Array.isArray(n)?n:Object.keys(n),o.concat(Object.keys(t.options_).filter(function(e){return!o.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var r=void 0,i=void 0;return"string"==typeof e?(r=e,i=n[r]||t.options_[r]||{}):(r=e.name,i=e),{name:r,opts:i}}).filter(function(t){var n=e.getComponent(t.opts.componentClass||_["default"](t.name));return n&&!a.isTech(n)}).forEach(i)}()},e.prototype.buildCSSClass=function(){return""},e.prototype.on=function(e,t,n){var r=this;return"string"==typeof e||Array.isArray(e)?g.on(this.el_,e,d.bind(this,t)):!function(){var i=e,o=t,a=d.bind(r,n),s=function(){return r.off(i,o,a)};s.guid=a.guid,r.on("dispose",s);var u=function(){return r.off("dispose",s)};u.guid=a.guid,e.nodeName?(g.on(i,o,a),g.on(i,"dispose",u)):"function"==typeof e.on&&(i.on(o,a),i.on("dispose",u))}(),this},e.prototype.off=function(e,t,n){if(!e||"string"==typeof e||Array.isArray(e))g.off(this.el_,e,t);else{var r=e,i=t,o=d.bind(this,n);this.off("dispose",o),e.nodeName?(g.off(r,i,o),g.off(r,"dispose",o)):(r.off(i,o),r.off("dispose",o))}return this},e.prototype.one=function(e,t,n){var r=this,i=arguments;return"string"==typeof e||Array.isArray(e)?g.one(this.el_,e,d.bind(this,t)):!function(){var o=e,a=t,s=d.bind(r,n),u=function l(){r.off(o,a,l),s.apply(null,i)};u.guid=s.guid,r.on(o,a,u)}(),this},e.prototype.trigger=function(e,t){return g.trigger(this.el_,e,t),this},e.prototype.ready=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return l.$(e,t||this.contentEl())},e.prototype.$$=function(e,t){return l.$$(e,t||this.contentEl())},e.prototype.hasClass=function(e){return l.hasElClass(this.el_,e)},e.prototype.addClass=function(e){return l.addElClass(this.el_,e),this},e.prototype.removeClass=function(e){return l.removeElClass(this.el_,e),this},e.prototype.toggleClass=function(e,t){return l.toggleElClass(this.el_,e,t),this},e.prototype.show=function(){return this.removeClass("vjs-hidden"),this},e.prototype.hide=function(){return this.addClass("vjs-hidden"),this},e.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},e.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},e.prototype.dimension=function(e,t,n){if(void 0!==t)return(null===t||t!==t)&&(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",n||this.trigger("resize"),this;if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+_["default"](e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s["default"].getComputedStyle){var n=s["default"].getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}else if(this.el_.currentStyle){var r="offset"+_["default"](e);t=this.el_[r]}return t=parseFloat(t)},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.emitTapEvents=function(){var e=0,t=null,n=10,r=200,i=void 0;this.on("touchstart",function(n){1===n.touches.length&&(t=T["default"]({},n.touches[0]),e=(new Date).getTime(),i=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)i=!1;else if(t){var r=e.touches[0].pageX-t.pageX,o=e.touches[0].pageY-t.pageY,a=Math.sqrt(r*r+o*o);a>n&&(i=!1)}});var o=function(){i=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(n){if(t=null,i===!0){var o=(new Date).getTime()-e;r>o&&(n.preventDefault(),this.trigger("tap"))}})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=d.bind(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var n=function(){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.prototype.setTimeout=function(e,t){e=d.bind(this,e);var n=s["default"].setTimeout(e,t),r=function(){this.clearTimeout(n)};return r.guid="vjs-timeout-"+n,this.on("dispose",r),n},e.prototype.clearTimeout=function(e){s["default"].clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){e=d.bind(this,e);var n=s["default"].setInterval(e,t),r=function(){this.clearInterval(n)};return r.guid="vjs-interval-"+n,this.on("dispose",r),n},e.prototype.clearInterval=function(e){s["default"].clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.registerComponent=function(t,n){return e.components_||(e.components_={}),e.components_[t]=n,n},e.getComponent=function(t){return e.components_&&e.components_[t]?e.components_[t]:s["default"]&&s["default"].videojs&&s["default"].videojs[t]?(m["default"].warn("The "+t+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s["default"].videojs[t]):void 0},e.extend=function(t){t=t||{},m["default"].warn("Component.extend({}) has been deprecated, use videojs.extend(Component, {}) instead");var n=t.init||t.init||this.prototype.init||this.prototype.init||function(){},r=function(){n.apply(this,arguments)};r.prototype=Object.create(this.prototype),r.prototype.constructor=r,r.extend=e.extend;for(var i in t)t.hasOwnProperty(i)&&(r.prototype[i]=t[i]);return r},e}();S.registerComponent("Component",S),n["default"]=S,t.exports=n["default"]},{"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/guid.js":138,"./utils/log.js":139,"./utils/merge-options.js":140,"./utils/to-title-case.js":143,"global/window":2,"object.assign":45}],68:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../component.js"),s=r(a),u=e("./play-toggle.js"),l=(r(u),e("./time-controls/current-time-display.js")),c=(r(l),e("./time-controls/duration-display.js")),d=(r(c),e("./time-controls/time-divider.js")),f=(r(d),e("./time-controls/remaining-time-display.js")),p=(r(f),e("./live-display.js")),h=(r(p),e("./progress-control/progress-control.js")),g=(r(h),e("./fullscreen-toggle.js")),y=(r(g),e("./volume-control/volume-control.js")),m=(r(y),e("./volume-menu-button.js")),v=(r(m),e("./mute-toggle.js")),_=(r(v),e("./text-track-controls/chapters-button.js")),b=(r(_),e("./text-track-controls/descriptions-button.js")),T=(r(b),e("./text-track-controls/subtitles-button.js")),E=(r(T),e("./text-track-controls/captions-button.js")),w=(r(E),e("./playback-rate-menu/playback-rate-menu-button.js")),S=(r(w),e("./spacer-controls/custom-control-spacer.js")),j=(r(S),function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},t}(s["default"]));j.prototype.options_={loadEvent:"play",children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","fullscreenToggle"]},s["default"].registerComponent("ControlBar",j),n["default"]=j,t.exports=n["default"]},{"../component.js":67,"./fullscreen-toggle.js":69,"./live-display.js":70,"./mute-toggle.js":71,"./play-toggle.js":72,"./playback-rate-menu/playback-rate-menu-button.js":73,"./progress-control/progress-control.js":78,"./spacer-controls/custom-control-spacer.js":81,"./text-track-controls/captions-button.js":84,"./text-track-controls/chapters-button.js":85,"./text-track-controls/descriptions-button.js":87,"./text-track-controls/subtitles-button.js":89,"./time-controls/current-time-display.js":92,"./time-controls/duration-display.js":93,"./time-controls/remaining-time-display.js":94,"./time-controls/time-divider.js":95,"./volume-control/volume-control.js":97,"./volume-menu-button.js":99}],69:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../button.js"),s=r(a),u=e("../component.js"),l=r(u),c=function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText("Fullscreen")):(this.player_.requestFullscreen(),this.controlText("Non-Fullscreen"))},t}(s["default"]);c.prototype.controlText_="Fullscreen",l["default"].registerComponent("FullscreenToggle",c),n["default"]=c,t.exports=n["default"]},{"../button.js":64,"../component.js":67}],70:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../component"),u=i(s),l=e("../utils/dom.js"),c=r(l),d=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.updateShowing(),this.on(this.player(),"durationchange",this.updateShowing)}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},t}(u["default"]);u["default"].registerComponent("LiveDisplay",d),n["default"]=d,t.exports=n["default"]},{"../component":67,"../utils/dom.js":134}],71:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../button"),u=i(s),l=e("../component"),c=i(l),d=e("../utils/dom.js"),f=r(d),p=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"volumechange",this.update),n.tech_&&n.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(n,"loadstart",function(){this.update(),n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.muted(!this.player_.muted())},t.prototype.update=function(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:.33>e?t=1:.67>e&&(t=2);var n=this.player_.muted()?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n);for(var r=0;4>r;r++)f.removeElClass(this.el_,"vjs-vol-"+r);f.addElClass(this.el_,"vjs-vol-"+t)},t}(u["default"]);p.prototype.controlText_="Mute",c["default"].registerComponent("MuteToggle",p),n["default"]=p,t.exports=n["default"]},{"../button":64,"../component":67,"../utils/dom.js":134}],72:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../button.js"),s=r(a),u=e("../component.js"),l=r(u),c=function(e){function t(n,r){i(this,t),e.call(this,n,r),this.on(n,"play",this.handlePlay),this.on(n,"pause",this.handlePause)}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handlePlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t}(s["default"]);c.prototype.controlText_="Play",l["default"].registerComponent("PlayToggle",c),n["default"]=c,t.exports=n["default"]},{"../button.js":64,"../component.js":67}],73:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../menu/menu-button.js"),u=i(s),l=e("../../menu/menu.js"),c=i(l),d=e("./playback-rate-menu-item.js"),f=i(d),p=e("../../component.js"),h=i(p),g=e("../../utils/dom.js"),y=r(g),m=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.updateVisibility(),this.updateLabel(),this.on(n,"loadstart",this.updateVisibility),this.on(n,"ratechange",this.updateLabel)}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=y.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),t.appendChild(this.labelEl_),t},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.createMenu=function(){var e=new c["default"](this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new f["default"](this.player(),{rate:t[n]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(){for(var e=this.player().playbackRate(),t=this.playbackRates(),n=t[0],r=0;r<t.length;r++)if(t[r]>e){n=t[r];break}this.player().playbackRate(n)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(u["default"]);m.prototype.controlText_="Playback Rate",h["default"].registerComponent("PlaybackRateMenuButton",m),n["default"]=m,t.exports=n["default"]},{"../../component.js":67,"../../menu/menu-button.js":106,"../../menu/menu.js":108,"../../utils/dom.js":134,"./playback-rate-menu-item.js":74}],74:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../../menu/menu-item.js"),s=r(a),u=e("../../component.js"),l=r(u),c=function(e){function t(n,r){i(this,t);var o=r.rate,a=parseFloat(o,10);r.label=o,r.selected=1===a,e.call(this,n,r),this.label=o,this.rate=a,this.on(n,"ratechange",this.update)}return o(t,e),t.prototype.handleClick=function(){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(s["default"]);c.prototype.contentElType="button",l["default"].registerComponent("PlaybackRateMenuItem",c),n["default"]=c,t.exports=n["default"]},{"../../component.js":67,"../../menu/menu-item.js":107}],75:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../component.js"),u=i(s),l=e("../../utils/dom.js"),c=r(l),d=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"progress",this.update)}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.update=function(){var e=this.player_.buffered(),t=this.player_.duration(),n=this.player_.bufferedEnd(),r=this.el_.children,i=function(e,t){var n=e/t||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=i(n,t);for(var o=0;o<e.length;o++){var a=e.start(o),s=e.end(o),u=r[o];u||(u=this.el_.appendChild(c.createEl())),u.style.left=i(a,n),u.style.width=i(s-a,n)}for(var o=r.length;o>e.length;o--)this.el_.removeChild(r[o-1])},t}(u["default"]);u["default"].registerComponent("LoadProgressBar",d),n["default"]=d,t.exports=n["default"]},{"../../component.js":67,"../../utils/dom.js":134}],76:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("global/window"),u=i(s),l=e("../../component.js"),c=i(l),d=e("../../utils/dom.js"),f=r(d),p=e("../../utils/fn.js"),h=r(p),g=e("../../utils/format-time.js"),y=i(g),m=e("lodash-compat/function/throttle"),v=i(m),_=function(e){function t(n,r){var i=this;o(this,t),e.call(this,n,r),r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltip=f.createEl("div",{className:"vjs-time-tooltip"}),this.el().appendChild(this.tooltip),this.addClass("vjs-keep-tooltips-inside")),this.update(0,0),n.on("ready",function(){i.on(n.controlBar.progressControl.el(),"mousemove",v["default"](h.bind(i,i.handleMouseMove),25))})}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.handleMouseMove=function(e){var t=this.player_.duration(),n=this.calculateDistance(e)*t,r=e.pageX-f.findElPosition(this.el().parentNode).left;this.update(n,r)},t.prototype.update=function(e,t){var n=y["default"](e,this.player_.duration());if(this.el().style.left=t+"px",this.el().setAttribute("data-current-time",n),this.keepTooltipsInside){var r=this.clampPosition_(t),i=t-r+1,o=parseFloat(u["default"].getComputedStyle(this.tooltip).width),a=o/2;this.tooltip.innerHTML=n,this.tooltip.style.right="-"+(a-i)+"px"}},t.prototype.calculateDistance=function(e){return f.getPointerPosition(this.el().parentNode,e).x},t.prototype.clampPosition_=function(e){if(!this.keepTooltipsInside)return e;var t=parseFloat(u["default"].getComputedStyle(this.player().el()).width),n=parseFloat(u["default"].getComputedStyle(this.tooltip).width),r=n/2,i=e;return r>e?i=Math.ceil(r):e>t-r&&(i=Math.floor(t-r)),i},t}(c["default"]);c["default"].registerComponent("MouseTimeDisplay",_),n["default"]=_,t.exports=n["default"]},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/format-time.js":137,"global/window":2,"lodash-compat/function/throttle":7}],77:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../component.js"),u=i(s),l=e("../../utils/fn.js"),c=r(l),d=e("../../utils/dom.js"),f=(r(d),e("../../utils/format-time.js")),p=i(f),h=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.updateDataAttr(),this.on(n,"timeupdate",this.updateDataAttr),n.ready(c.bind(this,this.updateDataAttr)),r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&this.addClass("vjs-keep-tooltips-inside")}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.updateDataAttr=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",p["default"](e,this.player_.duration()))},t}(u["default"]);u["default"].registerComponent("PlayProgressBar",h),n["default"]=h,t.exports=n["default"]},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/format-time.js":137}],78:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../../component.js"),s=r(a),u=e("./seek-bar.js"),l=(r(u),e("./mouse-time-display.js")),c=(r(l),function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t}(s["default"]));c.prototype.options_={children:["seekBar"]},s["default"].registerComponent("ProgressControl",c),n["default"]=c,t.exports=n["default"]},{"../../component.js":67,"./mouse-time-display.js":76,"./seek-bar.js":79}],79:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("global/window"),u=i(s),l=e("../../slider/slider.js"),c=i(l),d=e("../../component.js"),f=i(d),p=e("./load-progress-bar.js"),h=(i(p),e("./play-progress-bar.js")),g=(i(h),e("./tooltip-progress-bar.js")),y=(i(g),e("../../utils/fn.js")),m=r(y),v=e("../../utils/format-time.js"),_=i(v),b=e("object.assign"),T=(i(b),function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"timeupdate",this.updateProgress),this.on(n,"ended",this.updateProgress),n.ready(m.bind(this,this.updateProgress)),r.playerOptions&&r.playerOptions.controlBar&&r.playerOptions.controlBar.progressControl&&r.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=r.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltipProgressBar=this.addChild("TooltipProgressBar"))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},t.prototype.updateProgress=function(){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var e=parseFloat(u["default"].getComputedStyle(this.player().el()).width),t=parseFloat(u["default"].getComputedStyle(this.tooltipProgressBar.tooltip).width),n=this.tooltipProgressBar.el().style;n.maxWidth=Math.floor(e-t/2)+"px",n.minWidth=Math.ceil(t/2)+"px",n.right="-"+t/2+"px"}},t.prototype.updateAriaAttributes=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),e.setAttribute("aria-valuetext",_["default"](t,this.player_.duration()))},t.prototype.getPercent=function(){var e=this.player_.currentTime()/this.player_.duration();return e>=1?1:e},t.prototype.handleMouseDown=function(t){e.prototype.handleMouseDown.call(this,t),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t}(c["default"]));T.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},T.prototype.playerEvent="timeupdate",f["default"].registerComponent("SeekBar",T),n["default"]=T,t.exports=n["default"]},{"../../component.js":67,"../../slider/slider.js":116,"../../utils/fn.js":136,"../../utils/format-time.js":137,"./load-progress-bar.js":75,"./play-progress-bar.js":77,"./tooltip-progress-bar.js":80,"global/window":2,"object.assign":45}],80:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../component.js"),u=i(s),l=e("../../utils/fn.js"),c=r(l),d=e("../../utils/dom.js"),f=(r(d),e("../../utils/format-time.js")),p=i(f),h=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.updateDataAttr(),this.on(n,"timeupdate",this.updateDataAttr),n.ready(c.bind(this,this.updateDataAttr))}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"
});return this.tooltip=t.querySelector(".vjs-time-tooltip"),t},t.prototype.updateDataAttr=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),t=p["default"](e,this.player_.duration());this.el_.setAttribute("data-current-time",t),this.tooltip.innerHTML=t},t}(u["default"]);u["default"].registerComponent("TooltipProgressBar",h),n["default"]=h,t.exports=n["default"]},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/format-time.js":137}],81:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./spacer.js"),s=r(a),u=e("../../component.js"),l=r(u),c=function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(s["default"]);l["default"].registerComponent("CustomControlSpacer",c),n["default"]=c,t.exports=n["default"]},{"../../component.js":67,"./spacer.js":82}],82:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../../component.js"),s=r(a),u=function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(s["default"]);s["default"].registerComponent("Spacer",u),n["default"]=u,t.exports=n["default"]},{"../../component.js":67}],83:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./text-track-menu-item.js"),s=r(a),u=e("../../component.js"),l=r(u),c=function(e){function t(n,r){i(this,t),r.track={kind:r.kind,player:n,label:r.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},r.selectable=!1,e.call(this,n,r),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+r.kind+" settings dialog")}return o(t,e),t.prototype.handleClick=function(){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},t}(s["default"]);l["default"].registerComponent("CaptionSettingsMenuItem",c),n["default"]=c,t.exports=n["default"]},{"../../component.js":67,"./text-track-menu-item.js":91}],84:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./text-track-button.js"),s=r(a),u=e("../../component.js"),l=r(u),c=e("./caption-settings-menu-item.js"),d=r(c),f=function(e){function t(n,r,o){i(this,t),e.call(this,n,r,o),this.el_.setAttribute("aria-label","Captions Menu")}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(){var t=2;e.prototype.update.call(this),this.player().tech_&&this.player().tech_.featuresNativeTextTracks&&(t=1),this.items&&this.items.length>t?this.show():this.hide()},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||t.push(new d["default"](this.player_,{kind:this.kind_})),e.prototype.createItems.call(this,t)},t}(s["default"]);f.prototype.kind_="captions",f.prototype.controlText_="Captions",l["default"].registerComponent("CaptionsButton",f),n["default"]=f,t.exports=n["default"]},{"../../component.js":67,"./caption-settings-menu-item.js":83,"./text-track-button.js":90}],85:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./text-track-button.js"),u=i(s),l=e("../../component.js"),c=i(l),d=e("./text-track-menu-item.js"),f=i(d),p=e("./chapters-track-menu-item.js"),h=i(p),g=e("../../menu/menu.js"),y=i(g),m=e("../../utils/dom.js"),v=r(m),_=e("../../utils/fn.js"),b=(r(_),e("../../utils/to-title-case.js")),T=i(b),E=e("global/window"),w=(i(E),function(e){function t(n,r,i){o(this,t),e.call(this,n,r,i),this.el_.setAttribute("aria-label","Chapters Menu")}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=[],t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n];r.kind===this.kind_&&e.push(new f["default"](this.player_,{track:r}))}return e},t.prototype.createMenu=function(){for(var e=this,t=this.player_.textTracks()||[],n=void 0,r=this.items=[],i=0,o=t.length;o>i;i++){var a=t[i];if(a.kind===this.kind_){n=a;break}}var s=this.menu;if(void 0===s){s=new y["default"](this.player_);var u=v.createEl("li",{className:"vjs-menu-title",innerHTML:T["default"](this.kind_),tabIndex:-1});s.children_.unshift(u),v.insertElFirst(u,s.contentEl())}if(n&&null==n.cues){n.mode="hidden";var l=this.player_.remoteTextTrackEls().getTrackElementByTrack_(n);l&&l.addEventListener("load",function(){return e.update()})}if(n&&n.cues&&n.cues.length>0){for(var c=n.cues,d=void 0,i=0,f=c.length;f>i;i++){d=c[i];var p=new h["default"](this.player_,{track:n,cue:d});r.push(p),s.addChild(p)}this.addChild(s)}return this.items.length>0&&this.show(),s},t}(u["default"]));w.prototype.kind_="chapters",w.prototype.controlText_="Chapters",c["default"].registerComponent("ChaptersButton",w),n["default"]=w,t.exports=n["default"]},{"../../component.js":67,"../../menu/menu.js":108,"../../utils/dom.js":134,"../../utils/fn.js":136,"../../utils/to-title-case.js":143,"./chapters-track-menu-item.js":86,"./text-track-button.js":90,"./text-track-menu-item.js":91,"global/window":2}],86:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../menu/menu-item.js"),u=i(s),l=e("../../component.js"),c=i(l),d=e("../../utils/fn.js"),f=r(d),p=function(e){function t(n,r){o(this,t);var i=r.track,a=r.cue,s=n.currentTime();r.label=a.text,r.selected=a.startTime<=s&&s<a.endTime,e.call(this,n,r),this.track=i,this.cue=a,i.addEventListener("cuechange",f.bind(this,this.update))}return a(t,e),t.prototype.handleClick=function(){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(){var e=this.cue,t=this.player_.currentTime();this.selected(e.startTime<=t&&t<e.endTime)},t}(u["default"]);c["default"].registerComponent("ChaptersTrackMenuItem",p),n["default"]=p,t.exports=n["default"]},{"../../component.js":67,"../../menu/menu-item.js":107,"../../utils/fn.js":136}],87:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./text-track-button.js"),u=i(s),l=e("../../component.js"),c=i(l),d=e("../../utils/fn.js"),f=r(d),p=function(e){function t(n,r,i){var a=this;o(this,t),e.call(this,n,r,i),this.el_.setAttribute("aria-label","Descriptions Menu");var s=n.textTracks();s&&!function(){var e=f.bind(a,a.handleTracksChange);s.addEventListener("change",e),a.on("dispose",function(){s.removeEventListener("change",e)})}()}return a(t,e),t.prototype.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!1,n=0,r=e.length;r>n;n++){var i=e[n];if(i.kind!==this.kind_&&"showing"===i.mode){t=!0;break}}t?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t}(u["default"]);p.prototype.kind_="descriptions",p.prototype.controlText_="Descriptions",c["default"].registerComponent("DescriptionsButton",p),n["default"]=p,t.exports=n["default"]},{"../../component.js":67,"../../utils/fn.js":136,"./text-track-button.js":90}],88:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./text-track-menu-item.js"),s=r(a),u=e("../../component.js"),l=r(u),c=function(e){function t(n,r){i(this,t),r.track={kind:r.kind,player:n,label:r.kind+" off","default":!1,mode:"disabled"},r.selectable=!0,e.call(this,n,r),this.selected(!0)}return o(t,e),t.prototype.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!0,n=0,r=e.length;r>n;n++){var i=e[n];if(i.kind===this.track.kind&&"showing"===i.mode){t=!1;break}}this.selected(t)},t}(s["default"]);l["default"].registerComponent("OffTextTrackMenuItem",c),n["default"]=c,t.exports=n["default"]},{"../../component.js":67,"./text-track-menu-item.js":91}],89:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./text-track-button.js"),s=r(a),u=e("../../component.js"),l=r(u),c=function(e){function t(n,r,o){i(this,t),e.call(this,n,r,o),this.el_.setAttribute("aria-label","Subtitles Menu")}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t}(s["default"]);c.prototype.kind_="subtitles",c.prototype.controlText_="Subtitles",l["default"].registerComponent("SubtitlesButton",c),n["default"]=c,t.exports=n["default"]},{"../../component.js":67,"./text-track-button.js":90}],90:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../menu/menu-button.js"),u=i(s),l=e("../../component.js"),c=i(l),d=e("../../utils/fn.js"),f=r(d),p=e("./text-track-menu-item.js"),h=i(p),g=e("./off-text-track-menu-item.js"),y=i(g),m=function(e){function t(n,r){o(this,t),e.call(this,n,r);var i=this.player_.textTracks();if(this.items.length<=1&&this.hide(),i){var a=f.bind(this,this.update);i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),this.player_.on("dispose",function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a)})}}return a(t,e),t.prototype.createItems=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e.push(new y["default"](this.player_,{kind:this.kind_}));var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n];r.kind===this.kind_&&e.push(new h["default"](this.player_,{selectable:!0,track:r}))}return e},t}(u["default"]);c["default"].registerComponent("TextTrackButton",m),n["default"]=m,t.exports=n["default"]},{"../../component.js":67,"../../menu/menu-button.js":106,"../../utils/fn.js":136,"./off-text-track-menu-item.js":88,"./text-track-menu-item.js":91}],91:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../menu/menu-item.js"),u=i(s),l=e("../../component.js"),c=i(l),d=e("../../utils/fn.js"),f=r(d),p=e("global/window"),h=i(p),g=e("global/document"),y=i(g),m=function(e){function t(n,r){var i=this;o(this,t);var a=r.track,s=n.textTracks();r.label=a.label||a.language||"Unknown",r.selected=a["default"]||"showing"===a.mode,e.call(this,n,r),this.track=a,s&&!function(){var e=f.bind(i,i.handleTracksChange);s.addEventListener("change",e),i.on("dispose",function(){s.removeEventListener("change",e)})}(),s&&void 0===s.onchange&&!function(){var e=void 0;i.on(["tap","click"],function(){if("object"!=typeof h["default"].Event)try{e=new h["default"].Event("change")}catch(t){}e||(e=y["default"].createEvent("Event"),e.initEvent("change",!0,!0)),s.dispatchEvent(e)})}()}return a(t,e),t.prototype.handleClick=function(t){var n=this.track.kind,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var i=0;i<r.length;i++){var o=r[i];o.kind===n&&(o.mode=o===this.track?"showing":"disabled")}},t.prototype.handleTracksChange=function(){this.selected("showing"===this.track.mode)},t}(u["default"]);c["default"].registerComponent("TextTrackMenuItem",m),n["default"]=m,t.exports=n["default"]},{"../../component.js":67,"../../menu/menu-item.js":107,"../../utils/fn.js":136,"global/document":1,"global/window":2}],92:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../component.js"),u=i(s),l=e("../../utils/dom.js"),c=r(l),d=e("../../utils/format-time.js"),f=i(d),p=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"timeupdate",this.updateContent)}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),t=this.localize("Current Time"),n=f["default"](e,this.player_.duration());n!==this.formattedTime_&&(this.formattedTime_=n,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> "+n)},t}(u["default"]);u["default"].registerComponent("CurrentTimeDisplay",p),n["default"]=p,t.exports=n["default"]},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/format-time.js":137}],93:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../component.js"),u=i(s),l=e("../../utils/dom.js"),c=r(l),d=e("../../utils/format-time.js"),f=i(d),p=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"timeupdate",this.updateContent),this.on(n,"loadedmetadata",this.updateContent)}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){var e=this.player_.duration();if(e&&this.duration_!==e){this.duration_=e;var t=this.localize("Duration Time"),n=f["default"](e);this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> "+n}},t}(u["default"]);u["default"].registerComponent("DurationDisplay",p),n["default"]=p,t.exports=n["default"]},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/format-time.js":137}],94:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../component.js"),u=i(s),l=e("../../utils/dom.js"),c=r(l),d=e("../../utils/format-time.js"),f=i(d),p=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"timeupdate",this.updateContent)}return a(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){if(this.player_.duration()){var e=this.localize("Remaining Time"),t=f["default"](this.player_.remainingTime());t!==this.formattedTime_&&(this.formattedTime_=t,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> -"+t)}},t}(u["default"]);u["default"].registerComponent("RemainingTimeDisplay",p),n["default"]=p,t.exports=n["default"]},{"../../component.js":67,"../../utils/dom.js":134,"../../utils/format-time.js":137}],95:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../../component.js"),s=r(a),u=function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(s["default"]);s["default"].registerComponent("TimeDivider",u),n["default"]=u,t.exports=n["default"]},{"../../component.js":67}],96:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../../slider/slider.js"),u=i(s),l=e("../../component.js"),c=i(l),d=e("../../utils/fn.js"),f=r(d),p=e("./volume-level.js"),h=(i(p),function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"volumechange",this.updateARIAAttributes),n.ready(f.bind(this,this.updateARIAAttributes))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},t.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(){var e=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},t}(u["default"]));h.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},h.prototype.playerEvent="volumechange",c["default"].registerComponent("VolumeBar",h),n["default"]=h,t.exports=n["default"]},{"../../component.js":67,"../../slider/slider.js":116,"../../utils/fn.js":136,"./volume-level.js":98}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../../component.js"),s=r(a),u=e("./volume-bar.js"),l=(r(u),function(e){function t(n,r){i(this,t),e.call(this,n,r),n.tech_&&n.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(n,"loadstart",function(){n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},t}(s["default"]));l.prototype.options_={children:["volumeBar"]},s["default"].registerComponent("VolumeControl",l),n["default"]=l,t.exports=n["default"]},{"../../component.js":67,"./volume-bar.js":96}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../../component.js"),s=r(a),u=function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(s["default"]);s["default"].registerComponent("VolumeLevel",u),n["default"]=u,t.exports=n["default"]},{"../../component.js":67}],99:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../utils/fn.js"),u=i(s),l=e("../component.js"),c=r(l),d=e("../popup/popup.js"),f=r(d),p=e("../popup/popup-button.js"),h=r(p),g=e("./mute-toggle.js"),y=r(g),m=e("./volume-control/volume-bar.js"),v=r(m),_=function(e){function t(n){function r(){n.tech_&&n.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,t),void 0===i.inline&&(i.inline=!0),void 0===i.vertical&&(i.vertical=!i.inline),i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=!!i.vertical,e.call(this,n,i),this.on(n,"volumechange",this.volumeUpdate),this.on(n,"loadstart",this.volumeUpdate),r.call(this),this.on(n,"loadstart",r),this.on(this.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),this.on(this.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),this.on(this.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),this.on(this.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")})}return a(t,e),t.prototype.buildCSSClass=function(){var t="";return t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+t},t.prototype.createPopup=function(){var e=new f["default"](this.player_,{contentElType:"div"}),t=new v["default"](this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},t.prototype.handleClick=function(){y["default"].prototype.handleClick.call(this),e.prototype.handleClick.call(this)},t.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],u.bind(this,this.handleMouseDown))},t.prototype.handleMouseDown=function(){this.on(["mousemove","touchmove"],u.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},t.prototype.handleMouseUp=function(){this.off(["mousemove","touchmove"],u.bind(this.volumeBar,this.volumeBar.handleMouseMove))},t}(h["default"]);_.prototype.volumeUpdate=y["default"].prototype.update,_.prototype.controlText_="Mute",c["default"].registerComponent("VolumeMenuButton",_),n["default"]=_,t.exports=n["default"]},{"../component.js":67,"../popup/popup-button.js":112,"../popup/popup.js":113,"../utils/fn.js":136,"./mute-toggle.js":71,"./volume-control/volume-bar.js":96}],100:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./component"),u=i(s),l=e("./modal-dialog"),c=i(l),d=e("./utils/dom"),f=(r(d),e("./utils/merge-options")),p=i(f),h=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.on(n,"error",this.open)}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(c["default"]);h.prototype.options_=p["default"](c["default"].prototype.options_,{fillAlways:!0,temporary:!1,uncloseable:!0}),u["default"].registerComponent("ErrorDisplay",h),n["default"]=h,t.exports=n["default"]},{"./component":67,"./modal-dialog":109,"./utils/dom":134,"./utils/merge-options":140}],101:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);
return t["default"]=e,t}n.__esModule=!0;var i=e("./utils/events.js"),o=r(i),a=function(){};a.prototype.allowedEvents_={},a.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=Function.prototype,o.on(this,e,t),this.addEventListener=n},a.prototype.addEventListener=a.prototype.on,a.prototype.off=function(e,t){o.off(this,e,t)},a.prototype.removeEventListener=a.prototype.off,a.prototype.one=function(e,t){o.one(this,e,t)},a.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=o.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),o.trigger(this,e)},a.prototype.dispatchEvent=a.prototype.trigger,n["default"]=a,t.exports=n["default"]},{"./utils/events.js":135}],102:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var i=e("./utils/log"),o=r(i),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},s=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=function(){e.apply(this,arguments)},r={};"object"==typeof t?("function"==typeof t.init&&(o["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead."),t.constructor=t.init),t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),a(n,e);for(var i in r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n};n["default"]=s,t.exports=n["default"]},{"./utils/log":139}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;for(var i=e("global/document"),o=r(i),a={},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],u=s[0],l=void 0,c=0;c<s.length;c++)if(s[c][1]in o["default"]){l=s[c];break}if(l)for(var c=0;c<l.length;c++)a[u[c]]=l[c];n["default"]=a,t.exports=n["default"]},{"global/document":1}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("./component"),s=r(a),u=function(e){function t(){i(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},t}(s["default"]);s["default"].registerComponent("LoadingSpinner",u),n["default"]=u,t.exports=n["default"]},{"./component":67}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var i=e("object.assign"),o=r(i),a=function u(e){"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:"object"==typeof e&&o["default"](this,e),this.message||(this.message=u.defaultMessages[this.code]||"")};a.prototype.code=0,a.prototype.message="",a.prototype.status=null,a.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],a.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var s=0;s<a.errorTypes.length;s++)a[a.errorTypes[s]]=s,a.prototype[a.errorTypes[s]]=s;n["default"]=a,t.exports=n["default"]},{"object.assign":45}],106:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../clickable-component.js"),u=i(s),l=e("../component.js"),c=i(l),d=e("./menu.js"),f=i(d),p=e("../utils/dom.js"),h=r(p),g=e("../utils/fn.js"),y=r(g),m=e("../utils/to-title-case.js"),v=i(m),_=function(e){function t(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,t),e.call(this,n,r),this.update(),this.enabled_=!0,this.el_.setAttribute("aria-haspopup","true"),this.el_.setAttribute("role","menuitem"),this.on("keydown",this.handleSubmenuKeyPress)}return a(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createMenu=function(){var e=new f["default"](this.player_);if(this.options_.title){var t=h.createEl("li",{className:"vjs-menu-title",innerHTML:v["default"](this.options_.title),tabIndex:-1});e.children_.unshift(t),h.insertElFirst(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.one("mouseout",y.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault()):38===t.which||40===t.which?this.buttonPressed_||(this.pressButton(),t.preventDefault()):e.prototype.handleKeyPress.call(this,t)},t.prototype.handleSubmenuKeyPress=function(e){(27===e.which||9===e.which)&&(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault())},t.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},t.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,e.prototype.disable.call(this)},t.prototype.enable=function(){return this.enabled_=!0,e.prototype.enable.call(this)},t}(u["default"]);c["default"].registerComponent("MenuButton",_),n["default"]=_,t.exports=n["default"]},{"../clickable-component.js":65,"../component.js":67,"../utils/dom.js":134,"../utils/fn.js":136,"../utils/to-title-case.js":143,"./menu.js":108}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../clickable-component.js"),s=r(a),u=e("../component.js"),l=r(u),c=e("object.assign"),d=r(c),f=function(e){function t(n,r){i(this,t),e.call(this,n,r),this.selectable=r.selectable,this.selected(r.selected),this.selectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitem")}return o(t,e),t.prototype.createEl=function(t,n,r){return e.prototype.createEl.call(this,"li",d["default"]({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},n),r)},t.prototype.handleClick=function(){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},t}(s["default"]);l["default"].registerComponent("MenuItem",f),n["default"]=f,t.exports=n["default"]},{"../clickable-component.js":65,"../component.js":67,"object.assign":45}],108:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../component.js"),u=i(s),l=e("../utils/dom.js"),c=r(l),d=e("../utils/fn.js"),f=r(d),p=e("../utils/events.js"),h=r(p),g=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.focusedChild_=-1,this.on("keydown",this.handleKeyPress)}return a(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",f.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=c.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.setAttribute("role","presentation"),n.appendChild(this.contentEl_),h.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):(38===e.which||39===e.which)&&(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=this.children().slice(),n=t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className);n&&t.shift(),t.length>0&&(0>e?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(u["default"]);u["default"].registerComponent("Menu",g),n["default"]=g,t.exports=n["default"]},{"../component.js":67,"../utils/dom.js":134,"../utils/events.js":135,"../utils/fn.js":136}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./utils/dom"),u=i(s),l=e("./utils/fn"),c=i(l),d=e("./utils/log"),f=(r(d),e("./component")),p=r(f),h=e("./close-button"),g=(r(h),"vjs-modal-dialog"),y=27,m=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=u.createEl("div",{className:g+"-content"},{role:"document"}),this.descEl_=u.createEl("p",{className:g+"-description vjs-offscreen",id:this.el().getAttribute("aria-describedby")}),u.textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.buildCSSClass=function(){return g+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===y&&this.closeable()&&this.close()},t.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",c.bind(this,this.handleKeyPress)),e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",c.bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},t.prototype.closeable=function n(e){if("boolean"==typeof e){var n=this.closeable_=!!e,t=this.getChild("closeButton");if(n&&!t){var r=this.contentEl_;this.contentEl_=this.el_,t=this.addChild("closeButton"),this.contentEl_=r,this.on(t,"close",this.close)}!n&&t&&(this.off(t,"close",this.close),this.removeChild(t),t.dispose())}return this.closeable_},t.prototype.fill=function(){return this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),u.insertContent(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t),this},t.prototype.empty=function(){return this.trigger("beforemodalempty"),u.emptyEl(this.contentEl()),this.trigger("modalempty"),this},t.prototype.content=function(e){return"undefined"!=typeof e&&(this.content_=e),this.content_},t}(p["default"]);m.prototype.options_={temporary:!0},p["default"].registerComponent("ModalDialog",m),n["default"]=m,t.exports=n["default"]},{"./close-button":66,"./component":67,"./utils/dom":134,"./utils/fn":136,"./utils/log":139}],110:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./component.js"),u=i(s),l=e("global/document"),c=i(l),d=e("global/window"),f=i(d),p=e("./utils/events.js"),h=r(p),g=e("./utils/dom.js"),y=r(g),m=e("./utils/fn.js"),v=r(m),_=e("./utils/guid.js"),b=r(_),T=e("./utils/browser.js"),E=r(T),w=e("./utils/log.js"),S=i(w),j=e("./utils/to-title-case.js"),C=i(j),M=e("./utils/time-ranges.js"),O=e("./utils/buffer.js"),x=e("./utils/stylesheet.js"),A=r(x),I=e("./fullscreen-api.js"),D=i(I),P=e("./media-error.js"),k=i(P),R=e("safe-json-parse/tuple"),L=i(R),N=e("object.assign"),F=i(N),B=e("./utils/merge-options.js"),U=i(B),H=e("./tracks/text-track-list-converter.js"),K=i(H),V=e("./tech/loader.js"),q=(i(V),e("./poster-image.js")),G=(i(q),e("./tracks/text-track-display.js")),z=(i(G),e("./loading-spinner.js")),Y=(i(z),e("./big-play-button.js")),W=(i(Y),e("./control-bar/control-bar.js")),X=(i(W),e("./error-display.js")),Q=(i(X),e("./tracks/text-track-settings.js")),$=(i(Q),e("./modal-dialog")),J=i($),Z=e("./tech/tech.js"),ee=i(Z),te=e("./tech/html5.js"),ne=(i(te),function(e){function t(n,r,i){var a=this;if(o(this,t),n.id=n.id||"vjs_video_"+b.newGUID(),r=F["default"](t.getTagSettings(n),r),r.initChildren=!1,r.createEl=!1,r.reportTouchActivity=!1,e.call(this,null,r,i),!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");this.tag=n,this.tagAttributes=n&&y.getElAttributes(n),this.language(this.options_.language),r.languages?!function(){var e={};Object.getOwnPropertyNames(r.languages).forEach(function(t){e[t.toLowerCase()]=r.languages[t]}),a.languages_=e}():this.languages_=t.prototype.options_.languages,this.cache_={},this.poster_=r.poster||"",this.controls_=!!r.controls,n.controls=!1,this.scrubbing_=!1,this.el_=this.createEl();var s=U["default"](this.options_);r.plugins&&!function(){var e=r.plugins;Object.getOwnPropertyNames(e).forEach(function(t){"function"==typeof this[t]?this[t](e[t]):S["default"].error("Unable to find plugin:",t)},a)}(),this.options_.playerOptions=s,this.initChildren(),this.isAudio("audio"===n.nodeName.toLowerCase()),this.addClass(this.controls()?"vjs-controls-enabled":"vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label","audio player"):this.el_.setAttribute("aria-label","video player"),this.isAudio()&&this.addClass("vjs-audio"),this.flexNotSupported_()&&this.addClass("vjs-no-flex"),E.IS_IOS||this.addClass("vjs-workinghover"),t.players[this.id_]=this,this.userActive(!0),this.reportUserActivity(),this.listenForUserActivity_(),this.on("fullscreenchange",this.handleFullscreenChange_),this.on("stageclick",this.handleStageClick_)}return a(t,e),t.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var t=this.el_=e.prototype.createEl.call(this,"div"),n=this.tag;n.removeAttribute("width"),n.removeAttribute("height");var r=y.getElAttributes(n);if(Object.getOwnPropertyNames(r).forEach(function(e){"class"===e?t.className=r[e]:t.setAttribute(e,r[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),f["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=A.createStyleElement("vjs-styles-dimensions");var i=y.$(".vjs-styles-defaults"),o=y.$("head");o.insertBefore(this.styleEl_,i?i.nextSibling:o.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var a=n.getElementsByTagName("a"),s=0;s<a.length;s++){var u=a.item(s);y.addElClass(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&n.parentNode.insertBefore(t,n),y.insertElFirst(n,t),this.children_.unshift(n),this.el_=t,t},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)this[n]=void 0;else{var r=parseFloat(t);if(isNaN(r))return S["default"].error('Improper value "'+t+'" supplied for for '+e),this;this[n]=r}return this.updateStyleEl_(),this},t.prototype.fluid=function(e){return void 0===e?!!this.fluid_:(this.fluid_=!!e,void(e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid")))},t.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(f["default"].VIDEOJS_NO_DYNAMIC_STYLE===!0){var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}var r=void 0,i=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),u=s[1]/s[0];r=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/u:this.videoWidth()||300,i=void 0!==this.height_?this.height_:r*u,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),A.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+r+"px;\n        height: "+i+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*u+"%;\n      }\n    ")},t.prototype.loadTech_=function(e,t){this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(ee["default"].getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var n=F["default"]({nativeControlsForTouch:this.options_.nativeControlsForTouch,source:t,playerId:this.id(),techId:this.id()+"_"+e+"_api",textTracks:this.textTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),"vtt.js":this.options_["vtt.js"]},this.options_[e.toLowerCase()]);this.tag&&(n.tag=this.tag),t&&(this.currentType_=t.type,t.src===this.cache_.src&&this.cache_.currentTime>0&&(n.startTime=this.cache_.currentTime),this.cache_.src=t.src);var r=ee["default"].getTech(e);r||(r=u["default"].getComponent(e)),this.tech_=new r(n),this.tech_.ready(v.bind(this,this.handleTechReady_),!0),K["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"progress",this.handleTechProgress_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"suspend",this.handleTechSuspend_),this.on(this.tech_,"abort",this.handleTechAbort_),this.on(this.tech_,"emptied",this.handleTechEmptied_),this.on(this.tech_,"stalled",this.handleTechStalled_),this.on(this.tech_,"loadedmetadata",this.handleTechLoadedMetaData_),this.on(this.tech_,"loadeddata",this.handleTechLoadedData_),this.on(this.tech_,"timeupdate",this.handleTechTimeUpdate_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.on(this.tech_,"volumechange",this.handleTechVolumeChange_),this.on(this.tech_,"texttrackchange",this.handleTechTextTrackChange_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||y.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){this.textTracks_=this.textTracks(),this.textTracksJson_=K["default"].textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},t.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;var t="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw f["default"].alert(t),new Error(t)},t.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},t.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),this.src()&&this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},t.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechProgress_=function(){this.trigger("progress")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e&&e.code)},t.prototype.handleTechSuspend_=function(){this.trigger("suspend")},t.prototype.handleTechAbort_=function(){this.trigger("abort")},t.prototype.handleTechEmptied_=function(){this.trigger("emptied")},t.prototype.handleTechStalled_=function(){this.trigger("stalled")},t.prototype.handleTechLoadedMetaData_=function(){this.trigger("loadedmetadata")},t.prototype.handleTechLoadedData_=function(){this.trigger("loadeddata")},t.prototype.handleTechTimeUpdate_=function(){this.trigger("timeupdate")},t.prototype.handleTechRateChange_=function(){this.trigger("ratechange")},t.prototype.handleTechVolumeChange_=function(){this.trigger("volumechange")},t.prototype.handleTechTextTrackChange_=function(){this.trigger("texttrackchange")},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_[e](t)}catch(n){throw S["default"](n),n}},t.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?S["default"]("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?(S["default"]("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):S["default"](t),t}},t.prototype.play=function(){return this.techCall_("play"),this},t.prototype.pause=function(){return this.techCall_("pause"),this},t.prototype.paused=function(){return this.techGet_("paused")!==!1},t.prototype.scrubbing=function(e){return void 0!==e?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},t.prototype.currentTime=function(e){return void 0!==e?(this.techCall_("setCurrentTime",e),this):this.cache_.currentTime=this.techGet_("currentTime")||0},t.prototype.duration=function(e){return void 0===e?this.cache_.duration||0:(e=parseFloat(e)||0,
0>e&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.buffered=function n(){var n=this.techGet_("buffered");return n&&n.length||(n=M.createTimeRange(0,0)),n},t.prototype.bufferedPercent=function(){return O.bufferedPercent(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},t.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},t.prototype.muted=function(e){return void 0!==e?(this.techCall_("setMuted",e),this):this.techGet_("muted")||!1},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=D["default"];return this.isFullscreen(!0),e.requestFullscreen?(h.on(c["default"],e.fullscreenchange,v.bind(this,function t(){this.isFullscreen(c["default"][e.fullscreenElement]),this.isFullscreen()===!1&&h.off(c["default"],e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.exitFullscreen=function(){var e=D["default"];return this.isFullscreen(!1),e.requestFullscreen?c["default"][e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=c["default"].documentElement.style.overflow,h.on(c["default"],"keydown",v.bind(this,this.fullWindowOnEscKey)),c["default"].documentElement.style.overflow="hidden",y.addElClass(c["default"].body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,h.off(c["default"],"keydown",this.fullWindowOnEscKey),c["default"].documentElement.style.overflow=this.docOrigOverflow,y.removeElClass(c["default"].body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var t=void 0,n=0,r=this.options_.techOrder;n<r.length;n++){var i=C["default"](r[n]),o=ee["default"].getTech(i);if(o||(o=u["default"].getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else S["default"].error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.prototype.selectSource=function(e){var t=this.options_.techOrder.map(C["default"]).map(function(e){return[e,ee["default"].getTech(e)||u["default"].getComponent(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(S["default"].error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),n=function(e,t,n){var r=void 0;return e.some(function(e){return t.some(function(t){return r=n(e,t),r?!0:void 0})}),r},r=void 0,i=function(e){return function(t,n){return e(n,t)}},o=function(e,t){var n=e[0],r=e[1];return r.canPlaySource(t)?{source:t,tech:n}:void 0};return r=this.options_.sourceOrder?n(e,t,i(o)):n(t,e,o),r||!1},t.prototype.src=function(e){if(void 0===e)return this.techGet_("src");var t=ee["default"].getTech(this.techName_);return t||(t=u["default"].getComponent(this.techName_)),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e)?this.sourceList_([e]):(this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},t.prototype.sourceList_=function(e){var t=this.selectSource(e);t?t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},t.prototype.load=function(){return this.techCall_("load"),this},t.prototype.reset=function(){return this.loadTech_(C["default"](this.options_.techOrder[0]),null),this.techCall_("reset"),this},t.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},t.prototype.currentType=function(){return this.currentType_||""},t.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),this.options_.preload=e,this):this.techGet_("preload")},t.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this):this.techGet_("autoplay",e)},t.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),this.options_.loop=e,this):this.techGet_("loop")},t.prototype.poster=function(e){return void 0===e?this.poster_:(e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange"),this)},t.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},t.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},t.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},t.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay.close(),this):(this.error_=e instanceof k["default"]?e:new k["default"](e),this.addClass("vjs-error"),S["default"].error("(CODE:"+this.error_.code+" "+k["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},t.prototype.ended=function(){return this.techGet_("ended")},t.prototype.seeking=function(){return this.techGet_("seeking")},t.prototype.seekable=function(){return this.techGet_("seekable")},t.prototype.reportUserActivity=function(){this.userActivity_=!0},t.prototype.userActive=function(e){return void 0!==e?(e=!!e,e!==this.userActive_&&(this.userActive_=e,e?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},t.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,n=void 0,r=v.bind(this,this.reportUserActivity),i=function(e){(e.screenX!==t||e.screenY!==n)&&(t=e.screenX,n=e.screenY,r())},o=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},a=function(){r(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",a),this.on("keydown",r),this.on("keyup",r);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},t.prototype.playbackRate=function(e){return void 0!==e?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},t.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):!!this.isAudio_},t.prototype.networkState=function(){return this.techGet_("networkState")},t.prototype.readyState=function(){return this.techGet_("readyState")},t.prototype.textTracks=function(){return this.tech_&&this.tech_.textTracks()},t.prototype.remoteTextTracks=function(){return this.tech_&&this.tech_.remoteTextTracks()},t.prototype.remoteTextTrackEls=function(){return this.tech_&&this.tech_.remoteTextTrackEls()},t.prototype.addTextTrack=function(e,t,n){return this.tech_&&this.tech_.addTextTrack(e,t,n)},t.prototype.addRemoteTextTrack=function(e){return this.tech_&&this.tech_.addRemoteTextTrack(e)},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.track,n=void 0===t?arguments[0]:t;this.tech_&&this.tech_.removeRemoteTextTrack(n)},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){return void 0===e?this.language_:(this.language_=(""+e).toLowerCase(),this)},t.prototype.languages=function(){return U["default"](t.prototype.options_.languages,this.languages_)},t.prototype.toJSON=function(){var e=U["default"](this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];r=U["default"](r),r.player=void 0,e.tracks[n]=r}return e},t.prototype.createModal=function(e,t){var n=this;t=t||{},t.content=e||"";var r=new J["default"](n,t);return n.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open()},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=y.getElAttributes(e),r=n["data-setup"];if(null!==r){var i=L["default"](r||"{}"),o=i[0],a=i[1];o&&S["default"].error(o),F["default"](n,a)}if(F["default"](t,n),e.hasChildNodes())for(var s=e.childNodes,u=0,l=s.length;l>u;u++){var c=s[u],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(y.getElAttributes(c)):"track"===d&&t.tracks.push(y.getElAttributes(c))}return t},t}(u["default"]));ne.players={};var re=f["default"].navigator;ne.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:c["default"].getElementsByTagName("html")[0].getAttribute("lang")||re.languages&&re.languages[0]||re.userLanguage||re.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},ne.prototype.handleLoadedMetaData_,ne.prototype.handleLoadedData_,ne.prototype.handleUserActive_,ne.prototype.handleUserInactive_,ne.prototype.handleTimeUpdate_,ne.prototype.handleTechEnded_,ne.prototype.handleVolumeChange_,ne.prototype.handleError_,ne.prototype.flexNotSupported_=function(){var e=c["default"].createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},u["default"].registerComponent("Player",ne),n["default"]=ne,t.exports=n["default"]},{"./big-play-button.js":63,"./component.js":67,"./control-bar/control-bar.js":68,"./error-display.js":100,"./fullscreen-api.js":103,"./loading-spinner.js":104,"./media-error.js":105,"./modal-dialog":109,"./poster-image.js":114,"./tech/html5.js":119,"./tech/loader.js":120,"./tech/tech.js":121,"./tracks/text-track-display.js":125,"./tracks/text-track-list-converter.js":127,"./tracks/text-track-settings.js":129,"./utils/browser.js":131,"./utils/buffer.js":132,"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/guid.js":138,"./utils/log.js":139,"./utils/merge-options.js":140,"./utils/stylesheet.js":141,"./utils/time-ranges.js":142,"./utils/to-title-case.js":143,"global/document":1,"global/window":2,"object.assign":45,"safe-json-parse/tuple":54}],111:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var i=e("./player.js"),o=r(i),a=function(e,t){o["default"].prototype[e]=t};n["default"]=a,t.exports=n["default"]},{"./player.js":110}],112:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../clickable-component.js"),u=i(s),l=e("../component.js"),c=i(l),d=e("./popup.js"),f=(i(d),e("../utils/dom.js")),p=(r(f),e("../utils/fn.js")),h=(r(p),e("../utils/to-title-case.js")),g=(i(h),function(e){function t(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,t),e.call(this,n,r),this.update()}return a(t,e),t.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createPopup=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t}(u["default"]));c["default"].registerComponent("PopupButton",g),n["default"]=g,t.exports=n["default"]},{"../clickable-component.js":65,"../component.js":67,"../utils/dom.js":134,"../utils/fn.js":136,"../utils/to-title-case.js":143,"./popup.js":113}],113:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../component.js"),u=i(s),l=e("../utils/dom.js"),c=r(l),d=e("../utils/fn.js"),f=r(d),p=e("../utils/events.js"),h=r(p),g=function(e){function t(){o(this,t),e.apply(this,arguments)}return a(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",f.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=c.createEl(t,{className:"vjs-menu-content"});var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),h.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t}(u["default"]);u["default"].registerComponent("Popup",g),n["default"]=g,t.exports=n["default"]},{"../component.js":67,"../utils/dom.js":134,"../utils/events.js":135,"../utils/fn.js":136}],114:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./clickable-component.js"),u=i(s),l=e("./component.js"),c=i(l),d=e("./utils/fn.js"),f=r(d),p=e("./utils/dom.js"),h=r(p),g=e("./utils/browser.js"),y=r(g),m=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.update(),n.on("posterchange",f.bind(this,this.update))}return a(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=h.createEl("div",{className:"vjs-poster",tabIndex:-1});return y.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=h.createEl("img"),e.appendChild(this.fallbackImg_)),e},t.prototype.update=function(){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},t.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},t.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t}(u["default"]);c["default"].registerComponent("PosterImage",m),n["default"]=m,t.exports=n["default"]},{"./clickable-component.js":65,"./component.js":67,"./utils/browser.js":131,"./utils/dom.js":134,"./utils/fn.js":136}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}n.__esModule=!0;var o=e("./utils/events.js"),a=i(o),s=e("global/document"),u=r(s),l=e("global/window"),c=r(l),d=!1,f=void 0,p=function(){var e=u["default"].getElementsByTagName("video"),t=u["default"].getElementsByTagName("audio"),n=[];if(e&&e.length>0)for(var r=0,i=e.length;i>r;r++)n.push(e[r]);if(t&&t.length>0)for(var r=0,i=t.length;i>r;r++)n.push(t[r]);if(n&&n.length>0)for(var r=0,i=n.length;i>r;r++){var o=n[r];if(!o||!o.getAttribute){h(1);break}if(void 0===o.player){var a=o.getAttribute("data-setup");null!==a&&f(o)}}else d||h(1)},h=function(e,t){t&&(f=t),setTimeout(p,e)};"complete"===u["default"].readyState?d=!0:a.one(c["default"],"load",function(){d=!0});var g=function(){return d};n.autoSetup=p,n.autoSetupTimeout=h,n.hasLoaded=g},{"./utils/events.js":135,"global/document":1,"global/window":2}],116:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../component.js"),u=i(s),l=e("../utils/dom.js"),c=r(l),d=e("object.assign"),f=i(d),p=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(n,"controlsvisible",this.update),this.on(n,this.playerEvent,this.update)}return a(t,e),t.prototype.createEl=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return n.className=n.className+" vjs-slider",n=f["default"]({tabIndex:0},n),r=f["default"]({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),c.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;c.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!==e||0>e||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%";this.vertical()?t.el().style.height=n:t.el().style.width=n}}},t.prototype.calculateDistance=function(e){var t=c.getPointerPosition(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):(38===e.which||39===e.which)&&(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal"),this)},t}(u["default"]);u["default"].registerComponent("Slider",p),n["default"]=p,t.exports=n["default"]},{"../component.js":67,"../utils/dom.js":134,"object.assign":45}],117:[function(e,t,n){"use strict";function r(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?!\w+=)/),r=void 0;return-1!==n?r=n+1:(n=r=e.lastIndexOf("/")+1,0===n&&(n=r=e.length)),t.connection=e.substring(0,n),t.stream=e.substring(r,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t){var n=e.rtmpSourceHandler.canPlayType(t.type);return n?n:e.isStreamingSrc(t.src)?"maybe":""},e.rtmpSourceHandler.handleSource=function(t,n){var r=e.streamToParts(t.src);n.setRtmpConnection(r.connection),n.setRtmpStream(r.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e}n.__esModule=!0,n["default"]=r,t.exports=n["default"]},{}],118:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.charAt(0).toUpperCase()+e.slice(1);C["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function u(e){C[e]=function(){return this.el_.vjs_getProperty(e)}}n.__esModule=!0;for(var l=e("./tech"),c=i(l),d=e("../utils/dom.js"),f=r(d),p=e("../utils/url.js"),h=r(p),g=e("../utils/time-ranges.js"),y=e("./flash-rtmp"),m=i(y),v=e("../component"),_=i(v),b=e("global/window"),T=i(b),E=e("object.assign"),w=i(E),S=T["default"].navigator,j=function(e){function t(n,r){o(this,t),e.call(this,n,r),n.source&&this.ready(function(){this.setSource(n.source)},!0),n.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(n.startTime)},!0),T["default"].videojs=T["default"].videojs||{},T["default"].videojs.Flash=T["default"].videojs.Flash||{},T["default"].videojs.Flash.onReady=t.onReady,T["default"].videojs.Flash.onEvent=t.onEvent,T["default"].videojs.Flash.onError=t.onError,this.on("seeked",function(){this.lastSeekTarget_=void 0})}return a(t,e),t.prototype.createEl=function(){var e=this.options_;e.swf||(e.swf="//vjs.zencdn.net/swf/5.0.1/video-js.swf");var n=e.techId,r=w["default"]({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),i=w["default"]({wmode:"opaque",bgcolor:"#000000"},e.params),o=w["default"]({id:n,name:n,"class":"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,r,i,o),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){if(e=h.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()){var t=this;this.setTimeout(function(){t.play()},0)}},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var n=this.seekable();n.length&&(t=t>n.start(0)?t:n.start(0),t=t<n.end(n.length-1)?t:n.end(n.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?g.createTimeRange():g.createTimeRange(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?g.createTimeRange():g.createTimeRange(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t}(c["default"]),C=j.prototype,M="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),O="networkState,readyState,initialTime,duration,startOffsetTime,paused,ended,videoTracks,audioTracks,videoWidth,videoHeight".split(","),x=0;x<M.length;x++)u(M[x]),s(M[x]);for(var x=0;x<O.length;x++)u(O[x]);j.isSupported=function(){return j.version()[0]>=10},c["default"].withSourceHandlers(j),j.nativeSourceHandler={},j.nativeSourceHandler.canPlayType=function(e){return e in j.formats?"maybe":""},j.nativeSourceHandler.canHandleSource=function(e){function t(e){var t=h.getFileExtension(e);return t?"video/"+t:""}var n;return n=e.type?e.type.replace(/;.*/,"").toLowerCase():t(e.src),j.nativeSourceHandler.canPlayType(n)},j.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},j.nativeSourceHandler.dispose=function(){},j.registerSourceHandler(j.nativeSourceHandler),j.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},j.onReady=function(e){var t=f.getEl(e),n=t&&t.tech;n&&n.el()&&j.checkReady(n)},j.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){j.checkReady(e)},50))},j.onEvent=function(e,t){var n=f.getEl(e).tech;n.trigger(t)},j.onError=function(e,t){var n=f.getEl(e).tech;return"srcnotfound"===t?n.error(4):void n.error("FLASH: "+t)},j.version=function(){var e="0,0,0";try{e=new T["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{S.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(S.plugins["Shockwave Flash 2.0"]||S.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(n){}}return e.split(",")},j.embed=function(e,t,n,r){var i=j.getEmbedCode(e,t,n,r),o=f.createEl("div",{innerHTML:i}).childNodes[0];return o},j.getEmbedCode=function(e,t,n,r){var i='<object type="application/x-shockwave-flash" ',o="",a="",s="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){o+=e+"="+t[e]+"&amp;"}),n=w["default"]({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){a+='<param name="'+e+'" value="'+n[e]+'" />'}),r=w["default"]({data:e,width:"100%",height:"100%"},r),Object.getOwnPropertyNames(r).forEach(function(e){s+=e+'="'+r[e]+'" '}),""+i+s+">"+a+"</object>"},m["default"](j),_["default"].registerComponent("Flash",j),c["default"].registerTech("Flash",j),n["default"]=j,t.exports=n["default"]},{"../component":67,"../utils/dom.js":134,"../utils/time-ranges.js":142,"../utils/url.js":144,"./flash-rtmp":117,"./tech":121,"global/window":2,"object.assign":45}],119:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./tech.js"),u=i(s),l=e("../component"),c=i(l),d=e("../utils/dom.js"),f=r(d),p=e("../utils/url.js"),h=r(p),g=e("../utils/fn.js"),y=r(g),m=e("../utils/log.js"),v=i(m),_=e("../utils/browser.js"),b=r(_),T=e("global/document"),E=i(T),w=e("global/window"),S=i(w),j=e("object.assign"),C=i(j),M=e("../utils/merge-options.js"),O=i(M),x=function(e){function t(n,r){o(this,t),e.call(this,n,r);var i=n.source;if(i&&(this.el_.currentSrc!==i.src||n.tag&&3===n.tag.initNetworkState_)?this.setSource(i):this.handleLateInit_(this.el_),this.el_.hasChildNodes()){for(var a=this.el_.childNodes,s=a.length,u=[];s--;){var l=a[s],c=l.nodeName.toLowerCase();"track"===c&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack_(l.track)):u.push(l))}for(var d=0;d<u.length;d++)this.el_.removeChild(u[d])}this.featuresNativeTextTracks&&(this.handleTextTrackChange_=y.bind(this,this.handleTextTrackChange),this.handleTextTrackAdd_=y.bind(this,this.handleTextTrackAdd),this.handleTextTrackRemove_=y.bind(this,this.handleTextTrackRemove),this.proxyNativeTextTracks_()),(b.TOUCH_ENABLED&&n.nativeControlsForTouch===!0||b.IS_IPHONE||b.IS_NATIVE_ANDROID)&&this.setControls(!0),this.triggerReady()}return a(t,e),t.prototype.dispose=function(){var n=this.el().textTracks,r=this.textTracks();n&&n.removeEventListener&&(n.removeEventListener("change",this.handleTextTrackChange_),n.removeEventListener("addtrack",this.handleTextTrackAdd_),n.removeEventListener("removetrack",this.handleTextTrackRemove_));for(var i=r.length;i--;)r.removeTrack_(r[i]);t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=this.options_.tag;
if(!e||this.movingMediaElementInDOM===!1)if(e){var n=e.cloneNode(!0);e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=E["default"].createElement("video");var r=this.options_.tag&&f.getElAttributes(this.options_.tag),i=O["default"]({},r);b.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete i.controls,f.setElAttributes(e,C["default"](i,{id:this.options_.techId,"class":"vjs-tech"}))}for(var o=["autoplay","preload","loop","muted"],a=o.length-1;a>=0;a--){var s=o[a],u={};"undefined"!=typeof this.options_[s]&&(u[s]=this.options_[s]),f.setElAttributes(e,u)}return e},t.prototype.handleLateInit_=function(e){var t=this;if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var n=function(){var e=!1,n=function(){e=!0};t.on("loadstart",n);var r=function(){e||this.trigger("loadstart")};return t.on("loadedmetadata",r),t.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),e||this.trigger("loadstart")}),{v:void 0}}();if("object"==typeof n)return n.v}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},t.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_))}},t.prototype.handleTextTrackChange=function(){var e=this.textTracks();this.textTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},t.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},t.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},t.prototype.play=function(){this.el_.play()},t.prototype.pause=function(){this.el_.pause()},t.prototype.paused=function(){return this.el_.paused},t.prototype.currentTime=function(){return this.el_.currentTime},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(t){v["default"](t,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){return this.el_.duration||0},t.prototype.buffered=function(){return this.el_.buffered},t.prototype.volume=function(){return this.el_.volume},t.prototype.setVolume=function(e){this.el_.volume=e},t.prototype.muted=function(){return this.el_.muted},t.prototype.setMuted=function(e){this.el_.muted=e},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=S["default"].navigator.userAgent;if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;"webkitDisplayingFullscreen"in e&&this.one("webkitbeginfullscreen",function(){this.one("webkitendfullscreen",function(){this.trigger("fullscreenchange",{isFullscreen:!1})}),this.trigger("fullscreenchange",{isFullscreen:!0})}),e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){return void 0===e?this.el_.src:void this.setSrc(e)},t.prototype.setSrc=function(e){this.el_.src=e},t.prototype.load=function(){this.el_.load()},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.poster=function(){return this.el_.poster},t.prototype.setPoster=function(e){this.el_.poster=e},t.prototype.preload=function(){return this.el_.preload},t.prototype.setPreload=function(e){this.el_.preload=e},t.prototype.autoplay=function(){return this.el_.autoplay},t.prototype.setAutoplay=function(e){this.el_.autoplay=e},t.prototype.controls=function(){return this.el_.controls},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.loop=function(){return this.el_.loop},t.prototype.setLoop=function(e){this.el_.loop=e},t.prototype.error=function(){return this.el_.error},t.prototype.seeking=function(){return this.el_.seeking},t.prototype.seekable=function(){return this.el_.seekable},t.prototype.ended=function(){return this.el_.ended},t.prototype.defaultMuted=function(){return this.el_.defaultMuted},t.prototype.playbackRate=function(){return this.el_.playbackRate},t.prototype.played=function(){return this.el_.played},t.prototype.setPlaybackRate=function(e){this.el_.playbackRate=e},t.prototype.networkState=function(){return this.el_.networkState},t.prototype.readyState=function(){return this.el_.readyState},t.prototype.videoWidth=function(){return this.el_.videoWidth},t.prototype.videoHeight=function(){return this.el_.videoHeight},t.prototype.textTracks=function(){return e.prototype.textTracks.call(this)},t.prototype.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},t.prototype.addRemoteTextTrack=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.featuresNativeTextTracks)return e.prototype.addRemoteTextTrack.call(this,t);var n=E["default"].createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t["default"]&&(n["default"]=t["default"]),t.id&&(n.id=t.id),t.src&&(n.src=t.src),this.el().appendChild(n),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack_(n.track),n},t.prototype.removeRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.removeRemoteTextTrack.call(this,t);var n=void 0,r=void 0,i=this.remoteTextTrackEls().getTrackElementByTrack_(t);for(this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack_(t),n=this.$$("track"),r=n.length;r--;)(t===n[r]||t===n[r].track)&&this.el().removeChild(n[r])},t}(u["default"]);x.TEST_VID=E["default"].createElement("video");var A=E["default"].createElement("track");A.kind="captions",A.srclang="en",A.label="English",x.TEST_VID.appendChild(A),x.isSupported=function(){try{x.TEST_VID.volume=.5}catch(e){return!1}return!!x.TEST_VID.canPlayType},u["default"].withSourceHandlers(x),x.nativeSourceHandler={},x.nativeSourceHandler.canPlayType=function(e){try{return x.TEST_VID.canPlayType(e)}catch(t){return""}},x.nativeSourceHandler.canHandleSource=function(e){var t;return e.type?x.nativeSourceHandler.canPlayType(e.type):e.src?(t=h.getFileExtension(e.src),x.nativeSourceHandler.canPlayType("video/"+t)):""},x.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},x.nativeSourceHandler.dispose=function(){},x.registerSourceHandler(x.nativeSourceHandler),x.canControlVolume=function(){var e=x.TEST_VID.volume;return x.TEST_VID.volume=e/2+.1,e!==x.TEST_VID.volume},x.canControlPlaybackRate=function(){if(b.IS_ANDROID&&b.IS_CHROME)return!1;var e=x.TEST_VID.playbackRate;return x.TEST_VID.playbackRate=e/2+.1,e!==x.TEST_VID.playbackRate},x.supportsNativeTextTracks=function(){var e;return e=!!x.TEST_VID.textTracks,e&&x.TEST_VID.textTracks.length>0&&(e="number"!=typeof x.TEST_VID.textTracks[0].mode),e&&b.IS_FIREFOX&&(e=!1),!e||"onremovetrack"in x.TEST_VID.textTracks||(e=!1),e},x.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],x.prototype.featuresVolumeControl=x.canControlVolume(),x.prototype.featuresPlaybackRate=x.canControlPlaybackRate(),x.prototype.movingMediaElementInDOM=!b.IS_IOS,x.prototype.featuresFullscreenResize=!0,x.prototype.featuresProgressEvents=!0,x.prototype.featuresNativeTextTracks=x.supportsNativeTextTracks();var I=void 0,D=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,P=/^video\/mp4/i;x.patchCanPlayType=function(){b.ANDROID_VERSION>=4&&(I||(I=x.TEST_VID.constructor.prototype.canPlayType),x.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&D.test(e)?"maybe":I.call(this,e)}),b.IS_OLD_ANDROID&&(I||(I=x.TEST_VID.constructor.prototype.canPlayType),x.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&P.test(e)?"maybe":I.call(this,e)})},x.unpatchCanPlayType=function(){var e=x.TEST_VID.constructor.prototype.canPlayType;return x.TEST_VID.constructor.prototype.canPlayType=I,I=null,e},x.patchCanPlayType(),x.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(t){}}()}},x.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(t){}}()}},c["default"].registerComponent("Html5",x),u["default"].registerTech("Html5",x),n["default"]=x,t.exports=n["default"]},{"../component":67,"../utils/browser.js":131,"../utils/dom.js":134,"../utils/fn.js":136,"../utils/log.js":139,"../utils/merge-options.js":140,"../utils/url.js":144,"./tech.js":121,"global/document":1,"global/window":2,"object.assign":45}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("../component.js"),s=r(a),u=e("./tech.js"),l=r(u),c=e("global/window"),d=(r(c),e("../utils/to-title-case.js")),f=r(d),p=function(e){function t(n,r,o){if(i(this,t),e.call(this,n,r,o),r.playerOptions.sources&&0!==r.playerOptions.sources.length)n.src(r.playerOptions.sources);else for(var a=0,u=r.playerOptions.techOrder;a<u.length;a++){var c=f["default"](u[a]),d=l["default"].getTech(c);if(c||(d=s["default"].getComponent(c)),d&&d.isSupported()){n.loadTech_(c);break}}}return o(t,e),t}(s["default"]);s["default"].registerComponent("MediaLoader",p),n["default"]=p,t.exports=n["default"]},{"../component.js":67,"../utils/to-title-case.js":143,"./tech.js":121,"global/window":2}],121:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../component"),u=i(s),l=e("../tracks/html-track-element"),c=i(l),d=e("../tracks/html-track-element-list"),f=i(d),p=e("../utils/merge-options.js"),h=i(p),g=e("../tracks/text-track"),y=i(g),m=e("../tracks/text-track-list"),v=i(m),_=e("../utils/fn.js"),b=r(_),T=e("../utils/log.js"),E=i(T),w=e("../utils/time-ranges.js"),S=e("../utils/buffer.js"),j=e("../media-error.js"),C=i(j),M=e("global/window"),O=i(M),x=e("global/document"),A=i(x),I=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];o(this,t),n.reportTouchActivity=!1,e.call(this,null,n,r),this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),this.textTracks_=n.textTracks,this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),(n.nativeCaptions===!1||n.nativeTextTracks===!1)&&(this.featuresNativeTextTracks=!1),this.featuresNativeTextTracks||this.on("ready",this.emulateTextTracks),this.initTextTrackListeners(),this.emitTapEvents()}return a(t,e),t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(b.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},t.prototype.onDurationChange=function(){this.duration_=this.duration()},t.prototype.buffered=function(){return w.createTimeRange(0,0)},t.prototype.bufferedPercent=function(){return S.bufferedPercent(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){var t=this.textTracks();if(t)for(var n=t.length;n--;)this.removeRemoteTextTrack(t[n]);this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.reset=function(){},t.prototype.error=function(e){return void 0!==e&&(this.error_=e instanceof C["default"]?e:new C["default"](e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?w.createTimeRange(0,0):w.createTimeRange()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTextTrackListeners=function(){var e=b.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",b.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks();if(t){O["default"].WebVTT||null==this.el().parentNode||!function(){var t=A["default"].createElement("script");t.src=e.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},e.on("dispose",function(){t.onload=null,t.onerror=null}),e.el().parentNode.appendChild(t),O["default"].WebVTT=!0}();var n=function(){return e.trigger("texttrackchange")},r=function(){n();for(var e=0;e<t.length;e++){var r=t[e];r.removeEventListener("cuechange",n),"showing"===r.mode&&r.addEventListener("cuechange",n)}};r(),t.addEventListener("change",r),this.on("dispose",function(){t.removeEventListener("change",r)})}},t.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new v["default"],this.textTracks_},t.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new v["default"],this.remoteTextTracks_},t.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new f["default"],this.remoteTextTrackEls_},t.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return D(this,e,t,n)},t.prototype.addRemoteTextTrack=function(e){var t=h["default"](e,{tech:this}),n=new c["default"](t);return this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack_(n.track),this.textTracks().addTrack_(n.track),n},t.prototype.removeRemoteTextTrack=function(e){this.textTracks().removeTrack_(e);var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e)},t.prototype.setPoster=function(){},t.prototype.canPlayType=function(){return""},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");return t.techs_[e]=n,n},t.getTech=function(e){return t.techs_&&t.techs_[e]?t.techs_[e]:O["default"]&&O["default"].videojs&&O["default"].videojs[e]?(E["default"].warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),O["default"].videojs[e]):void 0},t}(u["default"]);I.prototype.textTracks_;var D=function(e,t,n,r){var i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],o=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var a=new y["default"](i);return o.addTrack_(a),a};I.prototype.featuresVolumeControl=!0,I.prototype.featuresFullscreenResize=!1,I.prototype.featuresPlaybackRate=!1,I.prototype.featuresProgressEvents=!1,I.prototype.featuresTimeupdateEvents=!1,I.prototype.featuresNativeTextTracks=!1,I.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n=e.sourceHandlers||[],r=void 0,i=0;i<n.length;i++)if(r=n[i].canPlayType(t))return r;return""},e.selectSourceHandler=function(t){for(var n=e.sourceHandlers||[],r=void 0,i=0;i<n.length;i++)if(r=n[i].canHandleSource(t))return n[i];return null},e.canPlaySource=function(t){var n=e.selectSourceHandler(t);return n?n.canHandleSource(t):""};var t=["seekable","duration"];t.forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t);return n||(e.nativeSourceHandler?n=e.nativeSourceHandler:E["default"].error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_=t,this.sourceHandler_=n.handleSource(t,this),this.on("dispose",this.disposeSourceHandler),this},e.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&this.sourceHandler_.dispose()}},u["default"].registerComponent("Tech",I),u["default"].registerComponent("MediaTechController",I),I.registerTech("Tech",I),n["default"]=I,t.exports=n["default"]},{"../component":67,"../media-error.js":105,"../tracks/html-track-element":123,"../tracks/html-track-element-list":122,"../tracks/text-track":130,"../tracks/text-track-list":128,"../utils/buffer.js":132,"../utils/fn.js":136,"../utils/log.js":139,"../utils/merge-options.js":140,"../utils/time-ranges.js":142,"global/document":1,"global/window":2}],122:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var a=e("../utils/browser.js"),s=i(a),u=e("global/document"),l=r(u),c=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,e);var n=this;if(s.IS_IE8){n=l["default"].createElement("custom");for(var r in e.prototype)"constructor"!==r&&(n[r]=e.prototype[r])}n.trackElements_=[],Object.defineProperty(n,"length",{get:function(){return this.trackElements_.length}});for(var i=0,a=t.length;a>i;i++)n.addTrackElement_(t[i]);return s.IS_IE8?n:void 0}return e.prototype.addTrackElement_=function(e){this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,r=this.trackElements_.length;r>n;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;n>t;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}();n["default"]=c,t.exports=n["default"]},{"../utils/browser.js":131,"global/document":1}],123:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../utils/browser.js"),u=i(s),l=e("global/document"),c=r(l),d=e("../event-target"),f=r(d),p=e("../tracks/text-track"),h=r(p),g=0,y=1,m=2,v=3,_=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,t),e.call(this);var r=void 0,i=this;if(u.IS_IE8){i=c["default"].createElement("custom");for(var a in t.prototype)"constructor"!==a&&(i[a]=t.prototype[a])}var s=new h["default"](n);return i.kind=s.kind,i.src=s.src,i.srclang=s.language,i.label=s.label,i["default"]=s["default"],Object.defineProperty(i,"readyState",{get:function(){return r}}),Object.defineProperty(i,"track",{get:function(){return s}}),r=g,s.addEventListener("loadeddata",function(){r=m,i.trigger({type:"load",target:i})}),u.IS_IE8?i:void 0}return a(t,e),t}(f["default"]);_.prototype.allowedEvents_={load:"load"},_.NONE=g,_.LOADING=y,_.LOADED=m,_.ERROR=v,n["default"]=_,t.exports=n["default"]},{"../event-target":101,"../tracks/text-track":130,"../utils/browser.js":131,"global/document":1}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var a=e("../utils/browser.js"),s=i(a),u=e("global/document"),l=r(u),c=function(){function e(t){o(this,e);var n=this;if(s.IS_IE8){n=l["default"].createElement("custom");for(var r in e.prototype)"constructor"!==r&&(n[r]=e.prototype[r])}return e.prototype.setCues_.call(n,t),Object.defineProperty(n,"length",{get:function(){return this.length_}}),s.IS_IE8?n:void 0}return e.prototype.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(r>t)for(n=t;r>n;n++)i.call(this,n)},e.prototype.getCueById=function(e){for(var t=null,n=0,r=this.length;r>n;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}();n["default"]=c,t.exports=n["default"]},{"../utils/browser.js":131,"global/document":1}],125:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function u(e,t,n){try{e.style[t]=n}catch(r){}}n.__esModule=!0;var l=e("../component"),c=i(l),d=e("../menu/menu.js"),f=(i(d),e("../menu/menu-item.js")),p=(i(f),e("../menu/menu-button.js")),h=(i(p),e("../utils/fn.js")),g=r(h),y=e("global/document"),m=(i(y),e("global/window")),v=i(m),_="#222",b="#ccc",T={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},E=function(e){function t(n,r,i){o(this,t),e.call(this,n,r,i),n.on("loadstart",g.bind(this,this.toggleDisplay)),n.on("texttrackchange",g.bind(this,this.updateDisplay)),n.ready(g.bind(this,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)return void this.hide();n.on("fullscreenchange",g.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++){var r=e[t];this.player_.addRemoteTextTrack(r)}var i={captions:1,subtitles:1},o=this.player_.textTracks(),a=void 0,s=void 0;if(o){for(var t=0;t<o.length;t++){var r=o[t];r["default"]&&("descriptions"!==r.kind||a?r.kind in i&&!s&&(s=r):a=r)}s?s.mode="showing":a&&(a.mode="showing")}}))}return a(t,e),t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"assertive","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof v["default"].WebVTT&&v["default"].WebVTT.processCues(v["default"],[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();if(this.clearDisplay(),e){for(var t=null,n=null,r=e.length;r--;){var i=e[r];"showing"===i.mode&&("descriptions"===i.kind?t=i:n=i)}n?this.updateForTrack(n):t&&this.updateForTrack(t)}},t.prototype.updateForTrack=function(e){if("function"==typeof v["default"].WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),n=[],r=0;r<e.activeCues.length;r++)n.push(e.activeCues[r]);v["default"].WebVTT.processCues(v["default"],n,this.el_);for(var i=n.length;i--;){var o=n[i];if(o){var a=o.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&u(a.firstChild,"color",s(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&u(a.firstChild,"backgroundColor",s(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?u(a,"backgroundColor",s(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+_+", 2px 2px 4px "+_+", 2px 2px 5px "+_:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+_+", 2px 2px "+_+", 3px 3px "+_:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+b+", 0 1px "+b+", -1px -1px "+_+", 0 -1px "+_:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+_+", 0 0 4px "+_+", 0 0 4px "+_+", 0 0 4px "+_)),t.fontPercent&&1!==t.fontPercent){var l=v["default"].parseFloat(a.style.fontSize);a.style.fontSize=l*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=T[t.fontFamily])}}}},t}(c["default"]);c["default"].registerComponent("TextTrackDisplay",E),n["default"]=E,t.exports=n["default"]},{"../component":67,"../menu/menu-button.js":106,"../menu/menu-item.js":107,"../menu/menu.js":108,"../utils/fn.js":136,"global/document":1,"global/window":2}],126:[function(e,t,n){"use strict";n.__esModule=!0;var r={disabled:"disabled",hidden:"hidden",showing:"showing"},i={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};n.TextTrackMode=r,n.TextTrackKind=i},{}],127:[function(e,t,n){"use strict";n.__esModule=!0;var r=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t},i=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track}),i=Array.prototype.map.call(t,function(e){var t=r(e.track);return e.src&&(t.src=e.src),t});return i.concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(r))},o=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()};n["default"]={textTracksToJson:i,jsonToTextTracks:o,trackToJson_:r},t.exports=n["default"]},{}],128:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("../event-target"),u=i(s),l=e("../utils/fn.js"),c=r(l),d=e("../utils/browser.js"),f=r(d),p=e("global/document"),h=i(p),g=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,t),e.call(this);var r=this;if(f.IS_IE8){r=h["default"].createElement("custom");for(var i in t.prototype)"constructor"!==i&&(r[i]=t.prototype[i])}r.tracks_=[],Object.defineProperty(r,"length",{get:function(){return this.tracks_.length}});for(var a=0;a<n.length;a++)r.addTrack_(n[a]);return f.IS_IE8?r:void 0}return a(t,e),t.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),e.addEventListener("modechange",c.bind(this,function(){this.trigger("change")})),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack_=function(e){for(var t=void 0,n=0,r=this.length;r>n;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,n=0,r=this.length;r>n;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(u["default"]);g.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var y in g.prototype.allowedEvents_)g.prototype["on"+y]=null;n["default"]=g,t.exports=n["default"]},{"../event-target":101,"../utils/browser.js":131,"../utils/fn.js":136,"global/document":1}],129:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);
return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=void 0;return e.selectedOptions?t=e.selectedOptions[0]:e.options&&(t=e.options[e.options.selectedIndex]),t.value}function u(e,t){if(t){var n=void 0;for(n=0;n<e.options.length;n++){var r=e.options[n];if(r.value===t)break}e.selectedIndex=n}}function l(){var e='<div class="vjs-tracksettings">\n      <div class="vjs-tracksettings-colors">\n        <div class="vjs-fg-color vjs-tracksetting">\n            <label class="vjs-label">Foreground</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-text-opacity vjs-opacity">\n              <select>\n                <option value="">---</option>\n                <option value="1">Opaque</option>\n                <option value="0.5">Semi-Opaque</option>\n              </select>\n            </span>\n        </div> <!-- vjs-fg-color -->\n        <div class="vjs-bg-color vjs-tracksetting">\n            <label class="vjs-label">Background</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-bg-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-bg-color -->\n        <div class="window-color vjs-tracksetting">\n            <label class="vjs-label">Window</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-window-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-window-color -->\n      </div> <!-- vjs-tracksettings -->\n      <div class="vjs-tracksettings-font">\n        <div class="vjs-font-percent vjs-tracksetting">\n          <label class="vjs-label">Font Size</label>\n          <select>\n            <option value="0.50">50%</option>\n            <option value="0.75">75%</option>\n            <option value="1.00" selected>100%</option>\n            <option value="1.25">125%</option>\n            <option value="1.50">150%</option>\n            <option value="1.75">175%</option>\n            <option value="2.00">200%</option>\n            <option value="3.00">300%</option>\n            <option value="4.00">400%</option>\n          </select>\n        </div> <!-- vjs-font-percent -->\n        <div class="vjs-edge-style vjs-tracksetting">\n          <label class="vjs-label">Text Edge Style</label>\n          <select>\n            <option value="none">None</option>\n            <option value="raised">Raised</option>\n            <option value="depressed">Depressed</option>\n            <option value="uniform">Uniform</option>\n            <option value="dropshadow">Dropshadow</option>\n          </select>\n        </div> <!-- vjs-edge-style -->\n        <div class="vjs-font-family vjs-tracksetting">\n          <label class="vjs-label">Font Family</label>\n          <select>\n            <option value="">Default</option>\n            <option value="monospaceSerif">Monospace Serif</option>\n            <option value="proportionalSerif">Proportional Serif</option>\n            <option value="monospaceSansSerif">Monospace Sans-Serif</option>\n            <option value="proportionalSansSerif">Proportional Sans-Serif</option>\n            <option value="casual">Casual</option>\n            <option value="script">Script</option>\n            <option value="small-caps">Small Caps</option>\n          </select>\n        </div> <!-- vjs-font-family -->\n      </div>\n    </div>\n    <div class="vjs-tracksettings-controls">\n      <button class="vjs-default-button">Defaults</button>\n      <button class="vjs-done-button">Done</button>\n    </div>';return e}n.__esModule=!0;var c=e("../component"),d=i(c),f=e("../utils/events.js"),p=r(f),h=e("../utils/fn.js"),g=r(h),y=e("../utils/log.js"),m=i(y),v=e("safe-json-parse/tuple"),_=i(v),b=e("global/window"),T=i(b),E=function(e){function t(n,r){o(this,t),e.call(this,n,r),this.hide(),void 0===r.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),p.on(this.$(".vjs-done-button"),"click",g.bind(this,function(){this.saveSettings(),this.hide()})),p.on(this.$(".vjs-default-button"),"click",g.bind(this,function(){this.$(".vjs-fg-color > select").selectedIndex=0,this.$(".vjs-bg-color > select").selectedIndex=0,this.$(".window-color > select").selectedIndex=0,this.$(".vjs-text-opacity > select").selectedIndex=0,this.$(".vjs-bg-opacity > select").selectedIndex=0,this.$(".vjs-window-opacity > select").selectedIndex=0,this.$(".vjs-edge-style select").selectedIndex=0,this.$(".vjs-font-family select").selectedIndex=0,this.$(".vjs-font-percent select").selectedIndex=2,this.updateDisplay()})),p.on(this.$(".vjs-fg-color > select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".vjs-bg-color > select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".window-color > select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".vjs-text-opacity > select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".vjs-bg-opacity > select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".vjs-window-opacity > select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".vjs-font-percent select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".vjs-edge-style select"),"change",g.bind(this,this.updateDisplay)),p.on(this.$(".vjs-font-family select"),"change",g.bind(this,this.updateDisplay)),this.options_.persistTextTrackSettings&&this.restoreSettings()}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:l()})},t.prototype.getValues=function(){var e=s(this.$(".vjs-edge-style select")),t=s(this.$(".vjs-font-family select")),n=s(this.$(".vjs-fg-color > select")),r=s(this.$(".vjs-text-opacity > select")),i=s(this.$(".vjs-bg-color > select")),o=s(this.$(".vjs-bg-opacity > select")),a=s(this.$(".window-color > select")),u=s(this.$(".vjs-window-opacity > select")),l=T["default"].parseFloat(s(this.$(".vjs-font-percent > select"))),c={backgroundOpacity:o,textOpacity:r,windowOpacity:u,edgeStyle:e,fontFamily:t,color:n,backgroundColor:i,windowColor:a,fontPercent:l};for(var d in c)(""===c[d]||"none"===c[d]||"fontPercent"===d&&1===c[d])&&delete c[d];return c},t.prototype.setValues=function(e){u(this.$(".vjs-edge-style select"),e.edgeStyle),u(this.$(".vjs-font-family select"),e.fontFamily),u(this.$(".vjs-fg-color > select"),e.color),u(this.$(".vjs-text-opacity > select"),e.textOpacity),u(this.$(".vjs-bg-color > select"),e.backgroundColor),u(this.$(".vjs-bg-opacity > select"),e.backgroundOpacity),u(this.$(".window-color > select"),e.windowColor),u(this.$(".vjs-window-opacity > select"),e.windowOpacity);var t=e.fontPercent;t&&(t=t.toFixed(2)),u(this.$(".vjs-font-percent > select"),t)},t.prototype.restoreSettings=function(){var e=void 0,t=void 0;try{var n=_["default"](T["default"].localStorage.getItem("vjs-text-track-settings"));e=n[0],t=n[1],e&&m["default"].error(e)}catch(r){m["default"].warn(r)}t&&this.setValues(t)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.getOwnPropertyNames(e).length>0?T["default"].localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):T["default"].localStorage.removeItem("vjs-text-track-settings")}catch(t){m["default"].warn(t)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t}(d["default"]);d["default"].registerComponent("TextTrackSettings",E),n["default"]=E,t.exports=n["default"]},{"../component":67,"../utils/events.js":135,"../utils/fn.js":136,"../utils/log.js":139,"global/window":2,"safe-json-parse/tuple":54}],130:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var s=e("./text-track-cue-list"),u=i(s),l=e("../utils/fn.js"),c=r(l),d=e("../utils/guid.js"),f=r(d),p=e("../utils/browser.js"),h=r(p),g=e("./text-track-enums"),y=r(g),m=e("../utils/log.js"),v=i(m),_=e("../event-target"),b=i(_),T=e("global/document"),E=i(T),w=e("global/window"),S=i(w),j=e("../utils/url.js"),C=e("xhr"),M=i(C),O=function(e,t){var n=new S["default"].WebVTT.Parser(S["default"],S["default"].vttjs,S["default"].WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(console.groupCollapsed,r.forEach(function(e){return v["default"].error(e)}),console.groupEnd),n.flush()},x=function(e,t){var n={uri:e},r=j.isCrossOrigin(e);r&&(n.cors=r),M["default"](n,c.bind(this,function(e,n,r){return e?v["default"].error(e,n):(t.loaded_=!0,void("function"!=typeof S["default"].WebVTT?t.tech_&&!function(){var e=function(){return O(r,t)};t.tech_.on("vttjsloaded",e),t.tech_.on("vttjserror",function(){v["default"].error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",e)})}():O(r,t)))}))},A=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,t),e.call(this),!n.tech)throw new Error("A tech was not provided.");var r=this;if(h.IS_IE8){r=E["default"].createElement("custom");for(var i in t.prototype)"constructor"!==i&&(r[i]=t.prototype[i])}r.tech_=n.tech;var a=y.TextTrackMode[n.mode]||"disabled",s=y.TextTrackKind[n.kind]||"subtitles",l=n["default"],d=n.label||"",p=n.language||n.srclang||"",g=n.id||"vjs_text_track_"+f.newGUID();("metadata"===s||"chapters"===s)&&(a="hidden"),r.cues_=[],r.activeCues_=[];var m=new u["default"](r.cues_),v=new u["default"](r.activeCues_),_=!1,b=c.bind(r,function(){this.activeCues,_&&(this.trigger("cuechange"),_=!1)});return"disabled"!==a&&r.tech_.on("timeupdate",b),Object.defineProperty(r,"kind",{get:function(){return s},set:function(){}}),Object.defineProperty(r,"label",{get:function(){return d},set:function(){}}),Object.defineProperty(r,"language",{get:function(){return p},set:function(){}}),Object.defineProperty(r,"id",{get:function(){return g},set:function(){}}),Object.defineProperty(r,"default",{get:function(){return l},set:function(){}}),Object.defineProperty(r,"mode",{get:function(){return a},set:function(e){y.TextTrackMode[e]&&(a=e,"showing"===a&&this.tech_.on("timeupdate",b),this.trigger("modechange"))}}),Object.defineProperty(r,"cues",{get:function(){return this.loaded_?m:null},set:function(){}}),Object.defineProperty(r,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return v;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;r>n;n++){var i=this.cues[n];i.startTime<=e&&i.endTime>=e?t.push(i):i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e&&t.push(i)}if(_=!1,t.length!==this.activeCues_.length)_=!0;else for(var n=0;n<t.length;n++)-1===this.activeCues_.indexOf(t[n])&&(_=!0);return this.activeCues_=t,v.setCues_(this.activeCues_),v},set:function(){}}),n.src?(r.src=n.src,x(n.src,r)):r.loaded_=!0,h.IS_IE8?r:void 0}return a(t,e),t.prototype.addCue=function(e){var t=this.tech_.textTracks();if(t)for(var n=0;n<t.length;n++)t[n]!==this&&t[n].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=!1,n=0,r=this.cues_.length;r>n;n++){var i=this.cues_[n];i===e&&(this.cues_.splice(n,1),t=!0)}t&&this.cues.setCues_(this.cues_)},t}(b["default"]);A.prototype.allowedEvents_={cuechange:"cuechange"},n["default"]=A,t.exports=n["default"]},{"../event-target":101,"../utils/browser.js":131,"../utils/fn.js":136,"../utils/guid.js":138,"../utils/log.js":139,"../utils/url.js":144,"./text-track-cue-list":124,"./text-track-enums":126,"global/document":1,"global/window":2,xhr:56}],131:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var i=e("global/document"),o=r(i),a=e("global/window"),s=r(a),u=s["default"].navigator.userAgent,l=/AppleWebKit\/([\d.]+)/i.exec(u),c=l?parseFloat(l.pop()):null,d=/iPad/i.test(u);n.IS_IPAD=d;var f=/iPhone/i.test(u)&&!d;n.IS_IPHONE=f;var p=/iPod/i.test(u);n.IS_IPOD=p;var h=f||d||p;n.IS_IOS=h;var g=function(){var e=u.match(/OS (\d+)_/i);return e&&e[1]?e[1]:void 0}();n.IOS_VERSION=g;var y=/Android/i.test(u);n.IS_ANDROID=y;var m=function(){var e,t,n=u.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return n?(e=n[1]&&parseFloat(n[1]),t=n[2]&&parseFloat(n[2]),e&&t?parseFloat(n[1]+"."+n[2]):e?e:null):null}();n.ANDROID_VERSION=m;var v=y&&/webkit/i.test(u)&&2.3>m;n.IS_OLD_ANDROID=v;var _=y&&5>m&&537>c;n.IS_NATIVE_ANDROID=_;var b=/Firefox/i.test(u);n.IS_FIREFOX=b;var T=/Edge/i.test(u);n.IS_EDGE=T;var E=!T&&/Chrome/i.test(u);n.IS_CHROME=E;var w=/MSIE\s8\.0/.test(u);n.IS_IE8=w;var S=!!("ontouchstart"in s["default"]||s["default"].DocumentTouch&&o["default"]instanceof s["default"].DocumentTouch);n.TOUCH_ENABLED=S;var j="backgroundSize"in o["default"].createElement("video").style;n.BACKGROUND_SIZE_SUPPORTED=j},{"global/document":1,"global/window":2}],132:[function(e,t,n){"use strict";function r(e,t){var n,r,o=0;if(!t)return 0;e&&e.length||(e=i.createTimeRange(0,0));for(var a=0;a<e.length;a++)n=e.start(a),r=e.end(a),r>t&&(r=t),o+=r-n;return o/t}n.__esModule=!0,n.bufferedPercent=r;var i=e("./time-ranges.js")},{"./time-ranges.js":142}],133:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var i=e("./log.js"),o=r(i),a={get:function(e,t){return e[t]},set:function(e,t,n){return e[t]=n,!0}};n["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("function"==typeof Proxy){var n=function(){var n={};return Object.keys(t).forEach(function(e){a.hasOwnProperty(e)&&(n[e]=function(){return o["default"].warn(t[e]),a[e].apply(this,arguments)})}),{v:new Proxy(e,n)}}();if("object"==typeof n)return n.v}return e},t.exports=n["default"]},{"./log.js":139}],134:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return e.raw=t,e}function a(e){return"string"==typeof e&&/\S/.test(e)}function s(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function u(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function l(e){return function(t,n){return a(t)?(a(n)&&(n=R["default"].querySelector(n)),(M(n)?n:R["default"])[e](t)):R["default"][e](null)}}function c(e){return 0===e.indexOf("#")&&(e=e.slice(1)),R["default"].getElementById(e)}function d(){var e=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=R["default"].createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(H["default"].warn(V["default"](P,e,n)),r.setAttribute(e,n)):r[e]=n}),Object.getOwnPropertyNames(n).forEach(function(e){n[e],r.setAttribute(e,n[e])}),r}function f(e,t){"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t}function p(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function h(e){var t=e[G];return t||(t=e[G]=B.newGUID()),q[t]||(q[t]={}),q[t]}function g(e){var t=e[G];return t?!!Object.getOwnPropertyNames(q[t]).length:!1}function y(e){var t=e[G];if(t){delete q[t];try{delete e[G]}catch(n){e.removeAttribute?e.removeAttribute(G):e[G]=null}}}function m(e,t){return e.classList?e.classList.contains(t):(s(t),u(t).test(e.className))}function v(e,t){return e.classList?e.classList.add(t):m(e,t)||(e.className=(e.className+" "+t).trim()),e}function _(e,t){return e.classList?e.classList.remove(t):(s(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function b(e,t,n){var r=m(e,t);return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r?(n?v(e,t):_(e,t),e):void 0}function T(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];null===r||"undefined"==typeof r||r===!1?e.removeAttribute(n):e.setAttribute(n,r===!0?"":r)})}function E(e){var t,n,r,i,o;if(t={},n=",autoplay,controls,loop,muted,default,",e&&e.attributes&&e.attributes.length>0){r=e.attributes;for(var a=r.length-1;a>=0;a--)i=r[a].name,o=r[a].value,("boolean"==typeof e[i]||-1!==n.indexOf(","+i+","))&&(o=null!==o),t[i]=o}return t}function w(){R["default"].body.focus(),R["default"].onselectstart=function(){return!1}}function S(){R["default"].onselectstart=function(){return!0}}function j(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=R["default"].documentElement,r=R["default"].body,i=n.clientLeft||r.clientLeft||0,o=N["default"].pageXOffset||r.scrollLeft,a=t.left+o-i,s=n.clientTop||r.clientTop||0,u=N["default"].pageYOffset||r.scrollTop,l=t.top+u-s;return{left:Math.round(a),top:Math.round(l)}}function C(e,t){var n={},r=j(e),i=e.offsetWidth,o=e.offsetHeight,a=r.top,s=r.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(a-u+o)/o)),n.x=Math.max(0,Math.min(1,(l-s)/i)),n}function M(e){return!!e&&"object"==typeof e&&1===e.nodeType}function O(e){return!!e&&"object"==typeof e&&3===e.nodeType}function x(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function A(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),M(e)||O(e)?e:"string"==typeof e&&/\S/.test(e)?R["default"].createTextNode(e):void 0}).filter(function(e){return e})}function I(e,t){return A(t).forEach(function(t){return e.appendChild(t)}),e}function D(e,t){return I(x(e),t)}n.__esModule=!0,n.getEl=c,n.createEl=d,n.textContent=f,n.insertElFirst=p,n.getElData=h,n.hasElData=g,n.removeElData=y,n.hasElClass=m,n.addElClass=v,n.removeElClass=_,n.toggleElClass=b,n.setElAttributes=T,n.getElAttributes=E,n.blockTextSelection=w,n.unblockTextSelection=S,n.findElPosition=j,n.getPointerPosition=C,n.isEl=M,n.isTextNode=O,n.emptyEl=x,n.normalizeContent=A,n.appendContent=I,n.insertContent=D;var P=o(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),k=e("global/document"),R=i(k),L=e("global/window"),N=i(L),F=e("./guid.js"),B=r(F),U=e("./log.js"),H=i(U),K=e("tsml"),V=i(K),q={},G="vdata"+(new Date).getTime(),z=l("querySelector");n.$=z;var Y=l("querySelectorAll");n.$$=Y},{"./guid.js":138,"./log.js":139,"global/document":1,"global/window":2,tsml:55}],135:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t,n){if(Array.isArray(t))return d(o,e,t,n);var r=p.getElData(e);r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=g.newGUID()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=l(t);var i=r.handlers[t.type];if(i)for(var o=i.slice(0),a=0,s=o.length;s>a&&!t.isImmediatePropagationStopped();a++)o[a].call(e,t,n)}}),1===r.handlers[t].length&&(e.addEventListener?e.addEventListener(t,r.dispatcher,!1):e.attachEvent&&e.attachEvent("on"+t,r.dispatcher))}function a(e,t,n){if(p.hasElData(e)){var r=p.getElData(e);if(r.handlers){if(Array.isArray(t))return d(a,e,t,n);var i=function(t){r.handlers[t]=[],c(e,t)};if(t){var o=r.handlers[t];if(o){if(!n)return void i(t);if(n.guid)for(var s=0;s<o.length;s++)o[s].guid===n.guid&&o.splice(s--,1);c(e,t)}}else for(var u in r.handlers)i(u)}}}function s(e,t,n){var r=p.hasElData(e)?p.getElData(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=l(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&t.bubbles===!0)s.call(null,i,t,n);else if(!i&&!t.defaultPrevented){var o=p.getElData(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function u(e,t,n){if(Array.isArray(t))return d(u,e,t,n);var r=function i(){a(e,t,i),n.apply(this,arguments)};r.guid=n.guid=n.guid||g.newGUID(),o(e,t,r)}function l(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r=e||m["default"].event;e={};for(var i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&r.preventDefault||(e[i]=r[i]));if(e.target||(e.target=e.srcElement||_["default"]),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!=e.clientX){var o=_["default"].documentElement,a=_["default"].body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function c(e,t){var n=p.getElData(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&p.removeElData(e)}function d(e,t,n,r){n.forEach(function(n){e(t,n,r)})}n.__esModule=!0,n.on=o,n.off=a,n.trigger=s,n.one=u,n.fixEvent=l;var f=e("./dom.js"),p=i(f),h=e("./guid.js"),g=i(h),y=e("global/window"),m=r(y),v=e("global/document"),_=r(v)},{"./dom.js":134,"./guid.js":138,"global/document":1,"global/window":2}],136:[function(e,t,n){"use strict";n.__esModule=!0;var r=e("./guid.js"),i=function(e,t,n){t.guid||(t.guid=r.newGUID());var i=function(){return t.apply(e,arguments)};return i.guid=n?n+"_"+t.guid:t.guid,i};n.bind=i},{"./guid.js":138}],137:[function(e,t,n){"use strict";function r(e){var t=arguments.length<=1||void 0===arguments[1]?e:arguments[1];return function(){e=0>e?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),i=i>0||a>0?i+":":"",r=((i||o>=10)&&10>r?"0"+r:r)+":",n=10>n?"0"+n:n,i+r+n}()}n.__esModule=!0,n["default"]=r,t.exports=n["default"]},{}],138:[function(e,t,n){"use strict";function r(){return i++}n.__esModule=!0,n.newGUID=r;var i=1},{}],139:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=Array.prototype.slice.call(t),r=function(){},i=a["default"].console||{log:r,warn:r,error:r};e?n.unshift(e.toUpperCase()+":"):e="log",s.history.push(n),n.unshift("VIDEOJS:"),i[e].apply?i[e].apply(i,n):i[e](n.join(" "))}n.__esModule=!0;var o=e("global/window"),a=r(o),s=function(){i(null,arguments)};s.history=[],s.error=function(){i("error",arguments)},s.warn=function(){i("warn",arguments)},n["default"]=s,t.exports=n["default"]},{"global/window":2}],140:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object}function o(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),e.push(u),s["default"].apply(null,e),e[0]}n.__esModule=!0,n["default"]=o;var a=e("lodash-compat/object/merge"),s=r(a),u=function(e,t){return i(t)?i(e)?void 0:o(t):t};t.exports=n["default"]},{"lodash-compat/object/merge":40}],141:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var i=e("global/document"),o=r(i),a=function(e){var t=o["default"].createElement("style");return t.className=e,t};n.createStyleElement=a;var s=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};n.setTextContent=s},{"global/document":1}],142:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return Array.isArray(e)?o(e):void 0===e||void 0===t?o():o([[e,t]])}function o(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:a.bind(null,"start",0,e),end:a.bind(null,"end",1,e)}}function a(e,t,n,r){return void 0===r&&(l["default"].warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),r=0),s(e,r,n.length-1),n[r][t]}function s(e,t,n){if(0>t||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+n+").")}n.__esModule=!0,n.createTimeRanges=i;var u=e("./log.js"),l=r(u);n.createTimeRange=i},{"./log.js":139}],143:[function(e,t,n){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}n.__esModule=!0,n["default"]=r,t.exports=n["default"]},{}],144:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var i=e("global/document"),o=r(i),a=e("global/window"),s=r(a),u=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=o["default"].createElement("a");n.href=e;var r=""===n.host&&"file:"!==n.protocol,i=void 0;r&&(i=o["default"].createElement("div"),i.innerHTML='<a href="'+e+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),o["default"].body.appendChild(i));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),r&&o["default"].body.removeChild(i),a};n.parseUrl=u;var l=function(e){if(!e.match(/^https?:\/\//)){var t=o["default"].createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e};n.getAbsoluteURL=l;var c=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""};n.getFileExtension=c;var d=function(e){var t=s["default"].location,n=u(e),r=":"===n.protocol?t.protocol:n.protocol,i=r+n.host!==t.protocol+t.host;return i};n.isCrossOrigin=d},{"global/document":1,"global/window":2}],145:[function(t,n,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var a=t("global/window"),s=o(a),u=t("global/document"),l=o(u),c=t("./setup"),d=i(c),f=t("./utils/stylesheet.js"),p=i(f),h=t("./component"),g=o(h),y=t("./event-target"),m=o(y),v=t("./utils/events.js"),_=i(v),b=t("./player"),T=o(b),E=t("./plugins.js"),w=o(E),S=t("../../src/js/utils/merge-options.js"),j=o(S),C=t("./utils/fn.js"),M=i(C),O=t("./tracks/text-track.js"),x=o(O),A=t("object.assign"),I=(o(A),t("./utils/time-ranges.js")),D=t("./utils/format-time.js"),P=o(D),k=t("./utils/log.js"),R=o(k),L=t("./utils/dom.js"),N=i(L),F=t("./utils/browser.js"),B=i(F),U=t("./utils/url.js"),H=i(U),K=t("./extend.js"),V=o(K),q=t("lodash-compat/object/merge"),G=o(q),z=t("./utils/create-deprecation-proxy.js"),Y=o(z),W=t("xhr"),X=o(W),Q=t("./tech/tech.js"),$=o(Q),J=t("./tech/html5.js"),Z=(o(J),t("./tech/flash.js"));o(Z),"undefined"==typeof HTMLVideoElement&&(l["default"].createElement("video"),l["default"].createElement("audio"),l["default"].createElement("track"));var ee=function re(e,t,n){var r=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),re.getPlayers()[e])return t&&R["default"].warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&re.getPlayers()[e].ready(n),re.getPlayers()[e];r=N.getEl(e)}else r=e;if(!r||!r.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return r.player||T["default"].players[r.playerId]||new T["default"](r,t,n)};if(s["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){var te=N.$(".vjs-styles-defaults");if(!te){te=p.createStyleElement("vjs-styles-defaults");var ne=N.$("head");ne.insertBefore(te,ne.firstChild),p.setTextContent(te,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}d.autoSetupTimeout(1,ee),ee.VERSION="5.9.2",ee.options=T["default"].prototype.options_,ee.getPlayers=function(){return T["default"].players},ee.players=Y["default"](T["default"].players,{
get:"Access to videojs.players is deprecated; use videojs.getPlayers instead",set:"Modification of videojs.players is deprecated"}),ee.getComponent=g["default"].getComponent,ee.registerComponent=function(e,t){$["default"].isTech(t)&&R["default"].warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),g["default"].registerComponent.call(g["default"],e,t)},ee.getTech=$["default"].getTech,ee.registerTech=$["default"].registerTech,ee.browser=B,ee.TOUCH_ENABLED=B.TOUCH_ENABLED,ee.extend=V["default"],ee.mergeOptions=j["default"],ee.bind=M.bind,ee.plugin=w["default"],ee.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),G["default"](ee.options.languages,(n={},n[e]=t,n))[e]},ee.log=R["default"],ee.createTimeRange=ee.createTimeRanges=I.createTimeRanges,ee.formatTime=P["default"],ee.parseUrl=H.parseUrl,ee.isCrossOrigin=H.isCrossOrigin,ee.EventTarget=m["default"],ee.on=_.on,ee.one=_.one,ee.off=_.off,ee.trigger=_.trigger,ee.xhr=X["default"],ee.TextTrack=x["default"],ee.isEl=N.isEl,ee.isTextNode=N.isTextNode,ee.createEl=N.createEl,ee.hasClass=N.hasElClass,ee.addClass=N.addElClass,ee.removeClass=N.removeElClass,ee.toggleClass=N.toggleElClass,ee.setAttributes=N.setElAttributes,ee.getAttributes=N.getElAttributes,ee.emptyEl=N.emptyEl,ee.appendContent=N.appendContent,ee.insertContent=N.insertContent,"function"==typeof e&&e.amd?e("videojs",[],function(){return ee}):"object"==typeof r&&"object"==typeof n&&(n.exports=ee),r["default"]=ee,n.exports=r["default"]},{"../../src/js/utils/merge-options.js":140,"./component":67,"./event-target":101,"./extend.js":102,"./player":110,"./plugins.js":111,"./setup":115,"./tech/flash.js":118,"./tech/html5.js":119,"./tech/tech.js":121,"./tracks/text-track.js":130,"./utils/browser.js":131,"./utils/create-deprecation-proxy.js":133,"./utils/dom.js":134,"./utils/events.js":135,"./utils/fn.js":136,"./utils/format-time.js":137,"./utils/log.js":139,"./utils/stylesheet.js":141,"./utils/time-ranges.js":142,"./utils/url.js":144,"global/document":1,"global/window":2,"lodash-compat/object/merge":40,"object.assign":45,xhr:56}]},{},[145])(145)}),function(e){var t=e.vttjs={},n=t.VTTCue,r=t.VTTRegion,i=e.VTTCue,o=e.VTTRegion;t.shim=function(){t.VTTCue=n,t.VTTRegion=r},t.restore=function(){t.VTTCue=i,t.VTTRegion=o}}(this),function(e,t){function n(e){if("string"!=typeof e)return!1;var t=s[e.toLowerCase()];return t?e.toLowerCase():!1}function r(e){if("string"!=typeof e)return!1;var t=u[e.toLowerCase()];return t?e.toLowerCase():!1}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function o(e,t,o){var s=this,u=/MSIE\s8\.0/.test(navigator.userAgent),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=e,p=t,h=o,g=null,y="",m=!0,v="auto",_="start",b=50,T="middle",E=50,w="middle";return Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return y},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&e!==a)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return _},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return b},set:function(e){if(0>e||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return T},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return E},set:function(e){if(0>e||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),s.displayState=void 0,u?s:void 0}var a="auto",s={"":!0,lr:!0,rl:!0},u={start:!0,middle:!0,end:!0,left:!0,right:!0};o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.VTTCue=e.VTTCue||o,t.VTTCue=o}(this,this.vttjs||{}),function(e,t){function n(e){if("string"!=typeof e)return!1;var t=o[e.toLowerCase()];return t?e.toLowerCase():!1}function r(e){return"number"==typeof e&&e>=0&&100>=e}function i(){var e=100,t=3,i=0,o=100,a=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");u=t}}})}var o={"":!0,up:!0};e.VTTRegion=e.VTTRegion||i,t.VTTRegion=i}(this,this.vttjs||{}),function(e){function t(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function n(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function r(){this.values=h(null)}function i(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);if(2===a.length){var s=a[0],u=a[1];t(s,u)}}}function o(e,o,a){function s(){var r=n(e);if(null===r)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+c);return e=e.replace(/^[^\sa-zA-Z-]+/,""),r}function u(e,t){var n=new r;i(e,function(e,t){switch(e){case"region":for(var r=a.length-1;r>=0;r--)if(a[r].id===t){n.set(e,a[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];n.integer(e,o),n.percent(e,o)?n.set("snapToLines",!1):null,n.alt(e,o,["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function l(){e=e.replace(/^\s+/,"")}var c=e;if(l(),o.startTime=s(),l(),"-->"!==e.substr(0,3))throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+c);e=e.substr(3),l(),o.endTime=s(),l(),u(e,o)}function a(e,t){function r(){function e(e){return t=t.substr(e.length),e}if(!t)return null;var n=t.match(/^([^<]*)(<[^>]+>?)?/);return e(n[1]?n[1]:n[2])}function i(e){return g[e]}function o(e){for(;h=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(h[0],i);return e}function a(e,t){return!v[t.localName]||v[t.localName]===e.localName}function s(t,n){var r=y[t];if(!r)return null;var i=e.document.createElement(r);i.localName=r;var o=m[t];return o&&n&&(i[o]=n.trim()),i}for(var u,l=e.document.createElement("div"),c=l,d=[];null!==(u=r());)if("<"!==u[0])c.appendChild(e.document.createTextNode(o(u)));else{if("/"===u[1]){d.length&&d[d.length-1]===u.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var f,p=n(u.substr(1,u.length-2));if(p){f=e.document.createProcessingInstruction("timestamp",p),c.appendChild(f);continue}var h=u.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(f=s(h[1],h[3]),!f)continue;if(!a(c,f))continue;h[2]&&(f.className=h[2].substr(1).replace("."," ")),d.push(h[1]),c.appendChild(f),c=f}return l}function s(e){function t(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function n(e){if(!e||!e.length)return null;var r=e.pop(),i=r.textContent||r.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):i}return"ruby"===r.tagName?n(e):r.childNodes?(t(e,r),n(e)):void 0}var r,i=[],o="";if(!e||!e.childNodes)return"ltr";for(t(i,e);o=n(i);)for(var a=0;a<o.length;a++){r=o.charCodeAt(a);for(var s=0;s<_.length;s++)if(_[s]===r)return"rtl"}return"ltr"}function u(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}function l(){}function c(e,t,n){var r=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";r&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),l.call(this),this.cue=t,this.cueDiv=a(e,t.text);var u={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};r||(u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",u.unicodeBidi="plaintext"),this.applyStyles(u,this.cueDiv),this.div=e.document.createElement("div"),u={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},r||(u.direction=s(this.cueDiv),u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(u),this.div.appendChild(this.cueDiv);var c=0;switch(t.positionAlign){case"start":c=t.position;break;case"middle":c=t.position-t.size/2;break;case"end":c=t.position-t.size}this.applyStyles(""===t.vertical?{left:this.formatStyle(c,"%"),width:this.formatStyle(t.size,"%")}:{top:this.formatStyle(c,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function d(e){var t,n,r,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function f(e,t,n,r){function i(e,t){for(var i,o=new d(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);a>u&&(i=new d(e),a=u),e=new d(o)}return i||o}var o=new d(t),a=t.cue,s=u(a),l=[];if(a.snapToLines){var c;switch(a.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width"}var f=o.lineHeight,p=f*Math.round(s),h=n[c]+f,g=l[0];Math.abs(p)>h&&(p=0>p?-1:1,p*=Math.ceil(h/f)*f),0>s&&(p+=""===a.vertical?n.height:n.width,l=l.reverse()),o.move(g,p)}else{var y=o.lineHeight/n.height*100;switch(a.lineAlign){case"middle":s-=y/2;break;case"end":s-=y}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}l=["+y","-x","+x","-y"],o=new d(t)}var m=i(o,l);t.move(m.toCSSCompatValues(n))}function p(){}var h=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();t.prototype=h(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},r.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var n;return(n=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&100>=t)?(this.set(e,t),!0):!1}};var g={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},m={v:"title",lang:"lang"},v={rt:"ruby"},_=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];l.prototype.applyStyles=function(e,t){t=t||this.div;for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},l.prototype.formatStyle=function(e,t){return 0===e?0:e+t},c.prototype=h(l.prototype),c.prototype.constructor=c,d.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},d.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},d.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},d.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},d.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},d.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),n=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),r=t*n;return r/(this.height*this.width)},d.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var i={left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n};return i},p.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},p.convertCueToDOMTree=function(e,t){return e&&t?a(e,t):null};var b=.05,T="sans-serif",E="1.5%";p.processCues=function(e,t,n){function r(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=E,n.appendChild(i),r(t)){var o=[],a=d.getSimpleBoxPosition(i),s=Math.round(a.height*b*100)/100,u={font:s+"px "+T};!function(){for(var n,r,s=0;s<t.length;s++)r=t[s],n=new c(e,r,u),i.appendChild(n.div),f(e,n,a,o),r.displayState=n.div,o.push(d.getSimpleBoxPosition(n))}()}else for(var l=0;l<t.length;l++)i.appendChild(t[l].displayState)},p.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},p.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof t))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function n(){for(var e=u.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,u.buffer=e.substr(t),n}function a(e){var t=new r;if(i(e,function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var i=n.split(",");if(2!==i.length)break;var o=new r;if(o.percent("x",i[0]),o.percent("y",i[1]),!o.has("x")||!o.has("y"))break;t.set(e+"X",o.get("x")),t.set(e+"Y",o.get("y"));break;case"scroll":t.alt(e,n,["up"])}},/=/,/\s/),t.has("id")){var n=new(u.vttjs.VTTRegion||u.window.VTTRegion);n.width=t.get("width",100),n.lines=t.get("lines",3),n.regionAnchorX=t.get("regionanchorX",0),n.regionAnchorY=t.get("regionanchorY",100),n.viewportAnchorX=t.get("viewportanchorX",0),n.viewportAnchorY=t.get("viewportanchorY",100),n.scroll=t.get("scroll",""),u.onregion&&u.onregion(n),u.regionList.push({id:t.get("id"),region:n})}}function s(e){i(e,function(e,t){switch(e){case"Region":a(t)}},/:/)}var u=this;e&&(u.buffer+=u.decoder.decode(e,{stream:!0}));try{var l;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;l=n();var c=l.match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new t(t.Errors.BadSignature);u.state="HEADER"}for(var d=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(d?d=!1:l=n(),u.state){case"HEADER":/:/.test(l)?s(l):l||(u.state="ID");continue;case"NOTE":l||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){u.state="NOTE";break}if(!l)continue;if(u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,""),u.state="CUE",-1===l.indexOf("-->")){u.cue.id=l;continue}case"CUE":try{o(l,u.cue,u.regionList)}catch(f){u.reportOrThrowError(f),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var p=-1!==l.indexOf("-->");if(!l||p&&(d=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=l;continue;case"BADCUE":l||(u.state="ID");continue}}}catch(f){u.reportOrThrowError(f),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new t(t.Errors.BadSignature)}catch(n){e.reportOrThrowError(n)}return e.onflush&&e.onflush(),this}},e.WebVTT=p}(this,this.vttjs||{}),!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r={};r.encode=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);128>r?t.push(r):2048>r?(t.push(192|r>>6),t.push(128|63&r)):65536>r?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.decode=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];128>r||(224>r?(r=(31&r)<<6,r|=63&e[n++]):240>r?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")};var i={};if(function(e){var t=function(t){for(var n=0,r=[],i=0|t.length/3;0<i--;){var o=(t[n]<<16)+(t[n+1]<<8)+t[n+2];
n+=3,r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push(e.charAt(63&o))}if(2==t.length-n){var o=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push(e.charAt(63&o>>6)),r.push("=")}else if(1==t.length-n){var o=t[n]<<16;r.push(e.charAt(63&o>>18)),r.push(e.charAt(63&o>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,r=[],i=0|e.length/4;0<i--;){var o=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&o>>16),r.push(255&o>>8),r.push(255&o),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={};u.encode=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},u.decode=function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")},i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),void 0===o)var o=i.encode;if(void 0===u)var u=i.decode;"undefined"!=typeof n&&(n.decode=i.decode,n.decodeArray=i.decodeArray)},{}],2:[function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r=15,i=32,o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},d=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var p=function(e,t,n,r,i,o){this.uchar=e||" ",this.penState=new f(t,n,r,i,o)};p.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var h=function(){this.chars=[];for(var e=0;i>e;e++)this.chars.push(new p);this.pos=0,this.currPenState=new f};h.prototype={equals:function(e){for(var t=!0,n=0;i>n;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;i>t;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;i>t;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;t+1>n;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);return this.pos>=i?void c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;i>t;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;i>n;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}};var g=function(){this.rows=[];for(var e=0;r>e;e++)this.rows.push(new h);this.currRow=r-1,this.nrRollUpRows=null,this.reset()};g.prototype={reset:function(){for(var e=0;r>e;e++)this.rows[e].clear();this.currRow=r-1},equals:function(e){for(var t=!0,n=0;r>n;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;r>t;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;r>t;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){var e=this.rows[this.currRow];e.backSpace()},clearToEndOfRow:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},insertChar:function(e){var t=this.rows[this.currRow];t.insertChar(e)},setPen:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},moveCursor:function(e){var t=this.rows[this.currRow];t.moveCursor(e)},setCursor:function(e){c.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},setPAC:function(e){c.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var o={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(o)},setBkgData:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void c.log("DEBUG","roll_up but nrRollUpRows not set yet");c.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),c.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,o=0;r>o;o++){var a=this.rows[o].getTextString();a&&(i=o+1,e?t.push("Row "+i+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var y=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new g,this.nonDisplayedMemory=new g,this.lastOutputScreen=new g,this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};y.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[r-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var m=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new y(1,t),new y(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}};m.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,o=!1;this.lastTime=e,c.setTime(e);for(var a=0;a<t.length;a+=2)if(r=127&t[a],i=127&t[a+1],0!==r||0!==i){if(c.log("DATA","["+d([t[a],t[a+1]])+"] -> ("+d([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(o=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else c.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+d([r,i])+" orig: "+d([t[a],t[a+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||28===e)&&t>=32&&47>=t,i=(23===e||31===e)&&t>=33&&35>=t;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+d([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var o=this.channels[n-1];return 20===e||28===e?32===t?o.cc_RCL():33===t?o.cc_BS():34===t?o.cc_AOF():35===t?o.cc_AON():36===t?o.cc_DER():37===t?o.cc_RU(2):38===t?o.cc_RU(3):39===t?o.cc_RU(4):40===t?o.cc_FON():41===t?o.cc_RDC():42===t?o.cc_TR():43===t?o.cc_RTD():44===t?o.cc_EDM():45===t?o.cc_CR():46===t?o.cc_ENM():47===t&&o.cc_EOC():o.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&t>=32&&47>=t){if(n=17===e?1:2,n!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.cc_MIDROW(t),c.log("DEBUG","MIDROW ("+d([e,t])+")"),!0}return!1},parsePAC:function(e,t){var n=null,r=null,i=(e>=17&&23>=e||e>=25&&31>=e)&&t>=64&&127>=t,l=(16===e||24===e)&&t>=64&&95>=t;if(!i&&!l)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=23>=e?1:2,r=t>=64&&95>=t?1===n?o[e]:s[e]:1===n?a[e]:u[e];var c=this.interpretPAC(r,t),d=this.channels[n-1];return d.setPAC(c),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),13>=n?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:15>=n?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),o>=17&&19>=o){var a=t;a=17===o?t+80:18===o?t+112:t+144,c.log("INFO","Special char '"+n(a)+"' in channel "+r),i=[a]}else e>=32&&127>=e&&(i=0===t?[e]:[e,t]);if(i){var s=d(i);c.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},parseBackgroundAttributes:function(e,t){var n,r,i,o,a=(16===e||24===e)&&t>=32&&47>=t,s=(23===e||31===e)&&t>=45&&47>=t;return a||s?(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=l[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=24>e?1:2,o=this.channels[i-1],o.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0):!1},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var v=function(e,t,n){for(var r=0,i=t,o=0,a=[],s=function(e,t,n,r){if(4!==e||8>t)return null;var i=n.getUint8(r),o=n.getUint16(r+1),a=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==o&&1195456820==a&&3==s};t+n>i;){if(r=e.getUint32(i),o=31&e.getUint8(i+4),6===o)for(var u=i+5,l=-1;i+4+r-1>u;){l=0;for(var c=255;255===c;)c=e.getUint8(u),l+=c,u++;var d=0;for(c=255;255===c;)c=e.getUint8(u),d+=c,u++;s(l,d,e,u)&&a.push([u,d]),u+=d}i+=r+4}return a},_=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var o=0;i>o;o++){var a=e.getUint8(n),s=4&a,u=3&a;n++;var l=e.getUint8(n);n++;var c=e.getUint8(n);n++,s&&(127&l)+(127&c)!==0&&(0===u?(r[0].push(l),r[0].push(c)):1===u&&(r[1].push(l),r[1].push(c)))}return r};e.logger=c,e.PenState=f,e.CaptionScreen=g,e.Cea608Parser=m,e.findCea608Nalus=v,e.extractCea608DataFromRange=_}("undefined"==typeof n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";function r(e){var t,n,r;for(t=[],r=0,n=e.length;n>r;r+=1)e[r].isRoot?t.push("root"):t.push(e[r].name);var i=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},o=function(e,t,n){var r,o,a,s,u;if(null!==e&&0!==e.length)for(r=0,o=e.length;o>r;r+=1)a=e[r],t.hasOwnProperty(a.name)&&(n.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],u=n[a.name],"object"==typeof s&&"object"==typeof u?i(s,u):null!=a.mergeFunction?n[a.name]=a.mergeFunction(s,u):n[a.name]=s+u):n[a.name]=t[a.name])},a=function u(e,t){var n,r,i,a,s,l,c,d=e;if(null!==d.children&&0!==d.children.length)for(n=0,r=d.children.length;r>n;n+=1)if(l=d.children[n],t.hasOwnProperty(l.name))if(l.isArray)for(s=t[l.name+"_asArray"],i=0,a=s.length;a>i;i+=1)c=s[i],o(d.properties,t,c),u(l,c);else c=t[l.name],o(d.properties,t,c),u(l,c)},s=function l(n){var r,i,o,s,u,c,d;if(null===n)return n;if("object"!=typeof n)return n;for(r=0,i=t.length;i>r;r+=1)"root"===t[r]&&(u=e[r],c=n,a(u,c));for(s in n)if(n.hasOwnProperty(s)&&"__children"!=s){if(o=t.indexOf(s),-1!==o)if(u=e[o],u.isArray)for(d=n[s+"_asArray"],r=0,i=d.length;i>r;r+=1)c=d[r],a(u,c);else c=n[s],a(u,c);l(n[s])}return n};return{run:s}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r,t.exports=n["default"]},{}],4:[function(e,t,n){"use strict";function r(e,t,n){function r(e){var t=e.localName;return null==t&&(t=e.baseName),(null==t||""==t)&&(t=e.nodeName),t}function i(e){return e.prefix}function o(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function a(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function s(o){if(o.nodeType==b.DOCUMENT_NODE){var u,l,c,d=o.firstChild;for(l=0,c=o.childNodes.length;c>l;l+=1)if(o.childNodes[l].nodeType!==b.COMMENT_NODE){d=o.childNodes[l];break}if(n)u=s(d);else{u={};var f=r(d);u[f]=s(d)}return u}if(o.nodeType==b.ELEMENT_NODE){var u=new Object;u.__cnt=0;for(var p=[],h=o.childNodes,g=0;g<h.length;g++){var d=h.item(g),f=r(d);if(u.__cnt++,null==u[f]){var y=s(d);if("#text"!=f||/[^\s]/.test(y)){var m={};m[f]=y,p.push(m)}u[f]=y,u[f+"_asArray"]=new Array(1),u[f+"_asArray"][0]=u[f]}else{if(null!=u[f]&&!(u[f]instanceof Array)){var v=u[f];u[f]=new Array,u[f][0]=v,u[f+"_asArray"]=u[f]}for(var T=0;null!=u[f][T];)T++;var y=s(d);if("#text"!=f||/[^\s]/.test(y)){var m={};m[f]=y,p.push(m)}u[f][T]=y}}u.__children=p;for(var E=0;E<o.attributes.length;E++){var w=o.attributes.item(E);u.__cnt++;for(var S=w.value,j=0,C=e.length;C>j;j++){var M=e[j];M.test.call(this,w)&&(S=M.converter.call(this,w.value))}u[t+w.name]=S}var O=i(o);return null!=O&&""!=O&&(u.__cnt++,u.__prefix=O),1==u.__cnt&&null!=u["#text"]&&(u=u["#text"]),null!=u["#text"]&&(u.__text=u["#text"],_&&(u.__text=a(u.__text)),delete u["#text"],delete u["#text_asArray"]),null!=u["#cdata-section"]&&(u.__cdata=u["#cdata-section"],delete u["#cdata-section"],delete u["#cdata-section_asArray"]),(null!=u.__text||null!=u.__cdata)&&(u.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),u}return o.nodeType==b.TEXT_NODE||o.nodeType==b.CDATA_SECTION_NODE?o.nodeValue:o.nodeType==b.COMMENT_NODE?null:void 0}function u(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var o=0;o<n.length;o++){var a=n[o],s=e[a];i+=" "+a.substr(1)+"='"+s+"'"}return i+=r?"/>":">"}function l(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return-1!==e.indexOf(t,e.length-t.length)}function d(e,t){return!!(c(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function)}function f(e){var t=0;if(e instanceof Object)for(var n in e)d(e,n)||t++;return t}function p(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf("_")&&t.push(n);return t}function h(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t+=_?o(e.__text):e.__text),t}function g(e){var t="";return e instanceof Object?t+=h(e):null!=e&&(t+=_?o(e):e),t}function y(e,t,n){var r="";if(0==e.length)r+=u(e,t,n,!0);else for(var i=0;i<e.length;i++)r+=u(e[i],t,p(e[i]),!1),r+=m(e[i]),r+=l(e[i],t);return r}function m(e){var t="",n=f(e);if(n>0)for(var r in e)if(!d(e,r)){var i=e[r],o=p(i);if(null==i||void 0==i)t+=u(i,r,o,!0);else if(i instanceof Object)if(i instanceof Array)t+=y(i,r,o);else{var a=f(i);a>0||null!=i.__text||null!=i.__cdata?(t+=u(i,r,o,!1),t+=m(i),t+=l(i,r)):t+=u(i,r,o,!0)}else t+=u(i,r,o,!1),t+=g(i),t+=l(i,r)}return t+=g(e)}(null===t||void 0===t)&&(t="_"),(null===n||void 0===n)&&(n=!1);var v="1.0.11",_=!1,b={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t,n,r;if(window.DOMParser){n=new window.DOMParser;try{r=n.parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(i){}try{t=n.parseFromString(e,"text/xml"),r&&t.getElementsByTagNameNS(r,"parsererror").length&&(t=void 0)}catch(i){}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.xml2json=function(e){return s(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return t?this.xml2json(t):void 0},this.json2xml_str=function(e){return m(e)},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return v},this.escapeMode=function(e){_=e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r,t.exports=n["default"]},{}],5:[function(e,t,n){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./src/streaming/MediaPlayer.js"),o=r(i),a=e("./src/streaming/protection/Protection.js"),s=r(a),u=e("./src/streaming/metrics/MetricsReporting.js"),l=r(u),c=e("./src/streaming/MediaPlayerFactory.js"),d=r(c),f=window||t,p=f.dashjs;p||(p=f.dashjs={}),p.MediaPlayer=o["default"],p.Protection=s["default"],p.MetricsReporting=l["default"],p.MediaPlayerFactory=d["default"],n["default"]=p,n.MediaPlayer=o["default"],n.Protection=s["default"],n.MetricsReporting=l["default"],n.MediaPlayerFactory=d["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./src/streaming/MediaPlayer.js":33,"./src/streaming/MediaPlayerFactory.js":35,"./src/streaming/metrics/MetricsReporting.js":55,"./src/streaming/protection/Protection.js":85}],6:[function(e,t,n){var r={};r.parseBuffer=function(e){return new i(e).parse()},r.Utils={},r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var o=e.getUint8(i++);128>o||(224>o?(o=(31&o)<<6,o|=63&e.getUint8(i++)):240>o?(o=(15&o)<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++)):(o=(7&o)<<18,o|=(63&e.getUint8(i++))<<12,o|=(63&e.getUint8(i++))<<6,o|=63&e.getUint8(i++))),r.push(String.fromCharCode(o))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},"undefined"!=typeof n&&(n.parseBuffer=r.parseBuffer,n.Utils=r.Utils),r.Cursor=function(e){this.offset="undefined"==typeof e?0:e};var i=function(e){this._raw=new DataView(e),this._cursor=new r.Cursor,this.boxes=[]};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if("undefined"==typeof e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var r in this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}};var o=function(){this._cursor=new r.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.prototype._readInt=function(e){var t=null;switch(e){case 8:t=this._raw.getInt8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getInt16(this._cursor.offset-this._raw.byteOffset);break;case 32:t=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset),r=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t=null;switch(e){case 8:t=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset);break;case 24:var n=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset),r=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset+2);t=(n<<8)+r;break;case 32:t=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset),r=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},o.prototype._readString=function(e){for(var t="",n=0;e>n;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},o.prototype._readTerminatedString=function(){for(var e="";;){var t=this._readUint(8);if(0==t)break;e+=String.fromCharCode(t)}return e},o.prototype._readTemplate=function(e){var t=this._readUint(e/2),n=this._readUint(e/2);return t+n/Math.pow(2,e/2)},o.prototype._parseBox=function(){if(this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this.size=this._readUint(32),this.type=this._readString(4),1==this.size&&(this.largesize=this._readUint(64)),"uuid"==this.type&&(this.usertype=this._readString(16)),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}!this._incomplete&&this._boxParsers[this.type]&&this._boxParsers[this.type].call(this)},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._boxParsers={},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(e){o.prototype._boxParsers[e]=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))}}),o.prototype._boxParsers.elst=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=1;e<=this.entry_count;e++){var t={};1==this.version?(t.segment_duration=this._readUint(64),t.media_time=this._readInt(64)):(t.segment_duration=this._readUint(32),t.media_time=this._readInt(32)),t.media_rate_integer=this._readInt(16),t.media_rate_fraction=this._readInt(16),this.entries.push(t)}},o.prototype._boxParsers.emsg=function(){this._parseFullBox(),this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString(),this.timescale=this._readUint(32),this.presentation_time_delta=this._readUint(32),this.event_duration=this._readUint(32),this.id=this._readUint(32),this.message_data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},o.prototype._boxParsers.free=o.prototype._boxParsers.skip=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},o.prototype._boxParsers.ftyp=o.prototype._boxParsers.styp=function(){for(this.major_brand=this._readString(4),this.minor_versions=this._readUint(32),this.compatible_brands=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.compatible_brands.push(this._readString(4))},o.prototype._boxParsers.hdlr=function(){this._parseFullBox(),this.pre_defined=this._readUint(32),this.handler_type=this._readString(4),this.reserved=[this._readUint(32),this._readUint(32),this._readUint(32)],this.name=this._readTerminatedString()},o.prototype._boxParsers.mdat=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},o.prototype._boxParsers.mdhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32));var e=this._readUint(16);this.pad=e>>15,this.language=String.fromCharCode((e>>10&31)+96,(e>>5&31)+96,(31&e)+96),this.pre_defined=this._readUint(16)},o.prototype._boxParsers.mfhd=function(){this._parseFullBox(),this.sequence_number=this._readUint(32)},o.prototype._boxParsers.mvhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32)),this.rate=this._readTemplate(32),this.volume=this._readTemplate(16),this.reserved1=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.matrix=[];for(var e=0;9>e;e++)this.matrix.push(this._readTemplate(32));this.pre_defined=[];for(var e=0;6>e;e++)this.pre_defined.push(this._readUint(32));this.next_track_ID=this._readUint(32)},o.prototype._boxParsers.payl=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.cue_text=r.Utils.dataViewToString(e)},o.prototype._boxParsers.sidx=function(){this._parseFullBox(),this.reference_ID=this._readUint(32),this.timescale=this._readUint(32),0==this.version?(this.earliest_presentation_time=this._readUint(32),this.first_offset=this._readUint(32)):(this.earliest_presentation_time=this._readUint(64),this.first_offset=this._readUint(64)),this.reserved=this._readUint(16),this.reference_count=this._readUint(16),this.references=[];for(var e=0;e<this.reference_count;e++){var t={},n=this._readUint(32);t.reference_type=n>>31&1,t.referenced_size=2147483647&n,t.subsegment_duration=this._readUint(32);var r=this._readUint(32);t.starts_with_SAP=r>>31&1,t.SAP_type=r>>28&7,t.SAP_delta_time=268435455&r,this.references.push(t)}},o.prototype._boxParsers.ssix=function(){this._parseFullBox(),this.subsegment_count=this._readUint(32),this.subsegments=[];for(var e=0;e<this.subsegment_count;e++){var t={};t.ranges_count=this._readUint(32),t.ranges=[];
for(var n=0;n<t.ranges_count;n++){var r={};r.level=this._readUint(8),r.range_size=this._readUint(24),t.ranges.push(r)}this.subsegments.push(t)}},o.prototype._boxParsers.tfdt=function(){this._parseFullBox(),1==this.version?this.baseMediaDecodeTime=this._readUint(64):this.baseMediaDecodeTime=this._readUint(32)},o.prototype._boxParsers.tfhd=function(){this._parseFullBox(),this.track_ID=this._readUint(32),1&this.flags&&(this.base_data_offset=this._readUint(64)),2&this.flags&&(this.sample_description_offset=this._readUint(32)),8&this.flags&&(this.default_sample_duration=this._readUint(32)),16&this.flags&&(this.default_sample_size=this._readUint(32)),32&this.flags&&(this.default_sample_flags=this._readUint(32))},o.prototype._boxParsers.tkhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(32)),this.reserved2=[this._readUint(32),this._readUint(32)],this.layer=this._readUint(16),this.alternate_group=this._readUint(16),this.volume=this._readTemplate(16),this.reserved3=this._readUint(16),this.matrix=[];for(var e=0;9>e;e++)this.matrix.push(this._readTemplate(32));this.width=this._readUint(32),this.height=this._readUint(32)},o.prototype._boxParsers.trun=function(){this._parseFullBox(),this.sample_count=this._readUint(32),1&this.flags&&(this.data_offset=this._readInt(32)),4&this.flags&&(this.first_sample_flags=this._readUint(32)),this.samples=[];for(var e=0;e<this.sample_count;e++){var t={};256&this.flags&&(t.sample_duration=this._readUint(32)),512&this.flags&&(t.sample_size=this._readUint(32)),1024&this.flags&&(t.sample_flags=this._readUint(32)),2048&this.flags&&(0==this.version?t.sample_composition_time_offset=this._readUint(32):t.sample_composition_time_offset=this._readInt(32)),this.samples.push(t)}},o.prototype._boxParsers.vlab=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.source_label=r.Utils.dataViewToString(e)},o.prototype._boxParsers.vttC=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.config=r.Utils.dataViewToString(e)},o.prototype._boxParsers.vtte=function(){}},{}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){c=!0,d=!0,f=(new Date).getTime()}function t(e){d=e}function n(e){c=e}function r(){return c}function i(){var e="",t=null;d&&(t=(new Date).getTime(),e+="["+(t-f)+"]"),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),c&&console.log(e),s.trigger(u["default"].LOG,{message:e})}var o=this.context,s=(0,a["default"])(o).getInstance(),l=void 0,c=void 0,d=void 0,f=void 0;return l={log:i,setLogTimestampVisible:t,setLogToBrowserConsole:n,getLogToBrowserConsole:r},e(),l}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EventBus.js"),a=r(o),s=e("./events/Events.js"),u=r(s),l=e("./FactoryMaker.js"),c=r(l);i.__dashjs_factory_name="Debug",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"./EventBus.js":8,"./FactoryMaker.js":9,"./events/Events.js":11}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(i(e,t,n)>=0)){var r={callback:t,scope:n};a[e]=a[e]||[],a[e].push(r)}}function t(e,t,n){if(e&&t&&a[e]){var r=i(e,t,n);0>r||a[e].splice(r,1)}}function n(e,t){if(e&&a[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e].forEach(function(e){e.callback.call(e.scope,t)})}}function r(){a={}}function i(e,t,n){var r=a[e],i=-1;if(!r||0===r.length)return i;for(var o=0;o<r.length;o++)if(r[o].callback===t&&(!n||n===r[o].scope))return o;return i}var o=void 0,a={};return o={on:e,off:t,trigger:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="EventBus",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"./FactoryMaker.js":9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){var i=a(r);!i[e]&&t&&(i[e]={instance:t,override:n})}function t(e,t){for(var n in l){var r=l[n];if(r.context===e&&r.name===t)return r.instance}return null}function n(e,t,n){for(var r in l){var i=l[r];if(i.context===e&&i.name===t)return void(l[r].instance=n)}l.push({name:t,context:e,instance:n})}function r(e){return function(t){return void 0===t&&(t={}),{create:function(){return o(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}}}function i(e){return function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=t(n,e.__dashjs_factory_name)),r||(r=o(e.__dashjs_factory_name,e.apply({context:n},arguments),n,arguments),l.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}}}function o(e,t,n,r){var i=a(n),o=i[e];if(o){var u=o.instance;if(!o.override)return u.apply({context:n,factory:s},r);u=u.apply({context:n,factory:s,parent:t},r);for(var l in u)t.hasOwnProperty(l)&&(t[l]=u[l])}return t}function a(e){var t=void 0;return u.forEach(function(n){n===e&&(t=n)}),t||(t=u.push(e)),t}var s=void 0,u=[],l=[];return s={extend:e,getSingletonInstance:t,setSingletonInstance:n,getSingletonFactory:i,getClassFactory:r}}();n["default"]=r,t.exports=n["default"]},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},s=e("./EventsBase.js"),u=r(s),l=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astinfuture",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CHUNK_APPENDED="chunkAppended",this.CURRENT_TRACK_CHANGED="currenttrackchanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="manifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUALITY_CHANGED="qualityChanged",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_INITIALIZED="streaminitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ALL_ELEMENTS_LOADED="xlinkAllElementsLoaded",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return o(t,e),t}(u["default"]);n["default"]=l,t.exports=n["default"]},{"./EventsBase.js":12}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},s=e("./CoreEvents.js"),u=r(s),l=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{"./CoreEvents.js":10}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=t?t.override:!1,r=t?t.publicOnly:!1;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();n["default"]=o,t.exports=n["default"]},{}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.dashManifestModel&&(k=e.dashManifestModel)}function t(){R=[],L={}}function n(e,t){return t.getRepresentationForQuality(e.quality)}function r(e){return L[e.streamInfo.id][e.index]}function i(e){for(var t=R.length,n=0;t>n;n++){var r=R[n];if(e.id===r.id)return r}return null}function o(e,t){var n=new a["default"],r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],i=k.getRepresentationFor(t.index,r);return n.id=t.id,n.quality=t.index,n.bandwidth=k.getBandwidth(i),n.DVRWindow=t.segmentAvailabilityRange,n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,n.mediaInfo=s(e,t.adaptation),n}function s(e,t){var n,r=new u["default"],i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return r.id=t.id,r.index=t.index,r.type=t.type,r.streamInfo=d(e,t.period),r.representationCount=k.getRepresentationCount(i),r.lang=k.getLanguageForAdaptation(i),n=k.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=k.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&"undefined"!=typeof v["default"]&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=k.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),r.roles=k.getRolesForAdaptation(i).map(function(e){return e.value}),r.codec=k.getCodec(i),r.mimeType=k.getMimeType(i),r.contentProtection=k.getContentProtectionData(i),r.bitrateList=k.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=k.getKID(e)}),r.isText=k.getIsTextTrack(r.mimeType),r}function l(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function d(e,t){var n=new c["default"],r=1;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=p(e,t.mpd),n.isLast=1===e.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<r,n}function p(e,t){var n=new f["default"];return n.DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=k.getDuration(e),n.isDynamic=k.getIsDynamic(e),n}function g(e,t,n){var r,o=i(t),a=o.id,u=k.getAdaptationForType(e,t.index,n);return u?(r=k.getIndexForAdaptation(u,e,t.index),L[a]=L[a]||k.getAdaptationsForPeriod(e,o),s(e,L[a][r])):null}function y(e,t,n){var r,o,a,u,c,d,f=i(t),p=f.id,h=k.getAdaptationsForType(e,t.index,"embeddedText"!==n?n:"video"),g=[];if(!h)return g;for(L[p]=L[p]||k.getAdaptationsForPeriod(e,f),u=0,d=h.length;d>u;u++){if(r=h[u],a=k.getIndexForAdaptation(r,e,t.index),o=s(e,L[p][a]),"embeddedText"===n){var y=o.accessibility.length;for(c=0;y>c;c++)if(o){var m=o.accessibility[c];if(0===m.indexOf("cea-608:")){var v=m.substring(8),_=v.split(";");if("CC"===_[0].substring(0,2))for(c=0;c<_.length;c++)o||(o=s.call(this,e,L[p][a])),l(o,_[c].substring(0,3),_[c].substring(4)),g.push(o),o=null;else for(c=0;c<_.length;c++)o||(o=s.call(this,e,L[p][a])),l(o,"CC"+(c+1),_[c]),g.push(o),o=null}else 0===m.indexOf("cea-608")&&(l(o,"CC1","eng"),g.push(o),o=null)}}o&&"embeddedText"!==n&&g.push(o)}return g}function m(e){var t,n,r,i=[];if(!e)return null;for(t=k.getMpd(e),R=k.getRegularPeriods(e,t),t.checkTime=k.getCheckTime(e,R[0]),L={},n=R.length,r=0;n>r;r++)i.push(d(e,R[r]));return i}function b(e){var t=k.getMpd(e);return p(e,t)}function T(e,t){var n=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(n)}function E(e,t){var r=n(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(r)}function w(e,t,r,i){var o=n(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(o,r,i)}function S(e,t,r){var i=n(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(i,r)}function j(e){return e.getIndexHandler().getCurrentTime()}function C(e,t){return e.getIndexHandler().setCurrentTime(t)}function M(e,t){var n,o,a=i(t.getStreamInfo()),s=t.getMediaInfo(),u=r(s),l=t.getType();n=s.id,o=n?k.getAdaptationForId(n,e,a.index):k.getAdaptationForIndex(s.index,e,a.index),t.getRepresentationController().updateData(o,u,l)}function O(e,t,n){var r=t.getRepresentationForQuality(n);return r?o(e,r):null}function x(e,t){var n=t.getCurrentRepresentation();return n?o(e,n):null}function A(e,t,n){var r=new h["default"],i=e.scheme_id_uri,o=e.value,a=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,c=e.message_data,d=n*a+s;return t[i]?(r.eventStream=t[i],r.eventStream.value=o,r.eventStream.timescale=a,r.duration=u,r.id=l,r.presentationTime=d,r.messageData=c,r.presentationTimeDelta=s,r):null}function I(e,t,o){var s=[];return t instanceof c["default"]?s=k.getEventsForPeriod(e,i(t)):t instanceof u["default"]?s=k.getEventStreamForAdaptationSet(e,r(t)):t instanceof a["default"]&&(s=k.getEventStreamForRepresentation(e,n(t,o.getRepresentationController()))),s}function D(){R=[],L={}}var P=void 0,k=void 0,R=void 0,L=void 0;return P={initialize:t,convertDataToTrack:o,convertDataToMedia:s,convertDataToStream:d,getDataForTrack:n,getDataForMedia:r,getDataForStream:i,getStreamsInfo:m,getManifestInfo:b,getMediaInfoForType:g,getAllMediaInfoForType:y,getCurrentRepresentationInfo:x,getRepresentationInfoForQuality:O,updateData:M,getInitRequest:T,getNextFragmentRequest:E,getFragmentRequestForTime:w,generateFragmentRequestForTime:S,getIndexHandlerTime:j,setIndexHandlerTime:C,getEventsFor:I,getEvent:A,setConfig:e,reset:D,metricsList:_}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../streaming/vo/TrackInfo.js"),a=r(o),s=e("../streaming/vo/MediaInfo.js"),u=r(s),l=e("../streaming/vo/StreamInfo.js"),c=r(l),d=e("../streaming/vo/ManifestInfo.js"),f=r(d),p=e("./vo/Event.js"),h=r(p),g=e("../core/FactoryMaker.js"),y=r(g),m=e("../../externals/cea608-parser.js"),v=r(m),_={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors"};i.__dashjs_factory_name="DashAdapter",n["default"]=y["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../externals/cea608-parser.js":2,"../core/FactoryMaker.js":9,"../streaming/vo/ManifestInfo.js":138,"../streaming/vo/MediaInfo.js":139,"../streaming/vo/StreamInfo.js":141,"../streaming/vo/TrackInfo.js":143,"./vo/Event.js":23}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){Z=-1,re=0,ie=new RegExp("^(?:(?:[a-z]+:)?/)?/","i"),Y.on(h["default"].INITIALIZATION_LOADED,V,J),Y.on(h["default"].SEGMENTS_LOADED,q,J)}function n(e){oe=e,ne=oe.getType(),te=oe.isDynamic()}function r(){return oe}function i(e){re=e}function o(){return re}function s(){return Z}function l(){re=0,ee=NaN,Z=-1,te=null,ne=null,oe=null,Y.off(h["default"].INITIALIZATION_LOADED,V,J),Y.off(h["default"].SEGMENTS_LOADED,q,J)}function d(e,t){for(;e.length<t;)e="0"+e;return e}function p(e,t,n){for(var r,i,o,a,s,u,l="%0",c=t.length,f=l.length;;){if(r=e.indexOf("$"+t),0>r)return e;if(i=e.indexOf("$",r+c),0>i)return e;if(o=e.indexOf(l,r+c),o>r&&i>o)switch(a=e.charAt(i-1),s=parseInt(e.substring(o+f,i-1),10),a){case"d":case"i":case"u":u=d(n.toString(),s);break;case"x":u=d(n.toString(16),s);break;case"X":u=d(n.toString(16),s).toUpperCase();break;case"o":u=d(n.toString(8),s);break;default:return z("Unsupported/invalid IEEE 1003.1 format identifier string in URL"),e}else u=n;e=e.substring(0,r)+u+e.substring(i+1)}}function g(e){return e.split("$$").join("$")}function m(e,t){if(null===t||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function v(e,t){return e.representation.startNumber+t}function _(e,t){var n,r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].BaseURL;return n=e===r?e:ie.test(e)?e:r+e}function E(e,t){var n,r,i=new u["default"];return n=e.adaptation.period,i.mediaType=t,i.type=f["default"].INIT_SEGMENT_TYPE,i.url=_(e.initialization,e),i.range=e.range,r=n.start,i.availabilityStartTime=X.calcAvailabilityStartTimeFromPresentationTime(r,e.adaptation.period.mpd,te),i.availabilityEndTime=X.calcAvailabilityEndTimeFromPresentationTime(r+n.duration,n.mpd,te),i.quality=e.index,i.mediaInfo=oe.getMediaInfo(),i}function w(e){var t;return e?t=E(e,ne):null}function S(e){var t,n,r,i=e.adaptation.period,o=e.segmentInfoType,a=!1;return 0>Z?a=!1:te||Z<e.availableSegmentsNumber?(n=N(Z,e),n&&(r=n.presentationStartTime-i.start,t=e.adaptation.period.duration,z(e.segmentInfoType+": "+r+" / "+t),a="SegmentTimeline"===o?!1:r>=t)):a=!0,a}function j(e,t){var n,r,i,o;return r=e.segmentDuration,isNaN(r)&&(r=e.adaptation.period.duration),i=e.adaptation.period.start+t*r,o=i+r,n=new a["default"],n.representation=e,n.duration=r,n.presentationStartTime=i,n.mediaStartTime=X.calcMediaTimeFromPresentationTime(n.presentationStartTime,e),n.availabilityStartTime=X.calcAvailabilityStartTimeFromPresentationTime(n.presentationStartTime,e.adaptation.period.mpd,te),n.availabilityEndTime=X.calcAvailabilityEndTimeFromPresentationTime(o,e.adaptation.period.mpd,te),n.wallStartTime=X.calcWallTimeForSegment(n,te),n.replacementNumber=v(n,t),n.availabilityIdx=t,n}function C(e){var t,n,r,i,o,a,s,u,l,c,d,f,p,h,g=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,y=g.SegmentTimeline,m=e.availableSegmentsNumber>0,v=10,_=0,b=0,T=-1,E=[],w=!1,S=function(t){return A(e,_,t.d,h,g.media,t.mediaRange,T)};for(h=e.timescale,t=y.S_asArray,l=x(e),l?(f=l.start,p=l.end):d=X.calcMediaTimeFromPresentationTime(ee||0,e),r=0,i=t.length;i>r;r++){if(n=t[r],a=0,n.hasOwnProperty("r")&&(a=n.r),n.hasOwnProperty("t")&&(_=n.t,b=_/h),0>a){if(u=t[r+1],u&&u.hasOwnProperty("t"))s=u.t/h;else{var j=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:X.calcSegmentAvailabilityRange(e,te).end;s=X.calcMediaTimeFromPresentationTime(j,e),e.segmentDuration=n.d/h}a=Math.ceil((s-b)/(n.d/h))-1}if(c){if(m)break;T+=a+1}else for(o=0;a>=o;o++){if(T++,l){if(T>p){if(c=!0,m)break;continue}T>=f&&E.push(S(n))}else{if(E.length>v){if(c=!0,m)break;continue}w?E.push(S(n)):b>=d-n.d/h*1.5&&(w=!0,E.push(S(n)))}_+=n.d,b=_/h}}return m||(e.availableSegmentsNumber=T+1),E}function M(e){var t,n,r,i,o,a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,s=e.segmentDuration,u=e.segmentAvailabilityRange,l=[],c=null,d=null;for(o=e.startNumber,t=isNaN(s)&&!te?{start:o,end:o}:O(e),r=t.start,i=t.end,n=r;i>=n;n++)d=j(e,n),d.replacementTime=(o+n-1)*e.segmentDuration,c=a.media,c=p(c,"Number",d.replacementNumber),c=p(c,"Time",d.replacementTime),d.media=c,l.push(d),d=null;return isNaN(s)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((u.end-u.start)/s),l}function O(e){var t,n,r,i=e.segmentDuration,o=e.adaptation.period.mpd.manifest.minBufferTime,a=e.segmentAvailabilityRange,s={start:X.calcPeriodRelativeTimeFromMpdRelativeTime(e,a.start),end:X.calcPeriodRelativeTimeFromMpdRelativeTime(e,a.end)},u=e.segments,l=2*i,c=Math.max(2*o,10*i),d=NaN,f=null;return s||(s=X.calcSegmentAvailabilityRange(e,te)),s.start=Math.max(s.start,0),te&&!X.isTimeSyncCompleted()?(t=Math.floor(s.start/i),n=Math.floor(s.end/i),r={start:t,end:n}):(u&&u.length>0?(f=N(Z,e),d=f?X.calcPeriodRelativeTimeFromMpdRelativeTime(e,f.presentationStartTime):Z>0?Z*i:X.calcPeriodRelativeTimeFromMpdRelativeTime(e,ee||u[0].presentationStartTime)):d=Z>0?Z*i:te?s.end:s.start,t=Math.floor(Math.max(d-l,s.start)/i),n=Math.floor(Math.min(t+c/i,s.end/i)),r={start:t,end:n})}function x(){var e,t,n,r=2,i=10,o=0,a=Number.POSITIVE_INFINITY;return te&&!X.isTimeSyncCompleted()?n={start:o,end:a}:!te&&ee||0>Z?null:(e=Math.max(Z-r,o),t=Math.min(Z+i,a),n={start:e,end:t})}function A(e,t,n,r,i,o,s){var u,l,c,d=t/r,f=Math.min(n/r,e.adaptation.period.mpd.maxSegmentDuration);return u=X.calcPresentationTimeFromMediaTime(d,e),l=u+f,c=new a["default"],c.representation=e,c.duration=f,c.mediaStartTime=d,c.presentationStartTime=u,c.availabilityStartTime=e.adaptation.period.mpd.manifest.loadedTime,c.availabilityEndTime=X.calcAvailabilityEndTimeFromPresentationTime(l,e.adaptation.period.mpd,te),c.wallStartTime=X.calcWallTimeForSegment(c,te),c.replacementTime=t,c.replacementNumber=v(c,s),i=p(i,"Number",c.replacementNumber),i=p(i,"Time",c.replacementTime),c.media=i,c.mediaRange=o,c.availabilityIdx=s,c}function I(e){var t,n,r,i,o,a,s,u=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,c=u.SegmentURL_asArray.length,d=[];for(s=e.startNumber,i=O(e),o=Math.max(i.start,0),a=Math.min(i.end,u.SegmentURL_asArray.length-1),t=o;a>=t;t++)r=u.SegmentURL_asArray[t],n=j(e,t),n.replacementTime=(s+t-1)*e.segmentDuration,n.media=r.media?r.media:l,n.mediaRange=r.mediaRange,n.index=r.index,n.indexRange=r.indexRange,d.push(n),n=null;return e.availableSegmentsNumber=c,d}function D(e){var t,n=e.segmentInfoType;return"SegmentBase"!==n&&"BaseURL"!==n&&F(e)?("SegmentTimeline"===n?t=C(e):"SegmentTemplate"===n?t=M(e):"SegmentList"===n&&(t=I(e)),P(e,t)):t=e.segments,t}function P(e,t){var n,r,i,o;e.segments=t,n=t.length-1,te&&isNaN(X.getExpectedLiveEdge())&&(o=t[n],r=o.presentationStartTime,i=$.getMetricsFor("stream"),X.setExpectedLiveEdge(r),$.updateManifestUpdateInfo(Q.getCurrentManifestUpdate(i),{presentationStartTime:r}))}function k(e){if(!e)throw new c["default"]("no representation");return e.segments=null,D(e),e}function R(e,t){var n,r=e.initialization,i="BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType;return e.segmentDuration||e.segments||k(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=X.calcSegmentAvailabilityRange(e,te),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime?(n=new c["default"](T,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void Y.trigger(h["default"].REPRESENTATION_UPDATED,{sender:this,representation:e,error:n})):(t||(Z=-1),e.segmentDuration&&k(e),r||W.loadInitialization(e),i||W.loadSegments(e,ne,e.indexRange),void(r&&i&&Y.trigger(h["default"].REPRESENTATION_UPDATED,{sender:this,representation:e})))}function L(e,t,n){var r,i,o,a,s,u=t.segments,l=u?u.length:null,c=-1;if(u&&l>0)for(s=0;l>s;s++)if(i=u[s],o=i.presentationStartTime,a=i.duration,r=void 0===n||null===n?a/2:n,e+r>=o&&o+a>e-r){c=i.availabilityIdx;break}return c}function N(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;if(i>e&&(n=t.segments[e],n&&n.availabilityIdx===e))return n;for(r=0;i>r;r++)if(n=t.segments[r],n&&n.availabilityIdx===e)return n;return null}function F(e){var t,n,r=e.segments,i=!1;return r&&0!==r.length?(n=r[0].availabilityIdx,t=r[r.length-1].availabilityIdx,i=n>Z||Z>t):i=!0,i}function B(e){if(null===e||void 0===e)return null;var t,n=new u["default"],r=e.representation,i=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth;return t=_(e.media,r),t=p(t,"Number",e.replacementNumber),t=p(t,"Time",e.replacementTime),t=p(t,"Bandwidth",i),t=m(t,r.id),t=g(t),n.mediaType=ne,n.type=f["default"].MEDIA_SEGMENT_TYPE,n.url=t,n.range=e.mediaRange,n.startTime=e.presentationStartTime,n.duration=e.duration,n.timescale=r.timescale,n.availabilityStartTime=e.availabilityStartTime,n.availabilityEndTime=e.availabilityEndTime,n.wallStartTime=e.wallStartTime,n.quality=r.index,n.index=e.availabilityIdx,n.mediaInfo=oe.getMediaInfo(),n}function U(e,t,n){var r,i,o,a=Z,s=n?n.keepIdx:!1,l=n?n.timeThreshold:null,c=!(!n||!n.ignoreIsFinished);return e?(ee!==t&&(ee=t,z("Getting the request for "+ne+" time : "+t)),Z=L(t,e,l),D(e),0>Z&&(Z=L(t,e,l)),Z>0&&z("Index for "+ne+" time "+t+" is "+Z),o=c?!1:S(e),o?(r=new u["default"],r.action=u["default"].ACTION_COMPLETE,r.index=Z,r.mediaType=ne,r.mediaInfo=oe.getMediaInfo(),z("Signal complete.",r)):(i=N(Z,e),r=B(i)),s&&a>=0&&"SegmentTimeline"!==e.segmentInfoType&&(Z=a),r):null}function H(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},U(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function K(e){var t,n,r;return e&&-1!==Z?(ee=null,Z++,z("Getting the next request at index: "+Z),r=S(e),r?(t=new u["default"],t.action=u["default"].ACTION_COMPLETE,t.index=Z,t.mediaType=ne,t.mediaInfo=oe.getMediaInfo(),z("Signal complete.")):(D(e),n=N(Z,e),t=B(n),!n&&te&&Z--),t):null}function V(e){var t=e.representation;t.segments&&Y.trigger(h["default"].REPRESENTATION_UPDATED,{sender:this,representation:t})}function q(e){if(!e.error&&ne===e.mediaType){var t,n,r,i,o=e.segments,a=e.representation,s=[],u=0;for(t=0,n=o.length;n>t;t++)r=o[t],i=A(a,r.startTime,r.duration,r.timescale,r.media,r.mediaRange,u),s.push(i),i=null,u++;a.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[n-1].presentationStartTime},a.availableSegmentsNumber=n,P(a,s),a.initialization&&Y.trigger(h["default"].REPRESENTATION_UPDATED,{sender:this,representation:a})}}var G=this.context,z=(0,b["default"])(G).getInstance().log,Y=(0,y["default"])(G).getInstance(),W=e.segmentBaseLoader,X=e.timelineConverter,Q=e.dashMetrics,$=e.metricsModel,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0;return J={initialize:n,getStreamProcessor:r,getInitRequest:w,getSegmentRequestForTime:U,getNextSegmentRequest:K,generateSegmentRequestForTime:H,updateRepresentation:R,setCurrentTime:i,getCurrentTime:o,getCurrentIndex:s,reset:l},t(),J}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./vo/Segment.js"),a=r(o),s=e("../streaming/vo/FragmentRequest.js"),u=r(s),l=e("../streaming/vo/Error.js"),c=r(l),d=e("../streaming/vo/metrics/HTTPRequest.js"),f=r(d),p=e("../core/events/Events.js"),h=r(p),g=e("../core/EventBus.js"),y=r(g),m=e("../core/FactoryMaker.js"),v=r(m),_=e("../core/Debug.js"),b=r(_),T=1;i.__dashjs_factory_name="DashHandler";var E=v["default"].getClassFactory(i);E.SEGMENTS_UNAVAILABLE_ERROR_CODE=T,n["default"]=E,t.exports=n["default"]},{"../core/Debug.js":7,"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11,"../streaming/vo/Error.js":135,"../streaming/vo/FragmentRequest.js":136,"../streaming/vo/metrics/HTTPRequest.js":150,"./vo/Segment.js":28}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n,r=M.getValue(),i=r.Period_asArray[t];return n=E(i,e),null===n?null:n.bandwidth}function t(e,t){var n,r=M.getValue(),i=r.Period_asArray[t];return n=T(i,e)}function n(e,t){var n,r=M.getValue(),i=r.Period_asArray[t];return n=S(i,e)}function r(e,t){var n=0,r=(0,u["default"])(C).getInstance();return r&&(n=r.getTopQualityIndexFor(e,t)),n}function i(e){if(null===e)return null;var t,n,r,i=e.RepSwitchList;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function o(e){if(null===e)return null;var t=e.BufferLevel;return null===t||t.length<=0?null:t[t.length-1]}function s(e){if(null===e)return 0;var t=e.BufferLevel;return null===t||t.length<=0?0:t[t.length-1].level/1e3}function l(e){return e.RequestsQueue}function d(e){if(null===e)return null;var t,n,r=e.HttpList,i=null;if(null===r||r.length<=0)return null;for(t=r.length,n=t-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function p(e){return null===e?[]:e.HttpList?e.HttpList:[]}function h(e){if(null===e)return null;var t,n,r,i=e.DroppedFrames;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function g(e){if(null===e)return null;var t,n,r,i=e.SchedulingInfo;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function y(e){if(null===e)return null;var t,n,r,i=e.ManifestUpdate;return null===i||i.length<=0?null:(t=i.length,n=t-1,r=i[n])}function m(e){if(null===e)return null;var t,n,r=e.DVRInfo;return null===r||r.length<=0?null:(t=r.length-1,n=r[t])}function v(e,t){var n,r,i,o={};if(null===e)return null;for(n=p(e),i=n.length-1;i>=0;i--)if(r=n[i],r.type===a["default"].MPD_TYPE){o=b(r._responseHeaders);break}return void 0===o[t]?null:o[t]}function _(e,t){if(null===e)return null;var n,r=d(e);return null===r||null===r._responseHeaders?null:(n=b(r._responseHeaders),void 0===n[t]?null:n[t])}function b(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),r=0,i=n.length;i>r;r++){
var o=n[r],a=o.indexOf(": ");a>0&&(t[o.substring(0,a)]=o.substring(a+2))}return t}function T(e,t){var n,r,i,o,a,s;for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)for(n=r[a],o=n.Representation_asArray,s=0;s<o.length;s+=1)if(i=o[s],t===i.id)return s;return-1}function E(e,t){var n,r,i,o,a,s;for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)for(n=r[a],o=n.Representation_asArray,s=0;s<o.length;s+=1)if(i=o[s],t===i.id)return i;return null}function w(e,t){return(0,f["default"])(C).getInstance().getIsTypeOf(e,t)}function S(e,t){var n,r,i,o;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)if(n=r[o],i=n.Representation_asArray,w(n,t))return i.length;return-1}var j=void 0,C=this.context,M=(0,c["default"])(C).getInstance();return j={getBandwidthForRepresentation:e,getIndexForRepresentation:t,getMaxIndexForBufferType:n,getMaxAllowedIndexForBufferType:r,getCurrentRepresentationSwitch:i,getLatestBufferLevelVO:o,getCurrentBufferLevel:s,getCurrentHttpRequest:d,getHttpRequests:p,getCurrentDroppedFrames:h,getCurrentSchedulingInfo:g,getCurrentDVRInfo:m,getCurrentManifestUpdate:y,getLatestFragmentRequestHeaderValueByID:_,getLatestMPDRequestHeaderValueByID:v,getRequestsQueue:l}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../streaming/vo/metrics/HTTPRequest.js"),a=r(o),s=e("../streaming/controllers/AbrController.js"),u=r(s),l=e("../streaming/models/ManifestModel.js"),c=r(l),d=e("./models/DashManifestModel.js"),f=r(d),p=e("../core/FactoryMaker.js"),h=r(p);i.__dashjs_factory_name="DashMetrics",n["default"]=h["default"].getSingletonFactory(i),t.exports=n["default"]},{"../core/FactoryMaker.js":9,"../streaming/controllers/AbrController.js":42,"../streaming/models/ManifestModel.js":79,"../streaming/vo/metrics/HTTPRequest.js":150,"./models/DashManifestModel.js":19}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){b=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,T=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,E=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,w=/^https?:\/\//i,S=/^(https?:\/\/[^\/]+)\/?/i,j=[{type:"duration",test:function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=t.length,r=0;n>r;r++)if(e.nodeName===t[r])return b.test(e.value);return!1},converter:function(e){var t=b.exec(e),n=parseFloat(t[2]||0)*s+parseFloat(t[4]||0)*u+parseFloat(t[6]||0)*l+parseFloat(t[8]||0)*d+parseFloat(t[10]||0)*p+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n}},{type:"datetime",test:function(e){return T.test(e.value)},converter:function(e){var t,n=T.exec(e);if(t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&parseFloat(n[7])*y||0),n[9]&&n[10]){var r=parseInt(n[9],10)*g+parseInt(n[10],10);t+=("+"===n[8]?-1:1)*r*p*y}return new Date(t)}},{type:"numeric",test:function(e){return E.test(e.value)},converter:function(e){return parseFloat(e)}}]}function t(){var e,t,n,r;return r=[{name:"profiles",merge:!1},{name:"width",merge:!1},{name:"height",merge:!1},{name:"sar",merge:!1},{name:"frameRate",merge:!1},{name:"audioSamplingRate",merge:!1},{name:"mimeType",merge:!1},{name:"segmentProfiles",merge:!1},{name:"codecs",merge:!1},{name:"maximumSAPPeriod",merge:!1},{name:"startsWithSap",merge:!1},{name:"maxPlayoutRate",merge:!1},{name:"codingDependency",merge:!1},{name:"scanType",merge:!1},{name:"FramePacking",merge:!0},{name:"AudioChannelConfiguration",merge:!0},{name:"ContentProtection",merge:!0}],e={},e.name="AdaptationSet",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="Representation",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="SubRepresentation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e}function n(){var e,t,n,r;return r=[{name:"SegmentBase",merge:!0},{name:"SegmentTemplate",merge:!0},{name:"SegmentList",merge:!0}],e={},e.name="Period",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=r,t={},t.name="AdaptationSet",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=r,e.children.push(t),n={},n.name="Representation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=r,t.children.push(n),e}function r(){var e,t,n,r,i;return i=[{name:"BaseURL",merge:!0,mergeFunction:function(e,t){var n,r;return w.test(t)?n=t:"/"===t.charAt(0)&&S.test(e)?(r=e.match(S),n=r[1]+t):n=e+t,n}}],e={},e.name="mpd",e.isRoot=!0,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,t={},t.name="Period",t.isRoot=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=i,e.children.push(t),n={},n.name="AdaptationSet",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=i,t.children.push(n),r={},r.name="Representation",r.isRoot=!1,r.isArray=!0,r.parent=n,r.children=[],r.properties=i,n.children.push(r),e}function i(){var e=[];return e.push(t()),e.push(n()),e.push(r()),e}function o(e,t,n){var r,o=new h["default"](j,"",!0),s=new f["default"](i()),u=new Date,l=null,c=null;try{if(r=o.xml_str2json(e),!r)throw"parser error";l=new Date,r.hasOwnProperty("BaseURL")?(r.BaseURL=r.BaseURL_asArray[0],0!==r.BaseURL.toString().indexOf("http")&&(r.BaseURL=t+r.BaseURL)):r.BaseURL=t,r.hasOwnProperty("Location")&&(r.Location=r.Location_asArray[0]),s.run(r),c=new Date,n.setMatchers(j),n.setIron(s),v("Parsing complete: ( xml2json: "+(l.getTime()-u.getTime())+"ms, objectiron: "+(c.getTime()-l.getTime())+"ms, total: "+(c.getTime()-u.getTime())/1e3+"s)")}catch(d){return(0,a["default"])(m).getInstance().manifestError("parsing the manifest failed","parse",e),null}return r}var s=31536e3,u=2592e3,l=86400,d=3600,p=60,g=60,y=1e3,m=this.context,v=(0,c["default"])(m).getInstance().log,_=void 0,b=void 0,T=void 0,E=void 0,w=void 0,S=void 0,j=void 0;return _={parse:o},e(),_}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../streaming/utils/ErrorHandler.js"),a=r(o),s=e("../core/FactoryMaker.js"),u=r(s),l=e("../core/Debug.js"),c=r(l),d=e("../../externals/objectiron.js"),f=r(d),p=e("../../externals/xml2json.js"),h=r(p);i.__dashjs_factory_name="DashParser",n["default"]=u["default"].getClassFactory(i),t.exports=n["default"]},{"../../externals/objectiron.js":3,"../../externals/xml2json.js":4,"../core/Debug.js":7,"../core/FactoryMaker.js":9,"../streaming/utils/ErrorHandler.js":127}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){_=(0,f["default"])(d).getInstance(),b=(0,v["default"])(d).getInstance(),T=(0,a["default"])(d).getInstance()}function t(e,n){var r=!0,i=null,a=null,u=new XMLHttpRequest,l=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,c=n||{url:l,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,request:u};p("Start searching for initialization."),u.onload=function(){u.status<200||u.status>299||(r=!1,c.bytesLoaded=c.range.end,a=b.parse(u.response),i=o(a),i?(e.range=i,e.initialization=l,g.trigger(h["default"].INITIALIZATION_LOADED,{representation:e})):(c.range.end=c.bytesLoaded+c.bytesToLoad,t(e,c)))},u.onloadend=u.onerror=function(){r&&(r=!1,_.downloadError("initialization",c.url,u),g.trigger(h["default"].INITIALIZATION_LOADED,{representation:e}))},s(u,c),p("Perform init search: "+c.url)}function n(e,t,r,o,a){if(r&&(void 0===r.start||void 0===r.end)){var u=r?r.toString().split("-"):null;r=u?{start:parseFloat(u[0]),end:parseFloat(u[1])}:null}a=a?a:l;var c=!0,d=null,f=null,h=!!r,g=new XMLHttpRequest,y=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].BaseURL,m={url:y,range:h?r:{start:0,end:1500},searching:!h,bytesLoaded:o?o.bytesLoaded:0,bytesToLoad:1500,request:g};g.onload=function(){if(!(g.status<200||g.status>299)){var r=m.bytesToLoad,o=g.response.byteLength;if(c=!1,m.bytesLoaded=m.range.end-m.range.start,d=b.parse(g.response),f=d.getBox("sidx"),f&&f.isComplete){var s,u,l=f.references;if(null!==l&&void 0!==l&&l.length>0&&(s=1===l[0].reference_type),s){p("Initiate multiple SIDX load."),m.range.end=m.range.start+f.size;var h,y,v,_,T,E=[],w=0,S=(f.offset||m.range.start)+f.size,j=function(n){n?(E=E.concat(n),w++,w>=y&&a(E,e,t)):a(null,e,t)};for(h=0,y=l.length;y>h;h++)v=S,_=S+l[h].referenced_size-1,S+=l[h].referenced_size,T={start:v,end:_},n(e,null,T,m,j)}else p("Parsing segments from SIDX."),u=i(f,m),a(u,e,t)}else{if(f)m.range.start=f.offset||m.range.start,m.range.end=m.range.start+(f.size||r);else{if(o<m.bytesLoaded)return void a(null,e,t);var C=d.getLastBox();C&&C.size?(m.range.start=C.offset+C.size,m.range.end=m.range.start+r):m.range.end+=r}n(e,t,m.range,m,a)}}},g.onloadend=g.onerror=function(){c&&(c=!1,_.downloadError("SIDX",m.url,g),a(null,e,t))},s(g,m),p("Perform SIDX load: "+m.url)}function r(){_=null,b=null,T=null,p=null}function i(e,t){for(var n,r,i,o,a=e.references,s=a.length,l=e.timescale,c=e.earliest_presentation_time,d=t.range.start+e.first_offset+e.size,f=[],p=0;s>p;p++)i=a[p].subsegment_duration,o=a[p].referenced_size,n=new u["default"],n.duration=i,n.media=t.url,n.startTime=c,n.timescale=l,r=d+o-1,n.mediaRange=d+"-"+r,f.push(n),c+=i,d+=o;return f}function o(e){var t,n,r=e.getBox("ftyp"),i=e.getBox("moov"),o=null;return p("Searching for initialization."),i&&i.isComplete&&(t=r?r.offset:i.offset,n=i.offset+i.size-1,o=t+"-"+n,p("Found the initialization.  Range: "+o)),o}function s(e,t){e.open("GET",T.modifyRequestURL(t.url)),e.responseType="arraybuffer",e.setRequestHeader("Range","bytes="+t.range.start+"-"+t.range.end),e=T.modifyRequestHeader(e),e.send(null)}function l(e,t,n){e?g.trigger(h["default"].SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):g.trigger(h["default"].SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new c["default"](null,"error loading segments",null)})}var d=this.context,p=(0,E["default"])(d).getInstance().log,g=(0,y["default"])(d).getInstance(),m=void 0,_=void 0,b=void 0,T=void 0;return m={initialize:e,loadInitialization:t,loadSegments:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../streaming/utils/RequestModifier.js"),a=r(o),s=e("./vo/Segment.js"),u=r(s),l=e("../streaming/vo/Error.js"),c=r(l),d=e("../streaming/utils/ErrorHandler.js"),f=r(d),p=e("../core/events/Events.js"),h=r(p),g=e("../core/EventBus.js"),y=r(g),m=e("../streaming/utils/BoxParser.js"),v=r(m),_=e("../core/FactoryMaker.js"),b=r(_),T=e("../core/Debug.js"),E=r(T);i.__dashjs_factory_name="SegmentBaseLoader",n["default"]=b["default"].getSingletonFactory(i),t.exports=n["default"]},{"../core/Debug.js":7,"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11,"../streaming/utils/BoxParser.js":123,"../streaming/utils/ErrorHandler.js":127,"../streaming/utils/RequestModifier.js":130,"../streaming/vo/Error.js":135,"./vo/Segment.js":28}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){H=null,K=-1,V=!0,q=[],Y=(0,f["default"])(F).getInstance(),X=(0,y["default"])(F).getInstance(),Q=(0,h["default"])(F).getInstance(),$=(0,v["default"])(F).getInstance(),J=(0,b["default"])(F).getInstance(),Z=(0,S["default"])(F).getInstance(),ee=(0,c["default"])(F).getInstance(),te=(0,a["default"])(F).getInstance(),ne=(0,u["default"])(F).getInstance(),re=(0,E["default"])(F).getInstance(),B.on(A["default"].QUALITY_CHANGED,R,U),B.on(A["default"].REPRESENTATION_UPDATED,I,U),B.on(A["default"].WALLCLOCK_TIME_UPDATED,D,U),B.on(A["default"].BUFFER_LEVEL_UPDATED,k,U),B.on(A["default"].LIVE_EDGE_SEARCH_COMPLETED,P,U)}function t(e){z=e,W=z.getIndexHandler()}function n(){return z}function r(){return H}function i(){return K}function o(){return V}function s(){return G}function l(){B.off(A["default"].QUALITY_CHANGED,R,U),B.off(A["default"].REPRESENTATION_UPDATED,I,U),B.off(A["default"].WALLCLOCK_TIME_UPDATED,D,U),B.off(A["default"].BUFFER_LEVEL_UPDATED,k,U),B.off(A["default"].LIVE_EDGE_SEARCH_COMPLETED,P,U),H=null,K=-1,V=!0,q=[],Y=null,X=null,Q=null,$=null,J=null,Z=null,ee=null,te=null,ne=null,re=null}function d(e,t,n){var r,i,o=null,a=z.getStreamInfo(),s=Y.getTopQualityIndexFor(n,a.id);if(V=!0,B.trigger(A["default"].DATA_UPDATE_STARTED,{sender:this}),q=w(t),null===H&&"fragmentedText"!==n?(i=Y.getAverageThroughput(n),o=i||Y.getInitialBitrateFor(n,a),r=Y.getQualityForBitrate(z.getMediaInfo(),o)):r=Y.getQualityFor(n,a),r>s&&(r=s),G=m(r),H=e,"video"!==n&&"audio"!==n&&"fragmentedText"!==n)return V=!1,void B.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:G});for(var u=0;u<q.length;u++)W.updateRepresentation(q[u],!0)}function p(){var e=new Date,t=s(),n=1e3*Q.getTime();J.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function g(){var e=ee.calcSegmentAvailabilityRange(G,z.isDynamic());J.addDVRInfo(z.getType(),Q.getTime(),z.getStreamInfo().manifestInfo,e)}function m(e){return q[e]}function _(e){return q.indexOf(e)}function T(){for(var e=0,t=q.length;t>e;e++){var n=q[e].segmentInfoType;if(null===q[e].segmentAvailabilityRange||null===q[e].initialization||("SegmentBase"===n||"BaseURL"===n)&&!q[e].segments)return!1}return!0}function w(e){var t,n=$.getValue();return K=te.getIndexForAdaptation(H,n,e.period.index),t=te.getRepresentationsForAdaptation(n,e)}function j(e){for(var t,n=0,r=q.length;r>n;n++)t=q[n],t.segmentAvailabilityRange=ee.calcSegmentAvailabilityRange(t,e)}function M(){q.forEach(function(e){e.segmentAvailabilityRange=null})}function x(e){var t=e,n=function(){if(!o()){V=!0,B.trigger(A["default"].DATA_UPDATE_STARTED,{sender:U}),M();for(var e=0;e<q.length;e++)W.updateRepresentation(q[e],!0)}};V=!1,B.trigger(A["default"].AST_IN_FUTURE,{delay:t}),setTimeout(n,t)}function I(e){if(e.sender.getStreamProcessor()===z&&o()){var t,n,r,i=e.representation,a=J.getMetricsFor("stream"),u=J.getMetricsFor(s().adaptation.type),l=ne.getCurrentManifestUpdate(a),c=!1,d=0;if("dynamic"==i.adaptation.period.mpd.manifest.type){var f=i.segmentAvailabilityRange.end-i.segmentAvailabilityRange.start;d=1e3*(G.segmentDuration*re.getLiveDelayFragmentCount()-f)}if(d>0)return g(),x(d),n=new C["default"](N,"Segments update failed",null),void B.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:G,error:n});if(l){for(var h=0;h<l.trackInfo.length;h++)if(t=l.trackInfo[h],t.index===i.index&&t.mediaType===z.getType()){c=!0;break}c||J.addManifestUpdateRepresentationInfo(l,i.id,i.index,i.adaptation.period.index,z.getType(),i.presentationTimeOffset,i.startNumber,i.segmentInfoType)}T()&&(V=!1,Y.setPlaybackQuality(z.getType(),z.getStreamInfo(),_(G)),J.updateManifestUpdateInfo(l,{latency:G.segmentAvailabilityRange.end-Q.getTime()}),r=ne.getCurrentRepresentationSwitch(u),r||p(),B.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:G}))}}function D(e){e.isDynamic&&j(e.isDynamic)}function P(e){if(!e.error){j(!0),W.updateRepresentation(G,!1);var t=$.getValue(),n=G.adaptation.period,r=X.getActiveStreamInfo();r.isLast&&(n.mpd.checkTime=te.getCheckTime(t,n),n.duration=te.getEndTimeForLastPeriod($.getValue(),n)-n.start,r.duration=n.duration)}}function k(e){e.sender.getStreamProcessor()===z&&g()}function R(e){e.mediaType===z.getType()&&z.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(G=m(e.newQuality),L(e.mediaType,G.bandwidth),p())}function L(e,t){!Z.isSupported(S["default"].STORAGE_TYPE_LOCAL)||"video"!==e&&"audio"!==e||localStorage.setItem(S["default"]["LOCAL_STORAGE_"+e.toUpperCase()+"_BITRATE_KEY"],JSON.stringify({bitrate:t/1e3,timestamp:(new Date).getTime()}))}var N=1,F=this.context,B=(0,O["default"])(F).getInstance(),U=void 0,H=void 0,K=void 0,V=void 0,q=void 0,G=void 0,z=void 0,Y=void 0,W=void 0,X=void 0,Q=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0;return U={initialize:t,getData:r,getDataIndex:i,isUpdating:o,updateData:d,getStreamProcessor:n,getCurrentRepresentation:s,getRepresentationForQuality:m,reset:l},e(),U}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../models/DashManifestModel.js"),a=r(o),s=e("../DashMetrics.js"),u=r(s),l=e("../utils/TimelineConverter.js"),c=r(l),d=e("../../streaming/controllers/AbrController.js"),f=r(d),p=e("../../streaming/controllers/PlaybackController.js"),h=r(p),g=e("../../streaming/controllers/StreamController.js"),y=r(g),m=e("../../streaming/models/ManifestModel.js"),v=r(m),_=e("../../streaming/models/MetricsModel.js"),b=r(_),T=e("../../streaming/models/MediaPlayerModel.js"),E=r(T),w=e("../../streaming/utils/DOMStorage.js"),S=r(w),j=e("../../streaming/vo/Error.js"),C=r(j),M=e("../../core/EventBus.js"),O=r(M),x=e("../../core/events/Events.js"),A=r(x),I=e("../../core/FactoryMaker.js"),D=r(I);i.__dashjs_factory_name="RepresentationController",n["default"]=D["default"].getClassFactory(i),t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../../streaming/controllers/AbrController.js":42,"../../streaming/controllers/PlaybackController.js":48,"../../streaming/controllers/StreamController.js":51,"../../streaming/models/ManifestModel.js":79,"../../streaming/models/MediaPlayerModel.js":80,"../../streaming/models/MetricsModel.js":81,"../../streaming/utils/DOMStorage.js":126,"../../streaming/vo/Error.js":135,"../DashMetrics.js":15,"../models/DashManifestModel.js":19,"../utils/TimelineConverter.js":21}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n,r,i,o=!1,a=!1,s=e.ContentComponent_asArray,u="text"!==t?new RegExp(t):new RegExp("(vtt|ttml)");if(e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty("codecs")&&"stpp"==e.Representation_asArray[0].codecs)return"fragmentedText"==t;if(s){if(s.length>1)return"muxed"==t;s[0]&&s[0].contentType===t&&(o=!0,a=!0)}if(e.hasOwnProperty("mimeType")&&(o=u.test(e.mimeType),a=!0),!a)for(n=0,r=e.Representation_asArray.length;!a&&r>n;)i=e.Representation_asArray[n],i.hasOwnProperty("mimeType")&&(o=u.test(i.mimeType),a=!0),n++;return o}function t(t){return e(t,"audio")}function n(t){return e(t,"video")}function r(t){return e(t,"fragmentedText")}function i(t){return e(t,"text")}function o(t){return e(t,"muxed")}function s(e){return"text/vtt"===e||"application/ttml+xml"===e}function l(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function d(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null}function p(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function g(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]}function m(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]}function _(e){return p(e).filter(function(e){return"main"===e.value})[0]}function T(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function E(e,t,n){var r,i,o=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=o.length;i>r;r++)if(o[r].hasOwnProperty("id")&&o[r].id===e)return o[r];return null}function w(e,t,n){var r=t.Period_asArray[n].AdaptationSet_asArray;return r[e]}function S(e,t,n){var r,i,o=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=o.length;i>r;r++)if(o[r]===e)return r;return-1}function j(t,n,r){var i,o,a=t.Period_asArray[n].AdaptationSet_asArray,s=[];for(i=0,o=a.length;o>i;i++)e(a[i],r)&&s.push(T(a[i]));return s}function C(e,t,n){var r,i,o;if(o=j(e,t,n),!o||0===o.length)return null;for(r=0,i=o.length;i>r;r++)if(_(o[r]))return o[r];return o[0]}function M(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'}function O(e){return e.Representation_asArray[0].mimeType}function x(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null}function A(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function I(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function D(e){var t,n,r=I(e);return t=!isNaN(e.timeShiftBufferDepth),n=r&&t}function P(e){var t=!1;return e.profiles&&e.profiles.length>0&&(t=-1!==e.profiles.indexOf("urn:mpeg:dash:profile:isoff-on-demand:2011")),t}function k(e){var t;return t=e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE}function R(e){return e.bandwidth}function L(e){var t=NaN,n=2;return e.hasOwnProperty("minimumUpdatePeriod")&&(t=Math.max(parseFloat(e.minimumUpdatePeriod),n)),t}function N(e){return e.Representation_asArray.length}function F(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=T(e),n=t.Representation_asArray,r=n.length,i=[],o=0;r>o;o++)i.push(n[o].bandwidth);return i}function B(e,t){return t.Representation_asArray[e]}function U(e,t){for(var n,r,i,o,u,l=T(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),c=[],d=0;d<l.Representation_asArray.length;d++)o=l.Representation_asArray[d],n=new a["default"],n.index=d,n.adaptation=t,o.hasOwnProperty("id")&&(n.id=o.id),o.hasOwnProperty("bandwidth")&&(n.bandwidth=o.bandwidth),o.hasOwnProperty("maxPlayoutRate")&&(n.maxPlayoutRate=o.maxPlayoutRate),o.hasOwnProperty("SegmentBase")?(i=o.SegmentBase,n.segmentInfoType="SegmentBase"):o.hasOwnProperty("SegmentList")?(i=o.SegmentList,n.segmentInfoType="SegmentList",n.useCalculatedLiveEdgeTime=!0):o.hasOwnProperty("SegmentTemplate")?(i=o.SegmentTemplate,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType="SegmentTemplate",i.hasOwnProperty("initialization")&&(n.initialization=i.initialization.split("$Bandwidth$").join(o.bandwidth).split("$RepresentationID$").join(o.id))):(i=o.BaseURL,n.segmentInfoType="BaseURL"),i.hasOwnProperty("Initialization")?(r=i.Initialization,r.hasOwnProperty("sourceURL")?n.initialization=r.sourceURL:r.hasOwnProperty("range")&&(n.initialization=o.BaseURL,n.range=r.range)):o.hasOwnProperty("mimeType")&&s(o.mimeType)&&(n.initialization=o.BaseURL,n.range=0),i.hasOwnProperty("timescale")&&(n.timescale=i.timescale),i.hasOwnProperty("duration")&&(n.segmentDuration=i.duration/n.timescale),i.hasOwnProperty("startNumber")&&(n.startNumber=i.startNumber),i.hasOwnProperty("indexRange")&&(n.indexRange=i.indexRange),i.hasOwnProperty("presentationTimeOffset")&&(n.presentationTimeOffset=i.presentationTimeOffset/n.timescale),n.MSETimeOffset=te.calcMSETimeOffset(n),c.push(n);return c}function H(e,i){for(var a,s,l=e.Period_asArray[i.index],c=[],d=0;d<l.AdaptationSet_asArray.length;d++)s=l.AdaptationSet_asArray[d],a=new u["default"],s.hasOwnProperty("id")&&(a.id=s.id),a.index=d,a.period=i,o(s)?a.type="muxed":t(s)?a.type="audio":n(s)?a.type="video":r(s)?a.type="fragmentedText":a.type="text",c.push(a);return c}function K(e,t){var n,r,i=I(e),o=[],a=null,s=null,u=null,l=null;for(r=0,n=e.Period_asArray.length;n>r;r++)s=e.Period_asArray[r],s.hasOwnProperty("start")?(l=new c["default"],l.start=s.start):null!==a&&s.hasOwnProperty("duration")&&null!==u?(l=new c["default"],l.start=u.start+u.duration,l.duration=s.duration):0!==r||i||(l=new c["default"],l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&(l.id=V(s)),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=r,l.mpd=t,o.push(l),a=s,u=l),s=null,l=null;return 0===o.length?o:(null!==u&&isNaN(u.duration)&&(u.duration=Y(e,u)-u.start),o)}function V(e){if(!e)throw new Error("Period cannot be null or undefined");var t=c["default"].DEFAULT_ID;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(t=e.id),t}function q(e){var t=new f["default"];return t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t}function G(e,t){return te.calcPresentationTimeFromWallTime(e.loadedTime,t)}function z(e,t){var n,r=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=G(e,t),r=n+e.minimumUpdatePeriod),r}function Y(e,t){var n,r=z(e,t);if(e.mediaPresentationDuration)n=e.mediaPresentationDuration;else{if(isNaN(r))throw new Error("Must have @mediaPresentationDuration or @minimumUpdatePeriod on MPD or an explicit @duration on the last period.");n=r}return n}function W(e,t){var n=e.Period_asArray,r=n[t.index].EventStream_asArray,i=[];if(r)for(var o=0;o<r.length;o++){var a=new b["default"];if(a.period=t,a.timescale=1,!r[o].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";a.schemeIdUri=r[o].schemeIdUri,r[o].hasOwnProperty("timescale")&&(a.timescale=r[o].timescale),r[o].hasOwnProperty("value")&&(a.value=r[o].value);for(var s=0;s<r[o].Event_asArray.length;s++){var u=new v["default"];u.presentationTime=0,u.eventStream=a,r[o].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=r[o].Event_asArray[s].presentationTime),r[o].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=r[o].Event_asArray[s].duration),r[o].Event_asArray[s].hasOwnProperty("id")&&(u.id=r[o].Event_asArray[s].id),i.push(u)}}return i}function X(e,t){var n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=new b["default"];if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty("schemeIdUri"))throw"Invalid EventStream. SchemeIdUri has to be set";i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty("timescale")&&(i.timescale=e[r].timescale),e[r].hasOwnProperty("value")&&(i.value=e[r].value),n.push(i)}return n}function Q(e,t){var n=e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray;return X(n,null)}function $(e,t){var n=e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray;return X(n,t)}function J(e){var t=I(e),n=e.hasOwnProperty("availabilityStartTime"),r=e.UTCTiming_asArray,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new h["default"];e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),i.push(t)))}),i}var Z=void 0,ee=this.context,te=(0,y["default"])(ee).getInstance();return Z={getIsTypeOf:e,getIsAudio:t,getIsVideo:n,getIsText:i,getIsMuxed:o,getIsTextTrack:s,getIsFragmentedText:r,getIsMain:_,getLanguageForAdaptation:l,getViewpointForAdaptation:d,getRolesForAdaptation:p,getAccessibilityForAdaptation:g,getAudioChannelConfigurationForAdaptation:m,processAdaptation:T,getAdaptationForIndex:w,getIndexForAdaptation:S,getAdaptationForId:E,getAdaptationsForType:j,getAdaptationForType:C,getCodec:M,getMimeType:O,getKID:x,getContentProtectionData:A,getIsDynamic:I,getIsDVR:D,getIsOnDemand:P,getDuration:k,getBandwidth:R,getRefreshDelay:L,getRepresentationCount:N,getBitrateListForAdaptation:F,getRepresentationFor:B,getRepresentationsForAdaptation:U,getAdaptationsForPeriod:H,getRegularPeriods:K,getPeriodId:V,getMpd:q,getFetchTime:G,getCheckTime:z,getEndTimeForLastPeriod:Y,getEventsForPeriod:W,getEventStreams:X,getEventStreamForAdaptationSet:Q,getEventStreamForRepresentation:$,getUTCTimingSources:J}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/Representation.js"),a=r(o),s=e("../vo/AdaptationSet.js"),u=r(s),l=e("../vo/Period.js"),c=r(l),d=e("../vo/Mpd.js"),f=r(d),p=e("../vo/UTCTiming.js"),h=r(p),g=e("../utils/TimelineConverter.js"),y=r(g),m=e("../vo/Event.js"),v=r(m),_=e("../vo/EventStream.js"),b=r(_),T=e("../../core/FactoryMaker.js"),E=r(T);i.__dashjs_factory_name="DashManifestModel",n["default"]=E["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9,"../utils/TimelineConverter.js":21,"../vo/AdaptationSet.js":22,"../vo/Event.js":23,"../vo/EventStream.js":24,"../vo/Mpd.js":25,"../vo/Period.js":26,"../vo/Representation.js":27,"../vo/UTCTiming.js":29}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.boxParser&&(i=e.boxParser)}function t(e){var t,n,r,o,a,s,u,l,c,d,f,p=i.parse(e),h=p.getBox("tfhd"),g=p.getBox("tfdt"),y=p.getBox("trun"),m=p.getBox("moof"),v=p.getBox("mfhd");for(d=v.sequence_number,r=y.sample_count,a=g.baseMediaDecodeTime,c=(h.base_data_offset||0)+(y.data_offset||0),s=[],l=0;r>l;l++)u=y.samples[l],t=void 0!==u.sample_duration?u.sample_duration:h.default_sample_duration,o=void 0!==u.sample_size?u.sample_size:h.default_sample_size,n=void 0!==u.sample_composition_time_offset?u.sample_composition_time_offset:0,s.push({dts:a,cts:a+n,duration:t,offset:m.offset+c,size:o}),c+=o,a+=t;return f=a-g.baseMediaDecodeTime,{sampleList:s,sequenceNumber:d,totalDuration:f}}function n(e){var t=i.parse(e),n=t.getBox("mdhd");return n?n.timescale:NaN}var r=void 0,i=void 0;return r={getSamplesInfo:t,getMediaTimescaleFromMoov:n,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="FragmentedTextBoxParser",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){j=0,C=!1,M=NaN,w.on(u["default"].LIVE_EDGE_SEARCH_COMPLETED,v,this),w.on(u["default"].TIME_SYNCHRONIZATION_COMPLETED,_,this)}function t(){return C}function n(e){C=e}function r(){return j}function i(){return M}function o(e){M=e}function s(e,t,n,r){var i=NaN;return i=r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-j)):t.availabilityStartTime}function l(e,t,n){return s.call(this,e,t,n)}function c(e,t,n){return s.call(this,e,t,n,!0)}function d(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*j)/1e3}function f(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e+(n-r)}function p(e,t){var n=t.adaptation.period.start,r=t.presentationTimeOffset;return e-n+r}function h(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function g(e,t){var n,r,i=e.adaptation.period.start,o=i+e.adaptation.period.duration,a={start:i,end:o},s=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);if(!t)return a;if(!C&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;n=e.adaptation.period.mpd.checkTime,r=d(new Date,e.adaptation.period),i=Math.max(r-e.adaptation.period.mpd.timeShiftBufferDepth,e.adaptation.period.start);var u=isNaN(n)?r:Math.min(n,r),l=e.adaptation.period.start+e.adaptation.period.duration;return o=(u>=l&&l>u-s?l:u)-s,a={start:i,end:o}}function y(e,t){var n=e.adaptation.period.start;return t-n}function m(e,t){var n=e.adaptation.period.start;return t+n}function v(e){C||e.error||(j+=e.liveEdge-(M+e.searchTime),C=!0)}function _(e){C||e.error||(j=e.offset/1e3,C=!0)}function b(e){var t=e.presentationTimeOffset,n=e.adaptation.period.start;return n-t}function T(){w.off(u["default"].LIVE_EDGE_SEARCH_COMPLETED,v,this),
w.off(u["default"].TIME_SYNCHRONIZATION_COMPLETED,_,this),j=0,C=!1,M=NaN}var E=this.context,w=(0,a["default"])(E).getInstance(),S=void 0,j=void 0,C=void 0,M=void 0;return S={initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:n,getClientTimeOffset:r,getExpectedLiveEdge:i,setExpectedLiveEdge:o,calcAvailabilityStartTimeFromPresentationTime:l,calcAvailabilityEndTimeFromPresentationTime:c,calcPresentationTimeFromWallTime:d,calcPresentationTimeFromMediaTime:f,calcPeriodRelativeTimeFromMpdRelativeTime:y,calcMpdRelativeTimeFromPeriodRelativeTime:m,calcMediaTimeFromPresentationTime:p,calcSegmentAvailabilityRange:g,calcWallTimeForSegment:h,calcMSETimeOffset:b,reset:T}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/EventBus.js"),a=r(o),s=e("../../core/events/Events.js"),u=r(s),l=e("../../core/FactoryMaker.js"),c=r(l);i.__dashjs_factory_name="TimelineConverter",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11}],22:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.period=null,this.index=-1,this.type=null};n["default"]=i,t.exports=n["default"]},{}],23:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};n["default"]=i,t.exports=n["default"]},{}],24:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};n["default"]=i,t.exports=n["default"]},{}],25:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.checkTime=NaN,this.clientServerTimeShift=0,this.isClientServerTimeSyncCompleted=!1};n["default"]=i,t.exports=n["default"]},{}],26:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",n["default"]=i,t.exports=n["default"]},{}],27:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.maxPlayoutRate=NaN};n["default"]=i,t.exports=n["default"]},{}],28:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};n["default"]=i,t.exports=n["default"]},{}],29:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.schemeIdUri="",this.value=""};n["default"]=i,t.exports=n["default"]},{}],30:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){v=(0,y["default"])(s).getInstance(),_=[]}function n(e,t){var r=new XMLHttpRequest,i=[],o=!0,s=!0,u=null,h=0,y=this,b=function(t,n){s=!1;var o,a,u=new Date;t.firstByteDate||(t.firstByteDate=t.requestStartDate),t.requestEndDate=u,o=t.firstByteDate.getTime()-t.requestStartDate.getTime(),a=t.requestEndDate.getTime()-t.firstByteDate.getTime(),l((n?"loaded ":"failed ")+t.mediaType+":"+t.type+":"+t.startTime+" ("+r.status+", "+o+"ms, "+a+"ms)"),f.addHttpRequest(e.mediaType,null,e.type,e.url,r.responseURL||null,e.range,e.requestStartDate,t.firstByteDate,t.requestEndDate,r.status,e.duration,r.getAllResponseHeaders(),n?i:null)};_.push(r),e.requestStartDate=new Date,u=e.requestStartDate,r.open("GET",g.modifyRequestURL(e.url),!0),r.responseType="arraybuffer",r=g.modifyRequestHeader(r),e.range&&r.setRequestHeader("Range","bytes="+e.range),r.onprogress=function(t){var n=new Date;o&&(o=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(e.firstByteDate=n)),t.lengthComputable&&(e.bytesLoaded=t.loaded,e.bytesTotal=t.total),i.push({s:u,d:n.getTime()-u.getTime(),b:[t.loaded?t.loaded-h:0]}),u=n,h=t.loaded,d.trigger(c["default"].LOADING_PROGRESS,{request:e})},r.onload=function(){r.status<200||r.status>299||(b(e,!0),d.trigger(c["default"].LOADING_COMPLETED,{request:e,response:r.response,sender:m}))},r.onloadend=r.onerror=function(){-1!==_.indexOf(r)&&(_.splice(_.indexOf(r),1),s&&(b(e,!1),t>0?(l("Failed loading fragment: "+e.mediaType+":"+e.type+":"+e.startTime+", retry in "+v.getFragmentRetryInterval()+"ms attempts: "+t),t--,setTimeout(function(){n.call(y,e,t)},v.getFragmentRetryInterval())):(l("Failed loading fragment: "+e.mediaType+":"+e.type+":"+e.startTime+" no retry attempts left"),p.downloadError("content",e.url,r),d.trigger(c["default"].LOADING_COMPLETED,{request:e,bytes:null,error:new a["default"](null,"failed loading fragment",null),sender:y}))))},r.send()}function r(e){if(!e)return void d.trigger(c["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:!1});var t=new XMLHttpRequest,n=!1;t.open("HEAD",e.url,!0),t.onload=function(){t.status<200||t.status>299||(n=!0,d.trigger(c["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:!0}))},t.onloadend=t.onerror=function(){n||d.trigger(c["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:!1})},t.send()}function i(e){e?n(e,v.getFragmentRetryAttempts()):d.trigger(c["default"].LOADING_COMPLETED,{request:e,bytes:null,error:new a["default"](null,"request is null",null),sender:this})}function o(){var e,t,n=_.length;for(e=0;n>e;e++)t=_[e],_[e]=null,t&&(t.abort(),t=null);_=[]}var s=this.context,l=(0,h["default"])(s).getInstance().log,d=(0,u["default"])(s).getInstance(),f=e.metricsModel,p=e.errHandler,g=e.requestModifier,m=void 0,v=void 0,_=void 0;return m={checkForExistence:r,load:i,abort:o},t(),m}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./vo/Error.js"),a=r(o),s=e("./../core/EventBus.js"),u=r(s),l=e("./../core/events/Events.js"),c=r(l),d=e("../core/FactoryMaker.js"),f=r(d),p=e("../core/Debug.js"),h=r(p),g=e("./models/MediaPlayerModel.js"),y=r(g);i.__dashjs_factory_name="FragmentLoader",n["default"]=f["default"].getClassFactory(i),t.exports=n["default"]},{"../core/Debug.js":7,"../core/FactoryMaker.js":9,"./../core/EventBus.js":8,"./../core/events/Events.js":11,"./models/MediaPlayerModel.js":80,"./vo/Error.js":135}],31:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){j=s;var e=(0,u["default"])(p).create({errHandler:_,metricsModel:T,requestModifier:E});S=(0,a["default"])(p).create({xlinkLoader:e}),m.on(y["default"].XLINK_READY,o,w)}function n(e){var t,r,o,a,u,p=i(e),h=new XMLHttpRequest,b=new Date,w=!0,C=b,M=0,O=[];r=function(){var n,r=null,o=new Date;h.status<200||h.status>299||(w=!1,j=s,h.responseURL&&h.responseURL!==e&&(p=i(h.responseURL),r=h.responseURL),T.addHttpRequest("stream",null,f["default"].MPD_TYPE,e,r,null,b,h.firstByteDate||null,o,h.status,null,h.getAllResponseHeaders(),O),t=v.parse(h.responseText,p,S),t?(t.url=r||e,t.originalUrl||(t.originalUrl=t.url),t.loadedTime=o,T.addManifestUpdate("stream",t.type,b,o,t.availabilityStartTime),S.resolveManifestOnLoad(t)):(n="Failed loading manifest: "+e+", parsing failed",m.trigger(y["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new c["default"](d,n,null)}),g(n)))},o=function(){w&&(w=!1,T.addHttpRequest("stream",null,f["default"].MPD_TYPE,e,h.responseURL||null,null,b,h.firstByteDate||null,new Date,h.status,null,h.getAllResponseHeaders(),null),j>0?(g("Failed loading manifest: "+e+", retry in "+l+"ms attempts: "+j),j--,setTimeout(function(){n(e)},l)):(g("Failed loading manifest: "+e+" no retry attempts left"),_.downloadError("manifest",e,h),m.trigger(y["default"].INTERNAL_MANIFEST_LOADED,{error:new c["default"]("Failed loading manifest: "+e+" no retry attempts left")})))},a=function(e){var t=new Date;u&&(u=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(h.firstByteDate=t)),e.lengthComputable&&(h.bytesLoaded=e.loaded,h.bytesTotal=e.total),O.push({s:C,d:t.getTime()-C.getTime(),b:[e.loaded?e.loaded-M:0]}),C=t,M=e.loaded};try{h.onload=r,h.onloadend=o,h.onerror=o,h.onprogress=a,h.open("GET",E.modifyRequestURL(e),!0),h=E.modifyRequestHeader(h),h.send()}catch(x){h.onerror()}}function r(){m.off(y["default"].XLINK_READY,o,w),E=null,S.reset(),S=null}function i(e){var t="";return-1!==e.indexOf("/")&&(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),t=e.substring(0,e.lastIndexOf("/")+1)),t}function o(e){m.trigger(y["default"].INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}var s=3,l=500,d=1,p=this.context,g=(0,b["default"])(p).getInstance().log,m=(0,h["default"])(p).getInstance(),v=e.parser,_=e.errHandler,T=e.metricsModel,E=e.requestModifier,w=void 0,S=void 0,j=void 0;return w={load:n,reset:r},t(),w}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./controllers/XlinkController.js"),a=r(o),s=e("./XlinkLoader.js"),u=r(s),l=e("./vo/Error.js"),c=r(l),d=e("./vo/metrics/HTTPRequest.js"),f=r(d),p=e("../core/EventBus.js"),h=r(p),g=e("../core/events/Events.js"),y=r(g),m=e("../core/FactoryMaker.js"),v=r(m),_=e("../core/Debug.js"),b=r(_);i.__dashjs_factory_name="ManifestLoader",n["default"]=v["default"].getClassFactory(i),t.exports=n["default"]},{"../core/Debug.js":7,"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11,"./XlinkLoader.js":41,"./controllers/XlinkController.js":54,"./vo/Error.js":135,"./vo/metrics/HTTPRequest.js":150}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&(e.manifestModel&&(j=e.manifestModel),e.dashManifestModel&&(C=e.dashManifestModel))}function t(e){S=e,b=NaN,T=null,w=!1,E=!0,v.on(u["default"].STREAMS_COMPOSED,g,this),v.on(u["default"].PLAYBACK_STARTED,p,this),v.on(u["default"].PLAYBACK_PAUSED,h,this),v.on(u["default"].INTERNAL_MANIFEST_LOADED,d,this)}function n(e){l(e)}function r(){return S}function i(){v.off(u["default"].PLAYBACK_STARTED,p,this),v.off(u["default"].PLAYBACK_PAUSED,h,this),v.off(u["default"].STREAMS_COMPOSED,g,this),v.off(u["default"].INTERNAL_MANIFEST_LOADED,d,this),E=!0,w=!1,o(),b=NaN}function o(){null!==T&&(clearInterval(T),T=null)}function s(){o(),isNaN(b)||(m("Refresh manifest in "+b+" seconds."),T=setTimeout(c,Math.min(1e3*b,Math.pow(2,31)-1),this))}function l(e){var t,n,r=new Date;j.setValue(e),m("Manifest has been refreshed at "+r+"["+r.getTime()/1e3+"] "),t=C.getRefreshDelay(e),n=((new Date).getTime()-e.loadedTime.getTime())/1e3,b=Math.max(t-n,0),v.trigger(u["default"].MANIFEST_UPDATED,{manifest:e}),E||s()}function c(){var e,t;E||w||(w=!0,e=j.getValue(),t=e.url,e.hasOwnProperty("Location")&&(t=e.Location),S.load(t))}function d(e){e.error||l(e.manifest)}function p(){E=!1,s()}function h(){E=!0,o()}function g(){w=!1}var y=this.context,m=(0,f["default"])(y).getInstance().log,v=(0,a["default"])(y).getInstance(),_=void 0,b=void 0,T=void 0,E=void 0,w=void 0,S=void 0,j=void 0,C=void 0;return _={initialize:t,setManifest:n,getManifestLoader:r,setConfig:e,reset:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../core/EventBus.js"),a=r(o),s=e("../core/events/Events.js"),u=r(s),l=e("../core/FactoryMaker.js"),c=r(l),d=e("../core/Debug.js"),f=r(d);i.__dashjs_factory_name="ManifestUpdater",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"../core/Debug.js":7,"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11}],33:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){Gt=!1,zt=!1,Yt=!0,Qt=null,qt=null,Jt=null,ae["default"].extend(ue["default"]),en=(0,L["default"])(Nt).getInstance()}function t(e,t,n){return nn=(0,b["default"])(Nt).getInstance(),tn=(0,v["default"])(Nt).getInstance(),nn.supportsMediaSource()?void(Gt||(Gt=!0,Wt=(0,U["default"])(Nt).getInstance(),an=(0,u["default"])(Nt).getInstance(),Xt=(0,f["default"])(Nt).getInstance(),Xt.initialize(),un=(0,ye["default"])(Nt).getInstance(),sn=(0,ve["default"])(Nt).getInstance(),Zt=(0,F["default"])(Nt).getInstance(),Zt.setConfig({adapter:Ct()}),Ze(),pe(void 0!==n?n:!0),e&&vt(e),t&&bt(t),Ut("[dash.js "+Pt+"] MediaPlayer has been initialized"))):void tn.capabilityError("mediasource")}function n(){return!!Kt&&!!Vt}function r(){if(!zt)throw kt;(!Yt||o()&&zt)&&an.play()}function i(){if(!zt)throw kt;an.pause()}function o(){if(!zt)throw kt;return an.isPaused()}function s(){if(!zt)throw kt;return an.isSeeking()}function l(e){if(!Kt)throw Rt;Kt.muted=e}function d(){if(!Kt)throw Rt;return Kt.muted}function p(e){if(!Kt)throw Rt;Kt.volume=e}function g(){if(!Kt)throw Rt;return Kt.volume}function m(e){if(e){if("video"===e||"audio"===e||"fragmentedText"===e){var t=Te().getCurrentBufferLevel(Ee(e));return t?t.toPrecision(3):NaN}return Ut("Warning  - getBufferLength requested for invalid type"),NaN}var n=ke("video").length>0?Te().getCurrentBufferLevel(Ee("video")):Number.MAX_SAFE_INTEGER,r=ke("audio").length>0?Te().getCurrentBufferLevel(Ee("audio")):Number.MAX_SAFE_INTEGER,i=ke("fragmentedText").length>0?Te().getCurrentBufferLevel(Ee("fragmentedText")):Number.MAX_SAFE_INTEGER;return Math.min(n,r,i).toPrecision(3)}function _(){var e=xt();return e?e.manifestInfo.DVRWindowSize:0}function T(e){var t=xt();if(!t)return 0;var n=t.range.start+e;return n>t.range.end&&(n=t.range.end),n}function w(e){if(!zt)throw kt;var t=an.getIsDynamic()?T(e):e;an.seek(t)}function j(){if(!zt)throw kt;var e=Kt.currentTime;if(an.getIsDynamic()){var t=xt();e=null===t?0:M()-(t.range.end-t.time)}return e}function M(){if(!zt)throw kt;var e=Kt.duration;if(an.getIsDynamic()){var t,n=xt();if(!n)return 0;t=n.range.end-n.range.start,e=t<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function x(){if(!zt)throw kt;return j()<0?NaN:At(j())}function I(){if(!zt)throw kt;return At(M())}function P(e,t,n){var r=new Date(1e3*e),i=r.toLocaleDateString(t),o=r.toLocaleTimeString(t,{hour12:n});return o+" "+i}function R(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":10>t?"0"+t.toString()+":":t.toString()+":")+(10>n?"0"+n.toString():n.toString())+":"+(10>r?"0"+r.toString():r.toString())}function N(e,t,n){ce["default"].extend(e,t,n,Nt)}function B(e,t,n){Ft.on(e,t,n)}function H(e,t,n){Ft.off(e,t,n)}function V(){return Pt}function G(){return Bt}function Y(){if(!Kt)throw Rt;return ln}function X(){return ln?ln.getVideoContainer():null}function $(e){en.setLiveDelayFragmentCount(e)}function Z(e){en.setUseSuggestedPresentationDelay(e)}function te(e,t){en.setLastBitrateCachingInfo(e,t)}function re(e,t){en.setLastMediaSettingsCachingInfo(e,t)}function oe(e,t){Wt.setMaxAllowedBitrateFor(e,t)}function se(e){return Wt.getMaxAllowedBitrateFor(e)}function le(e,t){Wt.setMaxAllowedRepresentationRatioFor(e,t)}function de(e){return Wt.getMaxAllowedRepresentationRatioFor(e)}function pe(e){Yt=e}function ge(){return Yt}function me(e){en.setScheduleWhilePaused(e)}function _e(){return en.getScheduleWhilePaused()}function Te(){return sn}function Ee(e){return Zt.getReadOnlyMetricsFor(e)}function we(e){if(!zt)throw kt;return Wt.getQualityFor(e,rn.getActiveStreamInfo())}function Se(e,t){if(!zt)throw kt;Wt.setPlaybackQuality(e,rn.getActiveStreamInfo(),t)}function je(){return Wt.getLimitBitrateByPortal()}function Ce(e){Wt.setLimitBitrateByPortal(e)}function Me(e){if(!zt)throw kt;void 0===cn&&(cn=(0,A["default"])(Nt).getInstance());for(var t=Kt.textTracks,n=t.length,r=0;n>r;r++){var i=t[r],o=e===r?"showing":"hidden";i.mode!==o&&(i.mode=o)}cn.setTextTrack()}function Oe(e){if(!zt)throw kt;var t=It();return t?t.getBitrateListFor(e):[]}function xe(e,t){Wt.setInitialBitrateFor(e,t)}function Ae(e){if(!zt)throw kt;return Wt.getInitialBitrateFor(e)}function Ie(e,t){Wt.setInitialRepresentationRatioFor(e,t)}function De(e){return Wt.getInitialRepresentationRatioFor(e)}function Pe(e){if(!zt)throw kt;return Jt.getStreamsInfo(e)}function ke(e){if(!zt)throw kt;var t=rn.getActiveStreamInfo();return t?Xt.getTracksFor(e,t):[]}function Re(e,t,n){if(!zt)throw kt;return n=n||Jt.getStreamsInfo(t)[0],n?Jt.getAllMediaInfoForType(t,n,e):[]}function Le(e){if(!zt)throw kt;var t=rn.getActiveStreamInfo();return t?Xt.getCurrentTrackFor(e,t):null}function Ne(e,t){Xt.setInitialSettings(e,t)}function Fe(e){return Xt.getInitialSettings(e)}function Be(e){if(!zt)throw kt;Xt.setTrack(e)}function Ue(e){return Xt.getSwitchMode(e)}function He(e,t){Xt.setSwitchMode(e,t)}function Ke(e){Xt.setSelectionModeForInitialTrack(e)}function Ve(){return Xt.getSelectionModeForInitialTrack()}function qe(){return Wt.getAutoSwitchBitrateFor("video")||Wt.getAutoSwitchBitrateFor("audio")}function Ge(e){Wt.setAutoSwitchBitrateFor("video",e),Wt.setAutoSwitchBitrateFor("audio",e)}function ze(e){return Wt.getAutoSwitchBitrateFor(e)}function Ye(e,t){Wt.setAutoSwitchBitrateFor(e,t)}function We(e){en.setBufferOccupancyABREnabled(e)}function Xe(e,t){var n=St(),r=this,i=function a(e){e.error?t(null,e.error):t(e.manifest),Ft.off(ae["default"].INTERNAL_MANIFEST_LOADED,a,r),n.reset()};Ft.on(ae["default"].INTERNAL_MANIFEST_LOADED,i,r);var o=(0,D["default"])(Nt).getInstance();o.initialize(),n.load(o.parseURI(e))}function Qe(e,t){$e(e,t);var n=new a["default"];n.schemeIdUri=e,n.value=t,en.getUTCTimingSources().push(n)}function $e(e,t){var n=en.getUTCTimingSources();n.forEach(function(r,i){r.schemeIdUri===e&&r.value===t&&n.splice(i,1)})}function Je(){en.setUTCTimingSources([])}function Ze(){Qe(L["default"].DEFAULT_UTC_TIMING_SOURCE.scheme,L["default"].DEFAULT_UTC_TIMING_SOURCE.value)}function et(e){en.setUseManifestDateHeaderTimeSource(e)}function tt(e){en.setBufferToKeep(e)}function nt(e){en.setBufferPruningInterval(e)}function rt(e){en.setStableBufferTime(e)}function it(e){en.setBufferTimeAtTopQuality(e)}function ot(e){en.setBufferTimeAtTopQualityLongForm(e)}function at(e){en.setLongFormContentDurationThreshold(e)}function st(e){en.setRichBufferThreshold(e)}function ut(e){en.setBandwidthSafetyFactor(e)}function lt(){return en.getBandwidthSafetyFactor()}function ct(e){en.setAbandonLoadTimeout(e)}function dt(e){en.setFragmentRetryAttempts(e)}function ft(e){en.setFragmentRetryInterval(e)}function pt(){return Mt()}function ht(e){Qt=e}function gt(e){qt=e}function yt(e){var t=(0,E["default"])(Nt).getInstance();t.setConfig({videoModel:ln}),t.initialize(),t.displayCConTop(e)}function mt(e){if(!ln)throw Rt;ln.setVideoContainer(e)}function vt(e){if(!Gt)throw Lt;ln=null,Kt=e,Kt&&(ln=(0,z["default"])(Nt).getInstance(),ln.initialize(),ln.setElement(Kt),Kt.preload="auto",Mt(),Ot()),Et()}function _t(e){if(!ln)throw Rt;ln.setTTMLRenderingDiv(e)}function bt(e){if(!Gt)throw Lt;if("string"==typeof e){var t=(0,D["default"])(Nt).getInstance();t.initialize(),Vt=t.parseURI(e)}else Vt=e;Et()}function Tt(){bt(null),vt(null)}function Et(){zt?(zt=!1,Jt.reset(),rn.reset(),an.reset(),Wt.reset(),on.reset(),Xt.reset(),rn=null,$t=null,Qt=null,qt=null,n()&&Dt()):n()&&Dt()}function wt(){var e=(0,J["default"])(Nt).getInstance();e.initialize();var t=(0,q["default"])(Nt).getInstance();t.initialize();var n=(0,Q["default"])(Nt).getInstance();n.initialize();var r=(0,S["default"])(Nt).getInstance();r.setConfig({dashManifestModel:un});var i=(0,C["default"])(Nt).getInstance();i.setConfig({sourceBufferController:r}),Xt.initialize(),Xt.setConfig({errHandler:tn}),on=(0,W["default"])(Nt).getInstance(),on.initialize(),on.setConfig({abrRulesCollection:t,scheduleRulesCollection:n,synchronizationRulesCollection:e}),rn=(0,c["default"])(Nt).getInstance(),rn.setConfig({capabilities:nn,manifestLoader:St(),manifestModel:(0,k["default"])(Nt).getInstance(),dashManifestModel:un,protectionController:Qt,adapter:Jt,metricsModel:Zt,dashMetrics:sn,liveEdgeFinder:(0,y["default"])(Nt).getInstance(),mediaSourceController:(0,ee["default"])(Nt).getInstance(),timeSyncController:(0,K["default"])(Nt).getInstance(),virtualBuffer:i,errHandler:tn,timelineConverter:(0,be["default"])(Nt).getInstance()}),rn.initialize(Yt,qt),Wt.setConfig({abrRulesCollection:t,rulesController:on,streamController:rn})}function St(){return(0,h["default"])(Nt).create({errHandler:tn,parser:jt(),metricsModel:Zt,requestModifier:(0,O["default"])(Nt).getInstance()})}function jt(){return(0,he["default"])(Nt).create()}function Ct(){return Jt=(0,fe["default"])(Nt).getInstance(),Jt.initialize(),Jt.setConfig({dashManifestModel:un}),Jt}function Mt(){if(Qt)return Qt;var e=dashjs.Protection;if("function"==typeof e){var t=e(Nt).create();return ae["default"].extend(e.events),ue["default"].extend(e.events,{publicOnly:!0}),Qt=t.createProtectionSystem({log:Ut,videoModel:ln,capabilities:nn,eventBus:Ft,adapter:Jt})}return null}function Ot(){if($t)return $t;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Nt).create();return $t=t.createMetricsReporting({log:Ut,eventBus:Ft,mediaElement:ln.getElement(),dashManifestModel:un,metricsModel:Zt})}return null}function xt(){var e=Zt.getReadOnlyMetricsFor("video")||Zt.getReadOnlyMetricsFor("audio");return sn.getCurrentDVRInfo(e)}function At(e){var t,n,r=xt();return r?(t=r.manifestInfo.availableFrom.getTime()/1e3,n=e+(t+r.range.start)):0}function It(){if(!zt)throw kt;var e=rn.getActiveStreamInfo();return e?rn.getStreamById(e.id):null}function Dt(){if(!zt){if(!Gt)throw Lt;if(!Kt||!Vt)throw"Missing view or source.";zt=!0,Ut("Playback Initialized"),wt(),"string"==typeof Vt?rn.load(Vt):rn.loadWithManifest(Vt)}}var Pt="2.0.0",kt="You must first call play() to init playback before calling this method",Rt="You must first call attachView() to set the video element before calling this method",Lt="MediaPlayer not initialized!",Nt=this.context,Ft=(0,ie["default"])(Nt).getInstance(),Bt=(0,ne["default"])(Nt).getInstance(),Ut=Bt.log,Ht=void 0,Kt=void 0,Vt=void 0,qt=void 0,Gt=void 0,zt=void 0,Yt=void 0,Wt=void 0,Xt=void 0,Qt=void 0,$t=void 0,Jt=void 0,Zt=void 0,en=void 0,tn=void 0,nn=void 0,rn=void 0,on=void 0,an=void 0,sn=void 0,un=void 0,ln=void 0,cn=void 0;return Ht={initialize:t,on:B,off:H,extend:N,attachView:vt,attachSource:bt,isReady:n,play:r,isPaused:o,pause:i,isSeeking:s,seek:w,setMute:l,isMuted:d,setVolume:p,getVolume:g,time:j,duration:M,timeAsUTC:x,durationAsUTC:I,getDVRWindowSize:_,getDVRSeekOffset:T,convertToTimeCode:R,formatUTC:P,getVersion:V,getDebug:G,getBufferLength:m,getVideoModel:Y,getVideoContainer:X,setLiveDelayFragmentCount:$,useSuggestedPresentationDelay:Z,enableLastBitrateCaching:te,enableLastMediaSettingsCaching:re,setMaxAllowedBitrateFor:oe,getMaxAllowedBitrateFor:se,setMaxAllowedRepresentationRatioFor:le,getMaxAllowedRepresentationRatioFor:de,setAutoPlay:pe,getAutoPlay:ge,setScheduleWhilePaused:me,getScheduleWhilePaused:_e,getDashMetrics:Te,getMetricsFor:Ee,getQualityFor:we,setQualityFor:Se,getLimitBitrateByPortal:je,setLimitBitrateByPortal:Ce,setTextTrack:Me,getBitrateInfoListFor:Oe,setInitialBitrateFor:xe,getInitialBitrateFor:Ae,setInitialRepresentationRatioFor:Ie,getInitialRepresentationRatioFor:De,getStreamsFromManifest:Pe,getTracksFor:ke,getTracksForTypeFromManifest:Re,getCurrentTrackFor:Le,setInitialMediaSettingsFor:Ne,getInitialMediaSettingsFor:Fe,setCurrentTrack:Be,getTrackSwitchModeFor:Ue,setTrackSwitchModeFor:He,setSelectionModeForInitialTrack:Ke,getSelectionModeForInitialTrack:Ve,getAutoSwitchQuality:qe,setAutoSwitchQuality:Ge,getAutoSwitchQualityFor:ze,setAutoSwitchQualityFor:Ye,enableBufferOccupancyABR:We,setBandwidthSafetyFactor:ut,getBandwidthSafetyFactor:lt,setAbandonLoadTimeout:ct,retrieveManifest:Xe,addUTCTimingSource:Qe,removeUTCTimingSource:$e,clearDefaultUTCTimingSources:Je,restoreDefaultUTCTimingSources:Ze,setBufferToKeep:tt,setBufferPruningInterval:nt,setStableBufferTime:rt,setBufferTimeAtTopQuality:it,setFragmentLoaderRetryAttempts:dt,setFragmentLoaderRetryInterval:ft,setBufferTimeAtTopQualityLongForm:ot,setLongFormContentDurationThreshold:at,setRichBufferThreshold:st,getProtectionController:pt,attachProtectionController:ht,setProtectionData:gt,enableManifestDateHeaderTimeSource:et,displayCaptionsOnTop:yt,attachVideoContainer:mt,attachTTMLRenderingDiv:_t,reset:Tt},e(),Ht}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../dash/vo/UTCTiming.js"),a=r(o),s=e("./controllers/PlaybackController.js"),u=r(s),l=e("./controllers/StreamController.js"),c=r(l),d=e("./controllers/MediaController.js"),f=r(d),p=e("./ManifestLoader.js"),h=r(p),g=e("./utils/LiveEdgeFinder.js"),y=r(g),m=e("./utils/ErrorHandler.js"),v=r(m),_=e("./utils/Capabilities.js"),b=r(_),T=e("./TextTracks.js"),E=r(T),w=e("./controllers/SourceBufferController.js"),S=r(w),j=e("./VirtualBuffer.js"),C=r(j),M=e("./utils/RequestModifier.js"),O=r(M),x=e("./TextSourceBuffer.js"),A=r(x),I=e("./models/URIQueryAndFragmentModel.js"),D=r(I),P=e("./models/ManifestModel.js"),k=r(P),R=e("./models/MediaPlayerModel.js"),L=r(R),N=e("./models/MetricsModel.js"),F=r(N),B=e("./controllers/AbrController.js"),U=r(B),H=e("./controllers/TimeSyncController.js"),K=r(H),V=e("./rules/abr/ABRRulesCollection.js"),q=r(V),G=e("./models/VideoModel.js"),z=r(G),Y=e("./rules/RulesController.js"),W=r(Y),X=e("./rules/scheduling/ScheduleRulesCollection.js"),Q=r(X),$=e("./rules/synchronization/SynchronizationRulesCollection.js"),J=r($),Z=e("./controllers/MediaSourceController.js"),ee=r(Z),te=e("./../core/Debug.js"),ne=r(te),re=e("./../core/EventBus.js"),ie=r(re),oe=e("./../core/events/Events.js"),ae=r(oe),se=e("./MediaPlayerEvents.js"),ue=r(se),le=e("../core/FactoryMaker.js"),ce=r(le),de=e("../dash/DashAdapter.js"),fe=r(de),pe=e("../dash/DashParser.js"),he=r(pe),ge=e("../dash/models/DashManifestModel.js"),ye=r(ge),me=e("../dash/DashMetrics.js"),ve=r(me),_e=e("../dash/utils/TimelineConverter.js"),be=r(_e);i.__dashjs_factory_name="MediaPlayer";var Te=ce["default"].getClassFactory(i);Te.events=ue["default"],n["default"]=Te,t.exports=n["default"]},{"../core/FactoryMaker.js":9,"../dash/DashAdapter.js":13,"../dash/DashMetrics.js":15,"../dash/DashParser.js":16,"../dash/models/DashManifestModel.js":19,"../dash/utils/TimelineConverter.js":21,"../dash/vo/UTCTiming.js":29,"./../core/Debug.js":7,"./../core/EventBus.js":8,"./../core/events/Events.js":11,"./ManifestLoader.js":31,"./MediaPlayerEvents.js":34,"./TextSourceBuffer.js":38,"./TextTracks.js":39,"./VirtualBuffer.js":40,"./controllers/AbrController.js":42,"./controllers/MediaController.js":46,"./controllers/MediaSourceController.js":47,"./controllers/PlaybackController.js":48,"./controllers/SourceBufferController.js":50,"./controllers/StreamController.js":51,"./controllers/TimeSyncController.js":53,"./models/ManifestModel.js":79,"./models/MediaPlayerModel.js":80,"./models/MetricsModel.js":81,"./models/URIQueryAndFragmentModel.js":82,"./models/VideoModel.js":83,"./rules/RulesController.js":108,"./rules/abr/ABRRulesCollection.js":110,"./rules/scheduling/ScheduleRulesCollection.js":119,"./rules/synchronization/SynchronizationRulesCollection.js":122,"./utils/Capabilities.js":124,"./utils/ErrorHandler.js":127,"./utils/LiveEdgeFinder.js":129,"./utils/RequestModifier.js":130}],34:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},s=e("../core/events/EventsBase.js"),u=r(s),l=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFER_EMPTY="bufferstalled",this.BUFFER_LOADED="bufferloaded",this.ERROR="error",this.LOG="log",this.MANIFEST_LOADED="manifestloaded",this.METRICS_CHANGED="metricschanged",this.METRIC_CHANGED="metricchanged",this.METRIC_ADDED="metricadded",this.METRIC_UPDATED="metricupdated",this.PERIOD_SWITCH_COMPLETED="streamswitchcompleted",this.PERIOD_SWITCH_STARTED="streamswitchstarted",this.STREAM_INITIALIZED="streaminitialized",this.TEXT_TRACKS_ADDED="alltexttracksadded",this.TEXT_TRACK_ADDED="texttrackadded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{"../core/events/EventsBase.js":12}],35:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i,o=e.id||e.name||"video element";if(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==r})[0],!t&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return n=n||{},i=(0,s["default"])(n).create(),i.initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+o+" to dash.js player and added content: "+t.src),e._dashjs_player=i,i}function t(t,i){var o=[];t=t||"[data-dashjs-player]",i=i||document;for(var a=i.querySelectorAll(t),s=0;s<a.length;s++){var u=e(a[s],null);o.push(u)}for(var l=i.querySelectorAll('source[type="'+r+'"]'),s=0;s<l.length;s++){var c=n(l[s]),u=e(c,null);o.push(u)}return o}function n(e){for(var t=!0;t;){var n=e;if(t=!1,"video"===n.nodeName.toLowerCase())return n;e=n.parentNode,t=!0}}var r="application/dash+xml";return{create:e,createAll:t}}function o(){window.removeEventListener("load",o),u.createAll()}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MediaPlayer.js"),s=r(a),u=i(),l=window&&window.dashjs&&window.dashjs.skipAutoCreate;!l&&window&&window.addEventListener&&("complete"===window.document.readyState?u.createAll():window.addEventListener("load",o)),
n["default"]=u,t.exports=n["default"]},{"./MediaPlayer.js":33}],36:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){ae=[],se=!1,ue=!1,le=null,ce={},de=!1,fe=!1,he=(0,a["default"])(Q).getInstance(),ge=(0,E["default"])(Q).getInstance(),_e=(0,y["default"])(Q).getInstance(),ye=(0,c["default"])(Q).getInstance(),me=(0,h["default"])(Q).create(),be=(0,F["default"])(Q).getInstance(),J.on(D["default"].BUFFERING_COMPLETED,q,oe),J.on(D["default"].DATA_UPDATE_COMPLETED,G,oe)}function n(e,t){le=e,pe=t,pe&&(J.on(D["default"].KEY_ERROR,x,oe),J.on(D["default"].SERVER_CERTIFICATE_UPDATED,x,oe),J.on(D["default"].LICENSE_REQUEST_COMPLETE,x,oe),J.on(D["default"].KEY_SYSTEM_SELECTED,x,oe),J.on(D["default"].KEY_SESSION_CREATED,x,oe))}function r(e){se?V():(J.on(D["default"].CURRENT_TRACK_CHANGED,R,oe),U(e))}function i(){var e=ae.length,t=0;for(t;e>t;t++)ae[t].reset();ae=[],se=!1,ue=!1,w(),J.off(D["default"].CURRENT_TRACK_CHANGED,R,oe)}function o(){ge.pause(),me.reset(),he.abortSearch(),i(),ge=null,me=null,ye=null,_e=null,ee=null,Z=null,te=null,ne=null,$=null,re=null,de=!1,fe=!1,ce={},J.off(D["default"].DATA_UPDATE_COMPLETED,G,oe),J.off(D["default"].BUFFERING_COMPLETED,q,oe),J.off(D["default"].KEY_ERROR,x,oe),J.off(D["default"].SERVER_CERTIFICATE_UPDATED,x,oe),J.off(D["default"].LICENSE_REQUEST_COMPLETE,x,oe),J.off(D["default"].KEY_SYSTEM_SELECTED,x,oe),J.off(D["default"].KEY_SESSION_CREATED,x,oe)}function s(){return le.duration}function l(){return le.start}function d(){return le.index}function p(){return le.id}function g(){return le}function m(e){return null!==K(e)}function _(e){var t=K(e);return _e.getBitrateList(t)}function T(){ve&&ve.start()}function w(){ve&&ve.reset()}function j(){return se}function M(){return fe}function x(e){e.error&&(re.mediaKeySessionError(e.error),$(e.error),o())}function I(e){return"text"===e.type?e.mimeType:e.type}function P(e,t,n){var r,i,o=e.type;if("muxed"===o&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",$(i),re.manifestError(i,"multiplexedrep",Z.getValue()),!1;if("text"===o||"fragmentedText"===o||"embeddedText"===o)return!0;if(r=e.codec,$(o+" codec: "+r),e.contentProtection&&!ne.supportsEncryptedMedia())re.capabilityError("encryptedmedia");else if(!ne.supportsCodec((0,v["default"])(Q).getInstance().getElement(),r))return i=o+"Codec ("+r+") is not supported.",re.manifestError(i,"codec",n),$(i),!1;return!0}function R(e){if(e.newMediaInfo.streamInfo.id===le.id){var t=z(e.oldMediaInfo);if(t){var n=ge.getTime(),r=t.getBuffer(),i=e.newMediaInfo,o=Z.getValue(),a=ae.indexOf(t),s=t.getMediaSource();"fragmentedText"!==i.type?(t.reset(!0),N(i,o,s,{buffer:r,replaceIdx:a,currentTime:n}),ge.seek(ge.getTime())):t.updateMediaInfo(o,i)}}}function L(){var e=(0,C["default"])(Q).getInstance();e.initialize();var t=(0,S["default"])(Q).create({segmentBaseLoader:e,timelineConverter:ie,dashMetrics:(0,O["default"])(Q).getInstance(),metricsModel:(0,b["default"])(Q).getInstance()});return t}function N(e,t,n,r){var i=(0,u["default"])(Q).create({indexHandler:L(),timelineConverter:ie,adapter:te,manifestModel:Z}),o=te.getAllMediaInfoForType(t,le,e.type);if(i.initialize(I(e),me,n,oe,ve),_e.updateTopQualityIndex(e),r?(i.setBuffer(r.buffer),ae[r.replaceIdx]=i,i.setIndexHandlerTime(r.currentTime)):ae.push(i),"text"===e.type||"fragmentedText"===e.type){for(var a,s=0;s<o.length;s++)o[s].index===e.index&&(a=s),i.updateMediaInfo(t,o[s]);"fragmentedText"===e.type&&i.updateMediaInfo(t,o[a])}else i.updateMediaInfo(t,e);return i}function B(e,t){var n,r=Z.getValue(),i=te.getAllMediaInfoForType(r,le,e),o=null;if(!i||0===i.length)return void $("No "+e+" data.");for(var a=0,s=i.length;s>a;a++)if(o=i[a],"embeddedText"===e)be.addEmbeddedTrack(o);else{if(!P(o,t,r))continue;ye.isMultiTrackSupportedByType(o.type)&&ye.addTrack(o,le)}"embeddedText"!==e&&0!==ye.getTracksFor(e,le).length&&(ye.checkInitialMediaSettings(le),n=ye.getCurrentTrackFor(e,le),N(n,r,t))}function U(e){var t,n=Z.getValue();if(ve=(0,f["default"])(Q).getInstance(),ve.initialize(),ve.setConfig({manifestModel:Z,manifestUpdater:ee}),t=te.getEventsFor(n,le),ve.addInlineEvents(t),de=!0,B("video",e),B("audio",e),B("text",e),B("fragmentedText",e),B("embeddedText",e),B("muxed",e),V(),ue=!0,de=!1,0===ae.length){var r="No streams to play.";re.manifestError(r,"nostreams",n),$(r)}else he.initialize(ie,ae[0]),H()}function H(){var e=ae.length,t=!!ce.audio||!!ce.video,n=t?new Error(X,"Data update failed",null):null,r=0;for(r;e>r;r++)if(ae[r].isUpdating()||de)return;fe=!0,se=!0,J.trigger(D["default"].STREAM_INITIALIZED,{streamInfo:le,error:n}),ue&&pe&&pe.initialize(Z.getValue(),K("audio"),K("video"))}function K(e){for(var t=ae.length,n=null,r=0;t>r;r++)if(n=ae[r],n.getType()===e)return n.getMediaInfo();return null}function V(){for(var e=0,t=ae.length;t>e;e++)ae[e].createBuffer()}function q(e){if(e.streamInfo===le){var t=Y(),n=t.length,r=0;for(r;n>r;r++)if(!t[r].isBufferingCompleted())return;J.trigger(D["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:le})}}function G(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===le&&(ce[t.getType()]=e.error,H())}function z(e){if(!e)return!1;var t=Y();return t.filter(function(t){return t.getType()===e.type})[0]}function Y(){var e,t,n=ae.length,r=[],i=0;for(i;n>i;i++)t=ae[i],e=t.getType(),("audio"===e||"video"===e||"fragmentedText"===e)&&r.push(t);return r}function W(e){var t,n,r,i=ae.length,o=Z.getValue(),a=0;for(se=!1,le=e,$("Manifest updated... set new data on buffers."),ve&&(n=te.getEventsFor(o,le),ve.addInlineEvents(n)),de=!0,fe=!1,a;i>a;a++)r=ae[a],t=te.getMediaInfoForType(o,le,r.getType()),_e.updateTopQualityIndex(t),r.updateMediaInfo(o,t);de=!1,H()}var X=1,Q=this.context,$=(0,k["default"])(Q).getInstance().log,J=(0,A["default"])(Q).getInstance(),Z=e.manifestModel,ee=e.manifestUpdater,te=e.adapter,ne=e.capabilities,re=e.errHandler,ie=e.timelineConverter,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,fe=void 0,pe=void 0,he=void 0,ge=void 0,ye=void 0,me=void 0,ve=void 0,_e=void 0,be=void 0;return oe={initialize:n,activate:r,deactivate:i,getDuration:s,getStartTime:l,getStreamIndex:d,getId:p,getStreamInfo:g,hasMedia:m,getBitrateListFor:_,startEventController:T,resetEventController:w,isActivated:j,isInitialized:M,updateData:W,reset:o,getProcessors:Y},t(),oe}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./utils/LiveEdgeFinder.js"),a=r(o),s=e("./StreamProcessor.js"),u=r(s),l=e("./controllers/MediaController.js"),c=r(l),d=e("./controllers/EventController.js"),f=r(d),p=e("./controllers/FragmentController.js"),h=r(p),g=e("./controllers/AbrController.js"),y=r(g),m=e("./models/VideoModel.js"),v=r(m),_=e("./models/MetricsModel.js"),b=r(_),T=e("./controllers/PlaybackController.js"),E=r(T),w=e("../dash/DashHandler.js"),S=r(w),j=e("../dash/SegmentBaseLoader.js"),C=r(j),M=e("../dash/DashMetrics.js"),O=r(M),x=e("../core/EventBus.js"),A=r(x),I=e("../core/events/Events.js"),D=r(I),P=e("../core/Debug.js"),k=r(P),R=e("../core/FactoryMaker.js"),L=r(R),N=e("./TextSourceBuffer.js"),F=r(N);i.__dashjs_factory_name="Stream",n["default"]=L["default"].getClassFactory(i),t.exports=n["default"]},{"../core/Debug.js":7,"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11,"../dash/DashHandler.js":14,"../dash/DashMetrics.js":15,"../dash/SegmentBaseLoader.js":17,"./StreamProcessor.js":37,"./TextSourceBuffer.js":38,"./controllers/AbrController.js":42,"./controllers/EventController.js":44,"./controllers/FragmentController.js":45,"./controllers/MediaController.js":46,"./controllers/PlaybackController.js":48,"./models/MetricsModel.js":81,"./models/VideoModel.js":83,"./utils/LiveEdgeFinder.js":129}],37:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){ue=[]}function n(e,t,n,r,i){se=e,le=r,ce=i,ge=t,oe=le.getStreamInfo().manifestInfo.isDynamic,de=(0,a["default"])(Z).getInstance(),de.initialize(se,this),fe=J(e),fe.initialize(se,n,this),pe=(0,v["default"])(Z).create({metricsModel:(0,C["default"])(Z).getInstance(),manifestModel:re,adapter:ne,dashMetrics:(0,K["default"])(Z).getInstance(),dashManifestModel:(0,U["default"])(Z).getInstance(),timelineConverter:te,scheduleRulesCollection:(0,E["default"])(Z).getInstance(),rulesController:(0,b["default"])(Z).getInstance(),mediaPlayerModel:(0,S["default"])(Z).getInstance()}),pe.initialize(se,this),ye=(0,O["default"])(Z).create({metricsModel:(0,C["default"])(Z).getInstance(),errHandler:(0,z["default"])(Z).getInstance(),requestModifier:(0,A["default"])(Z).getInstance()}),ee.initialize(this),ee.setCurrentTime((0,c["default"])(Z).getInstance().getStreamStartTime(j())),he=(0,q["default"])(Z).create(),he.initialize(this),me=pe.getFragmentModel(),me.setLoader(ye)}function r(e){me.reset(),ee.reset(),fe.reset(e),pe.reset(),he.reset(),fe=null,pe=null,he=null,ge=null,ye=null,me=null,ce=null,le=null,oe=null,ae=null,ue=[],se=null}function i(){return he.isUpdating()}function o(){return se}function s(){return de}function l(){return he}function d(){return ye}function p(){return ee}function g(){return ge}function m(){return fe.getBuffer()}function _(e){fe.setBuffer(e)}function T(){return fe}function w(){return me}function j(){return le.getStreamInfo()}function M(e,t){t===ae||t&&ae&&t.type!==ae.type||(ae=t),-1===ue.indexOf(t)&&ue.push(t),ne.updateData(e,this)}function x(){return ue}function I(){return ae}function P(){return fe.getMediaSource()}function R(){return pe}function N(){return ce}function B(){pe.start()}function H(){pe.stop()}function V(){return ne.getIndexHandlerTime(this)}function G(e){ne.setIndexHandlerTime(this,e)}function Y(){return ne.getCurrentRepresentationInfo(re.getValue(),he)}function W(e){return ne.getRepresentationInfoForQuality(re.getValue(),he,e)}function X(){return fe.getIsBufferingCompleted()}function Q(){return fe.getBuffer()||fe.createBuffer(ae)}function $(){return oe}function J(e){var t=null;return t="video"===e||"audio"===e||"fragmentedText"===e?(0,u["default"])(Z).create({metricsModel:(0,C["default"])(Z).getInstance(),manifestModel:re,sourceBufferController:(0,D["default"])(Z).getInstance(),errHandler:(0,z["default"])(Z).getInstance(),mediaSourceController:(0,F["default"])(Z).getInstance(),streamController:(0,f["default"])(Z).getInstance(),mediaController:(0,h["default"])(Z).getInstance(),adapter:ne,virtualBuffer:(0,L["default"])(Z).getInstance(),textSourceBuffer:(0,k["default"])(Z).getInstance()}):(0,y["default"])(Z).create({errHandler:(0,z["default"])(Z).getInstance(),sourceBufferController:(0,D["default"])(Z).getInstance()})}var Z=this.context,ee=e.indexHandler,te=e.timelineConverter,ne=e.adapter,re=e.manifestModel,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,fe=void 0,pe=void 0,he=void 0,ge=void 0,ye=void 0,me=void 0;return ie={initialize:n,isUpdating:i,getType:o,getBufferController:T,getABRController:s,getFragmentLoader:d,getFragmentModel:w,getScheduleController:R,getEventController:N,getFragmentController:g,getRepresentationController:l,getIndexHandler:p,getIndexHandlerTime:V,setIndexHandlerTime:G,getCurrentRepresentationInfo:Y,getRepresentationInfoForQuality:W,isBufferingCompleted:X,createBuffer:Q,getStreamInfo:j,updateMediaInfo:M,getMediaInfoArr:x,getMediaInfo:I,getMediaSource:P,getBuffer:m,setBuffer:_,start:B,stop:H,isDynamic:$,reset:r},t(),ie}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./controllers/AbrController.js"),a=r(o),s=e("./controllers/BufferController.js"),u=r(s),l=e("./controllers/PlaybackController.js"),c=r(l),d=e("./controllers/StreamController.js"),f=r(d),p=e("./controllers/MediaController.js"),h=r(p),g=e("./controllers/TextController.js"),y=r(g),m=e("./controllers/ScheduleController.js"),v=r(m),_=e("./rules/RulesController.js"),b=r(_),T=e("./rules/scheduling/ScheduleRulesCollection.js"),E=r(T),w=e("./models/MediaPlayerModel.js"),S=r(w),j=e("./models/MetricsModel.js"),C=r(j),M=e("./FragmentLoader.js"),O=r(M),x=e("./utils/RequestModifier.js"),A=r(x),I=e("./controllers/SourceBufferController"),D=r(I),P=e("./TextSourceBuffer.js"),k=r(P),R=e("./VirtualBuffer.js"),L=r(R),N=e("./controllers/MediaSourceController.js"),F=r(N),B=e("../dash/models/DashManifestModel.js"),U=r(B),H=e("../dash/DashMetrics.js"),K=r(H),V=e("../dash/controllers/RepresentationController.js"),q=r(V),G=e("./utils/ErrorHandler.js"),z=r(G),Y=e("../core/FactoryMaker.js"),W=r(Y);i.__dashjs_factory_name="StreamProcessor",n["default"]=W["default"].getClassFactory(i),t.exports=n["default"]},{"../core/FactoryMaker.js":9,"../dash/DashMetrics.js":15,"../dash/controllers/RepresentationController.js":18,"../dash/models/DashManifestModel.js":19,"./FragmentLoader.js":30,"./TextSourceBuffer.js":38,"./VirtualBuffer.js":40,"./controllers/AbrController.js":42,"./controllers/BufferController.js":43,"./controllers/MediaController.js":46,"./controllers/MediaSourceController.js":47,"./controllers/PlaybackController.js":48,"./controllers/ScheduleController.js":49,"./controllers/SourceBufferController":50,"./controllers/StreamController.js":51,"./controllers/TextController.js":52,"./models/MediaPlayerModel.js":80,"./models/MetricsModel.js":81,"./rules/RulesController.js":108,"./rules/scheduling/ScheduleRulesCollection.js":119,"./utils/ErrorHandler.js":127,"./utils/RequestModifier.js":130}],38:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,n){F=!1,B=null,z=null,Y=!1,W=NaN,X=[],J=null,A||t();var r=n.getStreamProcessor();if(V=r.getMediaInfoArr(),q.setConfig({videoModel:Q}),q.initialize(),G=!L.getIsTextTrack(e),P=(0,c["default"])(O).getInstance(),K=(0,u["default"])(O).getInstance(),K.setConfig({boxParser:P}),G){z=r.getFragmentModel(),this.buffered=(0,f["default"])(O).create(),X=N.getTracksFor("fragmentedText",$.getActiveStreamInfo());for(var i=N.getCurrentTrackFor("fragmentedText",$.getActiveStreamInfo()),o=0;o<X.length;o++)if(X[o]===i){Z=o;break}}}function t(){ee=[],V=[],Q=(0,v["default"])(O).getInstance(),q=(0,b["default"])(O).getInstance(),q.setConfig({videoModel:Q}),q.initialize(),P=(0,c["default"])(O).getInstance(),K=(0,u["default"])(O).getInstance(),K.setConfig({boxParser:P}),G=!1,Z=null,te=!1,ne=0,oe=[],ie=[],re=null,A=!0}function n(e,t){function n(e,t){var n=new a["default"],r={subtitle:"subtitles",caption:"captions"},i=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption},o=function(){var e=!1;return t.codec&&t.codec.search("stpp")>=0&&(e=!0),t.mimeType&&t.mimeType.search("ttml")>=0&&(e=!0),e};n.captionData=e,n.lang=t.lang,n.label=t.id,n.index=t.index,n.isTTML=o(),n.video=Q.getElement(),n.defaultTrack=C(t),n.isFragmented=G,n.isEmbedded=!!t.isEmbedded,n.kind=i();var s=(V?V.length:0)+ee.length;q.addTextTrack(n,s)}var i,o,s,u,l,c=t.mediaInfo,d=c.type,f=c.mimeType;if("fragmentedText"===d)if(Y)for(u=K.getSamplesInfo(e),o=u.sampleList,s=0;s<o.length;s++){J||(J=o[0].cts-t.start*W),o[s].cts-=J,this.buffered.add(o[s].cts/W,(o[s].cts+o[s].duration)/W);var p=new DataView(e,o[s].offset,o[s].size);l=E["default"].Utils.dataViewToString(p,"utf-8"),B=null!==B?B:M(f);try{i=B.parse(l),q.addCaptions(Z,J/W,i)}catch(g){}}else{for(Y=!0,s=0;s<V.length;s++)n(null,V[s]);W=K.getMediaTimescaleFromMoov(e)}else if("text"===d){var p=new DataView(e,0,e.byteLength);l=E["default"].Utils.dataViewToString(p,"utf-8");try{i=M(f).parse(l),n(i,c)}catch(g){k.timedTextError(g,"parse",l)}}else if("video"===d)if("InitializationSegment"===t.segmentType){if(0===ne)for(ne=K.getMediaTimescaleFromMoov(e),s=0;s<ee.length;s++)n(null,ee[s])}else{if(0===ne)return void x("CEA-608: No timescale for embeddedTextTrack yet");var y=function(e,t){function n(e,n,r){var i=null;if(Q.getTTMLRenderingDiv())i=h(Q.getElement(),e,n,r);else{var o=r.getDisplayText();i=[{start:e,end:n,data:o,styles:{}}]}i&&q.addCaptions(t,0,i)}return n};u=K.getSamplesInfo(e);var m=u.sequenceNumber;if(!oe[0]&&!oe[1]){var v=void 0,_=void 0,b=void 0;for(s=0;s<ee.length;s++){if("CC1"===ee[s].id?(v=0,b=q.getTrackIdxForId("CC1")):"CC3"===ee[s].id&&(v=1,b=q.getTrackIdxForId("CC3")),-1===b)return void console.log("CEA-608: data before track is ready.");_=y(this,b),oe[s]=new S["default"].Cea608Parser(s,{newCue:_},null)}}if(ne&&-1==ie.indexOf(m)){if(null!==re&&m!==re+1)for(s=0;s<oe.length;s++)oe[s]&&oe[s].reset();for(var T=r(e),w=0;w<oe.length;w++){var j=T.fields[w],O=oe[w];if(O){for(s=0;s<j.length;s++)O.addData(j[s][0]/ne,j[s][1]);T.endTime&&O.cueSplitAtTime(T.endTime/ne)}}re=m,ie.push(m)}}else x("Warning: Non-supported text type: "+d)}function r(e){var t=function(e,t,n){var r=e.length;if(r>0){if(t>=e[r-1][0])e.push([t,n]);else for(var i=r-1;i>=0;i--)if(t<e[i][0]){e.splice(i,0,[t,n]);break}}else e.push([t,n])},n=P.parse(e),r=n.getBox("moof"),i=n.getBox("tfdt"),o=n.getBoxes("trun"),a=null;if(0===o.length)return null;a=o[0],o.length>1&&console.log("Warning: Too many truns");for(var s=r.offset+a.data_offset,u=a.sample_count,l=s,c=i.baseMediaDecodeTime,d=new DataView(e),f={startTime:null,endTime:null,fields:[[],[]]},p=0,h=0;u>h;h++){for(var g=a.samples[h],y=c+p+g.sample_composition_time_offset,m=S["default"].findCea608Nalus(d,l,g.sample_size),v=0;v<m.length;v++)for(var _=S["default"].extractCea608DataFromRange(d,m[v]),b=0;2>b;b++)_[b].length>0&&t(f.fields[b],y,_[b]);p+=g.sample_duration,l+=g.sample_size}var T=c+p;return f.startTime=c,f.endTime=T,f}function i(e){for(var t="",n=0;n<e.length;++n){var r=e[n];t+=r.uchar}var i=t.length,o=t.replace(/^\s+/,"").length;return i-o}function o(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function s(e){return"red"==e?"rgb(255, 0, 0)":"green"==e?"rgb(0, 255, 0)":"blue"==e?"rgb(0, 0, 255)":"cyan"==e?"rgb(0, 255, 255)":"magenta"==e?"rgb(255, 0, 255)":"yellow"==e?"rgb(255, 255, 0)":"white"==e?"rgb(255, 255, 255)":"black"==e?"rgb(0, 0, 0)":e}function l(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?s(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?s(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function d(e){var t=e.replace(/^\s+/g,"");return t}function p(e){var t=e.replace(/\s+$/g,"");return t}function h(e,t,n,r){var a=null,s=null,u=!1,c=-1,f={start:t,end:n,spans:[]},h="style_cea608_white_black",g={},y={},m=[],v=void 0,_=void 0;for(v=0;15>v;++v){var b=r.rows[v],T="",E=null;if(!1===b.isEmpty()){var w=i(b.chars);null===a&&(a={x:w,y1:v,y2:v+1,p:[]}),w!==c&&u&&(a.p.push(f),f={start:t,end:n,spans:[]},a.y2=v,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===g.hasOwnProperty(a.name)?(m.push(a),g[a.name]=a):(s=g[a.name],s.p.contat(a.p)),a={x:w,y1:v,y2:v+1,p:[]});for(var S=0;S<b.chars.length;++S){var j=b.chars[S],C=j.penState;if(null===E||!C.equals(E)){T.trim().length>0&&(f.spans.push({name:h,line:T,row:v}),T="");var M="style_cea608_"+C.foreground+"_"+C.background;C.underline&&(M+="_underline"),C.italics&&(M+="_italics"),y.hasOwnProperty(M)||(y[M]=JSON.parse(JSON.stringify(C))),E=C,h=M}T+=j.uchar}T.trim().length>0&&f.spans.push({name:h,line:T,row:v}),u=!0,c=w}else u=!1,c=-1,a&&(a.p.push(f),f={start:t,end:n,spans:[]},a.y2=v,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===g.hasOwnProperty(a.name)?(m.push(a),g[a.name]=a):(s=g[a.name],s.p.contat(a.p)),a=null)}a&&(a.p.push(f),a.y2=v+1,a.name="region_"+a.x+"_"+a.y1+"_"+a.y2,!1===g.hasOwnProperty(a.name)?(m.push(a),g[a.name]=a):(s=g[a.name],s.p.contat(a.p)),a=null);var O=[];for(v=0;v<m.length;++v){var x=m[v],A="sub_"+I++,D=document.createElement("div");D.id="subtitle_"+A;var P=o(x);D.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+P;var k=document.createElement("div");k.className="paragraph bodyStyle",k.style.cssText=l(e);var R=document.createElement("div");R.className="cueUniWrapper",R.style.cssText="unicode-bidi: normal; direction: ltr;";for(var L=0;L<x.p.length;++L){var N=x.p[L],F=0;for(_=0;_<N.spans.length;++_){var B=N.spans[_];if(B.line.length>0){if(0!==_&&F!=B.row){var U=document.createElement("br");U.className="lineBreak",R.appendChild(U)}var H=!1;F===B.row&&(H=!0),F=B.row;var K=y[B.name],V=document.createElement("span");V.className="spanPadding "+B.name+" customSpanColor",V.style.cssText=l(e,K),0!==_&&H?_===N.spans.length-1?V.textContent=p(B.line):V.textContent=B.line:0===_&&N.spans.length>1&&B.row===N.spans[1].row?V.textContent=d(B.line):V.textContent=B.line.trim(),R.appendChild(V)}}}k.appendChild(R),D.appendChild(k);var q={bodyStyle:90};for(_ in y)y.hasOwnProperty(_)&&(q[_]=90);O.push({type:"html",start:t,end:n,cueHTMLElement:D,cueID:A,cellResolution:[32,15],isFromCEA608:!0,regions:m,regionID:x.name,videoHeight:e.videoHeight,videoWidth:e.videoWidth,fontSize:q||{defaultFontSize:"100"},lineHeight:{},linePadding:{}})}return O}function g(){q.deleteAllTextTracks(),F=!1,B=null,K=null,V=null,q=null,G=!1,z=null,Y=!1,W=NaN,X=[],Q=null,$=null,A=!1,ee=null}function m(e){A||t(),"CC1"===e.id||"CC3"===e.id?ee.push(e):x("Warning: Embedded track "+e.id+" not supported!")}function _(){A=!1,ee=[],oe=[null,null],ie=[],re=null}function T(){return F}function w(e){e&&(e.errHandler&&(k=e.errHandler),e.adapter&&(R=e.adapter),e.dashManifestModel&&(L=e.dashManifestModel),e.mediaController&&(N=e.mediaController),e.videoModel&&(Q=e.videoModel),e.streamController&&($=e.streamController),e.textTracks&&(q=e.textTracks),e.VTTParser&&(U=e.VTTParser),e.TTMLParser&&(H=e.TTMLParser))}function j(){for(var e=Q.getElement(),t=e.textTracks,n=t.length,r=n-ee.length,i=q.getCurrentTrackIdx(),o=0;n>o;o++){var a=t[o];if(F="showing"!==a.mode,"showing"===a.mode){if(i!==o&&(q.setCurrentTrackIdx(o),q.addCaptions(o,0,null),G&&r>o)){var s=N.getCurrentTrackFor("fragmentedText",$.getActiveStreamInfo()),u=X[o];u!==s&&(z.abortRequests(),q.deleteTrackCues(s),N.setTrack(u),Z=o)}break}}F&&q.setCurrentTrackIdx(-1)}function C(e){var t=!1;return ee.length>1?t=e.id&&"CC1"===e.id:1===ee.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):t=e.index===V[0].index,t}function M(e){var t;return"text/vtt"===e?t=U:("application/ttml+xml"===e||"application/mp4"===e)&&(t=H,t.setConfig({videoModel:Q})),t}var O=this.context,x=(0,y["default"])(O).getInstance().log,A=!1,I=0,D=void 0,P=void 0,k=void 0,R=void 0,L=void 0,N=void 0,F=void 0,B=void 0,U=void 0,H=void 0,K=void 0,V=void 0,q=void 0,G=void 0,z=void 0,Y=void 0,W=void 0,X=void 0,Q=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0;return D={initialize:e,append:n,abort:g,getAllTracksAreDisabled:T,setTextTrack:j,setConfig:w,addEmbeddedTrack:m,resetEmbedded:_}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./vo/TextTrackInfo.js"),a=r(o),s=e("../dash/utils/FragmentedTextBoxParser.js"),u=r(s),l=e("./utils/BoxParser.js"),c=r(l),d=e("./utils/CustomTimeRanges.js"),f=r(d),p=e("../core/FactoryMaker.js"),h=r(p),g=e("../core/Debug.js"),y=r(g),m=e("./models/VideoModel.js"),v=r(m),_=e("./TextTracks.js"),b=r(_),T=e("codem-isoboxer"),E=r(T),w=e("../../externals/cea608-parser.js"),S=r(w);i.__dashjs_factory_name="TextSourceBuffer",n["default"]=h["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../externals/cea608-parser.js":2,"../core/Debug.js":7,"../core/FactoryMaker.js":9,"../dash/utils/FragmentedTextBoxParser.js":20,"./TextTracks.js":39,"./models/VideoModel.js":83,"./utils/BoxParser.js":123,"./utils/CustomTimeRanges.js":125,"./vo/TextTrackInfo.js":142,"codem-isoboxer":6}],39:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){M=window.VTTCue||window.TextTrackCue,A=[],I=[],D=-1,P=0,k=0,R=0,L=0,N=null,F=null,H=!1,K=2147483647,B=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?U="fullscreenElement":void 0!==document.webkitIsFullScreen?U="webkitIsFullScreen":document.msFullscreenElement?U="msFullscreenElement":document.mozFullScreen&&(U="mozFullScreen")}function t(e){var t=A[e].kind,n=void 0!==A[e].label?A[e].label:A[e].lang,r=A[e].lang,i=B?document.createElement("track"):x.addTextTrack(t,n,r);return B&&(i.kind=t,i.label=n,i.srclang=r),i}function n(e){H=e,N&&!document[U]&&(N.style.zIndex=e?K:null)}function r(e,n){if(A.length===n)return void j("Trying to add too many tracks.");if(A.push(e),void 0===x&&(x=e.video),A.length===n){A.sort(function(e,t){return e.index-t.index}),N=O.getTTMLRenderingDiv();for(var r=-1,i=0;i<A.length;i++){var o=t.call(this,i);I.push(o),A[i].defaultTrack&&(o["default"]=!0,r=i),B&&x.appendChild(o);var a=x.textTracks[i];a.nonAddedCues=[],N&&(A[i].isTTML||A[i].isEmbedded)?a.renderingType="html":a.renderingType="default",this.addCaptions(i,0,A[i].captionData),S.trigger(u["default"].TEXT_TRACK_ADDED)}h.call(this,r),r>=0&&(x.textTracks[r].mode="showing",this.addCaptions(r,0,null)),S.trigger(u["default"].TEXT_TRACKS_ADDED,{index:D,tracks:A})}}function i(e,t,n,r,i,o){var a=e/t,s=n/r,u=0,l=0,c=0,d=0;a>s?(d=t,c=d/r*n,u=(e-c)/2,l=0):(c=e,d=c/n*r,u=0,l=(t-d)/2);var f=0,p=0,h=0,g=0,y=c/d;return y>i?(g=d,h=d/(1/i),f=(e-h)/2,p=0):(h=c,g=c/i,f=0,p=(t-g)/2),o?{x:f+.1*h,y:p+.1*g,w:.8*h,h:.8*g}:{x:f,y:p,w:h,h:g}}function o(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){if(!e.activeCues||0===e.activeCues.length)return;var t=x.clientWidth,n=x.clientHeight,r=1;e.cellResolution&&(r=e.cellResolution[0]/e.cellResolution[1]);var o=!1;e.isFromCEA608&&(r=3.5/3,o=!0);var a=i.call(this,x.clientWidth,x.clientHeight,x.videoWidth,x.videoHeight,r,o);if(t=a.w,n=a.h,t!=R||n!=L){P=a.x,k=a.y,R=t,L=n,N.style.left=P+"px",N.style.top=k+"px",N.style.width=R+"px",N.style.height=L+"px";for(var s=0;s<e.activeCues.length;++s){var u=e.activeCues[s];u.scaleCue(u)}U&&document[U]||H?N.style.zIndex=K:N.style.zIndex=null}}}function s(e){var t,n,r,i=R,o=L,a=[i/e.cellResolution[0],o/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){var s=e.linePadding[t];n=(s*a[0]).toString();for(var u=document.getElementsByClassName("spanPadding"),l=0;l<u.length;l++)u[l].style.cssText=u[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),u[l].style.cssText=u[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){var c=e.fontSize[t]/100;n=(c*a[1]).toString(),r="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var d=0;d<r.length;d++)r[d].style.cssText=r[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){var f=e.lineHeight[t]/100;n=(f*a[1]).toString(),r=document.getElementsByClassName(t);for(var p=0;p<r.length;p++)r[p].style.cssText=r[p].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}function l(e,t,n){var r=e>=0?x.textTracks[e]:null,i=this;if(r){if("showing"!==r.mode)return void(n&&n.length>0&&(r.nonAddedCues=r.nonAddedCues.concat(n)));if(n||(n=r.nonAddedCues,r.nonAddedCues=[]),n&&0!==n.length)for(var a in n){var u,l=n[a];r.cellResolution=l.cellResolution,r.isFromCEA608=l.isFromCEA608,F||"html"!=l.type||(F=setInterval(o.bind(this),500)),"image"==l.type?(u=new M(l.start-t,l.end-t,""),u.image=l.data,u.id=l.id,u.size=0,u.type="image",u.onenter=function(){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.className="cue-image",N?N.appendChild(e):x.parentNode.appendChild(e)},u.onexit=function(){var e,t,n;for(e=N?N:x.parentNode,n=e.childNodes,t=0;t<n.length;t++)n[t].id=="ttmlImage_"+this.id&&e.removeChild(n[t])}):"html"===l.type?(u=new M(l.start-t,l.end-t,""),u.cueHTMLElement=l.cueHTMLElement,u.regions=l.regions,u.regionID=l.regionID,u.cueID=l.cueID,u.videoWidth=l.videoWidth,u.videoHeight=l.videoHeight,u.cellResolution=l.cellResolution,u.fontSize=l.fontSize,u.lineHeight=l.lineHeight,u.linePadding=l.linePadding,u.scaleCue=s.bind(i),N.style.left=P+"px",N.style.top=k+"px",N.style.width=R+"px",N.style.height=L+"px",u.onenter=function(){"showing"==r.mode&&(N.appendChild(this.cueHTMLElement),s.call(i,this))},u.onexit=function(){for(var e=N.childNodes,t=0;t<e.length;++t)e[t].id=="subtitle_"+this.cueID&&N.removeChild(e[t])}):(u=new M(l.start-t,l.end-t,l.data),l.styles&&(void 0!==l.styles.align&&u.hasOwnProperty("align")&&(u.align=l.styles.align),void 0!==l.styles.line&&u.hasOwnProperty("line")&&(u.line=l.styles.line),void 0!==l.styles.position&&u.hasOwnProperty("position")&&(u.position=l.styles.position),void 0!==l.styles.size&&u.hasOwnProperty("size")&&(u.size=l.styles.size))),r.addCue(u)}}}function c(){return D>=0?x.textTracks[D]:null}function d(){return D}function p(e){for(var t=-1,n=0;n<x.textTracks.length;n++)if(x.textTracks[n].label===e){t=n;break}return t}function h(e){if(D=e,T.call(this),e>=0){var t=x.textTracks[e];"html"===t.renderingType?_.call(this):b.call(this)}else b.call(this)}function g(e){return x.textTracks[e]}function y(e){if(e.cues){for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r]);e.mode="disabled"}}function m(){for(var e=I.length,t=0;e>t;t++)if(B)x.removeChild(I[t]);else{var n=g.call(this,t);n.nonAddedCues=[],y.call(this,n)}I=[],A=[],F&&(clearInterval(F),F=null),T.call(this)}function v(e){x.removeChild(I[e]),I.splice(e,1)}function _(){if(B){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet;x.id?t.insertRule("#"+x.id+"::cue {background: transparent}",0):0!==x.classList.length?t.insertRule("."+x.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}}}function b(){if(B){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function T(){if(N)for(;N.firstChild;)N.removeChild(N.firstChild)}function E(e){e&&e.videoModel&&(O=e.videoModel)}var w=this.context,S=(0,a["default"])(w).getInstance(),j=(0,f["default"])(w).getInstance().log,C=void 0,M=void 0,O=void 0,x=void 0,A=void 0,I=void 0,D=void 0,P=void 0,k=void 0,R=void 0,L=void 0,N=void 0,F=void 0,B=void 0,U=void 0,H=void 0,K=void 0;return C={initialize:e,displayCConTop:n,addTextTrack:r,addCaptions:l,getTextTrack:g,getCurrentTextTrack:c,getCurrentTrackIdx:d,setCurrentTrackIdx:h,getTrackIdxForId:p,deleteTrackCues:y,deleteAllTextTracks:m,deleteTextTrack:v,setConfig:E}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../core/EventBus.js"),a=r(o),s=e("../core/events/Events.js"),u=r(s),l=e("../core/FactoryMaker.js"),c=r(l),d=e("../core/Debug.js"),f=r(d);i.__dashjs_factory_name="TextTracks",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"../core/Debug.js":7,"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11}],40:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){T={}}function t(e){var t=e.streamId,n=e.mediaInfo.type,r=e.segmentType,i=e.start,o=e.end;T[t]=T[t]||m(),T[t][n][r].push(e),p(T[t][n][r],"index"),isNaN(i)||isNaN(o)||(T[t][n].calculatedBufferedRanges.add(i,o),_.trigger(h["default"].CHUNK_APPENDED,{chunk:e,sender:this}))}function n(e,t){if(e&&t){var n,r,o=e.streamId,a=e.mediaInfo.type,s=T[o][a].actualBufferedRanges,u=i({streamId:o,mediaType:a,appended:!0,start:e.start})[0];if(u?(r=T[o][a].appended.indexOf(u),T[o][a].appended[r]=e):T[o][a].appended.push(e),p(T[o][a].appended,"start"),n=E.getRangeDifference(s,t),!n)return void(u?e.bufferedRange=u.bufferedRange:e.bufferedRange={
start:e.start,end:e.end});e.bufferedRange=n,s.add(n.start,n.end),u&&(e.bufferedRange.start=Math.min(u.bufferedRange.start,n.start),e.bufferedRange.end=Math.max(u.bufferedRange.end,n.end))}}function r(e,t){if(e){var n,r,o=e.streamId,a=e.mediaType,s=i({streamId:o,mediaType:a,appended:!0}),l=[];if(T[o][a].actualBufferedRanges=(0,u["default"])(v).create(),!t||0===t.length)return void(T[o][a].appended=[]);for(var c=0,d=t.length;d>c;c++)n=t.start(c),r=t.end(c),T[o][a].actualBufferedRanges.add(n,r),l=l.concat(y(s,{start:n,end:r},!0));T[o][a].appended=l}}function i(e){var t,n=g(e),r=e.segmentType,i=e.appended,o=e.removeOrigin,s=e.limit||Number.POSITIVE_INFINITY,u=(0,a["default"])(v).getInstance(),l=0,c=[];return n?(delete e.streamId,delete e.mediaType,delete e.segmentType,delete e.removeOrigin,delete e.limit,delete e.appended,t=i?n.appended:r?n[r]:[],c=t.filter(function(t,r,i){if(l>=s)return!1;for(var a in e){if("mediaInfo"===a)return u.isTracksEqual(t[a],e[a]);if(e.hasOwnProperty(a)&&t[a]!=e[a])return!1}return o&&(n.calculatedBufferedRanges.remove(t.start,t.end),i.splice(r,1)),l++,!0}),e.forRange&&(c=y(c,e.forRange,!1)),c):c}function o(e){return e.removeOrigin=!0,i(e)}function s(e){var t=e.type,n=0;for(var r in T)T.hasOwnProperty(r)&&(n+=E.getTotalBufferedTime({buffered:T[r][t].calculatedBufferedRanges}));return n}function l(e){e&&e.sourceBufferController&&(E=e.sourceBufferController)}function d(){T={}}function p(e,t){var n=function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0};e.sort(n)}function g(e){var t=e.streamId,n=e.mediaType;return T[t]?T[t][n]:null}function y(e,t,n){var r,i,o,a,s=t.start,u=t.end,l=[];return e.forEach(function(e){r=e.bufferedRange.start,i=e.bufferedRange.end,o=r>=s&&u>r,a=i>s&&u>=i,(o||a)&&(l.push(e),n&&(e.bufferedRange.start=o?r:s,e.bufferedRange.end=a?i:u))}),l}function m(){var e={};return e.audio={calculatedBufferedRanges:(0,u["default"])(v).create(),actualBufferedRanges:(0,u["default"])(v).create(),appended:[]},e.audio[c["default"].MEDIA_SEGMENT_TYPE]=[],e.audio[c["default"].INIT_SEGMENT_TYPE]=[],e.video={calculatedBufferedRanges:(0,u["default"])(v).create(),actualBufferedRanges:(0,u["default"])(v).create(),appended:[]},e.video[c["default"].MEDIA_SEGMENT_TYPE]=[],e.video[c["default"].INIT_SEGMENT_TYPE]=[],e.fragmentedText={calculatedBufferedRanges:(0,u["default"])(v).create(),actualBufferedRanges:(0,u["default"])(v).create(),appended:[]},e.fragmentedText[c["default"].MEDIA_SEGMENT_TYPE]=[],e.fragmentedText[c["default"].INIT_SEGMENT_TYPE]=[],e}var v=this.context,_=(0,f["default"])(v).getInstance(),b=void 0,T=void 0,E=void 0;return b={append:t,extract:o,getChunks:i,storeAppendedChunk:n,updateBufferedRanges:r,getTotalBufferLevel:s,setConfig:l,reset:d},e(),b}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./controllers/MediaController.js"),a=r(o),s=e("./utils/CustomTimeRanges.js"),u=r(s),l=e("./vo/metrics/HTTPRequest.js"),c=r(l),d=e("../core/EventBus.js"),f=r(d),p=e("../core/events/Events.js"),h=r(p),g=e("../core/FactoryMaker.js"),y=r(g);i.__dashjs_factory_name="VirtualBuffer",n["default"]=y["default"].getSingletonFactory(i),t.exports=n["default"]},{"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11,"./controllers/MediaController.js":46,"./utils/CustomTimeRanges.js":125,"./vo/metrics/HTTPRequest.js":150}],41:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t,i){e===o?(t.resolvedContent=null,t.resolved=!0,p.trigger(f["default"].XLINK_ELEMENT_LOADED,{element:t,resolveObject:i})):n(e,t,i,r)}function n(e,t,r,o){var s,l,c,h,v=new XMLHttpRequest,_=!0,b=!0,T=new Date,E=[],w=T,S=0;l=function(){v.status<200||v.status>299||(_=!1,y.addHttpRequest("stream",null,u["default"].XLINK_EXPANSION_TYPE,e,v.responseURL||null,null,T,v.firstByteDate||null,new Date,v.status,null,v.getAllResponseHeaders(),E),h=v.responseText,t.resolved=!0,h?(t.resolvedContent=h,p.trigger(f["default"].XLINK_ELEMENT_LOADED,{element:t,resolveObject:r})):(t.resolvedContent=null,p.trigger(f["default"].XLINK_ELEMENT_LOADED,{element:t,resolveObject:r,error:new a["default"](null,"Failed loading Xlink element: "+e,null)})))},s=function(){_&&(_=!1,y.addHttpRequest("stream",null,u["default"].XLINK_EXPANSION_TYPE,e,v.responseURL||null,null,T,v.firstByteDate||null,new Date,v.status,null,v.getAllResponseHeaders(),null),o>0?(d("Failed loading xLink content: "+e+", retry in "+i+"ms attempts: "+o),o--,setTimeout(function(){n(e,t,r,o)},i)):(d("Failed loading Xlink content: "+e+" no retry attempts left"),g.downloadError("xlink",e,v),t.resolved=!0,t.resolvedContent=null,p.trigger(f["default"].XLINK_ELEMENT_LOADED,{element:t,resolveObject:r,error:new a["default"]("Failed loading xlink Element: "+e+" no retry attempts left")})))},c=function(e){var t=new Date;b&&(b=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(v.firstByteDate=t)),e.lengthComputable&&(v.bytesLoaded=e.loaded,v.bytesTotal=e.total),E.push({s:w,d:t.getTime()-w.getTime(),b:[e.loaded?e.loaded-S:0]}),w=t,S=e.loaded};try{v.onload=l,v.onloadend=s,v.onerror=s,v.onprogress=c,v.open("GET",m.modifyRequestURL(e),!0),v.send()}catch(j){d("Xlink loading Error"),v.onerror()}}var r=1,i=500,o="urn:mpeg:dash:resolve-to-zero:2013",s=void 0,l=this.context,d=(0,h["default"])(l).getInstance().log,p=(0,c["default"])(l).getInstance(),g=e.errHandler,y=e.metricsModel,m=e.requestModifier;return s={load:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./vo/Error.js"),a=r(o),s=e("./vo/metrics/HTTPRequest.js"),u=r(s),l=e("../core/EventBus.js"),c=r(l),d=e("../core/events/Events.js"),f=r(d),p=e("../core/Debug.js"),h=r(p),g=e("../core/FactoryMaker.js"),y=r(g);i.__dashjs_factory_name="XlinkLoader",n["default"]=y["default"].getClassFactory(i),t.exports=n["default"]},{"../core/Debug.js":7,"../core/EventBus.js":8,"../core/FactoryMaker.js":9,"../core/events/Events.js":11,"./vo/Error.js":135,"./vo/metrics/HTTPRequest.js":150}],42:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){re={video:!0,audio:!0},ie={},oe={},ae={},se={},ue={},le={},de={},ce={},pe=!1,ve=(0,c["default"])($).getInstance(),me=(0,h["default"])($).getInstance(),he=(0,S["default"])($).getInstance(),ge=(0,C["default"])($).getInstance(),ye=(0,O["default"])($).getInstance()}function t(e,t){ce[e]=t,de[e]=de[e]||{},de[e].state=A,J.on(b["default"].LOADING_PROGRESS,Q,this)}function n(e){e&&(e.abrRulesCollection&&(ee=e.abrRulesCollection),e.rulesController&&(te=e.rulesController),e.streamController&&(ne=e.streamController))}function r(e,t){var n;return ie[t]=ie[t]||{},ie[t].hasOwnProperty(e)||(ie[t][e]=0),n=Y(ie[t][e],e),n=W(n,e,ie[t][e]),n=X(n,e)}function i(e){var t=ve.getSavedBitrateSettings(e);if(!se.hasOwnProperty(e))if(ue.hasOwnProperty(e)){var n=he.getValue(),r=ge.getAdaptationForType(n,0,e).Representation;Array.isArray(r)?se[e]=r[Math.round(r.length*ue[e])-1].bandwidth:se[e]=0}else isNaN(t)?se[e]="video"===e?I:D:se[e]=t;return se[e]}function o(e,t){se[e]=t}function s(e){return ue.hasOwnProperty(e)?ue[e]:null}function l(e,t){ue[e]=t}function d(e){return se.hasOwnProperty("max")&&se.max.hasOwnProperty(e)?se.max[e]:NaN}function p(e,t){se.max=se.max||{},se.max[e]=t}function g(e){return ue.hasOwnProperty("max")&&ue.max.hasOwnProperty(e)?ue.max[e]:1}function m(e,t){ue.max=ue.max||{},ue.max[e]=t}function _(e){return re[e]}function T(e,t){re[e]=t}function E(){return pe}function w(e){pe=e}function j(e,t){var n,i,o,s,u=e.getType(),l=e.getStreamInfo(),c=l.id,d=function(o){var a=r(u,c);n=o.value,s=o.confidence,0>n&&(n=0),n>a&&(n=a),i=K(u,l),n===i||de[u].state===x&&n>i||(n!==i&&(V(u,c,n),G(u,c,s),J.trigger(b["default"].QUALITY_CHANGED,{mediaType:u,streamInfo:e.getStreamInfo(),oldQuality:i,newQuality:n})),void 0!==t&&t())};n=K(u,l),s=q(u,c),_(u)?(o=ee.getRules(f["default"].QUALITY_SWITCH_RULES),te.applyRules(o,e,d,n,function(e,t){return e=e===a["default"].NO_CHANGE?0:e,Math.max(e,t)})):void 0!==t&&t()}function M(e,t,n){var i=t.id,o=K(e,t),a=null!==n&&!isNaN(n)&&n%1===0;if(!a)throw"argument is not an integer";n!==o&&n>=0&&n<=r(e,i)&&(V(e,i,n),J.trigger(b["default"].QUALITY_CHANGED,{mediaType:e,streamInfo:t,oldQuality:o,newQuality:n}))}function P(e,t){de[e].state=t}function k(e){return de[e].state}function R(e,t){for(var n,r=L(e),i=r.length,o=0;i>o;o++)if(n=r[o],1e3*t<=n.bitrate)return Math.max(o-1,0);return i-1}function L(e){if(!e||!e.bitrateList)return null;for(var t,n=e.bitrateList,r=e.type,i=[],o=0,a=n.length;a>o;o++)t=new u["default"],t.mediaType=r,t.qualityIndex=o,t.bitrate=n[o],i.push(t);return i}function N(e,t){le[e]=t}function F(e){return le[e]}function B(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return z(t,n,r),r}function U(e){var t,n=e.id,i=K("audio",e),o=K("video",e);return t=i===r("audio",n)&&o===r("video",n)}function H(){J.off(b["default"].LOADING_PROGRESS,Q,this),clearTimeout(fe),fe=null,e()}function K(e,t){var n,r=t.id;return oe[r]=oe[r]||{},oe[r].hasOwnProperty(e)||(oe[r][e]=0),n=oe[r][e]}function V(e,t,n){oe[t]=oe[t]||{},oe[t][e]=n}function q(e,t){var n;return ae[t]=ae[t]||{},ae[t].hasOwnProperty(e)||(ae[t][e]=0),n=ae[t][e]}function G(e,t,n){ae[t]=ae[t]||{},ae[t][e]=n}function z(e,t,n){ie[t]=ie[t]||{},ie[t][e]=n}function Y(e,t){var n=d(t);if(isNaN(n)||!ce[t])return e;var r=R(ce[t].getMediaInfo(),n);return Math.min(e,r)}function W(e,t,n){var r=g(t);return isNaN(r)||r>=1||0>r?e:Math.min(e,Math.round(n*r))}function X(e,t){if("video"!==t||!pe||!ce[t])return e;var n=ye.getElement(),r=n.clientWidth,i=n.clientHeight,o=he.getValue(),a=ge.getAdaptationForType(o,0,t).Representation,s=e;if(r>0&&i>0){for(;s>0&&a[s]&&r<a[s].width&&r-a[s-1].width<a[s].width-r;)s-=1;a.length-2>=s&&a[s].width===a[s+1].width&&(s=Math.min(e,s+1))}return s}function Q(e){var t=e.request.mediaType;if(_(t)){var n=ee.getRules(f["default"].ABANDON_FRAGMENT_RULES),r=ce[t].getScheduleController(),i=r.getFragmentModel(),o=function(e){function n(e){fe=setTimeout(function(){P(e,A)},me.getAbandonLoadTimeout())}if(e.confidence===a["default"].STRONG){var o=i.getRequests({state:y["default"].FRAGMENT_MODEL_LOADING}),s=e.value,u=K(t,ne.getActiveStreamInfo());u>s&&(i.abortRequests(),P(t,x),M(t,ne.getActiveStreamInfo(),s),r.replaceCanceledRequests(o),n(t))}};te.applyRules(n,ce[t],o,e,function(e,t){return t})}}var $=this.context,J=(0,v["default"])($).getInstance(),Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,fe=void 0,pe=void 0,he=void 0,ge=void 0,ye=void 0,me=void 0,ve=void 0;return Z={isPlayingAtTopQuality:U,updateTopQualityIndex:B,getAverageThroughput:F,getBitrateList:L,getQualityForBitrate:R,getMaxAllowedBitrateFor:d,setMaxAllowedBitrateFor:p,getMaxAllowedRepresentationRatioFor:g,setMaxAllowedRepresentationRatioFor:m,getInitialBitrateFor:i,setInitialBitrateFor:o,getInitialRepresentationRatioFor:s,setInitialRepresentationRatioFor:l,setAutoSwitchBitrateFor:T,getAutoSwitchBitrateFor:_,setLimitBitrateByPortal:w,getLimitBitrateByPortal:E,getConfidenceFor:q,getQualityFor:K,getAbandonmentStateFor:k,setAbandonmentStateFor:P,setPlaybackQuality:M,getPlaybackQuality:j,setAverageThroughput:N,getTopQualityIndexFor:r,initialize:t,setConfig:n,reset:H},e(),Z}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../rules/SwitchRequest"),a=r(o),s=e("../vo/BitrateInfo.js"),u=r(s),l=e("../utils/DOMStorage.js"),c=r(l),d=e("../rules/abr/ABRRulesCollection.js"),f=r(d),p=e("../models/MediaPlayerModel.js"),h=r(p),g=e("../models/FragmentModel.js"),y=r(g),m=e("../../core/EventBus.js"),v=r(m),_=e("../../core/events/Events.js"),b=r(_),T=e("../../core/FactoryMaker.js"),E=r(T),w=e("../models/ManifestModel.js"),S=r(w),j=e("../../dash/models/DashManifestModel.js"),C=r(j),M=e("../models/VideoModel.js"),O=r(M),x="abandonload",A="allowload",I=1e3,D=100;i.__dashjs_factory_name="AbrController";var P=E["default"].getSingletonFactory(i);P.ABANDON_LOAD=x,n["default"]=P,t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../../dash/models/DashManifestModel.js":19,"../models/FragmentModel.js":78,"../models/ManifestModel.js":79,"../models/MediaPlayerModel.js":80,"../models/VideoModel.js":83,"../rules/SwitchRequest":109,"../rules/abr/ABRRulesCollection.js":110,"../utils/DOMStorage.js":126,"../vo/BitrateInfo.js":133}],43:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){Se=-1,je=-1,Ce=!1,Me=0,Oe=0,xe=Number.POSITIVE_INFINITY,Ie=-1,De=-1,ke=null,Le=D,Fe=0,Be=!1,Ue=!1,He=!1,Ke=!1}function n(e,t,n){Pe=e,oe(t),qe=n,We=(0,u["default"])(ce).getInstance(),Ve=(0,y["default"])(ce).getInstance(),Ge=(0,h["default"])(ce).getInstance(),ze=qe.getFragmentController(),Ye=qe.getScheduleController(),Se=Ge.getQualityFor(Pe,qe.getStreamInfo()),fe.on(S["default"].DATA_UPDATE_COMPLETED,q,this),fe.on(S["default"].INIT_FRAGMENT_LOADED,o,this),fe.on(S["default"].MEDIA_FRAGMENT_LOADED,s,this),fe.on(S["default"].QUALITY_CHANGED,m,this),fe.on(S["default"].STREAM_COMPLETED,G,this),fe.on(S["default"].PLAYBACK_PROGRESS,T,this),fe.on(S["default"].PLAYBACK_TIME_UPDATED,T,this),fe.on(S["default"].PLAYBACK_RATE_CHANGED,X,this),fe.on(S["default"].PLAYBACK_SEEKING,_,this),fe.on(S["default"].WALLCLOCK_TIME_UPDATED,W,this),fe.on(S["default"].CURRENT_TRACK_CHANGED,Y,this),fe.on(S["default"].SOURCEBUFFER_APPEND_COMPLETED,g,this),fe.on(S["default"].SOURCEBUFFER_REMOVE_COMPLETED,U,this),fe.on(S["default"].CHUNK_APPENDED,z,this)}function r(e){if(!e||!Ae||!qe)return null;var t=null;try{t=ge.createSourceBuffer(Ae,e),t&&t.hasOwnProperty("initialize")&&t.initialize(Pe,this)}catch(n){ye.mediaSourceError("Error creating "+Pe+" source buffer.")}return ee(t),H(qe.getRepresentationInfoForQuality(Se).MSETimeOffset),l(),t}function i(){var e=qe.getStreamInfo().id,t=ve.getActiveStreamInfo().id;return e===t}function o(e){var t;e.fragmentModel===qe.getFragmentModel()&&(de("Initialization finished loading"),t=e.chunk,Te.append(t),d(K(),Se))}function s(e){if(e.fragmentModel===qe.getFragmentModel()){var t,n=e.chunk,r=n.bytes,i=n.quality,o=n.index,s=qe.getFragmentModel().getRequests({state:a["default"].FRAGMENT_MODEL_EXECUTED,quality:i,index:o})[0],u=qe.getRepresentationInfoForQuality(i),c=he.getValue(),d=be.getEventsFor(c,u.mediaInfo,qe),f=be.getEventsFor(c,u,qe);(d.length>0||f.length>0)&&(t=k(r,s,d,f),qe.getEventController().addInbandEvents(t)),n.bytes=R(r),Te.append(n),l()}}function l(){if(ke&&!Ue&&L()){var e,t=K();if(Be)e=Be;else{if(e=Te.extract({streamId:t,mediaType:Pe,segmentType:c["default"].MEDIA_SEGMENT_TYPE,limit:1})[0],!e)return;Be=e}e.quality===je?(Be=!1,p(e)):d(t,Be.quality)}}function d(e,t){var n={streamId:e,mediaType:Pe,segmentType:c["default"].INIT_SEGMENT_TYPE,quality:t},r=Te.getChunks(n)[0];if(r){if(!ke)return;p(r)}else fe.trigger(S["default"].INIT_REQUESTED,{sender:we,requiredQuality:t})}function p(e){Ue=!0,Ne=e,ge.append(ke,e),"video"===e.mediaInfo.type&&e.mediaInfo.embeddedCaptions&&Ee.append(e.bytes,e)}function g(e){if(ke===e.buffer){T(),Ce&&qe.getStreamInfo().isLast&&me.signalEndOfStream(Ae);var t;if(e.error)return e.error.code===f["default"].QUOTA_EXCEEDED_ERROR_CODE&&(Te.append(Ne),xe=.8*ge.getTotalBufferedTime(ke),fe.trigger(S["default"].QUOTA_EXCEEDED,{sender:we,criticalBufferLevel:xe}),B(F())),void(Ue=!1);if(L()||(fe.trigger(S["default"].QUOTA_EXCEEDED,{sender:we,criticalBufferLevel:xe}),B(F())),t=ge.getAllRanges(ke),t&&t.length>0){var n,r;for(n=0,r=t.length;r>n;n++)de("Buffered Range: "+t.start(n)+" - "+t.end(n))}Ue=!1,isNaN(Ne.index)?(je=Ne.quality,qe.isDynamic()||l()):(Te.storeAppendedChunk(Ne,ke),V(),Ie=Math.max(Ne.index,Ie),M()),fe.trigger(S["default"].BYTES_APPENDED,{sender:we,quality:Ne.quality,startTime:Ne.start,index:Ne.index,bufferedRanges:t})}}function m(e){var t=e.newQuality;Se!==t&&Pe===e.mediaType&&qe.getStreamInfo().id===e.streamInfo.id&&(H(qe.getRepresentationInfoForQuality(t).MSETimeOffset),Se=t)}function _(){Ue=!1,T()}function T(){w(),j()}function w(){var e=Ve.getTime();Me=ge.getBufferLength(ke,e),fe.trigger(S["default"].BUFFER_LEVEL_UPDATED,{sender:we,bufferLevel:Me}),O()}function j(){i()&&(pe.addBufferState(Pe,Le,Oe),pe.addBufferLevel(Pe,new Date,1e3*Me))}function M(){var e=Ie===De-1;e&&!Ce&&(Ce=!0,fe.trigger(S["default"].BUFFERING_COMPLETED,{sender:we,streamInfo:qe.getStreamInfo()}))}function O(){x(P>Me&&!Ce?D:I)}function x(e){Le===e||"fragmentedText"===Pe&&Ee.getAllTracksAreDisabled()||(Le=e,j(),fe.trigger(S["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:we,state:e,mediaType:Pe,streamInfo:qe.getStreamInfo()}),de(e===I?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function k(e,t,n,r){var i,o,a,s,u=Math.max(isNaN(t.startTime)?0:t.startTime,0),l=[],c=[];Ke=!1,s=n.concat(r);for(var d=0;d<s.length;d++)l[s[d].schemeIdUri]=s[d];a=(0,C["default"])(ce).getInstance().parse(e),i=a.getBoxes("emsg");for(var f=0,p=i.length;p>f;f++)o=be.getEvent(i[f],l,u),o&&c.push(o);return c}function R(e){if(!Ke)return e;for(var t,n,r=e.length,i=Math.pow(256,2),o=Math.pow(256,3),a=new Uint8Array(e.length),s=0,u=0;r>s;){if(t=String.fromCharCode(e[s+4],e[s+5],e[s+6],e[s+7]),n=e[s]*o+e[s+1]*i+256*e[s+2]+1*e[s+3],"emsg"!=t)for(var l=s;s+n>l;l++)a[u]=e[l],u++;s+=n}return a.subarray(0,u)}function L(){var e=ge.getTotalBufferedTime(ke);return xe>e}function N(){if("fragmentedText"!==Pe){de("try to prune buffer");var e=ke.buffered.length?ke.buffered.start(0):0,t=Ve.getTime(),n=t-e-We.getBufferToKeep();n>0&&(de("pruning buffer: "+n+" seconds."),He=!0,ge.remove(ke,0,Math.round(e+n),Ae))}}function F(){var e,t,n,r,i;return ke?(e=Ve.getTime(),i=qe.getFragmentModel().getRequests({state:a["default"].FRAGMENT_MODEL_EXECUTED,time:e})[0],n=i&&!isNaN(i.startTime)?i.startTime:Math.floor(e),r=ge.getBufferRange(ke,e),null===r&&ke.buffered.length>0&&(n=ke.buffered.end(ke.buffered.length-1)),t=ke.buffered.start(0),{start:t,end:n}):null}function B(e){if(e&&ke){var t=e.start,n=e.end;ge.remove(ke,t,n,Ae)}}function U(e){ke===e.buffer&&(He&&(He=!1),Te.updateBufferedRanges({streamId:K(),mediaType:Pe},ge.getAllRanges(ke)),w(),fe.trigger(S["default"].BUFFER_CLEARED,{sender:we,from:e.from,to:e.to,hasEnoughSpaceToAppend:L()}),L()||setTimeout(B(F()),1e3*Re))}function H(e){ke&&ke.timestampOffset!==e&&!isNaN(e)&&(ke.timestampOffset=e)}function K(){return qe.getStreamInfo().id}function V(){var e,t,n,r=Te.getChunks({streamId:K(),mediaType:Pe,segmentType:c["default"].MEDIA_SEGMENT_TYPE,appended:!0}),i=(0,b["default"])(ce),o=i.create(),a=i.create(),s=Ve.getTime(),u=2*qe.getCurrentRepresentationInfo().fragmentDuration;if(r.forEach(function(e){t=_e.isCurrentTrack(e.mediaInfo)?a:o,t.add(e.bufferedRange.start,e.bufferedRange.end)}),0!==o.length&&0!==a.length&&(e=ge.getBufferLength({buffered:a},s),!(u>e)))for(var l=0,d=o.length;d>l;l++)n={start:o.start(l),end:o.end(l)},(_e.getSwitchMode(Pe)===v["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE||n.start>s)&&B(n)}function q(e){if(e.sender.getStreamProcessor()===qe&&!e.error){var t;H(e.currentRepresentation.MSETimeOffset),t=qe.getStreamInfo().manifestInfo.minBufferTime,Re!==t&&re(t)}}function G(e){e.fragmentModel===qe.getFragmentModel()&&(De=e.request.index,M())}function z(e){e.sender===Te&&j()}function Y(e){if(ke&&e.newMediaInfo.type===Pe&&e.newMediaInfo.streamInfo.id===qe.getStreamInfo().id){var t=e.newMediaInfo,n=t.type,r=e.switchMode,i=Ve.getTime(),o={start:0,end:i};if(Pe===n)switch(r){case v["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE:B(o);break;case v["default"].TRACK_SWITCH_MODE_NEVER_REPLACE:break;default:de("track switch mode is not supported: "+r)}}}function W(){var e;Fe++,e=Fe*(We.getWallclockTimeUpdateInterval()/1e3),e>=We.getBufferPruningInterval()&&!Ue&&(Fe=0,N())}function X(){O()}function Q(){return Pe}function $(){return qe}function J(e){qe=e}function Z(){return ke}function ee(e){ke=e}function te(){return Me}function ne(){return Re}function re(e){Re=e}function ie(){return xe}function oe(e){Ae=e}function ae(){return Ae}function se(){return Ce}function ue(){return Ue}function le(e){fe.off(S["default"].DATA_UPDATE_COMPLETED,q,this),fe.off(S["default"].QUALITY_CHANGED,m,this),fe.off(S["default"].INIT_FRAGMENT_LOADED,o,this),fe.off(S["default"].MEDIA_FRAGMENT_LOADED,s,this),fe.off(S["default"].STREAM_COMPLETED,G,this),fe.off(S["default"].CURRENT_TRACK_CHANGED,Y,this),fe.off(S["default"].PLAYBACK_PROGRESS,T,this),fe.off(S["default"].PLAYBACK_TIME_UPDATED,T,this),fe.off(S["default"].PLAYBACK_RATE_CHANGED,X,this),fe.off(S["default"].PLAYBACK_SEEKING,_,this),fe.off(S["default"].WALLCLOCK_TIME_UPDATED,W,this),fe.off(S["default"].SOURCEBUFFER_APPEND_COMPLETED,g,this),fe.off(S["default"].SOURCEBUFFER_REMOVE_COMPLETED,U,this),fe.off(S["default"].CHUNK_APPENDED,z,this),xe=Number.POSITIVE_INFINITY,Le=D,Re=null,je=-1,De=-1,Ie=-1,Se=0,Ne=null,Be=!1,Ce=!1,Ue=!1,He=!1,Ve=null,qe=null,Ge=null,ze=null,Ye=null,e||(ge.abort(Ae,ke),ge.removeSourceBuffer(Ae,ke)),ke=null}var ce=this.context,de=(0,A["default"])(ce).getInstance().log,fe=(0,E["default"])(ce).getInstance(),pe=e.metricsModel,he=e.manifestModel,ge=e.sourceBufferController,ye=e.errHandler,me=e.mediaSourceController,ve=e.streamController,_e=e.mediaController,be=e.adapter,Te=e.virtualBuffer,Ee=e.textSourceBuffer,we=void 0,Se=void 0,je=void 0,Ce=void 0,Me=void 0,Oe=void 0,xe=void 0,Ae=void 0,Ie=void 0,De=void 0,Pe=void 0,ke=void 0,Re=void 0,Le=void 0,Ne=void 0,Fe=void 0,Be=void 0,Ue=void 0,He=void 0,Ke=void 0,Ve=void 0,qe=void 0,Ge=void 0,ze=void 0,Ye=void 0,We=void 0;return we={initialize:n,createBuffer:r,getType:Q,getStreamProcessor:$,setStreamProcessor:J,getBuffer:Z,setBuffer:ee,getBufferLevel:te,getMinBufferTime:ne,setMinBufferTime:re,getCriticalBufferLevel:ie,setMediaSource:oe,getMediaSource:ae,getIsBufferingCompleted:se,getIsAppendingInProgress:ue,reset:le},t(),we}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../models/FragmentModel.js"),a=r(o),s=e("../models/MediaPlayerModel.js"),u=r(s),l=e("../vo/metrics/HTTPRequest.js"),c=r(l),d=e("./SourceBufferController.js"),f=r(d),p=e("./AbrController.js"),h=r(p),g=e("./PlaybackController.js"),y=r(g),m=e("./MediaController.js"),v=r(m),_=e("../utils/CustomTimeRanges.js"),b=r(_),T=e("../../core/EventBus.js"),E=r(T),w=e("../../core/events/Events.js"),S=r(w),j=e("../utils/BoxParser.js"),C=r(j),M=e("../../core/FactoryMaker.js"),O=r(M),x=e("../../core/Debug.js"),A=r(x),I="bufferLoaded",D="bufferStalled",P=.5;i.__dashjs_factory_name="BufferController";var k=O["default"].getClassFactory(i);k.BUFFER_LOADED=I,k.BUFFER_EMPTY=D,n["default"]=k,t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../models/FragmentModel.js":78,"../models/MediaPlayerModel.js":80,"../utils/BoxParser.js":123,"../utils/CustomTimeRanges.js":125,"../vo/metrics/HTTPRequest.js":150,"./AbrController.js":42,"./MediaController.js":46,"./PlaybackController.js":48,"./SourceBufferController.js":50}],44:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){x=!1,b={},T={},E={},w=null,S=100,j=S/1e3,O=(0,a["default"])(y).getInstance()}function t(){null!==w&&x&&(clearInterval(w),w=null,x=!1)}function n(){m("Start Event Controller"),x||isNaN(S)||(x=!0,w=setInterval(s,S))}function r(e){if(b={},e)for(var t=0;t<e.length;t++){var n=e[t];b[n.id]=n,m("Add inline event with id "+n.id)}m("Added "+e.length+" inline events")}function i(e){for(var t=0;t<e.length;t++){var n=e[t];n.id in T?m("Repeated event with id "+n.id):(T[n.id]=n,m("Add inband event with id "+n.id))}}function o(){if(E)for(var e=O.getTime(),t=Object.keys(E),n=0;n<t.length;n++){var r=t[n],i=E[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(m("Remove Event "+r+" at time "+e),i=null,delete E[r])}}function s(){l(T),l(b),o()}function u(){var e=C.getValue(),t=e.url;e.hasOwnProperty("Location")&&(t=e.Location),m("Refresh manifest @ "+t),M.getManifestLoader().load(t)}function l(e){var t,n=O.getTime();if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=e[o];void 0!==a&&(t=a.presentationTime/a.eventStream.timescale,(0===t||n>=t&&t+j>n)&&(m("Start Event "+o+" at "+n),a.duration>0&&(E[o]=a),a.eventStream.schemeIdUri==h&&a.eventStream.value==g?u():v.trigger(a.eventStream.schemeIdUri,{event:a}),delete e[o]))}}function d(e){e&&(e.manifestModel&&(C=e.manifestModel),e.manifestUpdater&&(M=e.manifestUpdater))}function p(){t(),b=null,T=null,E=null,O=null}var h="urn:mpeg:dash:event:2012",g=1,y=this.context,m=(0,c["default"])(y).getInstance().log,v=(0,f["default"])(y).getInstance(),_=void 0,b=void 0,T=void 0,E=void 0,w=void 0,S=void 0,j=void 0,C=void 0,M=void 0,O=void 0,x=void 0;return _={initialize:e,addInlineEvents:r,addInbandEvents:i,clear:t,start:n,setConfig:d,reset:p}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../controllers/PlaybackController.js"),a=r(o),s=e("../../core/FactoryMaker.js"),u=r(s),l=e("../../core/Debug.js"),c=r(l),d=e("../../core/EventBus.js"),f=r(d);i.__dashjs_factory_name="EventController",n["default"]=u["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../controllers/PlaybackController.js":48}],45:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){_=[],m.on(y["default"].FRAGMENT_LOADING_COMPLETED,d,v)}function t(e){var t=null;return null!==e&&void 0!==e&&e.byteLength>0&&(t=new Uint8Array(e)),t}function n(e){if(!e)return null;var t=s(e);return t||(t=(0,c["default"])(p).create({metricsModel:(0,f["default"])(p).getInstance()}),t.setScheduleController(e),_.push(t)),t}function r(e){var t=_.indexOf(e);t>-1&&_.splice(t,1)}function i(e){return e&&e.type&&e.type===a["default"].INIT_SEGMENT_TYPE}function o(){m.off(y["default"].FRAGMENT_LOADING_COMPLETED,d,this),_=[]}function s(e){for(var t=_.length,n=0;t>n;n++)if(_[n].getScheduleController()==e)return _[n];return null}function l(e,t,n){var r=new u["default"];return r.streamId=n,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r}function d(e){var t=e.sender.getScheduleController();if(s(t)){var n=e.request,r=e.response,o=i(n),a=t.getStreamProcessor().getStreamInfo().id,u=void 0;if(!r)return void g("No "+n.mediaType+" bytes to push.");u=l(r,n,a),m.trigger(o?y["default"].INIT_FRAGMENT_LOADED:y["default"].MEDIA_FRAGMENT_LOADED,{chunk:u,fragmentModel:e.sender})}}var p=this.context,g=(0,b["default"])(p).getInstance().log,m=(0,h["default"])(p).getInstance(),v=void 0,_=void 0;return v={process:t,getModel:n,detachModel:r,isInitializationRequest:i,reset:o},e(),v}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/metrics/HTTPRequest.js"),a=r(o),s=e("../vo/DataChunk.js"),u=r(s),l=e("../models/FragmentModel.js"),c=r(l),d=e("../models/MetricsModel.js"),f=r(d),p=e("../../core/EventBus.js"),h=r(p),g=e("../../core/events/Events.js"),y=r(g),m=e("../../core/FactoryMaker.js"),v=r(m),_=e("../../core/Debug.js"),b=r(_);i.__dashjs_factory_name="FragmentController",n["default"]=v["default"].getClassFactory(i),t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../models/FragmentModel.js":78,"../models/MetricsModel.js":81,"../vo/DataChunk.js":134,"../vo/metrics/HTTPRequest.js":150}],46:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){H={},D(),I()}function t(e){["audio","video","text","fragmentedText"].forEach(function(t){var n=d(t),i=r(t,e),o=[];n||(n=B.getSavedMediaSettings(t),c(t,n)),i&&0!==i.length&&(n&&i.forEach(function(e){A(n,e)||o.push(e)}),l(0===o.length?P(i):o.length>1?P(o):o[0]))})}function n(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,r=d(t);return e&&S(t)?(H[n]=H[n]||k(),H[n][t].list.indexOf(e)>=0?!1:(H[n][t].list.push(e),r&&A(r,e)&&!o(t,e.streamInfo)&&l(e),!0)):!1}function r(e,t){if(!e||!t)return[];var n=t.id;return H[n]&&H[n][e]?H[n][e].list:[]}function o(e,t){return e&&t?H[t.id][e].current:null}function s(e){var t=e.type,n=e.streamInfo.id;return H[n]&&H[n][t]&&j(H[n][t].current,e)}function l(e){if(e){var t=e.type,n=e.streamInfo,r=n.id,i=o(t,n);if(H[r]&&H[r][t]&&(!i||!j(e,i))){H[r][t].current=e,i&&N.trigger(a["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:i,newMediaInfo:e,switchMode:q[t]});var s=x(e);s&&H[r][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),O(t,s))}}}function c(e,t){e&&t&&(K[e]=t)}function d(e){return e?K[e]:null}function p(e,t){var n=!!i[t];return n?void(q[e]=t):void L("track switch mode is not supported: "+t)}function g(e){return q[e]}function E(e){var t=!!i.trackSelectionModes[e];return t?void(V=e):void L("track selection mode is not supported: "+e)}function w(){return V||T}function S(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function j(e,t){var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,o=e.roles.toString()==t.roles.toString(),a=e.accessibility.toString()==t.accessibility.toString(),s=e.audioChannelConfiguration.toString()==t.audioChannelConfiguration.toString();return n&&r&&i&&o&&a&&s}function C(e){e&&e.errHandler&&(G=e.errHandler)}function M(){e(),F.resetEmbedded()}function O(e,t){!B.isSupported(y["default"].STORAGE_TYPE_LOCAL)||"video"!==e&&"audio"!==e||localStorage.setItem(y["default"]["LOCAL_STORAGE_"+e.toUpperCase()+"_SETTINGS_KEY"],JSON.stringify({settings:t,timestamp:(new Date).getTime()}))}function x(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration},n=t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0;return n?t:null}function A(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],o=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],a=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&r&&i&&o&&a}function I(){q={audio:v,video:m}}function D(){K={audio:null,video:null}}function P(e){var t=w(),n=[],r=function(e){var t,n=0,r=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList),t>n?(n=t,r=[e]):t===n&&r.push(e)}),r},i=function(e){var t,n=0,r=[];return e.forEach(function(e){t=e.representationCount,t>n?(n=t,r=[e]):t===n&&r.push(e)}),r};switch(t){case _:n=r(e),n.length>1&&(n=i(n));break;case b:n=i(e),n.length>1&&(n=r(e));break;default:L("track selection mode is not supported: "+t)}return n[0]}function k(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var R=this.context,L=(0,f["default"])(R).getInstance().log,N=(0,u["default"])(R).getInstance(),F=(0,h["default"])(R).getInstance(),B=(0,y["default"])(R).getInstance(),U=void 0,H=void 0,K=void 0,V=void 0,q=void 0,G=void 0;return U={initialize:e,checkInitialMediaSettings:t,addTrack:n,getTracksFor:r,getCurrentTrackFor:o,isCurrentTrack:s,setTrack:l,setInitialSettings:c,getInitialSettings:d,setSwitchMode:p,getSwitchMode:g,setSelectionModeForInitialTrack:E,getSelectionModeForInitialTrack:w,isMultiTrackSupportedByType:S,isTracksEqual:j,setConfig:C,reset:M}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/events/Events.js"),a=r(o),s=e("../../core/EventBus.js"),u=r(s),l=e("../../core/FactoryMaker.js"),c=r(l),d=e("../../core/Debug.js"),f=r(d),p=e("../TextSourceBuffer.js"),h=r(p),g=e("../utils/DOMStorage.js"),y=r(g),m="neverReplace",v="alwaysReplace",_="highestBitrate",b="widestRange",T=_;
i.__dashjs_factory_name="MediaController";var E=c["default"].getSingletonFactory(i);E.TRACK_SWITCH_MODE_NEVER_REPLACE=m,E.TRACK_SWITCH_MODE_ALWAYS_REPLACE=v,E.TRACK_SELECTION_MODE_HIGHEST_BITRATE=_,E.TRACK_SELECTION_MODE_WIDEST_RANGE=b,E.DEFAULT_INIT_TRACK_SELECTION_MODE=T,n["default"]=E,t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../TextSourceBuffer.js":38,"../utils/DOMStorage.js":126}],47:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return t?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function n(e){e.setSource("")}function r(e,t){return e.duration!=t&&(e.duration=t),e.duration}function i(e){var t=e.sourceBuffers,n=t.length,r=0;if("open"===e.readyState){for(r;n>r;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}e.endOfStream()}}var o=void 0;return o={createMediaSource:e,attachMediaSource:t,detachMediaSource:n,setDuration:r,signalEndOfStream:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="MediaSourceController",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],48:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){de=0,fe=NaN,pe=null,me=null,he={},ge={},_e=!1,ve=(0,c["default"])(J).getInstance()}function t(e){ye=e,ne=ce.getElement(),Q(),me=ye.manifestInfo.isDynamic,fe=ye.start,ee.on(h["default"].DATA_UPDATE_COMPLETED,P,this),ee.on(h["default"].LIVE_EDGE_SEARCH_COMPLETED,k,this),ee.on(h["default"].BYTES_APPENDED,W,this),ee.on(h["default"].BUFFER_LEVEL_STATE_CHANGED,X,this),_e&&(_e=!1,s())}function n(){return M(ye)+ye.duration-y()}function r(){return y()>0}function i(){return ye.id}function o(){return ye.duration}function s(){ne?(ne.autoplay=!0,ne.play()):_e=!0}function l(){return ne?ne.paused:void 0}function d(){ne&&(ne.pause(),ne.autoplay=!1)}function p(){return ne?ne.seeking:void 0}function g(e){ce&&(Z("Requesting seek to time: "+e),ce.setCurrentTime(e))}function y(){return ne?ne.currentTime:void 0}function m(){return ne?ne.playbackRate:void 0}function _(){return ne?ne.played:void 0}function b(){return ne?ne.ended:void 0}function T(){return me}function E(e){fe=e}function w(){return fe}function S(e){var t,n=ue.getMpd(se.getValue());return t=ve.getUseSuggestedPresentationDelay()&&n.hasOwnProperty("suggestedPresentationDelay")?n.suggestedPresentationDelay:isNaN(e)?2*ye.manifestInfo.minBufferTime:e*ve.getLiveDelayFragmentCount()}function j(){ce&&ne&&(ee.off(h["default"].DATA_UPDATE_COMPLETED,P,this),ee.off(h["default"].BUFFER_LEVEL_STATE_CHANGED,X,this),ee.off(h["default"].LIVE_EDGE_SEARCH_COMPLETED,k,this),ee.off(h["default"].BYTES_APPENDED,W,this),A(),$()),ce=null,ye=null,ne=null,me=null,e()}function C(e){e&&(e.streamController&&(re=e.streamController),e.timelineConverter&&(ie=e.timelineConverter),e.metricsModel&&(oe=e.metricsModel),e.dashMetrics&&(ae=e.dashMetrics),e.manifestModel&&(se=e.manifestModel),e.dashManifestModel&&(ue=e.dashManifestModel),e.adapter&&(le=e.adapter),e.videoModel&&(ce=e.videoModel))}function M(e){var t,n=parseInt((0,u["default"])(J).getInstance().getURIFragmentData().s,10);return me?(!isNaN(n)&&n>1262304e3&&(t=n-e.manifestInfo.availableFrom.getTime()/1e3,(t>fe||t<fe-e.manifestInfo.DVRWindowSize)&&(t=null)),t=t||fe):t=!isNaN(n)&&n<e.duration&&n>=0?n:e.start,t}function O(e){var t,n=oe.getReadOnlyMetricsFor("video")||oe.getReadOnlyMetricsFor("audio"),r=ae.getCurrentDVRInfo(n),i=r?r.range:null;return i?e>=i.start&&e<=i.end?e:t=Math.max(i.end-2*ye.manifestInfo.minBufferTime,i.start):NaN}function x(){if(null===pe){var e=function(){Y()};pe=setInterval(e,ve.getWallclockTimeUpdateInterval())}}function A(){clearInterval(pe),pe=null}function I(){if(!ge[ye.id]&&!p()){var e=M(ye);ee.trigger(h["default"].PLAYBACK_SEEKING,{seekTime:e}),Z("Starting playback at offset: "+e)}}function D(){if(!l()&&me&&0!==ne.readyState){var e=y(),t=O(e),n=!isNaN(t)&&t!==e;n&&g(t)}}function P(e){if(!e.error){var t=le.convertDataToTrack(se.getValue(),e.currentRepresentation),n=t.mediaInfo.streamInfo;ye.id===n.id&&(ye=t.mediaInfo.streamInfo,D())}}function k(e){e.error||0===ne.readyState||I()}function R(){ee.trigger(h["default"].CAN_PLAY)}function L(){Z("Native video element event: play"),D(),x(),ee.trigger(h["default"].PLAYBACK_STARTED,{startTime:y()})}function N(){Z("Native video element event: playing"),ee.trigger(h["default"].PLAYBACK_PLAYING,{playingTime:y()})}function F(){Z("Native video element event: pause"),ee.trigger(h["default"].PLAYBACK_PAUSED,{ended:b()})}function B(){var e=y();Z("Seeking to: "+e),x(),ee.trigger(h["default"].PLAYBACK_SEEKING,{seekTime:e})}function U(){Z("Native video element event: seeked"),ee.trigger(h["default"].PLAYBACK_SEEKED)}function H(){var e=y();e!==de&&(de=e,ee.trigger(h["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:n(),time:e}))}function K(){var e,t,n,r=ne.buffered;r.length&&(e=r.length-1,t=r.end(e),n=M(ye)+ye.duration-t),ee.trigger(h["default"].PLAYBACK_PROGRESS,{bufferedRanges:ne.buffered,remainingUnbufferedDuration:n})}function V(){var e=m();Z("Native video element event: ratechange: ",e),ee.trigger(h["default"].PLAYBACK_RATE_CHANGED,{playbackRate:e})}function q(){Z("Native video element event: loadedmetadata"),(!me||ie.isTimeSyncCompleted())&&I(),ee.trigger(h["default"].PLAYBACK_METADATA_LOADED),x()}function G(){Z("Native video element event: ended"),ne.autoplay=!1,A(),ee.trigger(h["default"].PLAYBACK_ENDED)}function z(e){var t=e.target||e.srcElement;ee.trigger(h["default"].PLAYBACK_ERROR,{error:t.error})}function Y(){ee.trigger(h["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date})}function W(e){var t,n=e.bufferedRanges,r=ye.id,i=y(),o=e.sender.getStreamProcessor(),a=o.getType(),s=re.getStreamById(ye.id),u=M(ye),l=e.startTime,c=he[r];l===u&&(ge[r]=ge[r]||{},ge[r][a]=!0,ge[r].ready=!(s.hasMedia("audio")&&!ge[r].audio||s.hasMedia("video")&&!ge[r].video)),!n||!n.length||ge[r]&&ge[r].seekCompleted||(t=Math.max(n.start(0),ye.start),he[r]=void 0===he[r]?t:Math.max(he[r],t),c===he[r]&&i===c||!ge[r]||!ge[r].ready||i>he[r]||(p()?he={}:(g(Math.max(he[r],u)),ge[r].seekCompleted=!0)))}function X(e){e.streamInfo.id===ye.id&&ce.setStallState(e.mediaType,e.state===a["default"].BUFFER_EMPTY)}function Q(){ne.addEventListener("canplay",R),ne.addEventListener("play",L),ne.addEventListener("playing",N),ne.addEventListener("pause",F),ne.addEventListener("error",z),ne.addEventListener("seeking",B),ne.addEventListener("seeked",U),ne.addEventListener("timeupdate",H),ne.addEventListener("progress",K),ne.addEventListener("ratechange",V),ne.addEventListener("loadedmetadata",q),ne.addEventListener("ended",G)}function $(){ne.removeEventListener("canplay",R),ne.removeEventListener("play",L),ne.removeEventListener("playing",N),ne.removeEventListener("pause",F),ne.removeEventListener("error",z),ne.removeEventListener("seeking",B),ne.removeEventListener("seeked",U),ne.removeEventListener("timeupdate",H),ne.removeEventListener("progress",K),ne.removeEventListener("ratechange",V),ne.removeEventListener("loadedmetadata",q),ne.removeEventListener("ended",G)}var J=this.context,Z=(0,v["default"])(J).getInstance().log,ee=(0,f["default"])(J).getInstance(),te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,fe=void 0,pe=void 0,he=void 0,ge=void 0,ye=void 0,me=void 0,ve=void 0,_e=void 0;return te={initialize:t,setConfig:C,getStreamStartTime:M,getTimeToStreamEnd:n,isPlaybackStarted:r,getStreamId:i,getStreamDuration:o,getTime:y,getPlaybackRate:m,getPlayedRanges:_,getEnded:b,getIsDynamic:T,setLiveStartTime:E,getLiveStartTime:w,getLiveDelay:S,play:s,isPaused:l,pause:d,isSeeking:p,seek:g,reset:j},e(),te}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BufferController.js"),a=r(o),s=e("../models/URIQueryAndFragmentModel.js"),u=r(s),l=e("../../streaming/models/MediaPlayerModel.js"),c=r(l),d=e("../../core/EventBus.js"),f=r(d),p=e("../../core/events/Events.js"),h=r(p),g=e("../../core/FactoryMaker.js"),y=r(g),m=e("../../core/Debug.js"),v=r(m);i.__dashjs_factory_name="PlaybackController",n["default"]=y["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../../streaming/models/MediaPlayerModel.js":80,"../models/URIQueryAndFragmentModel.js":82,"./BufferController.js":43}],49:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){ge=!0,ye=!1,me=null,ve=null,_e=!0,be=!1,Te=0,we=NaN}function n(e,t){ce=e,Ce=t,Oe=(0,v["default"])($).getInstance(),Se=(0,f["default"])($).getInstance(),je=(0,h["default"])($).getInstance(),Me=Ce.getFragmentController(),xe=Ce.getBufferController(),fe=Me.getModel(this),pe=Ce.isDynamic(),Ae=ue.getScheduleWhilePaused(),ie.getIsTextTrack(ce)&&Z.on(E["default"].TIMED_TEXT_REQUESTED,N,this),Z.on(E["default"].LIVE_EDGE_SEARCH_COMPLETED,H,this),Z.on(E["default"].QUALITY_CHANGED,S,this),Z.on(E["default"].DATA_UPDATE_STARTED,I,this),Z.on(E["default"].DATA_UPDATE_COMPLETED,j,this),Z.on(E["default"].FRAGMENT_LOADING_COMPLETED,x,this),Z.on(E["default"].STREAM_COMPLETED,O,this),Z.on(E["default"].STREAM_INITIALIZED,M,this),Z.on(E["default"].BUFFER_LEVEL_STATE_CHANGED,k,this),Z.on(E["default"].BUFFER_CLEARED,P,this),Z.on(E["default"].BYTES_APPENDED,A,this),Z.on(E["default"].INIT_REQUESTED,D,this),Z.on(E["default"].QUOTA_EXCEEDED,R,this),Z.on(E["default"].BUFFER_LEVEL_STATE_CHANGED,k,this),Z.on(E["default"].PLAYBACK_STARTED,F,this),Z.on(E["default"].PLAYBACK_SEEKING,B,this),Z.on(E["default"].PLAYBACK_RATE_CHANGED,U,this)}function r(e,t){var n=0,r=null;me&&_e===!1&&(r=ve.start,n=e.getTime()-r.getTime(),ve.duration=n,ve.stopreason=t,me.trace.push(ve),_e=!0)}function i(){de&&(L(),ye=!1,ge&&(ge=!1),J("Schedule controller starting for "+ce),Se.getPlayedRanges().length>0&&p())}function o(){ge&&l(he.quality),i()}function s(){ye||(ye=!0,J("Schedule controller stopping for "+ce),clearInterval(Ee))}function l(e){var t=ne.getInitRequest(Ce,e);return null!==t&&fe.executeRequest(t),t}function d(e){var t,n,r,i=e.length,o=.1;for(r=0;i>r;r++)t=e[r],n=t.startTime+t.duration/2+o,t=ne.getFragmentRequestForTime(Ce,he,n,{timeThreshold:0,ignoreIsFinished:!0}),fe.executeRequest(t)}function p(){ye||Se.isPaused()&&Se.getPlayedRanges().length>0&&!Ae||g()}function g(){var e=ae.getRules(u["default"].FRAGMENTS_TO_SCHEDULE_RULES);se.applyRules(e,Ce,m,0,function(e,t){return e=e===c["default"].NO_CHANGE?0:e,Math.max(e,t)})}function m(e){1!==e.value||be||!ie.getIsTextTrack(ce)&&xe.getIsAppendingInProgress()?w(1e3):(be=!0,je.getPlaybackQuality(Ce,_()))}function _(){var e=ae.getRules(u["default"].NEXT_FRAGMENT_RULES);se.applyRules(e,Ce,T,null,function(e,t){return t})}function T(e){e.value?fe.executeRequest(e.value):(be=!1,w(1e3))}function w(e){Ee=setTimeout(function(){p()},e)}function S(e){if(ce===e.mediaType&&Ce.getStreamInfo().id===e.streamInfo.id){if(he=Ce.getRepresentationInfoForQuality(e.newQuality),null===he||void 0===he)throw"Unexpected error! - currentRepresentationInfo is null or undefined";r(new Date,a["default"].Trace.REPRESENTATION_SWITCH_STOP_REASON),L()}}function j(e){e.error||(he=ne.convertDataToTrack(te.getValue(),e.currentRepresentation))}function M(e){e.error||(he=Ce.getCurrentRepresentationInfo(),pe&&null===Oe.getLiveEdge()||(de=!0),de&&o())}function O(e){e.fragmentModel===fe&&J("Stream is complete")}function x(e){e.sender===fe&&(isNaN(e.request.index)||(be=!1),e.error&&s())}function A(e){e.sender.getStreamProcessor()===Ce&&p()}function I(e){e.sender.getStreamProcessor()===Ce&&s()}function D(e){e.sender.getStreamProcessor()===Ce&&l(e.requiredQuality)}function P(e){e.sender.getStreamProcessor()===Ce&&(fe.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&!xe.getIsBufferingCompleted()&&i())}function k(e){e.sender.getStreamProcessor()!==Ce||e.state!==y["default"].BUFFER_EMPTY||Se.isSeeking()||(J("Stalling Buffer"),r(new Date,a["default"].Trace.REBUFFERING_REASON))}function R(e){e.sender.getStreamProcessor()===Ce&&s()}function L(){me&&_e===!0&&he&&(_e=!1,ve=new a["default"].Trace,ve.representationid=he.id,ve.start=new Date,ve.mstart=1e3*Se.getTime(),ve.playbackspeed=Se.getPlaybackRate().toString())}function N(e){e.sender.getStreamProcessor()===Ce&&l(e.index)}function F(){i()}function B(e){ge||(be=!1);var t=ee.getMetricsFor("stream"),n=re.getCurrentManifestUpdate(t);we=e.seekTime;var r=he.DVRWindow?he.DVRWindow.end-Se.getTime():NaN;ee.updateManifestUpdateInfo(n,{latency:r}),pe&&p()}function U(e){ve&&(ve.playbackspeed=e.playbackRate.toString())}function H(e){if(!e.error){var t,n,r=e.liveEdge,i=he.mediaInfo.streamInfo.manifestInfo,a=r-Math.min(Se.getLiveDelay(he.fragmentDuration),i.DVRWindowSize/2),s=ee.getMetricsFor("stream"),u=re.getCurrentManifestUpdate(s),l=Se.getLiveStartTime();t=ne.getFragmentRequestForTime(Ce,he,a,{ignoreIsFinished:!0}),n=t.startTime,(isNaN(l)||n>l)&&Se.setLiveStartTime(n),ee.updateManifestUpdateInfo(u,{currentTime:n,presentationStartTime:r,latency:r-n,clientTimeOffset:oe.getClientTimeOffset()}),de=!0,o()}}function K(){return we}function V(e){we=e}function q(){return fe}function G(e){Te=e}function z(){return Te}function Y(){return Ce}function W(e){me=e}function X(e,t){r(e,t),me=null}function Q(){Z.off(E["default"].LIVE_EDGE_SEARCH_COMPLETED,H,this),Z.off(E["default"].DATA_UPDATE_STARTED,I,this),Z.off(E["default"].DATA_UPDATE_COMPLETED,j,this),Z.off(E["default"].BUFFER_LEVEL_STATE_CHANGED,k,this),Z.off(E["default"].QUALITY_CHANGED,S,this),Z.off(E["default"].FRAGMENT_LOADING_COMPLETED,x,this),Z.off(E["default"].STREAM_COMPLETED,O,this),Z.off(E["default"].STREAM_INITIALIZED,M,this),Z.off(E["default"].QUOTA_EXCEEDED,R,this),Z.off(E["default"].BYTES_APPENDED,A,this),Z.off(E["default"].BUFFER_CLEARED,P,this),Z.off(E["default"].INIT_REQUESTED,D,this),Z.off(E["default"].PLAYBACK_RATE_CHANGED,U,this),Z.off(E["default"].PLAYBACK_SEEKING,B,this),Z.off(E["default"].PLAYBACK_STARTED,F,this),ie.getIsTextTrack(ce)&&Z.off(E["default"].TIMED_TEXT_REQUESTED,N,this),s(),Me.detachModel(fe),be=!1,Te=0,we=NaN,Se=null,me=null}var $=this.context,J=(0,C["default"])($).getInstance().log,Z=(0,b["default"])($).getInstance(),ee=e.metricsModel,te=e.manifestModel,ne=e.adapter,re=e.dashMetrics,ie=e.dashManifestModel,oe=e.timelineConverter,ae=e.scheduleRulesCollection,se=e.rulesController,ue=e.mediaPlayerModel,le=void 0,ce=void 0,de=void 0,fe=void 0,pe=void 0,he=void 0,ge=void 0,ye=void 0,me=void 0,ve=void 0,_e=void 0,be=void 0,Te=void 0,Ee=void 0,we=void 0,Se=void 0,je=void 0,Ce=void 0,Me=void 0,Oe=void 0,xe=void 0,Ae=void 0;return le={initialize:n,getStreamProcessor:Y,getSeekTarget:K,setSeekTarget:V,getFragmentModel:q,setTimeToLoadDelay:G,getTimeToLoadDelay:z,replaceCanceledRequests:d,start:i,stop:s,reset:Q,setPlayList:W,finalisePlayList:X},t(),le}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/metrics/PlayList.js"),a=r(o),s=e("../rules/scheduling/ScheduleRulesCollection.js"),u=r(s),l=e("../rules/SwitchRequest.js"),c=r(l),d=e("./PlaybackController.js"),f=r(d),p=e("./AbrController.js"),h=r(p),g=e("./BufferController.js"),y=r(g),m=e("../utils/LiveEdgeFinder.js"),v=r(m),_=e("../../core/EventBus.js"),b=r(_),T=e("../../core/events/Events.js"),E=r(T),w=e("../../core/FactoryMaker.js"),S=r(w),j=e("../../core/Debug.js"),C=r(j);i.__dashjs_factory_name="ScheduleController",n["default"]=S["default"].getClassFactory(i),t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../rules/SwitchRequest.js":109,"../rules/scheduling/ScheduleRulesCollection.js":119,"../utils/LiveEdgeFinder.js":129,"../vo/metrics/PlayList.js":152,"./AbrController.js":42,"./BufferController.js":43,"./PlaybackController.js":48}],50:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=t.codec,r=null;try{if(n.match(/application\/mp4;\s*codecs="stpp"/i))throw new S["default"]("not really supported");r=e.addSourceBuffer(n)}catch(i){if(!t.isText&&-1===n.indexOf('codecs="stpp"'))throw i;r=(0,a["default"])(_).getInstance(),r.setConfig({errHandler:(0,f["default"])(_).getInstance(),adapter:(0,c["default"])(_).getInstance(),dashManifestModel:j,mediaController:(0,u["default"])(_).getInstance(),videoModel:(0,E["default"])(_).getInstance(),streamController:(0,h["default"])(_).getInstance(),textTracks:(0,y["default"])(_).getInstance(),VTTParser:(0,v["default"])(_).getInstance(),TTMLParser:(0,b["default"])(_).getInstance()})}return r}function t(e,t){try{e.removeSourceBuffer(t)}catch(n){}}function n(e,t,n){var r,i,o=null,a=0,s=0,u=null,l=null,c=0,d=n||.15;try{o=e.buffered}catch(f){return null}if(null!==o&&void 0!==o){for(i=0,r=o.length;r>i;i++)if(a=o.start(i),s=o.end(i),null===u)c=Math.abs(a-t),t>=a&&s>t?(u=a,l=s):d>=c&&(u=a,l=s);else{if(c=a-l,!(d>=c))break;l=s}if(null!==u)return{start:u,end:l}}return null}function r(e){var t=null;try{return t=e.buffered}catch(n){return null}}function i(e){var t,n,i=r(e),o=0;if(!i)return o;for(n=0,t=i.length;t>n;n++)o+=i.end(n)-i.start(n);return o}function o(e,t,r){var i,o;return i=n(e,t,r),o=null===i?0:i.end-t}function s(e,t){if(!t)return null;var n,i,o,a,s,u,l,c,d,f=r(t);if(!f)return null;for(var p=0,h=f.length;h>p;p++){if(c=e.length>p,s=c?{start:e.start(p),end:e.end(p)}:null,n=f.start(p),i=f.end(p),!s)return d={start:n,end:i};if(o=s.start===n,a=s.end===i,!o||!a){if(o)d={start:s.end,end:i};else{if(!a)return d={start:n,end:i};d={start:n,end:s.start}}return u=e.length>p+1?{start:e.start(p+1),end:e.end(p+1)}:null,l=h>p+1?{start:f.start(p+1),end:f.end(p+1)}:null,!u||l&&l.start===u.start&&l.end===u.end||(d.end=u.start),d}}return null}function l(e,t){var n=t.bytes,r="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,i="Object"===Object.prototype.toString.call(e).slice(8,-1);if(r)try{m(e,function(){i?e[r](n,t):e[r](n),m(e,function(){T.trigger(O["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n})})})}catch(o){T.trigger(O["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n,error:new S["default"](o.code,o.message,null)})}}function d(e,t,n,r){try{m(e,function(){t>=0&&n>t&&"ended"!==r.readyState&&e.remove(t,n),m(e,function(){T.trigger(O["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n})})})}catch(i){T.trigger(O["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new S["default"](i.code,i.message,null)})}}function p(e,t){try{"open"===e.readyState&&t.abort()}catch(n){}}function g(e){e&&e.dashManifestModel&&(j=e.dashManifestModel)}function m(e,t){var n,r=50,i=function(){e.updating||(clearInterval(n),t())},o=function s(){e.updating||(e.removeEventListener("updateend",s,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",o,!1)}catch(a){n=setInterval(i,r)}else n=setInterval(i,r)}var _=this.context,T=(0,C["default"])(_).getInstance(),w=void 0,j=void 0;return w={append:l,remove:d,abort:p,createSourceBuffer:e,removeSourceBuffer:t,getBufferRange:n,getAllRanges:r,getTotalBufferedTime:i,getBufferLength:o,getRangeDifference:s,setConfig:g}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../TextSourceBuffer.js"),a=r(o),s=e("./MediaController.js"),u=r(s),l=e("../../dash/DashAdapter.js"),c=r(l),d=e("../utils/ErrorHandler.js"),f=r(d),p=e("./StreamController.js"),h=r(p),g=e("../TextTracks.js"),y=r(g),m=e("../utils/VTTParser.js"),v=r(m),_=e("../utils/TTMLParser.js"),b=r(_),T=e("../models/VideoModel.js"),E=r(T),w=e("../vo/Error.js"),S=r(w),j=e("../../core/EventBus.js"),C=r(j),M=e("../../core/events/Events.js"),O=r(M),x=e("../../core/FactoryMaker.js"),A=r(x),I=22;i.__dashjs_factory_name="SourceBufferController";var D=A["default"].getSingletonFactory(i);D.QUOTA_EXCEEDED_ERROR_CODE=I,n["default"]=D,t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../../dash/DashAdapter.js":13,"../TextSourceBuffer.js":38,"../TextTracks.js":39,"../models/VideoModel.js":83,"../utils/ErrorHandler.js":127,"../utils/TTMLParser.js":131,"../utils/VTTParser.js":132,"../vo/Error.js":135,"./MediaController.js":46,"./StreamController.js":51}],51:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){ue=null,ae=[],ve=(0,b["default"])(K).getInstance(),ce=!0,de=!1,fe=!1,_e=!1,be=!0,Te=null,pe=!1,he=!1}function t(e,t){ce=e,le=t,oe.initialize(),Y=(0,c["default"])(K).getInstance(),Y.setConfig({log:V,manifestModel:X,dashManifestModel:Q}),Y.initialize(W),ye=(0,v["default"])(K).getInstance(),me=(0,a["default"])(K).getInstance(),me.setConfig({streamController:G,timelineConverter:oe,metricsModel:J,dashMetrics:Z,manifestModel:X,dashManifestModel:Q,adapter:$,videoModel:ye}),q.on(h["default"].TIME_SYNCHRONIZATION_COMPLETED,I,this),q.on(h["default"].PLAYBACK_SEEKING,p,this),q.on(h["default"].PLAYBACK_TIME_UPDATED,l,this),q.on(h["default"].PLAYBACK_ENDED,d,this),q.on(h["default"].PLAYBACK_ERROR,s,this),q.on(h["default"].PLAYBACK_STARTED,g,this),q.on(h["default"].PLAYBACK_PAUSED,m,this),q.on(h["default"].MANIFEST_UPDATED,D,this),q.on(h["default"].STREAM_BUFFERING_COMPLETED,_,this)}function n(e,t){t=t||new Date,Te&&(se&&se.getProcessors().forEach(function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)}),J.addPlayList(Te),Te=null)}function r(e){Te=new S["default"],Te.start=new Date,Te.mstart=1e3*me.getTime(),Te.starttype=e,se&&se.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Te)})}function i(e,t,n){q.trigger(e,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:n.getStreamInfo()})}function o(){se.isActivated()&&0===se.getStreamInfo().index&&(se.startEventController(),ce&&me.play())}function s(e){var t=e.error?e.error.code:0,n="";if(-1!==t){switch(t){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE";break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}pe=!0,e.error.msExtendedCode&&(n+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),V("Video Element Error: "+n),e.error&&V(e.error),ie.mediaSourceError(n),U()}}function l(e){var t=ye.getPlaybackQuality();t&&J.addDroppedFrames("video",t),me.isSeeking()||e.timeToEnd<H&&te.signalEndOfStream(ge)}function d(){var e=T();w(se,e),n(e?S["default"].Trace.END_OF_PERIOD_STOP_REASON:S["default"].Trace.END_OF_CONTENT_STOP_REASON)}function p(e){var t=E(e.seekTime);t&&t!==se?(n(S["default"].Trace.END_OF_PERIOD_STOP_REASON),w(se,t,e.seekTime)):n(S["default"].Trace.USER_REQUEST_STOP_REASON),r(S["default"].SEEK_START_REASON)}function g(){be?(be=!1,r(S["default"].INITIAL_PLAYOUT_START_REASON)):_e&&(_e=!1,r(S["default"].RESUME_FROM_PAUSE_START_REASON))}function m(e){e.ended||(_e=!0,n(S["default"].Trace.USER_REQUEST_STOP_REASON))}function _(e){var t=T(),n=e.streamInfo.isLast;ge&&n&&te.signalEndOfStream(ge),t&&t.activate(ge)}function T(){var e=se.getStreamInfo().start,t=se.getStreamInfo().duration;return ae.filter(function(n){return n.getStreamInfo().start===e+t})[0]}function E(e){var t=0,n=null,r=ae.length;r>0&&(t+=ae[0].getStartTime());for(var i=0;r>i;i++)if(n=ae[i],t+=n.getDuration(),t>e)return n;return null}function w(e,t,n){if(!de&&e&&t&&e!==t){i(h["default"].PERIOD_SWITCH_STARTED,e,t),de=!0;var r=function(){void 0!==n&&me.seek(n),me.play(),se.startEventController(),de=!1,i(h["default"].PERIOD_SWITCH_COMPLETED,e,t)};e.deactivate(),se=t,me.initialize(se.getStreamInfo()),j(r)}}function j(e){var t,n=function r(n){V("MediaSource is open!"),V(n),window.URL.revokeObjectURL(t),ge.removeEventListener("sourceopen",r),ge.removeEventListener("webkitsourceopen",r),M(),se.activate(ge),e&&e()};ge?te.detachMediaSource(ye):ge=te.createMediaSource(),ge.addEventListener("sourceopen",n,!1),ge.addEventListener("webkitsourceopen",n,!1),t=te.attachMediaSource(ge,ye)}function M(){var e,t;e=se.getStreamInfo().manifestInfo.duration,t=te.setDuration(ge,e),V("Duration successfully set to: "+t)}function O(){var e,t,n,r,o,a,s,l=X.getValue(),c=J.getMetricsFor("stream"),d=Z.getCurrentManifestUpdate(c),f=[];if(l){a=$.getStreamsInfo(l),ue&&(q.trigger(h["default"].PROTECTION_CREATED,{controller:ue,manifest:l}),ue.setMediaElement(ye.getElement()),le&&ue.setProtectionData(le));try{if(0===a.length)throw new Error("There are no streams");for(J.updateManifestUpdateInfo(d,{currentTime:me.getTime(),buffered:ye.getElement().buffered,presentationStartTime:a[0].start,clientTimeOffset:oe.getClientTimeOffset()}),fe=!0,r=0,t=a.length;t>r;r++){for(e=a[r],o=0,n=ae.length;n>o;o++)ae[o].getId()===e.id&&(s=ae[o],f.push(s),s.updateData(e));s||(s=(0,u["default"])(K).create({manifestModel:X,manifestUpdater:Y,adapter:$,timelineConverter:oe,capabilities:z,errHandler:ie}),s.initialize(e,ue),q.on(h["default"].STREAM_INITIALIZED,A,this),f.push(s),se&&s.updateData(e)),J.addManifestUpdateStreamInfo(d,e.id,e.index,e.start,e.duration),s=null}ae=f,se||(se=ae[0],i(h["default"].PERIOD_SWITCH_STARTED,null,se),me.initialize(se.getStreamInfo()),i(h["default"].PERIOD_SWITCH_COMPLETED,null,se)),ge||j(),fe=!1,x()}catch(p){ie.manifestError(p.message,"nostreamscomposed",l),he=!0,U()}}}function x(){if(!fe){var e=ae.length,t=0;for(o(),t;e>t;t++)if(!ae[t].isInitialized())return;q.trigger(h["default"].STREAMS_COMPOSED)}}function A(){x()}function I(){O()}function D(e){if(e.error)he=!0,U();else{var t,n,r=e.manifest,i=$.getStreamsInfo(r)[0],o=$.getMediaInfoForType(r,i,"video")||$.getMediaInfoForType(r,i,"audio");o&&(t=$.getDataForMedia(o),n=Q.getRepresentationsForAdaptation(r,t)[0].useCalculatedLiveEdgeTime,n&&(V("SegmentTimeline detected using calculated Live Edge Time"),ve.setUseManifestDateHeaderTimeSource(!1)));var a=Q.getUTCTimingSources(e.manifest),s=!Q.getIsDynamic(r)||n?a:a.concat(ve.getUTCTimingSources()),u=(0,y["default"])(K).getInstance().isManifestHTTPS();s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===b["default"].DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),V("Matching default timing source protocol to manifest protocol: ",e.value))}),ne.setConfig({metricsModel:J,dashMetrics:Z}),ne.initialize(s,ve.getUseManifestDateHeaderTimeSource())}}function P(){return ce}function k(){return se?se.getStreamInfo():null}function R(e){return se.getId()===e.id}function L(e){return ae.filter(function(t){return t.getId()===e})[0]}function N(e){W.load(e)}function F(e){Y.setManifest(e)}function B(e){e&&(e.capabilities&&(z=e.capabilities),e.manifestLoader&&(W=e.manifestLoader),e.manifestModel&&(X=e.manifestModel),e.dashManifestModel&&(Q=e.dashManifestModel),e.protectionController&&(ue=e.protectionController),e.adapter&&($=e.adapter),e.metricsModel&&(J=e.metricsModel),e.dashMetrics&&(Z=e.dashMetrics),e.liveEdgeFinder&&(ee=e.liveEdgeFinder),e.mediaSourceController&&(te=e.mediaSourceController),e.timeSyncController&&(ne=e.timeSyncController),e.virtualBuffer&&(re=e.virtualBuffer),e.errHandler&&(ie=e.errHandler),e.timelineConverter&&(oe=e.timelineConverter))}function U(){ne.reset(),n(pe||he?S["default"].Trace.FAILURE_STOP_REASON:S["default"].Trace.USER_REQUEST_STOP_REASON);for(var e=0,t=ae.length;t>e;e++){var r=ae[e];q.off(h["default"].STREAM_INITIALIZED,A,this),r.reset(pe)}ae=[],q.off(h["default"].PLAYBACK_TIME_UPDATED,l,this),q.off(h["default"].PLAYBACK_SEEKING,p,this),q.off(h["default"].PLAYBACK_ERROR,s,this),q.off(h["default"].PLAYBACK_STARTED,g,this),q.off(h["default"].PLAYBACK_PAUSED,m,this),q.off(h["default"].PLAYBACK_ENDED,d,this),q.off(h["default"].STREAM_BUFFERING_COMPLETED,_,this),q.off(h["default"].MANIFEST_UPDATED,D,this),Y.reset(),J.clearAllCurrentMetrics(),X.setValue(null),W.reset(),oe.reset(),ee.reset(),$.reset(),re.reset(),de=!1,fe=!1,se=null,pe=!1,he=!1,be=!0,_e=!1,ge&&(te.detachMediaSource(ye),ge=null),ye=null,ue&&(ue.setMediaElement(null),ue=null,le=null,X.getValue()&&q.trigger(h["default"].PROTECTION_DESTROYED,{data:X.getValue().url})),q.trigger(h["default"].STREAM_TEARDOWN_COMPLETE)}var H=.2,K=this.context,V=(0,C["default"])(K).getInstance().log,q=(0,f["default"])(K).getInstance(),G=void 0,z=void 0,Y=void 0,W=void 0,X=void 0,Q=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,fe=void 0,pe=void 0,he=void 0,ge=void 0,ye=void 0,me=void 0,ve=void 0,_e=void 0,be=void 0,Te=void 0;return G={initialize:t,getAutoPlay:P,getActiveStreamInfo:k,isStreamActive:R,getStreamById:L,load:N,loadWithManifest:F,setConfig:B,reset:U},e(),G}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PlaybackController.js"),a=r(o),s=e("../Stream.js"),u=r(s),l=e("../ManifestUpdater.js"),c=r(l),d=e("../../core/EventBus.js"),f=r(d),p=e("../../core/events/Events.js"),h=r(p),g=e("../models/URIQueryAndFragmentModel.js"),y=r(g),m=e("../models/VideoModel.js"),v=r(m),_=e("../models/MediaPlayerModel.js"),b=r(_),T=e("../../core/FactoryMaker.js"),E=r(T),w=e("../vo/metrics/PlayList.js"),S=r(w),j=e("../../core/Debug.js"),C=r(j);i.__dashjs_factory_name="StreamController",n["default"]=E["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../ManifestUpdater.js":32,"../Stream.js":36,"../models/MediaPlayerModel.js":80,"../models/URIQueryAndFragmentModel.js":82,"../models/VideoModel.js":83,"../vo/metrics/PlayList.js":152,"./PlaybackController.js":48}],52:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){v=!1,_=null,b=null,T=null,E=null,w=null,h.on(u["default"].DATA_UPDATE_COMPLETED,d,this),h.on(u["default"].INIT_FRAGMENT_LOADED,f,this)}function n(e,t,n){T=e,s(t),E=n,w=E.getRepresentationController()}function r(e){try{b=g.createSourceBuffer(_,e),v||(b.hasOwnProperty("initialize")&&b.initialize(T,this),v=!0)}catch(t){y.mediaSourceError("Error creating "+T+" source buffer.")}return b}function i(){return b}function o(e){b=e}function s(e){_=e}function l(){return E}function c(e){h.off(u["default"].DATA_UPDATE_COMPLETED,d,this),h.off(u["default"].INIT_FRAGMENT_LOADED,f,this),e||(g.abort(_,b),g.removeSourceBuffer(_,b))}function d(e){e.sender.getStreamProcessor()===E&&h.trigger(u["default"].TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function f(e){e.fragmentModel===E.getFragmentModel()&&e.chunk.bytes&&g.append(b,e.chunk)}var p=this.context,h=(0,a["default"])(p).getInstance(),g=e.sourceBufferController,y=e.errHandler,m=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0,w=void 0;return m={initialize:n,createBuffer:r,getBuffer:i,setBuffer:o,getStreamProcessor:l,setMediaSource:s,reset:c},t(),m}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/EventBus.js"),a=r(o),s=e("../../core/events/Events.js"),u=r(s),l=e("../../core/FactoryMaker.js"),c=r(l);i.__dashjs_factory_name="TextController",n["default"]=c["default"].getClassFactory(i),t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11}],53:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){P=t,A=0,I=!1,D=!1,k={"urn:mpeg:dash:utc:http-head:2014":T,"urn:mpeg:dash:utc:http-xsdate:2014":b.bind(null,f),"urn:mpeg:dash:utc:http-iso:2014":b.bind(null,p),"urn:mpeg:dash:utc:direct:2014":_,"urn:mpeg:dash:utc:http-head:2012":T,"urn:mpeg:dash:utc:http-xsdate:2012":b.bind(null,f),"urn:mpeg:dash:utc:http-iso:2012":b.bind(null,p),"urn:mpeg:dash:utc:direct:2012":_,"urn:mpeg:dash:utc:http-ntp:2014":v,"urn:mpeg:dash:utc:ntp:2014":v,
"urn:mpeg:dash:utc:sntp:2014":v},i()||(S(e),o(!0))}function t(e){e&&(e.metricsModel&&(R=e.metricsModel),e.dashMetrics&&(L=e.dashMetrics))}function n(){return l()}function r(e){I=e}function i(){return I}function o(e){D=e}function s(e){A=e}function l(){return A}function d(e){var t,n,r=60,i=60,o=1e3,a=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,s=a.exec(e);return t=Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10),s[6]&&(parseInt(s[6],10)||0),s[7]&&parseFloat(s[7])*o||0),s[9]&&s[10]&&(n=parseInt(s[9],10)*i+parseInt(s[10],10),t+=("+"===s[8]?-1:1)*n*r*o),new Date(t).getTime()}function f(e){var t=Date.parse(e);return isNaN(t)&&(t=d(e)),t}function p(e){return Date.parse(e)}function m(e){return Date.parse(e)}function v(e,t,n){n()}function _(e,t,n){var r=f(e);return isNaN(r)?void n():void t(r)}function b(e,t,n,r,i){var o,a,s=!1,u=new XMLHttpRequest,l=i?"HEAD":"GET",c=t.match(/\S+/g);t=c.shift(),o=function(){s||(s=!0,c.length?b(e,c.join(" "),n,r,i):r())},a=function(){var t,r;200===u.status&&(t=i?u.getResponseHeader("Date"):u.response,r=e(t),isNaN(r)||(n(r),s=!0))},u.open(l,t),u.timeout=y||0,u.onload=a,u.onloadend=o,u.send()}function T(e,t,n){b(m,e,t,n,!0)}function E(){var e=R.getReadOnlyMetricsFor("stream"),t=L.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?w(!0):(s(n-(new Date).getTime()),w(!1,n/1e3,A))}function w(e,t,n){r(!1),O.trigger(c["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new a["default"](g):null})}function S(e,t){var n=t||0,i=e[n],o=function(e,t){var n=!e||!t;n&&P?E():w(n,e,t)};r(!0),i?k.hasOwnProperty(i.schemeIdUri)?k[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;s(n),M("Local time:      "+new Date(t)),M("Server time:     "+new Date(e)),M("Difference (ms): "+n),o(e,n)},function(){S(e,n+1)}):S(e,n+1):(s(0),o())}function j(){o(!1),r(!1)}var C=this.context,M=(0,h["default"])(C).getInstance().log,O=(0,u["default"])(C).getInstance(),x=void 0,A=void 0,I=void 0,D=void 0,P=void 0,k=void 0,R=void 0,L=void 0;return x={initialize:e,getOffsetToDeviceTimeMs:n,setConfig:t,reset:j}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./../vo/Error.js"),a=r(o),s=e("./../../core/EventBus.js"),u=r(s),l=e("./../../core/events/Events.js"),c=r(l),d=e("../../core/FactoryMaker.js"),f=r(d),p=e("../../core/Debug.js"),h=r(p),g=1,y=5e3;i.__dashjs_factory_name="TimeSyncController";var m=f["default"].getSingletonFactory(i);m.TIME_SYNC_FAILED_ERROR_CODE=g,m.HTTP_TIMEOUT_MS=y,n["default"]=m,t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/FactoryMaker.js":9,"./../../core/EventBus.js":8,"./../../core/events/Events.js":11,"./../vo/Error.js":135}],54:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){S.on(u["default"].XLINK_ELEMENT_LOADED,l,C)}function n(e){M=e}function r(e){O=e}function i(e){var t;A=new f["default"](M,"",!0),x=e,t=d(x.Period_asArray,x,g,p),s(t,g,p)}function o(){S.off(u["default"].XLINK_ELEMENT_LOADED,l,C)}function s(e,t,n){var r,i,o,a={};for(a.elements=e,a.type=t,a.resolveType=n,0===a.elements.length&&c(a),o=0;o<a.elements.length;o++)r=a.elements[o],i=-1!==r.url.indexOf("http://")?r.url:r.originalContent.BaseURL+r.url,j.load(i,r,a)}function l(e){var t,n,r,i="<response>",o="</response>",a="";t=e.element,n=e.resolveObject,t.resolvedContent&&(r=t.resolvedContent.indexOf(">")+1,a=t.resolvedContent.substr(0,r)+i+t.resolvedContent.substr(r)+o,t.resolvedContent=A.xml_str2json(a)),T(n)&&c(n)}function c(e){var t,n,r=[];if(_(e),e.resolveType===h&&S.trigger(u["default"].XLINK_READY,{manifest:x}),e.resolveType===p)switch(e.type){case g:for(t=0;t<x[g+"_asArray"].length;t++)n=x[g+"_asArray"][t],n.hasOwnProperty(y+"_asArray")&&(r=r.concat(d(n[y+"_asArray"],n,y,p))),n.hasOwnProperty(m+"_asArray")&&(r=r.concat(d(n[m+"_asArray"],n,m,p)));s(r,y,p);break;case y:S.trigger(u["default"].XLINK_READY,{manifest:x})}}function d(e,t,n,r){var i,o,a,s=[];for(o=e.length-1;o>=0;o--)i=e[o],i.hasOwnProperty("xlink:href")&&i["xlink:href"]===v&&e.splice(o,1);for(o=0;o<e.length;o++)i=e[o],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(a=b(i["xlink:href"],t,n,o,r,i),s.push(a));return s}function _(e){var t,n,r,i,o,a,s=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],n=t.type+"_asArray",!t.resolvedContent||E())delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],s.push(t.originalContent);else if(t.resolvedContent)for(o=0;o<t.resolvedContent[n].length;o++)r=t.resolvedContent[n][o],s.push(r);for(t.parentElement[n].splice(t.index,1),a=0;a<s.length;a++)t.parentElement[n].splice(t.index+a,0,s[a]);s=[]}e.elements.length>0&&O.run(x)}function b(e,t,n,r,i,o){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:o,resolvedContent:null,resolved:!1}}function T(e){var t,n;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],n.resolved===!1)return!1;return!0}function E(){return!1}var w=this.context,S=(0,a["default"])(w).getInstance(),j=e.xlinkLoader,C=void 0,M=void 0,O=void 0,x=void 0,A=void 0;return C={resolveManifestOnLoad:i,setMatchers:n,setIron:r,reset:o},t(),C}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/EventBus.js"),a=r(o),s=e("../../core/events/Events.js"),u=r(s),l=e("../../core/FactoryMaker.js"),c=r(l),d=e("../../../externals/xml2json.js"),f=r(d),p="onLoad",h="onActuate",g="Period",y="AdaptationSet",m="EventStream",v="urn:mpeg:dash:resolve-to-zero:2013";i.__dashjs_factory_name="XlinkController",n["default"]=c["default"].getClassFactory(i),t.exports=n["default"]},{"../../../externals/xml2json.js":4,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11}],55:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return o=(0,a["default"])(r).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),(0,c["default"])(r).create(e)}function t(){return(0,h["default"])(r).getInstance()}function n(){return(0,f["default"])(r).getInstance()}var r=this.context,i=void 0,o=void 0;return i={createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./utils/DVBErrorsTranslator.js"),a=r(o),s=e("./MetricsReportingEvents.js"),u=r(s),l=e("./controllers/MetricsCollectionController.js"),c=r(l),d=e("./metrics/MetricsHandlerFactory.js"),f=r(d),p=e("./reporting/ReportingFactory.js"),h=r(p),g=e("../../core/FactoryMaker.js"),y=r(g);i.__dashjs_factory_name="MetricsReporting";var m=y["default"].getClassFactory(i);m.events=u["default"],n["default"]=m,t.exports=n["default"]},{"../../core/FactoryMaker.js":9,"./MetricsReportingEvents.js":56,"./controllers/MetricsCollectionController.js":57,"./metrics/MetricsHandlerFactory.js":62,"./reporting/ReportingFactory.js":67,"./utils/DVBErrorsTranslator.js":69}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},s=e("../../core/events/EventsBase.js"),u=r(s),l=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{"../../core/events/EventsBase.js":12}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t){if(!t.error){var n=Object.keys(i),r=(0,u["default"])(o).getInstance({dashManifestModel:e.dashManifestModel}).getMetrics(t.manifest);r.forEach(function(t){var r=JSON.stringify(t);if(i.hasOwnProperty(r))n.splice(r,1);else try{var s=(0,a["default"])(o).create(e);s.initialize(t),i[r]=s}catch(u){}}),n.forEach(function(e){i[e].reset(),delete i[e]}),s.trigger(f["default"].METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(i).forEach(function(e){i[e].reset()}),i={}}function r(){s.on(h["default"].MANIFEST_UPDATED,t),s.on(h["default"].STREAM_TEARDOWN_COMPLETE,n)}var i={},o=this.context,s=e.eventBus;return r(),{}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./MetricsController.js"),a=r(o),s=e("../utils/ManifestParsing.js"),u=r(s),l=e("../../../core/FactoryMaker.js"),c=r(l),d=e("../MetricsReportingEvents.js"),f=r(d),p=e("../../../core/events/Events.js"),h=r(p);i.__dashjs_factory_name="MetricsCollectionController",n["default"]=c["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../MetricsReportingEvents.js":56,"../utils/ManifestParsing.js":71,"./MetricsController.js":58}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t){try{o=(0,u["default"])(s).create({mediaElement:e.mediaElement}),o.initialize(t.Range),i=(0,c["default"])(s).create({log:e.log}),i.initialize(t.Reporting,o),r=(0,f["default"])(s).create({log:e.log,eventBus:e.eventBus}),r.initialize(t.metrics,i)}catch(a){throw n(),a}}function n(){r&&r.reset(),i&&i.reset(),o&&o.reset()}var r=void 0,i=void 0,o=void 0,a=void 0,s=this.context;return a={initialize:t,reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("./RangeController.js"),u=r(s),l=e("./ReportingController.js"),c=r(l),d=e("./MetricsHandlersController.js"),f=r(d);i.__dashjs_factory_name="MetricsController",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"./MetricsHandlersController.js":59,"./RangeController.js":60,"./ReportingController.js":61}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function n(e,n){e.split(",").forEach(function(e,t,r){var o;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var a=r[t+1];a&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(e+=","+a,delete r[t+1])}o=l.create(e,n),o&&i.push(o)}),u.on(c["default"].METRIC_ADDED,t,o),u.on(c["default"].METRIC_UPDATED,t,o)}function r(){u.off(c["default"].METRIC_ADDED,t,o),u.off(c["default"].METRIC_UPDATED,t,o),i.forEach(function(e){return e.reset()}),i=[]}var i=[],o=void 0,s=this.context,u=e.eventBus,l=(0,a["default"])(s).getInstance({log:e.log,eventBus:e.eventBus});return o={initialize:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../metrics/MetricsHandlerFactory.js"),a=r(o),s=e("../../../core/FactoryMaker.js"),u=r(s),l=e("../../MediaPlayerEvents.js"),c=r(l);i.__dashjs_factory_name="MetricsHandlersController",n["default"]=u["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../MediaPlayerEvents.js":34,"../metrics/MetricsHandlerFactory.js":62}],60:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;l.add(t,n)}),o=!!e[0]._useWallClockTime)}function n(){l.clear()}function r(){l=(0,u["default"])(a).create()}function i(){var e,t=l.length;if(!t)return!0;e=o?(new Date).getTime()/1e3:c.currentTime;for(var n=0;t>n;n+=1){var r=l.start(n),i=l.end(n);if(e>=r&&i>e)return!0}return!1}var o=!1,a=this.context,s=void 0,l=void 0,c=e.mediaElement;return s={initialize:t,reset:n,isEnabled:i},r(),s}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("../../utils/CustomTimeRanges.js"),u=r(s);i.__dashjs_factory_name="RangeController",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../utils/CustomTimeRanges.js":125}],61:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){e.some(function(e){var n=a.create(e,t);return n?(i.push(n),!0):void 0})}function n(){i.forEach(function(e){return e.reset()}),i=[]}function r(e,t){i.forEach(function(n){return n.report(e,t)})}var i=[],o=void 0,a=(0,u["default"])(this.context).getInstance({log:e.log});return o={initialize:t,reset:n,report:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("../reporting/ReportingFactory.js"),u=r(s);i.__dashjs_factory_name="ReportingController",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../reporting/ReportingFactory.js":67}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(t,n){var r,i=t.match(a);if(i){try{r=l[i[1]](s).create({eventBus:e.eventBus}),r.initialize(i[1],n,i[3],i[5])}catch(u){r=null,o("MetricsHandlerFactory: Could not create handler for type "+i[1]+" with args "+i[3]+", "+i[5]+" ("+u.message+")")}return r}}function n(e,t){l[e]=t}function r(e){delete l[e]}var i=void 0,o=e.log,a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,l={BufferLevel:u["default"],DVBErrors:c["default"],HttpList:f["default"],PlayList:h["default"],RepSwitchList:h["default"],TcpList:h["default"]};return i={create:t,register:n,unregister:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("./handlers/BufferLevelHandler.js"),u=r(s),l=e("./handlers/DVBErrorsHandler.js"),c=r(l),d=e("./handlers/HttpListHandler.js"),f=r(d),p=e("./handlers/GenericMetricHandler.js"),h=r(p);i.__dashjs_factory_name="MetricsHandlerFactory",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"./handlers/BufferLevelHandler.js":63,"./handlers/DVBErrorsHandler.js":64,"./handlers/GenericMetricHandler.js":65,"./handlers/HttpListHandler.js":66}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){try{return Object.keys(h).map(function(e){return h[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function t(){var t=e();t&&d!==t.t&&(d=t.t,a.report(l,t))}function n(e,n,r){n&&(s=p.validateN(r),a=n,l=p.reconstructFullMetricName(e,r),c=setInterval(t,s))}function r(){clearInterval(c),c=null,s=0,a=null,d=null}function i(e,t,n){"BufferLevel"===e&&(h[n]=t)}var o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=void 0,f=this.context,p=(0,u["default"])(f).getInstance(),h=[];return o={initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../core/FactoryMaker.js"),a=r(o),s=e("../../utils/HandlerHelpers.js"),u=r(s);i.__dashjs_factory_name="BufferLevelHandler",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../../core/FactoryMaker.js":9,"../../utils/HandlerHelpers.js":70}],64:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){s.off(u["default"].METRICS_INITIALISATION_COMPLETE,t,this),s.trigger(u["default"].BECAME_REPORTING_PLAYER)}function n(e,n){n&&(a=n,s.on(u["default"].METRICS_INITIALISATION_COMPLETE,t,this))}function r(){a=null}function i(e,t){"DVBErrors"===e&&a&&a.report(e,t)}var o=void 0,a=void 0,s=e.eventBus;return o={initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../core/FactoryMaker.js"),a=r(o),s=e("../../MetricsReportingEvents.js"),u=r(s);n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../../core/FactoryMaker.js":9,"../../MetricsReportingEvents.js":56}],65:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){i=e,o=t}function t(){o=null,i=void 0}function n(e,t){e===i&&o&&o.report(i,t)}var r=void 0,i=void 0,o=void 0;return r={initialize:e,reset:t,handleNewMetric:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="GenericMetricHandler",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../../core/FactoryMaker.js":9}],66:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){var e=d;e.length&&o&&o.report(l,e),d=[]}function t(t,n,r,i){n&&(a=f.validateN(r),o=n,i&&i.length&&(s=i),l=f.reconstructFullMetricName(t,r,i),c=setInterval(e,a))}function n(){clearInterval(c),c=null,a=null,s=null,d=[],o=null}function r(e,t){"HttpList"===e&&(s&&s!==t.type||d.push(t))}var i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=[],f=(0,u["default"])(this.context).getInstance();return i={initialize:t,reset:n,handleNewMetric:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../core/FactoryMaker.js"),a=r(o),s=e("../../utils/HandlerHelpers.js"),u=r(s);i.__dashjs_factory_name="HttpListHandler",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../../core/FactoryMaker.js":9,"../../utils/HandlerHelpers.js":70}],67:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n;try{n=i[e.schemeIdUri](o).create(),n.initialize(e,t)}catch(r){n=null,a("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+r.message+")")}return n}function n(e,t){i[e]=t}function r(e){delete i[e]}var i={"urn:dvb:dash:reporting:2014":u["default"]},o=this.context,a=e.log,s=void 0;return s={create:t,register:n,unregister:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("./reporters/DVBReporting.js"),u=r(s);i.__dashjs_factory_name="ReportingFactory",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"./reporters/DVBReporting.js":68}],68:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t,n){var r=new XMLHttpRequest,i=function(){var e=y.indexOf(r);-1!==e&&(y.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};y.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(o){r.onerror()}}function t(t,n){Array.isArray(n)||(n=[n]),d&&h.isEnabled()&&n.forEach(function(n){var r=a.serialise(n);l&&"DVBErrors"!==t&&(r="metricname="+t+"&"+r),r=p+"?"+r,e(r,null,function(){d=!1})})}function n(e,t){var n;if(h=t,p=e["dvb:reportingUrl"],!p)throw new Error("required parameter missing (dvb:reportingUrl)");f||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=s.random())&&(d=!0),f=!0)}function r(){g||(y.forEach(function(e){return e.abort()}),y=[]),f=!1,d=!1,p=null,h=null}var i=void 0,o=this.context,a=(0,u["default"])(o).getInstance(),s=(0,c["default"])(o).getInstance(),l=!0,d=!1,f=!1,p=null,h=null,g=!0,y=[];return i={report:t,initialize:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../core/FactoryMaker.js"),a=r(o),s=e("../../utils/MetricSerialiser.js"),u=r(s),l=e("../../utils/RNG.js"),c=r(l);i.__dashjs_factory_name="DVBReporting",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../../../core/FactoryMaker.js":9,"../../utils/MetricSerialiser.js":72,"../../utils/RNG.js":73}],69:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e){e.error||(y=e.manifest)}function n(){s({errorcode:a["default"].BECAME_REPORTER})}function r(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&s({errorcode:e.responsecode||a["default"].CONNECTION_ERROR,url:e.url,terror:e.tresponse})}function i(e){switch(e.metric){case"HttpList":r(e.value)}}function o(e){var t,n=e.error?e.error.code:0;switch(n){case MediaError.MEDIA_ERR_NETWORK:t=a["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=a["default"].CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t})}function s(e){var t=new a["default"];if(y){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=y.originalUrl||y.url),t.servicelocation||(t.servicelocation=y.BaseURL.serviceLocation),t.terror||(t.terror=new Date),g.addDVBErrors(t)}}function l(){h.on(u["default"].MANIFEST_UPDATED,t,p),h.on(c["default"].METRIC_ADDED,i,p),h.on(c["default"].METRIC_UPDATED,i,p),h.on(c["default"].PLAYBACK_ERROR,o,p),h.on(f["default"].BECAME_REPORTING_PLAYER,n,p)}function d(){h.off(u["default"].MANIFEST_UPDATED,t,p),h.off(c["default"].METRIC_ADDED,i,p),h.off(c["default"].METRIC_UPDATED,i,p),h.off(c["default"].PLAYBACK_ERROR,o,p),h.off(f["default"].BECAME_REPORTING_PLAYER,n,p)}var p=void 0,h=e.eventBus,g=e.metricsModel,y=void 0;return p={initialise:l,reset:d},l(),p}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/DVBErrors.js"),a=r(o),s=e("../../../core/events/Events.js"),u=r(s),l=e("../../MediaPlayerEvents.js"),c=r(l),d=e("../MetricsReportingEvents.js"),f=r(d),p=e("../../../core/FactoryMaker.js"),h=r(p);i.__dashjs_factory_name="DVBErrorsTranslator",n["default"]=h["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../../MediaPlayerEvents.js":34,"../MetricsReportingEvents.js":56,"../vo/DVBErrors.js":74}],70:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw"missing n";if(isNaN(e))throw"n is NaN";if(0>e)throw"n must be positive";return e}}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="HandlerHelpers",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9}],71:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t,n){var r,o,a=i.getMpd(e),s=0;return t?s=a.availabilityStartTime.getTime()/1e3:(r=this.getRegularPeriods(e,a),r.length&&(s=r[0].start)),o=s,n&&n.hasOwnProperty("starttime")&&(o+=n.starttime),o}function n(e){var n=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(r){var o=new a["default"],s=i.getIsDynamic(e);r.hasOwnProperty("metrics")&&(o.metrics=r.metrics,r.Range_asArray&&r.Range_asArray.forEach(function(n){var r=new u["default"];r.starttime=t(e,s,n),n.hasOwnProperty("duration")?r.duration=n.duration:r.duration=i.getDuration(e),r._useWallClockTime=s,o.Range.push(r)}),r.Reporting_asArray&&(r.Reporting_asArray.forEach(function(e){var t=new c["default"];if(e.hasOwnProperty("schemeIdUri")){t.schemeIdUri=e.schemeIdUri;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);o.Reporting.push(t)}}),n.push(o)))}),n}var r=void 0,i=e.dashManifestModel;return r={getMetrics:n}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/Metrics.js"),a=r(o),s=e("../vo/Range.js"),u=r(s),l=e("../vo/Reporting.js"),c=r(l),d=e("../../../core/FactoryMaker.js"),f=r(d);i.__dashjs_factory_name="ManifestParsing",n["default"]=f["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../vo/Metrics.js":75,"../vo/Range.js":76,"../vo/Reporting.js":77}],72:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(t){var n,r,i=[],o=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(r=t[n],(void 0===r||null===r)&&(r=""),Array.isArray(r)){if(!r.length)continue;o=[],r.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);o.push(n?t:e(t))}),r=encodeURIComponent(o.join(","))}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}return{serialise:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="MetricSerialiser",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9}],73:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){n&&(a||(a=new r(o)),n.getRandomValues(a),s=0)}function t(t,r){var o;return t||(t=0),r||(r=1),n?(s===a.length&&e(),o=a[s]/i,s+=1):o=Math.random(),o*(r-t)+t}var n=window.crypto||window.msCrypto,r=Uint32Array,i=Math.pow(2,8*r.BYTES_PER_ELEMENT)-1,o=10,a=void 0,s=void 0,u=void 0;return u={random:t},e(),u}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="RNG",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9}],74:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",n["default"]=i,t.exports=n["default"]},{}],75:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.metrics="",this.Range=[],this.Reporting=[]};n["default"]=i,t.exports=n["default"]},{}],76:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};n["default"]=i,t.exports=n["default"]},{}],77:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.schemeIdUri="",this.value=""};n["default"]=i,t.exports=n["default"]},{}],78:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){I=null,R=null,D=[],P=[],O.on(u["default"].LOADING_COMPLETED,S,A),O.on(u["default"].PLAYBACK_SEEKING,j,A)}function n(e){R=e}function r(e){I=e}function i(){return I}function o(e){var t=function(e,t){return e.action===f["default"].ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return e.url===t.url&&e.startTime===t.startTime},r=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality},i=function(i){var o,a,s=!1,u=i.length;for(a=0;u>a;a++)if(o=i[a],n(e,o)||r(e,o)||t(e,o)){s=!0;break}return s};return i(P)||i(D)}function s(e){var t,n=[],r=[],i=1;if(!e||!e.state)return n;e.state instanceof Array?(i=e.state.length,t=e.state):t=[e.state];for(var o=0;i>o;o++)n=E(t[o]),r=r.concat(T(n,e));return r}function l(e){var t,n=D.length-1,r=NaN,i=null;for(t=n;t>=0;t--)i=D[t],r=i.startTime,!isNaN(r)&&e>r&&_(D,i)}function c(){var e=[];for(R.abort();P.length>0;)e.push(P[0]),_(P,P[0]);return P=[],e}function d(e){var t=(new Date).getTime();if(e){if(t<e.delayLoadingTime)return void(k=setTimeout(function(){d(e)},e.delayLoadingTime-t));switch(e.action){case f["default"].ACTION_COMPLETE:D.push(e),w(e,y),O.trigger(u["default"].STREAM_COMPLETED,{request:e,fragmentModel:this});break;case f["default"].ACTION_DOWNLOAD:w(e,g),P.push(e),m(e);break;default:M("Unknown request action.")}}}function p(){O.off(u["default"].LOADING_COMPLETED,S,this),O.off(u["default"].PLAYBACK_SEEKING,j,this),R.abort(),R=null,C=null,D=[],P=[]}function m(e){O.trigger(u["default"].FRAGMENT_LOADING_STARTED,{sender:A,request:e}),R.load(e)}function _(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function b(e,t,n){var r,i=e.length-1,o=NaN,a=NaN,s=null;for(r=i;r>=0;r--)if(s=e[r],o=s.startTime,a=o+s.duration,n=n||s.duration/2,!isNaN(o)&&!isNaN(a)&&t+n>=o&&a>t-n||isNaN(o)&&isNaN(t))return s;return null}function T(e,t){return t?t.hasOwnProperty("time")?[b(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}):e}function E(e){var t;switch(e){case g:t=P;break;case y:t=D;break;default:t=[]}return t}function w(e,t){if(e){var n=e.mediaType,r=new Date,i=e.type,o=e.startTime,a=e.availabilityStartTime,s=e.duration,u=e.quality,l=e.range;x.addSchedulingInfo(n,r,i,o,a,s,u,l,t),x.addRequestsQueue(n,P,D)}}function S(e){if(e.sender===R){var t=e.request,n=e.response,r=e.error;P.splice(P.indexOf(t),1),n&&!r&&D.push(t),w(t,r?v:y),O.trigger(u["default"].FRAGMENT_LOADING_COMPLETED,{request:t,response:n,error:r,sender:this})}}function j(){void 0!==k&&clearTimeout(k)}var C=this.context,M=(0,h["default"])(C).getInstance().log,O=(0,a["default"])(C).getInstance(),x=e.metricsModel,A=void 0,I=void 0,D=void 0,P=void 0,k=void 0,R=void 0;return A={setLoader:n,setScheduleController:r,getScheduleController:i,getRequests:s,isFragmentLoaded:o,removeExecutedRequestsBeforeTime:l,abortRequests:c,executeRequest:d,reset:p},t(),A}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/EventBus.js"),a=r(o),s=e("../../core/events/Events.js"),u=r(s),l=e("../../core/FactoryMaker.js"),c=r(l),d=e("../vo/FragmentRequest.js"),f=r(d),p=e("../../core/Debug.js"),h=r(p),g="loading",y="executed",m="canceled",v="failed";i.__dashjs_factory_name="FragmentModel";var _=c["default"].getClassFactory(i);_.FRAGMENT_MODEL_LOADING=g,_.FRAGMENT_MODEL_EXECUTED=y,_.FRAGMENT_MODEL_CANCELED=m,_.FRAGMENT_MODEL_FAILED=v,n["default"]=_,t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../vo/FragmentRequest.js":136}],79:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){return o}function t(e){o=e,r.trigger(u["default"].MANIFEST_LOADED,{data:e})}var n=this.context,r=(0,a["default"])(n).getInstance(),i=void 0,o=void 0;return i={getValue:e,setValue:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/EventBus.js"),a=r(o),s=e("../../core/events/Events.js"),u=r(s),l=e("../../core/FactoryMaker.js"),c=r(l);i.__dashjs_factory_name="ManifestModel",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){ae=[],oe=!1,ie=!0,ue=!1,we=!1,de={enabled:!0,ttl:l},fe={enabled:!0,ttl:c},se=u,le=p,ce=h,pe=g,he=y,ge=m,ye=v,me=_,ve=d,_e=f,be=b,Te=T,Ee=E}function t(e){we=e}function n(){return we}function r(e){ve=e}function i(){return ve}function o(e){_e=e}function a(){return _e}function s(e){pe=e}function w(){return pe}function S(e){he=e}function j(){return he}function C(e){ge=e}function M(){return ge}function O(e){ye=e}function x(){return ye}function A(e){me=e}function I(){return me}function D(e){le=e}function P(){return le}function k(e,t){de.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(de.ttl=t)}function R(){return de;
}function L(e,t){fe.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(fe.ttl=t)}function N(){return fe}function F(e){ce=e}function B(){return ce}function U(e){be=e}function H(){return be}function K(e){Te=e}function V(){return Te}function q(e){Ee=e}function G(){return Ee}function z(e){ue=e}function Y(){return ue}function W(e){se=e}function X(){return se}function Q(e){ie=e}function $(){return ie}function J(e){oe=e}function Z(){return oe}function ee(e){ae=e}function te(){return ae}function ne(){}var re=void 0,ie=void 0,oe=void 0,ae=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,fe=void 0,pe=void 0,he=void 0,ge=void 0,ye=void 0,me=void 0,ve=void 0,_e=void 0,be=void 0,Te=void 0,Ee=void 0,we=void 0;return re={setBufferOccupancyABREnabled:t,getBufferOccupancyABREnabled:n,setBandwidthSafetyFactor:r,getBandwidthSafetyFactor:i,setAbandonLoadTimeout:o,getAbandonLoadTimeout:a,setLastBitrateCachingInfo:k,getLastBitrateCachingInfo:R,setLastMediaSettingsCachingInfo:L,getLastMediaSettingsCachingInfo:N,setStableBufferTime:s,getStableBufferTime:w,setBufferTimeAtTopQuality:S,getBufferTimeAtTopQuality:j,setBufferTimeAtTopQualityLongForm:C,getBufferTimeAtTopQualityLongForm:M,setLongFormContentDurationThreshold:O,getLongFormContentDurationThreshold:x,setRichBufferThreshold:A,getRichBufferThreshold:I,setBufferToKeep:D,getBufferToKeep:P,setBufferPruningInterval:F,getBufferPruningInterval:B,setFragmentRetryAttempts:U,getFragmentRetryAttempts:H,setFragmentRetryInterval:K,getFragmentRetryInterval:V,setWallclockTimeUpdateInterval:q,getWallclockTimeUpdateInterval:G,setScheduleWhilePaused:z,getScheduleWhilePaused:Y,getUseSuggestedPresentationDelay:Z,setUseSuggestedPresentationDelay:J,setLiveDelayFragmentCount:W,getLiveDelayFragmentCount:X,setUseManifestDateHeaderTimeSource:Q,getUseManifestDateHeaderTimeSource:$,setUTCTimingSources:ee,getUTCTimingSources:te,reset:ne},e(),re}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o),s={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},u=4,l=36e4,c=36e4,d=.9,f=1e4,p=30,h=30,g=12,y=30,m=60,v=600,_=20,b=3,T=1e3,E=50;i.__dashjs_factory_name="MediaPlayerModel";var w=a["default"].getSingletonFactory(i);w.DEFAULT_UTC_TIMING_SOURCE=s,n["default"]=w,t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],81:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){G={}}function t(e){e&&e.adapter&&(q=e.adapter)}function n(){K.trigger(A["default"].METRICS_CHANGED)}function r(e){K.trigger(A["default"].METRIC_CHANGED,{mediaType:e}),n()}function i(e,t,n){K.trigger(A["default"].METRIC_UPDATED,{mediaType:e,metric:t,value:n}),r(e)}function o(e,t,n){K.trigger(A["default"].METRIC_ADDED,{mediaType:e,metric:t,value:n}),r(e)}function s(e){delete G[e],r(e)}function l(){G={},n()}function d(e){return G.hasOwnProperty(e)?G[e]:null}function p(e){var t;return G.hasOwnProperty(e)?t=G[e]:(t=new a["default"],G[e]=t),t}function g(e,t,n,r,i,a){var s=new u["default"];return s.tcpid=t,s.dest=n,s.topen=r,s.tclose=i,s.tconnect=a,p(e).TcpList.push(s),o(e,q.metricsList.TCP_CONNECTION,s),s}function m(e,t,n,r,i,a,s,u,l,d,f,h,g){var y=new c["default"];return i&&i!==r&&(m(e,null,n,r,null,a,s,null,null,null,f,null,null),y.actualurl=i),y.tcpid=t,y.type=n,y.url=r,y.range=a,y.trequest=s,y.tresponse=u,y.responsecode=d,y._tfinish=l,y._stream=e,y._mediaduration=f,y._responseHeaders=h,g?g.forEach(function(e){_(y,e.s,e.d,e.b)}):(delete y.interval,delete y.trace),p(e).HttpList.push(y),o(e,q.metricsList.HTTP_REQUEST,y),y}function _(e,t,n,r){var i=new c["default"].Trace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function T(e,t,n,r,i){var a=new f["default"];return a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,p(e).RepSwitchList.push(a),o(e,q.metricsList.TRACK_SWITCH,a),a}function w(e,t,n){var r=new h["default"];return r.t=t,r.level=n,p(e).BufferLevel.push(r),o(e,q.metricsList.BUFFER_LEVEL,r),r}function j(e,t,n){var r=new y["default"];return r.target=n,r.state=t,p(e).BufferState.push(r),o(e,q.metricsList.BUFFER_STATE,r),r}function M(e,t,n,r){var i=new v["default"];return i.time=t,i.range=r,i.manifestInfo=n,p(e).DVRInfo.push(i),o(e,q.metricsList.DVR_INFO,i),i}function x(e,t){var n=new b["default"],r=p(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n?r[r.length-1]:(r.push(n),o(e,q.metricsList.DROPPED_FRAMES,n),n)}function I(e,t,n,r,i,a,s,u,l){var c=new S["default"];return c.mediaType=e,c.t=t,c.type=n,c.startTime=r,c.availabilityStartTime=i,c.duration=a,c.quality=s,c.range=u,c.state=l,p(e).SchedulingInfo.push(c),o(e,q.metricsList.SCHEDULING_INFO,c),c}function D(e,t,n){var r=new O["default"];r.loadingRequests=t,r.executedRequests=n,p(e).RequestsQueue=r,o(e,q.metricsList.REQUESTS_QUEUE,r)}function P(e,t,n,r,i,a,s,u,l,c){var d=new E["default"],f=p("stream");return d.mediaType=e,d.type=t,d.requestTime=n,d.fetchTime=r,d.availabilityStartTime=i,d.presentationStartTime=a,d.clientTimeOffset=s,d.currentTime=u,d.buffered=l,d.latency=c,f.ManifestUpdate.push(d),o(e,q.metricsList.MANIFEST_UPDATE,d),d}function R(e,t){if(e){for(var n in t)e[n]=t[n];i(e.mediaType,q.metricsList.MANIFEST_UPDATE,e)}}function L(e,t,n,r,o){if(e){var a=new E["default"].StreamInfo;return a.id=t,a.index=n,a.start=r,a.duration=o,e.streamInfo.push(a),i(e.mediaType,q.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),a}return null}function N(e,t,n,r,o,a,s,u){if(e){var l=new E["default"].TrackInfo;return l.id=t,l.index=n,l.streamIndex=r,l.mediaType=o,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=a,e.trackInfo.push(l),i(e.mediaType,q.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function F(e){var t="stream";return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,p(t).PlayList.push(e),o(t,q.metricsList.PLAY_LIST,e),e}function B(e){var t="stream";return p(t).DVBErrors.push(e),o(t,q.metricsList.DVB_ERRORS,e),e}function U(e,t){var n=new k["default"];return n._s=t,p(e).BolaState=[n],o(e,"BolaState",n),n}var H=this.context,K=(0,C["default"])(H).getInstance(),V=void 0,q=void 0,G=void 0;return V={metricsChanged:n,metricChanged:r,metricUpdated:i,metricAdded:o,clearCurrentMetricsForType:s,clearAllCurrentMetrics:l,getReadOnlyMetricsFor:d,getMetricsFor:p,addTcpConnection:g,addHttpRequest:m,addRepresentationSwitch:T,addBufferLevel:w,addBufferState:j,addDVRInfo:M,addDroppedFrames:x,addSchedulingInfo:I,addRequestsQueue:D,addManifestUpdate:P,updateManifestUpdateInfo:R,addManifestUpdateStreamInfo:L,addManifestUpdateRepresentationInfo:N,addPlayList:F,addDVBErrors:B,updateBolaState:U,setConfig:t},e(),V}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/MetricsList.js"),a=r(o),s=e("../vo/metrics/TCPConnection.js"),u=r(s),l=e("../vo/metrics/HTTPRequest.js"),c=r(l),d=e("../vo/metrics/RepresentationSwitch.js"),f=r(d),p=e("../vo/metrics/BufferLevel.js"),h=r(p),g=e("../vo/metrics/BufferState.js"),y=r(g),m=e("../vo/metrics/DVRInfo.js"),v=r(m),_=e("../vo/metrics/DroppedFrames.js"),b=r(_),T=e("../vo/metrics/ManifestUpdate.js"),E=r(T),w=e("../vo/metrics/SchedulingInfo.js"),S=r(w),j=e("../../core/EventBus.js"),C=r(j),M=e("../vo/metrics/RequestsQueue.js"),O=r(M),x=e("../../core/events/Events.js"),A=r(x),I=e("../../core/FactoryMaker.js"),D=r(I),P=e("../vo/metrics/BolaState.js"),k=r(P);i.__dashjs_factory_name="MetricsModel",n["default"]=D["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../vo/MetricsList.js":140,"../vo/metrics/BolaState.js":145,"../vo/metrics/BufferLevel.js":146,"../vo/metrics/BufferState.js":147,"../vo/metrics/DVRInfo.js":148,"../vo/metrics/DroppedFrames.js":149,"../vo/metrics/HTTPRequest.js":150,"../vo/metrics/ManifestUpdate.js":151,"../vo/metrics/RepresentationSwitch.js":153,"../vo/metrics/RequestsQueue.js":154,"../vo/metrics/SchedulingInfo.js":155,"../vo/metrics/TCPConnection.js":156}],82:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){s=new a["default"],u=[],l=!1}function t(){return s}function n(){return u}function r(){return l}function i(e){function t(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function n(e,t,n){return t>0&&(d&&0===u.length?u=n[t].split(/[&]/):f&&(i=n[t].split(/[&]/))),n}if(!e)return null;var r,i=[],o=new RegExp(/[?]/),a=new RegExp(/[#]/),c=new RegExp(/^(https:)?\/\//i),d=o.test(e),f=a.test(e);return l=c.test(e),r=e.split(/[?#]/).map(n),u.length>0&&(u=u.reduce(t,null)),i.length>0&&(i=i.reduce(t,null),i.forEach(function(e){s[e.key]=e.value})),e}var o=void 0,s=void 0,u=void 0,l=void 0;return o={initialize:e,parseURI:i,getURIFragmentData:t,getURIQueryData:n,isManifestHTTPS:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/URIFragmentData.js"),a=r(o),s=e("../../core/FactoryMaker.js"),u=r(s);i.__dashjs_factory_name="URIQueryAndFragmentModel",n["default"]=u["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9,"../vo/URIFragmentData.js":144}],83:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){T=[]}function t(e){!v||v.readyState<2||(v.playbackRate=e)}function n(e){if(v.currentTime!=e)try{v.currentTime=e}catch(t){0===v.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){v.currentTime=e},400)}}function r(){return v}function i(e){v=e}function o(e){e&&(v.src=e)}function a(){return v.src}function s(){return b}function u(e){b=e}function l(){return _}function c(e){_=e,_.style.position="absolute",_.style.display="flex",_.style.overflow="hidden",_.style.pointerEvents="none",_.style.top=0,_.style.left=0}function d(e,t){g(e,t)}function f(){return T.length>0}function p(e){var n=void 0;null===e||v.seeking||-1!==T.indexOf(e)||(T.push(e),1===T.length&&(n=document.createEvent("Event"),n.initEvent("waiting",!0,!1),E=v.playbackRate,t(0),v.dispatchEvent(n)))}function h(e){var n=T.indexOf(e),r=void 0;null!==e&&(-1!==n&&T.splice(n,1),f()===!1&&0===v.playbackRate&&(r=document.createEvent("Event"),r.initEvent("playing",!0,!1),t(E||1),v.dispatchEvent(r)))}function g(e,t){t?p(e):h(e)}function y(){var e="webkitDroppedFrameCount"in v,t="getVideoPlaybackQuality"in v,n=null;return t?n=v.getVideoPlaybackQuality():e&&(n={droppedVideoFrames:v.webkitDroppedFrameCount,creationTime:new Date}),n}var m=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0;return m={initialize:e,setCurrentTime:n,setStallState:d,getElement:r,setElement:i,setSource:o,getSource:a,getVideoContainer:s,setVideoContainer:u,getTTMLRenderingDiv:l,setTTMLRenderingDiv:c,getPlaybackQuality:y}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="VideoModel",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],84:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../../../externals/base64.js"),s=r(a),u=function(){function e(){i(this,e)}return o(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e){return"pssh"in e?s["default"].decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e),n=!1,r={},i=0;!n;){var o,a,s,u,l,c=i;if(i>=t.buffer.byteLength)break;if(o=t.getUint32(i),a=i+o,i+=4,1886614376===t.getUint32(i))if(i+=4,s=t.getUint8(i),0===s||1===s){i++,i+=3,u="";var d,f;for(d=0;4>d;d++)f=t.getUint8(i+d).toString(16),u+=1===f.length?"0"+f:f;for(i+=4,u+="-",d=0;2>d;d++)f=t.getUint8(i+d).toString(16),u+=1===f.length?"0"+f:f;for(i+=2,u+="-",d=0;2>d;d++)f=t.getUint8(i+d).toString(16),u+=1===f.length?"0"+f:f;for(i+=2,u+="-",d=0;2>d;d++)f=t.getUint8(i+d).toString(16),u+=1===f.length?"0"+f:f;for(i+=2,u+="-",d=0;6>d;d++)f=t.getUint8(i+d).toString(16),u+=1===f.length?"0"+f:f;i+=6,u=u.toLowerCase(),l=t.getUint32(i),i+=4,r[u]=t.buffer.slice(c,a),i=a}else i=a;else i=a}return r}}]),e}();n["default"]=u,t.exports=n["default"]},{"../../../externals/base64.js":1}],85:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var n=null,r=(0,u["default"])(i).getInstance();r.setConfig({log:e.log}),r.initialize();var o=t(e);return!n&&o&&(n=(0,a["default"])(i).create({protectionModel:o,protectionKeyController:r,adapter:e.adapter,eventBus:e.eventBus,log:e.log}),e.capabilities.setEncryptedMediaSupported(!0)),n}function t(e){var t=e.log,r=e.eventBus,o=e.videoModel.getElement();return void 0!==o.onencrypted&&void 0!==o.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(t("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,f["default"])(i).create({log:t,eventBus:r})):n(o,b)?(t("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,h["default"])(i).create({log:t,eventBus:r,api:n(o,b)})):n(o,_)?(t("EME detected on this user agent! (ProtectionModel_01b)"),(0,y["default"])(i).create({log:t,eventBus:r,api:n(o,_)})):(t("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}var r=void 0,i=this.context;return r={createProtectionSystem:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./controllers/ProtectionController.js"),a=r(o),s=e("./controllers/ProtectionKeyController.js"),u=r(s),l=e("./ProtectionEvents.js"),c=r(l),d=e("./models/ProtectionModel_21Jan2015.js"),f=r(d),p=e("./models/ProtectionModel_3Feb2014.js"),h=r(p),g=e("./models/ProtectionModel_01b.js"),y=r(g),m=e("../../core/FactoryMaker.js"),v=r(m),_=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],b=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];i.__dashjs_factory_name="Protection";var T=v["default"].getClassFactory(i);T.events=c["default"],n["default"]=T,t.exports=n["default"]},{"../../core/FactoryMaker.js":9,"./ProtectionEvents.js":86,"./controllers/ProtectionController.js":87,"./controllers/ProtectionKeyController.js":88,"./models/ProtectionModel_01b.js":92,"./models/ProtectionModel_21Jan2015.js":93,"./models/ProtectionModel_3Feb2014.js":94}],86:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},s=e("../../core/events/EventsBase.js"),u=r(s),l=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return o(t,e),t}(u["default"]),c=new l;n["default"]=c,t.exports=n["default"]},{"../../core/events/EventsBase.js":12}],87:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){O=E.getKeySystems(),x=[],P=!1,k="temporary",u["default"].extend(y["default"].events)}function n(e,t,n){if(!P){var r;t||n||(r=S.getStreamsInfo(e)[0]),A=t||(r?S.getMediaInfoForType(e,r,"audio"):null),I=n||(r?S.getMediaInfoForType(e,r,"video"):null);var i=I?I:A,o=E.getSupportedKeySystemsFromContentProtection(i.contentProtection);o&&o.length>0&&v(o,!0),P=!0}}function r(e){var t=a["default"].getPSSHForKeySystem(R,e);if(t){for(var n=w.getAllInitData(),r=0;r<n.length;r++)if(E.initDataEquals(t,n[r]))return void C("DRM: Ignoring initData because we have already seen it!");try{w.createKeySession(t,k)}catch(i){j.trigger(u["default"].KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+i.message})}}else j.trigger(u["default"].KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+R.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function i(e){w.loadKeySession(e)}function o(e){w.removeKeySession(e)}function s(e){w.closeKeySession(e)}function l(e){w.setServerCertificate(e)}function d(e){e?(w.setMediaElement(e),j.on(u["default"].NEED_KEY,T,this),j.on(u["default"].INTERNAL_KEY_MESSAGE,b,this)):null===e&&(w.setMediaElement(e),j.off(u["default"].NEED_KEY,T,this),j.off(u["default"].INTERNAL_KEY_MESSAGE,b,this))}function p(e){k=e}function h(e){D=e}function g(){d(null),R=void 0,w.reset(),w=null}function m(e){var t=null,n=e.systemString;return D&&(t=n in D?D[n]:null),t}function v(e,t){var n=this,i=[],o=[];I&&o.push(new c["default"](I.codec)),A&&i.push(new c["default"](A.codec));var a,s=new f["default"](i,o,"optional","temporary"===k?"optional":"required",[k]),l=[];if(R){for(a=0;a<e.length;a++)if(R===e[a].ks){var d=function(){l.push({ks:e[a].ks,configs:[s]});var i=function o(i){j.off(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,o,n),i.error?t||j.trigger(u["default"].KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+i.error}):(C("DRM: KeySystem Access Granted"),j.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:i.data}),r(e[a].initData))};return j.on(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,i,n),w.requestKeySystemAccess(l),"break"}();if("break"===d)break}}else if(void 0===R){R=null,x.push(e);for(var p=0;p<e.length;p++)l.push({ks:e[p].ks,configs:[s]});var h,g=function m(e){j.off(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,m,n),e.error?(R=void 0,j.off(u["default"].INTERNAL_KEY_SYSTEM_SELECTED,y,n),t||j.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+e.error})):(h=e.data,C("DRM: KeySystem Access Granted ("+h.keySystem.systemString+")!  Selecting key system..."),w.selectKeySystem(h))},y=function v(e){if(j.off(u["default"].INTERNAL_KEY_SYSTEM_SELECTED,v,n),j.off(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,g,n),e.error)R=void 0,t||j.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+e.error});else{R=w.getKeySystem(),j.trigger(u["default"].KEY_SYSTEM_SELECTED,{data:h});for(var i=0;i<x.length;i++)for(a=0;a<x[i].length;a++)if(R===x[i][a].ks){r(x[i][a].initData);break}}};j.on(u["default"].INTERNAL_KEY_SYSTEM_SELECTED,y,n),j.on(u["default"].KEY_SYSTEM_ACCESS_COMPLETE,g,n),w.requestKeySystemAccess(l)}else x.push(e)}function _(e,t){j.trigger(u["default"].LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function b(e){if(C("DRM: onKeyMessage"),e.error)return void C(e.error);var t=e.data;j.trigger(u["default"].KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,o=m(R),s=R.systemString,l=E.getLicenseServer(R,o,n),c={sessionToken:i,messageType:n};if(!l)return C("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void _(c);if(E.isClearKey(R)){var d=E.processClearKeyLicenseRequest(o,r);if(d)return C("DRM: ClearKey license request handled by application!"),_(c),void w.updateKeySession(i,d)}var f=new XMLHttpRequest,p=null;if(o)if(o.serverURL){var h=o.serverURL;"string"==typeof h&&""!==h?p=h:"object"==typeof h&&h.hasOwnProperty(n)&&(p=h[n])}else o.laURL&&""!==o.laURL&&(p=o.laURL);else p=R.getLicenseServerURLFromInitData(a["default"].getPSSHData(i.initData)),p||(p=e.data.laURL);if(p=l.getServerURLFromMessage(p,r,n),!p)return void _(c,"DRM: No license server URL specified!");f.open(l.getHTTPMethod(n),p,!0),f.responseType=l.getResponseType(s,n),f.onload=function(){200==this.status?(_(c),w.updateKeySession(i,l.getLicenseMessage(this.response,s,n))):_(c,"DRM: "+s+' update, XHR status is "'+this.statusText+'" ('+this.status+"), expected to be 200. readyState is "+this.readyState+".  Response is "+(this.response?l.getErrorResponse(this.response,s,n):"NONE"))},f.onabort=function(){_(c,"DRM: "+s+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},f.onerror=function(){_(c,"DRM: "+s+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var g=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(f.withCredentials=!0),f.setRequestHeader(t,e[t])};o&&g(o.httpRequestHeaders),g(R.getRequestHeadersFromMessage(r)),o&&o.withCredentials&&(f.withCredentials=!0),f.send(R.getLicenseRequestFromMessage(r))}function T(e){if(C("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void C("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);var t=e.key.initData;ArrayBuffer.isView(t)&&(t=t.buffer),C("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var n=E.getSupportedKeySystems(t);return 0===n.length?void C("DRM: Received needkey event with initData, but we don't support any of the key systems!"):void v(n,!1)}var E=e.protectionKeyController,w=e.protectionModel,S=e.adapter,j=e.eventBus,C=e.log,M=void 0,O=void 0,x=void 0,A=void 0,I=void 0,D=void 0,P=void 0,k=void 0,R=void 0;return M={initialize:n,createKeySession:r,loadKeySession:i,removeKeySession:o,closeKeySession:s,setServerCertificate:l,setMediaElement:d,setSessionType:p,setProtectionData:h,reset:g},t(),M}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../CommonEncryption.js"),a=r(o),s=e("../../../core/events/Events.js"),u=r(s),l=e("../vo/MediaCapability.js"),c=r(l),d=e("../vo/KeySystemConfiguration.js"),f=r(d),p=e("../../../core/FactoryMaker.js"),h=r(p),g=e("../Protection.js"),y=r(g);i.__dashjs_factory_name="ProtectionController",n["default"]=h["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../CommonEncryption.js":84,"../Protection.js":85,"../vo/KeySystemConfiguration.js":104,"../vo/MediaCapability.js":105}],88:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.log&&(_=e.log)}function t(){T=[];var e;e=(0,f["default"])(g).getInstance(),T.push(e),e=(0,c["default"])(g).getInstance(),T.push(e),e=(0,u["default"])(g).getInstance(),T.push(e),E=e}function n(){return T}function r(e){for(var t=0;t<T.length;t++)if(T[t].systemString===e)return T[t];return null}function i(e){return e===E}function o(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1}function s(e){var t,n,r,i,o=[];if(e)for(r=0;r<T.length;++r)for(n=T[r],i=0;i<e.length;++i)if(t=e[i],t.schemeIdUri.toLowerCase()===n.schemeIdURI){var a=n.getInitData(t);a&&o.push({ks:T[r],initData:a})}return o}function l(e){var t,n=[],r=a["default"].parsePSSHList(e);for(t=0;t<T.length;++t)T[t].uuid in r&&n.push({ks:T[t],initData:r[T[t].uuid]});return n}function d(e,t,n){if("license-release"===n||"individualization-request"==n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0,h["default"])(g).getInstance():"com.widevine.alpha"===e.systemString?r=(0,v["default"])(g).getInstance():"com.microsoft.playready"===e.systemString?r=(0,y["default"])(g).getInstance():"org.w3.clearkey"===e.systemString&&(r=(0,b["default"])(g).getInstance()),r}function p(e,t){try{return E.getClearKeysFromProtectionData(e,t)}catch(n){return _("Failed to retrieve clearkeys from ProtectionData"),null}}var g=this.context,m=void 0,_=void 0,T=void 0,E=void 0;return m={initialize:t,isClearKey:i,initDataEquals:o,getKeySystems:n,getKeySystemBySystemString:r,getSupportedKeySystemsFromContentProtection:s,getSupportedKeySystems:l,getLicenseServer:d,processClearKeyLicenseRequest:p,setConfig:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./../CommonEncryption.js"),a=r(o),s=e("./../drm/KeySystemClearKey.js"),u=r(s),l=e("./../drm/KeySystemWidevine.js"),c=r(l),d=e("./../drm/KeySystemPlayReady.js"),f=r(d),p=e("./../servers/DRMToday.js"),h=r(p),g=e("./../servers/PlayReady.js"),y=r(g),m=e("./../servers/Widevine.js"),v=r(m),_=e("./../servers/ClearKey.js"),b=r(_),T=e("../../../core/FactoryMaker.js"),E=r(T);i.__dashjs_factory_name="ProtectionKeyController",n["default"]=E["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"./../CommonEncryption.js":84,"./../drm/KeySystemClearKey.js":89,"./../drm/KeySystemPlayReady.js":90,"./../drm/KeySystemWidevine.js":91,"./../servers/ClearKey.js":95,"./../servers/DRMToday.js":96,"./../servers/PlayReady.js":97,"./../servers/Widevine.js":98}],89:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],o=0;o<r.kids.length;o++){var s=r.kids[o],l=e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");i.push(new a["default"](s,l))}n=new u["default"](i)}return n}function t(e){return c["default"].parseInitDataFromContentProtection(e)}function n(){return null}function r(e){return new Uint8Array(e)}function i(){return null}var o=void 0;return o={uuid:p,schemeIdURI:g,systemString:h,getInitData:t,getRequestHeadersFromMessage:n,getLicenseRequestFromMessage:r,getLicenseServerURLFromInitData:i,getClearKeysFromProtectionData:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/KeyPair.js"),a=r(o),s=e("../vo/ClearKeyKeySet.js"),u=r(s),l=e("../CommonEncryption.js"),c=r(l),d=e("../../../core/FactoryMaker.js"),f=r(d),p="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",h="org.w3.clearkey",g="urn:uuid:"+p;i.__dashjs_factory_name="KeySystemClearKey",n["default"]=f["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../CommonEncryption.js":84,"../vo/ClearKeyKeySet.js":99,"../vo/KeyPair.js":102}],90:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){var t,n,r={},i=new DOMParser,o="utf16"===s?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,o),n=i.parseFromString(t,"application/xml");for(var a=n.getElementsByTagName("name"),u=n.getElementsByTagName("value"),l=0;l<a.length;l++)r[a[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r}function t(e){var t,n,r=null,i=new DOMParser,o="utf16"===s?new Uint16Array(e):new Uint8Array(e);if(t=String.fromCharCode.apply(null,o),n=i.parseFromString(t,"application/xml"),n.getElementsByTagName("Challenge")[0]){var a=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;a&&(r=f["default"].decode(a))}return r}function n(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,o=0;n>o;o++){var a=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===a){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),c=i.parseFromString(l,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var f=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=s}return null}function r(e){var t,n,r,i,o,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=0,c=null;if("pssh"in e)return a["default"].parseInitDataFromContentProtection(e);if("pro"in e)c=f["default"].decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;c=f["default"].decodeArray(e.prheader.__text)}return t=c.length,n=4+s.length+u.length+4+t,r=new ArrayBuffer(n),i=new Uint8Array(r),o=new DataView(r),o.setUint32(l,n),l+=4,i.set(s,l),l+=s.length,i.set(u,l),l+=u.length,o.setUint32(l,t),l+=4,i.set(c,l),l+=t,i.buffer}function i(e){if("utf8"!==e&&"utf16"!==e)throw new u["default"]("Illegal PlayReady message format! -- "+e);s=e}var o=void 0,s="utf16";return o={uuid:p,schemeIdURI:g,systemString:h,getInitData:r,getRequestHeadersFromMessage:e,getLicenseRequestFromMessage:t,getLicenseServerURLFromInitData:n,setPlayReadyMessageFormat:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../CommonEncryption.js"),a=r(o),s=e("../../vo/Error.js"),u=r(s),l=e("../../../core/FactoryMaker.js"),c=r(l),d=e("../../../../externals/base64.js"),f=r(d),p="9a04f079-9840-4286-ab92-e65be0885f95",h="com.microsoft.playready",g="urn:uuid:"+p;i.__dashjs_factory_name="KeySystemPlayReady",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../../externals/base64.js":1,"../../../core/FactoryMaker.js":9,"../../vo/Error.js":135,"../CommonEncryption.js":84}],91:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return a["default"].parseInitDataFromContentProtection(e)}function t(){return null}function n(e){return new Uint8Array(e)}function r(){return null}var i=void 0;return i={uuid:l,schemeIdURI:d,systemString:c,getInitData:e,getRequestHeadersFromMessage:t,getLicenseRequestFromMessage:n,getLicenseServerURLFromInitData:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../CommonEncryption.js"),a=r(o),s=e("../../../core/FactoryMaker.js"),u=r(s),l="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",c="com.widevine.alpha",d="urn:uuid:"+l;
i.__dashjs_factory_name="KeySystemWidevine",n["default"]=u["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../CommonEncryption.js":84}],92:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){A=null,I=null,k=[],R=[],D=(0,a["default"])(j).getInstance(),P=(0,b["default"])(j).getInstance(),N=E()}function n(){A&&S();for(var e=0;e<R.length;e++)g(R[e]);C.trigger(v["default"].TEARDOWN_COMPLETE)}function r(){return I}function i(){for(var e=[],t=0;t<k.length;t++)e.push(k[t].initData);for(var t=0;t<R.length;t++)e.push(R[t].initData);return e}function o(e){var t=A;t||(t=document.createElement("video"));for(var n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,o=e[r].configs,a=null,s=null,u=0;u<o.length;u++){var l=o[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var c=0;c<l.length;c++)""!==t.canPlayType(l[c].contentType,i)&&s.push(l[c])}if(!(!a&&!s||a&&0===a.length||s&&0===s.length)){n=!0;var d=new h["default"](a,s),f=D.getKeySystemBySystemString(i);C.trigger(v["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new y["default"](f,d)});break}}n||C.trigger(v["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){I=e.keySystem,C.trigger(v["default"].INTERNAL_KEY_SYSTEM_SELECTED)}function l(e){A!==e&&(A&&S(),A=e,A&&(A.addEventListener(O.keyerror,N),A.addEventListener(O.needkey,N),A.addEventListener(O.keymessage,N),A.addEventListener(O.keyadded,N),C.trigger(v["default"].VIDEO_ELEMENT_SELECTED)))}function d(e){if(!I)throw new Error("Can not create sessions until you have selected a key system");if(L||0===R.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return k.push(t),A[O.generateKeyRequest](I.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")}function p(e,t){var n=e.sessionID;if(D.isClearKey(I))for(var r=0;r<t.keyPairs.length;r++)A[O.addKey](I.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else A[O.addKey](I.systemString,new Uint8Array(t),e.initData,n)}function g(e){A[O.cancelKeyRequest](I.systemString,e.sessionID)}function m(){}function _(){}function T(){}function E(){return{handleEvent:function(e){var t=null;switch(e.type){case O.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;C.trigger(v["default"].NEED_KEY,{key:new u["default"](n,"cenc")});break;case O.keyerror:if(t=w(R,e.sessionId),t||(t=w(k,e.sessionId)),t){var r="";switch(e.errorCode.code){case 1:r+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:r+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:r+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:r+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:r+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:r+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}r+="  System Code = "+e.systemCode,C.trigger(v["default"].KEY_ERROR,{data:new c["default"](t,r)})}else M("No session token found for key error");break;case O.keyadded:t=w(R,e.sessionId),t||(t=w(k,e.sessionId)),t?(M("DRM: Key added."),C.trigger(v["default"].KEY_ADDED,{data:t})):M("No session token found for key added");break;case O.keymessage:if(L=null!==e.sessionId&&void 0!==e.sessionId,L?(t=w(R,e.sessionId),!t&&k.length>0&&(t=k.shift(),R.push(t),t.sessionID=e.sessionId)):k.length>0&&(t=k.shift(),R.push(t),0!==k.length&&P.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=i,C.trigger(v["default"].INTERNAL_KEY_MESSAGE,{data:new f["default"](t,i,e.defaultURL)})}else M("No session token found for key message")}}}}function w(e,t){if(t&&e){for(var n=e.length,r=0;n>r;r++)if(e[r].sessionID==t)return e[r];return null}return null}function S(){A.removeEventListener(O.keyerror,N),A.removeEventListener(O.needkey,N),A.removeEventListener(O.keymessage,N),A.removeEventListener(O.keyadded,N)}var j=this.context,C=e.eventBus,M=e.log,O=e.api,x=void 0,A=void 0,I=void 0,D=void 0,P=void 0,k=void 0,R=void 0,L=void 0,N=void 0;return x={getAllInitData:i,requestKeySystemAccess:o,getKeySystem:r,selectKeySystem:s,setMediaElement:l,createKeySession:d,updateKeySession:p,closeKeySession:g,setServerCertificate:m,loadKeySession:_,removeKeySession:T,reset:n},t(),x}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../controllers/ProtectionKeyController.js"),a=r(o),s=e("../vo/NeedKey.js"),u=r(s),l=e("../vo/KeyError.js"),c=r(l),d=e("../vo/KeyMessage.js"),f=r(d),p=e("../vo/KeySystemConfiguration.js"),h=r(p),g=e("../vo/KeySystemAccess.js"),y=r(g),m=e("../../../core/events/Events.js"),v=r(m),_=e("../../utils/ErrorHandler.js"),b=r(_),T=e("../../../core/FactoryMaker.js"),E=r(T);i.__dashjs_factory_name="ProtectionModel_01b",n["default"]=E["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../../utils/ErrorHandler.js":127,"../controllers/ProtectionKeyController.js":88,"../vo/KeyError.js":100,"../vo/KeyMessage.js":101,"../vo/KeySystemAccess.js":103,"../vo/KeySystemConfiguration.js":104,"../vo/NeedKey.js":106}],93:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){C=null,M=null,O=null,x=[],I=(0,a["default"])(D).getInstance(),A=E()}function n(){var e,t=x.length;if(0!==t)for(var n=function(e){w(e),0===x.length&&(M?(M.removeEventListener("encrypted",A),M.setMediaKeys(null).then(function(){P.trigger(y["default"].TEARDOWN_COMPLETE)})):P.trigger(y["default"].TEARDOWN_COMPLETE))},r=0;t>r;r++)e=x[r],function(t){e.session.closed.then(function(){n(t)}),T(e)["catch"](function(){n(t)})}(e);else P.trigger(y["default"].TEARDOWN_COMPLETE)}function r(){return C}function i(){for(var e=[],t=0;t<x.length;t++)e.push(x[t].initData);return e}function o(e){b(e,0)}function s(e){e.mksa.createMediaKeys().then(function(t){C=e.keySystem,O=t,M&&M.setMediaKeys(O),P.trigger(y["default"].INTERNAL_KEY_SYSTEM_SELECTED)})["catch"](function(){P.trigger(y["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function l(e){M!==e&&(M&&(M.removeEventListener("encrypted",A),M.setMediaKeys(null)),M=e,M&&(M.addEventListener("encrypted",A),O&&M.setMediaKeys(O)))}function d(e){if(!C||!O)throw new Error("Can not set server certificate until you have selected a key system");O.setServerCertificate(e).then(function(){k("DRM: License server certificate successfully updated."),P.trigger(y["default"].SERVER_CERTIFICATE_UPDATED)})["catch"](function(e){P.trigger(y["default"].SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})}function p(e,t){if(!C||!O)throw new Error("Can not create sessions until you have selected a key system");var n=O.createSession(t),r=S(n,e,t);n.generateRequest("cenc",e).then(function(){k("DRM: Session created.  SessionID = "+r.getSessionID()),P.trigger(y["default"].KEY_SESSION_CREATED,{data:r})})["catch"](function(e){w(r),P.trigger(y["default"].KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})}function g(e,t){var n=e.session;I.isClearKey(C)&&(t=t.toJWK()),n.update(t)["catch"](function(t){P.trigger(y["default"].KEY_ERROR,{data:new c["default"](e,"Error sending update() message! "+t.name)})})}function m(e){if(!C||!O)throw new Error("Can not load sessions until you have selected a key system");var t=O.createSession();t.load(e).then(function(n){if(n){var r=S(t);k("DRM: Session created.  SessionID = "+r.getSessionID()),P.trigger(y["default"].KEY_SESSION_CREATED,{data:r})}else P.trigger(y["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+e+")"})})["catch"](function(t){P.trigger(y["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+e+")! "+t.name})})}function v(e){var t=e.session;t.remove().then(function(){k("DRM: Session removed.  SessionID = "+e.getSessionID()),P.trigger(y["default"].KEY_SESSION_REMOVED,{data:e.getSessionID()})},function(t){P.trigger(y["default"].KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})})}function _(e){T(e)["catch"](function(t){w(e),P.trigger(y["default"].KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})})}function b(e,t){!function(t){var n=e[t].ks,r=e[t].configs;navigator.requestMediaKeySystemAccess(n.systemString,r).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,r=new h["default"](n,t);r.mksa=e,P.trigger(y["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:r})})["catch"](function(){++t<e.length?b(e,t):P.trigger(y["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(t)}function T(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function E(){return{handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;P.trigger(y["default"].NEED_KEY,{key:new u["default"](t,e.initDataType)})}}}}}function w(e){for(var t=0;t<x.length;t++)if(x[t]===e){x.splice(t,1);break}}function S(e,t,n){var r={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":P.trigger(y["default"].KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;P.trigger(y["default"].INTERNAL_KEY_MESSAGE,{data:new f["default"](this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",r),e.addEventListener("message",r),e.closed.then(function(){w(r),k("DRM: Session closed.  SessionID = "+r.getSessionID()),P.trigger(y["default"].KEY_SESSION_CLOSED,{data:r.getSessionID()})}),x.push(r),r}var j,C,M,O,x,A,I,D=this.context,P=e.eventBus,k=e.log;return j={getAllInitData:i,requestKeySystemAccess:o,getKeySystem:r,selectKeySystem:s,setMediaElement:l,setServerCertificate:d,createKeySession:p,updateKeySession:g,loadKeySession:m,removeKeySession:v,closeKeySession:_,reset:n},t(),j}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../controllers/ProtectionKeyController.js"),a=r(o),s=e("../vo/NeedKey.js"),u=r(s),l=e("../vo/KeyError.js"),c=r(l),d=e("../vo/KeyMessage.js"),f=r(d),p=e("../vo/KeySystemAccess.js"),h=r(p),g=e("../../../core/events/Events.js"),y=r(g),m=e("../../../core/FactoryMaker.js"),v=r(m);i.__dashjs_factory_name="ProtectionModel_21Jan2015",n["default"]=v["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../controllers/ProtectionKeyController.js":88,"../vo/KeyError.js":100,"../vo/KeyMessage.js":101,"../vo/KeySystemAccess.js":103,"../vo/NeedKey.js":106}],94:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){x=null,A=null,I=null,D=null,P=[],R=(0,a["default"])(S).getInstance(),k=T()}function n(){try{for(var e=0;e<P.length;e++)g(P[e]);x&&x.removeEventListener(M.needkey,k),j.trigger(v["default"].TEARDOWN_COMPLETE)}catch(t){j.trigger(v["default"].TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function r(){return A}function i(){for(var e=[],t=0;t<P.length;t++)e.push(P[t].initData);return e}function o(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,o=null,a=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){o=[];for(var c=0;c<u.length;c++)window[M.MediaKeys].isTypeSupported(r,u[c].contentType)&&o.push(u[c])}if(l&&0!==l.length){a=[];for(var d=0;d<l.length;d++)window[M.MediaKeys].isTypeSupported(r,l[d].contentType)&&a.push(l[d])}if(!(!o&&!a||o&&0===o.length||a&&0===a.length)){t=!0;var f=new h["default"](o,a),p=R.getKeySystemBySystemString(r);j.trigger(v["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new y["default"](p,f)});break}}t||j.trigger(v["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function s(e){try{I=e.mediaKeys=new window[M.MediaKeys](e.keySystem.systemString),A=e.keySystem,D=e,x&&E(),j.trigger(v["default"].INTERNAL_KEY_SYSTEM_SELECTED)}catch(t){j.trigger(v["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+A.systemString+")! Could not create MediaKeys -- TODO"})}}function l(e){x!==e&&(x&&x.removeEventListener(M.needkey,k),x=e,x&&(x.addEventListener(M.needkey,k),I&&E()))}function d(e){if(!A||!I||!D)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null!==D.ksConfiguration.videoCapabilities&&D.ksConfiguration.videoCapabilities.length>0&&(t=D.ksConfiguration.videoCapabilities[0]),null===t&&null!==D.ksConfiguration.audioCapabilities&&D.ksConfiguration.audioCapabilities.length>0&&(t=D.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var n=t.contentType,r=I.createSession(n,new Uint8Array(e)),i=w(r,e);r.addEventListener(M.error,i),r.addEventListener(M.message,i),r.addEventListener(M.ready,i),r.addEventListener(M.close,i),P.push(i),C("DRM: Session created.  SessionID = "+i.getSessionID()),j.trigger(v["default"].KEY_SESSION_CREATED,{data:i})}function p(e,t){var n=e.session;R.isClearKey(A)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))}function g(e){var t=e.session;t.removeEventListener(M.error,e),t.removeEventListener(M.message,e),t.removeEventListener(M.ready,e),t.removeEventListener(M.close,e);for(var n=0;n<P.length;n++)if(P[n]===e){P.splice(n,1);break}t[M.release]()}function m(){}function _(){}function b(){}function T(){return{handleEvent:function(e){switch(e.type){case M.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;j.trigger(v["default"].NEED_KEY,{key:new u["default"](t,"cenc")})}}}}}function E(){var e=null,t=function(){x.removeEventListener("loadedmetadata",e),x[M.setMediaKeys](I),j.trigger(v["default"].VIDEO_ELEMENT_SELECTED)};x.readyState>=1?t():(e=t.bind(this),x.addEventListener("loadedmetadata",e))}function w(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case M.error:var t="KeyError";j.trigger(v["default"].KEY_ERROR,{data:new c["default"](this,t)});break;case M.message:var n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;j.trigger(v["default"].INTERNAL_KEY_MESSAGE,{data:new f["default"](this,n,e.destinationURL)});break;case M.ready:C("DRM: Key added."),j.trigger(v["default"].KEY_ADDED);break;case M.close:C("DRM: Session closed.  SessionID = "+this.getSessionID()),j.trigger(v["default"].KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}var S=this.context,j=e.eventBus,C=e.log,M=e.api,O=void 0,x=void 0,A=void 0,I=void 0,D=void 0,P=void 0,k=void 0,R=void 0;return O={getAllInitData:i,requestKeySystemAccess:o,getKeySystem:r,selectKeySystem:s,setMediaElement:l,createKeySession:d,updateKeySession:p,closeKeySession:g,setServerCertificate:m,loadKeySession:_,removeKeySession:b,reset:n},t(),O}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../controllers/ProtectionKeyController.js"),a=r(o),s=e("../vo/NeedKey.js"),u=r(s),l=e("../vo/KeyError.js"),c=r(l),d=e("../vo/KeyMessage.js"),f=r(d),p=e("../vo/KeySystemConfiguration.js"),h=r(p),g=e("../vo/KeySystemAccess.js"),y=r(g),m=e("../../../core/events/Events.js"),v=r(m),_=e("../../../core/FactoryMaker.js"),b=r(_);i.__dashjs_factory_name="ProtectionModel_3Feb2014",n["default"]=b["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../controllers/ProtectionKeyController.js":88,"../vo/KeyError.js":100,"../vo/KeyMessage.js":101,"../vo/KeySystemAccess.js":103,"../vo/KeySystemConfiguration.js":104,"../vo/NeedKey.js":106}],95:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)}function t(){return"GET"}function n(){return"json"}function r(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),o=r.k.replace(/=/g,"");t.push(new a["default"](i,o))}return new u["default"](t)}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/KeyPair.js"),a=r(o),s=e("../vo/ClearKeyKeySet.js"),u=r(s),l=e("../../../core/FactoryMaker.js"),c=r(l);i.__dashjs_factory_name="ClearKey",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../vo/ClearKeyKeySet.js":99,"../vo/KeyPair.js":102}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(){return"POST"}function n(e){return o[e].responseType}function r(e,t){return o[t].getLicenseMessage(e)}function i(e,t){return o[t].getErrorResponse(e)}var o={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return u["default"].decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}},a=void 0;return a={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("../../../../externals/base64.js"),u=r(s);i.__dashjs_factory_name="DRMToday",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../../externals/base64.js":1,"../../../core/FactoryMaker.js":9}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function r(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="PlayReady",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(){return"POST"}function n(){return"arraybuffer"}function r(e){return e}function i(e){return String.fromCharCode.apply(null,new Uint8Array(e))}var o=void 0;return o={getServerURLFromMessage:e,getHTTPMethod:t,getResponseType:n,getLicenseMessage:r,getErrorResponse:i}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="Widevine",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9}],99:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){if(r(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return i(e,[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;t>e;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),o=i.length,a=new ArrayBuffer(o),s=new Uint8Array(a);for(e=0;o>e;e++)s[e]=i.charCodeAt(e);return a}}]),e}();n["default"]=o,t.exports=n["default"]},{}],100:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t){r(this,o),this.sessionToken=e,this.error=t};n["default"]=i,t.exports=n["default"]},{}],101:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t,n,i){r(this,o),this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=i?i:"license-request"};n["default"]=i,t.exports=n["default"]},{}],102:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t){r(this,o),this.keyID=e,this.key=t};n["default"]=i,t.exports=n["default"]},{}],103:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t){r(this,o),this.keySystem=e,this.ksConfiguration=t};n["default"]=i,t.exports=n["default"]},{}],104:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t,n,i,a){r(this,o),this.initDataTypes=["cenc"],this.audioCapabilities=e,this.videoCapabilities=t,this.distinctiveIdentifier=n,this.persistentState=i,this.sessionTypes=a};n["default"]=i,t.exports=n["default"]},{}],105:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t){r(this,o),this.contentType=e,this.robustness=t};n["default"]=i,t.exports=n["default"]},{}],106:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t){r(this,o),this.initData=e,this.initDataType=t};n["default"]=i,t.exports=n["default"]},{}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){return u.mediaInfo.streamInfo}function n(){return u.mediaInfo}function r(){return u}function i(){return c}function o(){return u.mediaInfo.streamInfo.manifestInfo}function a(){return l}var s=void 0,u=e.streamProcessor.getCurrentRepresentationInfo(),l=e.streamProcessor,c=e.currentValue;return s={getStreamInfo:t,getMediaInfo:n,getTrackInfo:r,getCurrentValue:i,getManifestInfo:o,getStreamProcessor:a}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="RulesContext",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){T={},E=["execute"]}function t(e){e&&(e.abrRulesCollection&&(T[v]=e.abrRulesCollection),e.scheduleRulesCollection&&(T[m]=e.scheduleRulesCollection),e.synchronizationRulesCollection&&(T[_]=e.synchronizationRulesCollection))}function n(e,t){s(e)&&t&&g(T[e],t,!0)}function r(e,t){s(e)&&t&&g(T[e],t,!1)}function i(e,t,n,r,i){var o,a,s={},c=e.length,f=c,p=d(t,r),h=function(e){var t,o;e.value!==u["default"].NO_CHANGE&&(s[e.priority]=i(s[e.priority],e.value)),--c||(s[u["default"].WEAK]!==u["default"].NO_CHANGE&&(o=u["default"].WEAK,t=s[u["default"].WEAK]),s[u["default"].DEFAULT]!==u["default"].NO_CHANGE&&(o=u["default"].DEFAULT,t=s[u["default"].DEFAULT]),s[u["default"].STRONG]!==u["default"].NO_CHANGE&&(o=u["default"].STRONG,t=s[u["default"].STRONG]),o!=u["default"].STRONG&&o!=u["default"].WEAK&&(o=u["default"].DEFAULT),n({value:void 0!==t?t:r,confidence:o}))};for(s[u["default"].STRONG]=u["default"].NO_CHANGE,s[u["default"].WEAK]=u["default"].NO_CHANGE,s[u["default"].DEFAULT]=u["default"].NO_CHANGE,a=0;f>a;a++)o=e[a],l(o)?o.execute(p,h):c--}function o(){var e,t,n=T[v],r=T[m],i=T[_],o=(n.getRules(c["default"].QUALITY_SWITCH_RULES)||[]).concat(n.getRules(c["default"].ABANDON_FRAGMENT_RULES)||[]).concat(r.getRules(f["default"].NEXT_FRAGMENT_RULES)||[]).concat(r.getRules(f["default"].FRAGMENTS_TO_SCHEDULE_RULES)||[]).concat(i.getRules(h["default"].TIME_SYNCHRONIZED_RULES)||[]).concat(i.getRules(h["default"].BEST_GUESS_RULES)||[]),a=o.length;for(t=0;a>t;t++)e=o[t],"function"==typeof e.reset&&e.reset();T={}}function s(e){return e===c["default"].SCHEDULING_RULE||e===c["default"].ABR_RULE}function l(e){var t=E.length,n=0;for(n;t>n;n++)if(!e.hasOwnProperty(E[n]))return!1;return!0}function d(e,t){return(0,a["default"])(y).create({streamProcessor:e,currentValue:t})}function p(e){var t=e.execute.bind(e);return e.execute=function(n,r){var i=function(t){r.call(e,(0,u["default"])(n).create(t.value,t.priority))};t(n,i)},"function"!=typeof e.reset&&(e.reset=function(){}),e}function g(e,t,n){var r,i,o,a,s,u;for(i in t)if(a=t[i],s=a.length)for(u=0;s>u;u++)r=a[u],l(r)&&(r=p(r),o=e.getRules(i),n&&(n=!1,o.length=0),o.push(r))}var y=this.context,b=void 0,T=void 0,E=void 0;return b={initialize:e,setConfig:t,setRules:n,addRules:r,applyRules:i,reset:o}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./RulesContext.js"),a=r(o),s=e("./SwitchRequest.js"),u=r(s),l=e("./abr/ABRRulesCollection.js"),c=r(l),d=e("./scheduling/ScheduleRulesCollection.js"),f=r(d),p=e("./synchronization/SynchronizationRulesCollection.js"),h=r(p),g=e("../../core/FactoryMaker.js"),y=r(g),m=0,v=1,_=2;i.__dashjs_factory_name="RulesController";var b=y["default"].getSingletonFactory(i);b.SCHEDULING_RULE=m,b.ABR_RULE=v,b.SYNC_RULE=_,n["default"]=b,t.exports=n["default"]},{"../../core/FactoryMaker.js":9,"./RulesContext.js":107,"./SwitchRequest.js":109,"./abr/ABRRulesCollection.js":110,"./scheduling/ScheduleRulesCollection.js":119,"./synchronization/SynchronizationRulesCollection.js":122}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=void 0===e?s:e,r=void 0===t?u:t,i={value:n,priority:r};return i}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o),s=999,u=.5,l=1,c=0;i.__dashjs_factory_name="SwitchRequest";var d=a["default"].getClassFactory(i);d.NO_CHANGE=s,d.DEFAULT=u,d.STRONG=l,d.WEAK=c,n["default"]=d,t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){i=[],o=[];var e=(0,b["default"])(n).getInstance(),t=(0,E["default"])(n).getInstance(),r=(0,v["default"])(n).getInstance();r.getBufferOccupancyABREnabled()?(i.push((0,h["default"])(n).create({metricsModel:e,dashMetrics:(0,E["default"])(n).getInstance()})),o.push((0,y["default"])(n).create({metricsModel:e,dashMetrics:(0,E["default"])(n).getInstance()}))):(i.push((0,a["default"])(n).create({metricsModel:e,dashMetrics:t})),i.push((0,u["default"])(n).create({metricsModel:e,dashMetrics:t})),i.push((0,c["default"])(n).create({metricsModel:e})),o.push((0,f["default"])(n).create()))}function t(e){switch(e){case j:return i;case C:return o;default:return null}}var n=this.context,r=void 0,i=void 0,o=void 0;return r={initialize:e,getRules:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ThroughputRule.js"),a=r(o),s=e("./BufferOccupancyRule.js"),u=r(s),l=e("./InsufficientBufferRule.js"),c=r(l),d=e("./AbandonRequestsRule.js"),f=r(d),p=e("./BolaRule.js"),h=r(p),g=e("./BolaAbandonRule.js"),y=r(g),m=e("../../models/MediaPlayerModel.js"),v=r(m),_=e("../../models/MetricsModel.js"),b=r(_),T=e("../../../dash/DashMetrics.js"),E=r(T),w=e("../../../core/FactoryMaker.js"),S=r(w),j="qualitySwitchRules",C="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var M=S["default"].getSingletonFactory(i);M.QUALITY_SWITCH_RULES=j,M.ABANDON_FRAGMENT_RULES=C,n["default"]=M,t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../dash/DashMetrics.js":15,"../../models/MediaPlayerModel.js":80,"../../models/MetricsModel.js":81,"./AbandonRequestsRule.js":111,"./BolaAbandonRule.js":112,"./BolaRule.js":113,"./BufferOccupancyRule.js":114,"./InsufficientBufferRule.js":115,"./ThroughputRule.js":116}],111:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){l={},c={},d=(0,u["default"])(i).getInstance()}function t(e,t){l[e]=l[e]||{},l[e][t]=l[e][t]||{}}function n(e,n){var r,s=(new Date).getTime(),u=e.getMediaInfo(),f=u.type,g=e.getCurrentValue(),y=e.getTrackInfo(),m=g.request,v=e.getStreamProcessor().getABRController(),_=(0,a["default"])(i).create(a["default"].NO_CHANGE,a["default"].WEAK);if(!isNaN(m.index)){if(t(f,m.index),r=l[f][m.index],null===r||null===m.firstByteDate||c.hasOwnProperty(r.id))return void n(_);if(void 0===r.firstByteTime&&(r.firstByteTime=m.firstByteDate.getTime(),r.segmentDuration=m.duration,r.bytesTotal=m.bytesTotal,r.id=m.index),r.bytesLoaded=m.bytesLoaded,r.elapsedTime=s-r.firstByteTime,r.bytesLoaded<r.bytesTotal&&r.elapsedTime>=p){if(r.measuredBandwidthInKbps=Math.round(8*r.bytesLoaded/r.elapsedTime),r.estimatedTimeOfDownload=(8*r.bytesTotal*.001/r.measuredBandwidthInKbps).toFixed(2),r.estimatedTimeOfDownload<r.segmentDuration*h||0===y.quality)return void n(_);if(!c.hasOwnProperty(r.id)){var b=v.getQualityForBitrate(u,r.measuredBandwidthInKbps*d.getBandwidthSafetyFactor());_=(0,a["default"])(i).create(b,a["default"].STRONG),c[r.id]=r,o("AbandonRequestsRule ( ",f,"frag id",r.id,") is asking to abandon and switch to quality to ",b," measured bandwidth was",r.measuredBandwidthInKbps),delete l[f][r.id]}}else r.bytesLoaded===r.bytesTotal&&delete l[f][r.id]}n(_)}function r(){l={},c={}}var i=this.context,o=(0,f["default"])(i).getInstance().log,s=void 0,l=void 0,c=void 0,d=void 0;return s={execute:n,reset:r},e(),s}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../models/MediaPlayerModel.js"),u=r(s),l=e("../../../core/FactoryMaker.js"),c=r(l),d=e("../../../core/Debug.js"),f=r(d),p=500,h=1.5;i.__dashjs_factory_name="AbandonRequestsRule",n["default"]=c["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/Debug.js":7,"../../../core/FactoryMaker.js":9,"../../models/MediaPlayerModel.js":80,"../SwitchRequest.js":109}],112:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){h={},g=(0,u["default"])(l).getInstance()}function n(e,t,n){h[e]={index:t,quality:n}}function r(e,t,n){var r=h[e];return r&&r.index===t&&r.quality===n}function i(e,t){
var i=e.getMediaInfo(),o=i.type,u=d.getReadOnlyMetricsFor(o),p=e.getCurrentValue(),h=p.request,g=(0,a["default"])(l).create(a["default"].NO_CHANGE,a["default"].WEAK);if(0===u.BolaState.length||u.BolaState[0]._s.state!==f["default"].BOLA_STATE_STEADY)return void t(g);var y=u.BolaState[0]._s,m=h.index,v=h.quality;if(isNaN(m)||0===v||r(o,m,v)||!h.firstByteDate)return void t(g);var _=(new Date).getTime(),b=_-h.firstByteDate.getTime(),T=h.bytesLoaded,E=h.bytesTotal,w=E-T,S=E*y.bitrate[0]/y.bitrate[v],j=c.getCurrentBufferLevel(u)?c.getCurrentBufferLevel(u):0;if(s>b||S>=w||j>y.bufferTarget)return void t(g);if(y.safetyGuarantee&&j<=y.fragmentDuration&&y.state===f["default"].BOLA_STATE_STEADY)return y.lastQuality=0,d.updateBolaState(o,y),n(o,m,v),g=(0,a["default"])(l).create(0,a["default"].STRONG),f["default"].BOLA_DEBUG&&console.log("BolaDebug "+o+" BolaAbandonRule to 0 for safety guarantee"),void t(g);var C=8e3*y.bandwidthSafetyFactor*T/b,M=.001*(h.firstByteDate.getTime()-h.requestStartDate.getTime()),O=8*w/C,x=v;if(O>j)for(--x;x>0&&(S=E*y.bitrate[x]/y.bitrate[v],!(j>=8*S/C));)--x;var A=j+y.virtualBuffer-M,I=w-M*C/8;1>I&&(I=1);for(var D=v,P=(y.utility[v]+y.gp-A/y.Vp)/I,k=0;v>k&&(S=E*y.bitrate[k]/y.bitrate[v],!(S>I));++k){var R=(y.utility[k]+y.gp-A/y.Vp)/S;R>P&&(D=k,P=R)}if(D>x&&(D=x),D===v)return void t(g);for(;D>0;){var R=y.bitrate[D],L=y.bitrate[D-1],N=y.utility[D],F=y.utility[D-1],B=y.Vp*(y.gp+(R*F-L*N)/(R-L));S=E*y.bitrate[D]/y.bitrate[v];var U=8*S/C;if(A-U>=B)break;--D}y.lastQuality=D,d.updateBolaState(o,y),n(o,m,v),g=(0,a["default"])(l).create(D,a["default"].STRONG),f["default"].BOLA_DEBUG&&console.log("BolaDebug "+o+" BolaAbandonRule abandon to "+D),t(g)}function o(){h={}}var s=250,l=this.context,c=e.dashMetrics,d=e.metricsModel,p=void 0,h=void 0,g=void 0;return p={execute:i,reset:o},t(),p}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../models/MediaPlayerModel.js"),u=r(s),l=e("../../../core/FactoryMaker.js"),c=r(l),d=e("./BolaRule.js"),f=r(d);i.__dashjs_factory_name="BolaAbandonRule",n["default"]=c["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../models/MediaPlayerModel.js":80,"../SwitchRequest.js":109,"./BolaRule.js":113}],113:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){x=[],A=(0,c["default"])(m).getInstance(),I=(0,f["default"])(m).getInstance(),D=(0,y["default"])(m).getInstance(),M.on(b["default"].PLAYBACK_SEEKING,l,O)}function n(e){var t={},n=e.getMediaInfo(),r=n.bitrateList,i=r.length;if(2>i||r[0]>=r[1]||r[i-2]>=r[i-1])return t.state=T,t;var o=e.getStreamProcessor(),a=e.getStreamInfo(),s=e.getTrackInfo(),u=o.isDynamic(),l=a.manifestInfo.duration,c=s.fragmentDuration,d=void 0,f=void 0;d=A.getStableBufferTime(),f=l>=A.getLongFormContentDurationThreshold()?A.getBufferTimeAtTopQualityLongForm():A.getBufferTimeAtTopQuality();var p=d;c+g>p&&(p=c+g);for(var h=[],y=0;i>y;++y)h.push(Math.log(r[y]/r[0]));var m=(p-c)/h[i-1],v=1+h[i-1]/(p/c-1),_=.2,b=!u&&p===d;if(b){for(var w=m,S=v,y=1;i>y;++y){var j=w*(S-r[0]*h[y]/(r[y]-r[0])),C=c*(2-r[0]/r[y])+_;if(C>=d){b=!1;break}C>j&&(w*=(d-C)/(d-j),S=C/w+h[y]*r[0]/(r[y]-r[0]))}b&&g>(d-c)*w/m&&(b=!1),b&&(m=w,v=S)}var M=m*(h[i-1]+v);return t.state=E,t.bitrate=r,t.utility=h,t.Vp=m,t.gp=v,t.fragmentDuration=c,t.bandwidthSafetyFactor=A.getBandwidthSafetyFactor(),t.bufferTarget=d,t.bufferMax=f,t.bolaBufferTarget=p,t.bolaBufferMax=M,t.isDynamic=u,t.safetyGuarantee=b,t.lastQuality=0,t.virtualBuffer=0,t}function r(e,t){for(var n=e.bitrate.length,r=n-1,i=0,o=0;n>o;++o){var a=(e.utility[o]+e.gp-t/e.Vp)/e.bitrate[o];a>i&&(i=a,r=o)}return r}function i(e){for(var t=_.getHttpRequests(e),n=t.length-1;n>=0;--n){var r=t[n];if(r.type===h["default"].MEDIA_SEGMENT_TYPE&&r._tfinish&&r.tresponse)return r}return null}function o(e,t){var n=i(e);if(!n)return 0;var r=.001*(n._tfinish.getTime()-n.trequest.getTime()),o=8*n.trace.reduce(function(e,t){return e+t.b[0]},0);return j&&console.log("BolaDebug "+t+" BolaRule last throughput = "+(o/1e6).toFixed(3)+"/"+r.toFixed(3)+"="+(o/r/1e6).toFixed(3)),o/r}function s(e,t){for(var n=0,r=1;r<e.bitrate.length&&!(e.bitrate[r]>t);++r)n=r;return n}function u(e){var t=i(e);if(!t)return 0;var n=(new Date).getTime(),r=t._tfinish.getTime(),o=n-r;return 0>o?0:.001*o}function l(){for(var e=0;e<x.length;++e){var t=x[e],n=C.getReadOnlyMetricsFor(t);if(0!==n.BolaState.length){var r=n.BolaState[0]._s;r.state!==T&&(r.state=E),C.updateBolaState(t,r)}}}function d(e,t){var i=e.getStreamProcessor();i.getScheduleController().setTimeToLoadDelay(0);var l=(0,a["default"])(m).create(a["default"].NO_CHANGE,a["default"].WEAK),c=e.getMediaInfo(),d=c.type,f=C.getReadOnlyMetricsFor(d);if(0===f.BolaState.length){j&&console.log("BolaDebug "+d+"\nBolaDebug "+d+" BolaRule for state=- fragmentStart="+D.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var p=n(e);C.updateBolaState(d,p);var h=0;if(p.state!==T){x.push(d);var g=o(f,d);h=s(p,g*p.bandwidthSafetyFactor),p.lastQuality=h,l=(0,a["default"])(m).create(h,a["default"].DEFAULT)}return j&&console.log("BolaDebug "+d+" BolaRule quality "+h+" for INITIALIZE"),void t(l)}var y=f.BolaState[0]._s;if(y.state===T)return j&&console.log("BolaDebug "+d+" BolaRule quality 0 for ONE_BITRATE"),void t(l);j&&console.log("BolaDebug "+d+"\nBolaDebug "+d+" EXECUTE BolaRule for state="+y.state+" fragmentStart="+D.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var v=_.getCurrentBufferLevel(f)?_.getCurrentBufferLevel(f):0,b=r(y,v),M=o(f,d);if(j&&console.log("BolaDebug "+d+" BolaRule bufferLevel="+v.toFixed(3)+"(+"+y.virtualBuffer.toFixed(3)+") lastThroughput="+(M/1e6).toFixed(3)+" tentativeQuality="+b+","+r(y,v+y.virtualBuffer)),.1>=v&&(y.virtualBuffer=0),!y.safetyGuarantee){var O=u(f);O>.1&&(y.virtualBuffer+=O),v+y.virtualBuffer>y.bolaBufferMax&&(y.virtualBuffer=y.bolaBufferMax-v),y.virtualBuffer<0&&(y.virtualBuffer=0);var A=r(y,v+y.virtualBuffer);if(A>b){for(var I=b;A>I&&y.bitrate[I+1]*y.fragmentDuration/(M*y.bandwidthSafetyFactor)<v;)++I;if(I>b)if(I>=A)b=A;else{b=I;var P=y.bitrate[I],k=y.bitrate[I+1],R=y.utility[I],L=y.utility[I+1],N=y.Vp*(y.gp+(k*R-P*L)/(k-P));v+y.virtualBuffer>N&&(y.virtualBuffer=N-v,y.virtualBuffer<0&&(y.virtualBuffer=0))}}}if(y.state===E||y.state===w){var h=s(y,M*y.bandwidthSafetyFactor);if(0>=M&&(y.state=S),y.state===E&&h<y.lastQuality&&(y.state=w),y.state===w&&h>y.lastQuality&&(h=y.lastQuality),b>=h&&(y.state=S),y.state!==S)return j&&console.log("BolaDebug "+d+" BolaRule quality "+h+">"+b+" for STARTUP"),y.lastQuality=h,C.updateBolaState(d,y),l=(0,a["default"])(m).create(h,a["default"].DEFAULT),void t(l)}var F=0;if(b>y.lastQuality){var h=s(y,M);if(b>h){if(h<y.lastQuality)h=y.lastQuality;else{var P=y.bitrate[h],k=y.bitrate[h+1],R=y.utility[h],L=y.utility[h+1],B=y.Vp*(y.gp+(k*R-P*L)/(k-P));F=v-B}b=h}}F>0&&(F>y.virtualBuffer?(F-=y.virtualBuffer,y.virtualBuffer=0):(y.virtualBuffer-=F,F=0)),F>0&&i.getScheduleController().setTimeToLoadDelay(1e3*F),y.lastQuality=b,C.updateBolaState(d,y),l=(0,a["default"])(m).create(b,a["default"].DEFAULT),j&&console.log("BolaDebug "+d+" BolaRule quality "+b+" delay="+F.toFixed(3)+" for STEADY"),t(l)}function p(){M.off(b["default"].PLAYBACK_SEEKING,l,O),t()}var g=5,m=this.context,_=e.dashMetrics,C=e.metricsModel,M=(0,v["default"])(m).getInstance(),O=void 0,x=void 0,A=void 0,I=void 0,D=void 0;return O={execute:d,reset:p},t(),O}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../../core/FactoryMaker.js"),u=r(s),l=e("../../models/MediaPlayerModel.js"),c=r(l),d=e("../../controllers/PlaybackController.js"),f=r(d),p=e("../../vo/metrics/HTTPRequest.js"),h=r(p),g=e("../../../dash/DashAdapter.js"),y=r(g),m=e("../../../core/EventBus.js"),v=r(m),_=e("../../../core/events/Events.js"),b=r(_),T=0,E=1,w=2,S=3,j=!1;i.__dashjs_factory_name="BolaRule";var C=u["default"].getClassFactory(i);C.BOLA_STATE_ONE_BITRATE=T,C.BOLA_STATE_STARTUP=E,C.BOLA_STATE_STARTUP_NO_INC=w,C.BOLA_STATE_STEADY=S,C.BOLA_DEBUG=j,n["default"]=C,t.exports=n["default"]},{"../../../core/EventBus.js":8,"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../../../dash/DashAdapter.js":13,"../../controllers/PlaybackController.js":48,"../../models/MediaPlayerModel.js":80,"../../vo/metrics/HTTPRequest.js":150,"../SwitchRequest.js":109}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){f=0,p=(0,u["default"])(o).getInstance()}function n(e,t){var n=(new Date).getTime()/1e3,r=e.getMediaInfo(),i=e.getTrackInfo(),u=r.type,h=isNaN(i.fragmentDuration)?2:i.fragmentDuration/2,g=e.getCurrentValue(),y=e.getStreamProcessor(),m=y.getABRController(),v=l.getReadOnlyMetricsFor(u),_=d.getCurrentBufferLevel(v),b=v.BufferState.length>0?v.BufferState[v.BufferState.length-1]:null,T=!1,E=r.representationCount-1,w=(0,a["default"])(o).create(a["default"].NO_CHANGE,a["default"].WEAK);return h>n-f||m.getAbandonmentStateFor(u)===c["default"].ABANDON_LOAD?void t(w):(null!==b&&_>b.target&&(T=_-b.target>p.getRichBufferThreshold(),T&&r.representationCount>1&&(w=(0,a["default"])(o).create(E,a["default"].STRONG))),w.value!==a["default"].NO_CHANGE&&w.value!==g&&s("BufferOccupancyRule requesting switch to index: ",w.value,"type: ",u," Priority: ",w.priority===a["default"].DEFAULT?"Default":w.priority===a["default"].STRONG?"Strong":"Weak"),void t(w))}function r(){f=0}var i=void 0,o=this.context,s=(0,h["default"])(o).getInstance().log,l=e.metricsModel,d=e.dashMetrics,f=void 0,p=void 0;return i={execute:n,reset:r},t(),i}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../models/MediaPlayerModel.js"),u=r(s),l=e("../../controllers/AbrController.js"),c=r(l),d=e("../../../core/FactoryMaker.js"),f=r(d),p=e("../../../core/Debug.js"),h=r(p);i.__dashjs_factory_name="BufferOccupancyRule",n["default"]=f["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/Debug.js":7,"../../../core/FactoryMaker.js":9,"../../controllers/AbrController.js":42,"../../models/MediaPlayerModel.js":80,"../SwitchRequest.js":109}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){g={},m=0,v=1e3,d.on(f["default"].PLAYBACK_SEEKING,i,h)}function n(e,t){var n=(new Date).getTime(),i=e.getMediaInfo().type,o=e.getCurrentValue(),c=p.getReadOnlyMetricsFor(i),d=c.BufferState.length>0?c.BufferState[c.BufferState.length-1]:null,f=(0,a["default"])(s).create(a["default"].NO_CHANGE,a["default"].WEAK);return v>n-m||null===d?void t(f):(r(i,d.state),d.state===u["default"].BUFFER_EMPTY&&void 0!==g[i].firstBufferLoadedEvent&&(f=(0,a["default"])(s).create(0,a["default"].STRONG)),f.value!==a["default"].NO_CHANGE&&f.value!==o&&l("InsufficientBufferRule requesting switch to index: ",f.value,"type: ",i," Priority: ",f.priority===a["default"].DEFAULT?"Default":f.priority===a["default"].STRONG?"Strong":"Weak"),m=n,void t(f))}function r(e,t){g[e]=g[e]||{},g[e].state=t,t!==u["default"].BUFFER_LOADED||g[e].firstBufferLoadedEvent||(g[e].firstBufferLoadedEvent=!0)}function i(){g={}}function o(){d.off(f["default"].PLAYBACK_SEEKING,i,h),g={},m=0}var s=this.context,l=(0,y["default"])(s).getInstance().log,d=(0,c["default"])(s).getInstance(),p=e.metricsModel,h=void 0,g=void 0,m=void 0,v=void 0;return h={execute:n,reset:o},t(),h}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../controllers/BufferController.js"),u=r(s),l=e("../../../core/EventBus.js"),c=r(l),d=e("../../../core/events/Events.js"),f=r(d),p=e("../../../core/FactoryMaker.js"),h=r(p),g=e("../../../core/Debug.js"),y=r(g);i.__dashjs_factory_name="InsufficientBufferRule",n["default"]=h["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/Debug.js":7,"../../../core/EventBus.js":8,"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../../controllers/BufferController.js":43,"../SwitchRequest.js":109}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){_=[],b=(0,f["default"])(d).getInstance()}function n(e,t){_[e]=_[e]||[],t!==1/0&&t!==_[e][_[e].length-1]&&_[e].push(t)}function r(e,t){var n=0,r=t?s:l,i=_[e],o=i.length;if(r=r>o?o:r,o>0){for(var a=o-r,u=0,c=a;o>c;c++)u+=i[c];n=u/r}return i.length>r&&i.shift(),n/1e3*b.getBandwidthSafetyFactor()}function i(e,t){var i,o,s,l,f=e.getMediaInfo(),m=f.type,v=e.getCurrentValue(),_=y.getReadOnlyMetricsFor(m),b=e.getStreamProcessor(),T=b.getABRController(),E=b.isDynamic(),w=g.getCurrentHttpRequest(_),S=_.BufferState.length>0?_.BufferState[_.BufferState.length-1]:null,j=_.BufferLevel.length>0?_.BufferLevel[_.BufferLevel.length-1]:null,C=(0,a["default"])(d).create(a["default"].NO_CHANGE,a["default"].WEAK);if(!(_&&w&&w.type===h["default"].MEDIA_SEGMENT_TYPE&&S&&j))return void t(C);if(w.trace&&w.trace.length&&(i=(w._tfinish.getTime()-w.tresponse.getTime())/1e3,o=w.trace.reduce(function(e,t){return e+t.b[0]},0),l=Math.round(8*o)/i,n(m,l)),s=Math.round(r(m,E)),T.setAverageThroughput(m,s),T.getAbandonmentStateFor(m)!==c["default"].ABANDON_LOAD){if(S.state===u["default"].BUFFER_LOADED||E){var M=T.getQualityForBitrate(f,s);b.getScheduleController().setTimeToLoadDelay(0),C=(0,a["default"])(d).create(M,a["default"].DEFAULT)}C.value!==a["default"].NO_CHANGE&&C.value!==v&&p("ThroughputRule requesting switch to index: ",C.value,"type: ",m," Priority: ",C.priority===a["default"].DEFAULT?"Default":C.priority===a["default"].STRONG?"Strong":"Weak","Average throughput",Math.round(s),"kbps")}t(C)}function o(){t()}var s=2,l=3,d=this.context,p=(0,v["default"])(d).getInstance().log,g=e.dashMetrics,y=e.metricsModel,m=void 0,_=void 0,b=void 0;return m={execute:i,reset:o},t(),m}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../controllers/BufferController.js"),u=r(s),l=e("../../controllers/AbrController.js"),c=r(l),d=e("../../models/MediaPlayerModel.js"),f=r(d),p=e("../../vo/metrics/HTTPRequest.js"),h=r(p),g=e("../../../core/FactoryMaker.js"),y=r(g),m=e("../../../core/Debug.js"),v=r(m);i.__dashjs_factory_name="ThroughputRule",n["default"]=y["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/Debug.js":7,"../../../core/FactoryMaker.js":9,"../../controllers/AbrController.js":42,"../../controllers/BufferController.js":43,"../../models/MediaPlayerModel.js":80,"../../vo/metrics/HTTPRequest.js":150,"../SwitchRequest.js":109}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){p=(0,u["default"])(s).getInstance(),h=(0,c["default"])(s).getInstance()}function n(e,t){var n=e.getMediaInfo(),r=n.type,o=d.getReadOnlyMetricsFor(r),u=l.getCurrentBufferLevel(o),c=void 0;c=u<i(e,r)?1:0,t((0,a["default"])(s).create(c,a["default"].DEFAULT))}function r(){}function i(e,t){var n=e.getStreamProcessor(),r=e.getStreamInfo(),i=e.getTrackInfo(),o=n.getABRController(),a=r.manifestInfo.duration,s=a>=p.getLongFormContentDurationThreshold(),u=NaN;return u="fragmentedText"===t?f.getAllTracksAreDisabled()?0:i.fragmentDuration:o.isPlayingAtTopQuality(r)?s?p.getBufferTimeAtTopQualityLongForm():p.getBufferTimeAtTopQuality():p.getStableBufferTime()}var o=void 0,s=this.context,l=e.dashMetrics,d=e.metricsModel,f=e.textSourceBuffer,p=void 0,h=void 0;return o={execute:n,reset:r},t(),o}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../models/MediaPlayerModel.js"),u=r(s),l=e("../../controllers/PlaybackController.js"),c=r(l),d=e("../../../core/FactoryMaker.js"),f=r(d);i.__dashjs_factory_name="BufferLevelRule",n["default"]=f["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../controllers/PlaybackController.js":48,"../../models/MediaPlayerModel.js":80,"../SwitchRequest.js":109}],118:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=e.getMediaInfo().type,u=e.getMediaInfo(),d=e.getStreamInfo().id,f=e.getStreamProcessor(),p=f.getScheduleController(),h=f.getCurrentRepresentationInfo(),g=p.getSeekTarget(),y=!isNaN(g),m=y?a["default"].STRONG:a["default"].DEFAULT,v=!y,_=y?g:o.getIndexHandlerTime(f),b=f.getBuffer(),T=void 0,E=null,w=void 0;if(isNaN(_)||"fragmentedText"===n&&c.getAllTracksAreDisabled())return void t((0,a["default"])(r).create(null,m));if(y&&p.setSeekTarget(NaN),b&&(E=s.getBufferRange(f.getBuffer(),_),null!==E&&(T=l.getChunks({streamId:d,mediaType:n,appended:!0,mediaInfo:u,forRange:E}),T&&T.length>0))){var S=_;_=T[T.length-1].bufferedRange.end,i("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",S," was changed to ",_)}w=o.getFragmentRequestForTime(f,h,_,{keepIdx:v}),w&&f.getFragmentModel().isFragmentLoaded(w)&&(w=o.getNextFragmentRequest(f,h)),w&&(o.setIndexHandlerTime(f,w.startTime+w.duration),w.delayLoadingTime=(new Date).getTime()+p.getTimeToLoadDelay()),t((0,a["default"])(r).create(w,m))}var n=void 0,r=this.context,i=(0,u["default"])(r).getInstance().log,o=e.adapter,s=e.sourceBufferController,l=e.virtualBuffer,c=e.textSourceBuffer;return n={execute:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../../core/Debug.js"),u=r(s),l=e("../../../core/FactoryMaker.js"),c=r(l);i.__dashjs_factory_name="NextFragmentRequestRule",n["default"]=c["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/Debug.js":7,"../../../core/FactoryMaker.js":9,"../SwitchRequest.js":109}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){i=[],o=[],i.push((0,u["default"])(n).create({dashMetrics:(0,v["default"])(n).getInstance(),metricsModel:(0,h["default"])(n).getInstance(),textSourceBuffer:(0,f["default"])(n).getInstance()})),o.push((0,c["default"])(n).create({adapter:(0,y["default"])(n).getInstance(),sourceBufferController:(0,b["default"])(n).getInstance(),virtualBuffer:(0,E["default"])(n).getInstance(),textSourceBuffer:(0,f["default"])(n).getInstance()}))}function t(e){switch(e){case w:return i;case S:return o;default:return null}}var n=this.context,r=void 0,i=void 0,o=void 0;return r={initialize:e,getRules:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("./BufferLevelRule.js"),u=r(s),l=e("./NextFragmentRequestRule.js"),c=r(l),d=e("../../TextSourceBuffer.js"),f=r(d),p=e("../../models/MetricsModel.js"),h=r(p),g=e("../../../dash/DashAdapter.js"),y=r(g),m=e("../../../dash/DashMetrics.js"),v=r(m),_=e("../../controllers/SourceBufferController.js"),b=r(_),T=e("../../VirtualBuffer.js"),E=r(T),w="fragmentsToScheduleRules",S="nextFragmentRules";i.__dashjs_factory_name="ScheduleRulesCollection";var j=a["default"].getSingletonFactory(i);j.FRAGMENTS_TO_SCHEDULE_RULES=w,j.NEXT_FRAGMENT_RULES=S,n["default"]=j,t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../dash/DashAdapter.js":13,"../../../dash/DashMetrics.js":15,"../../TextSourceBuffer.js":38,"../../VirtualBuffer.js":40,"../../controllers/SourceBufferController.js":50,"../../models/MetricsModel.js":81,"./BufferLevelRule.js":117,"./NextFragmentRequestRule.js":118}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){m=NaN,v=null,_=NaN,b=null,T=!1,E=NaN,w=a["default"].DEFAULT}function n(e,t){var n,r;if(S=t,C=e.getStreamProcessor(),j=C.getFragmentLoader(),b=e.getTrackInfo(),E=b.fragmentDuration,r=b.DVRWindow,m=r.end,b.useCalculatedLiveEdgeTime){var u=g.getExpectedLiveEdge();return g.setExpectedLiveEdge(m),void S((0,a["default"])(d).create(u,w))}v={start:Math.max(0,m-p),end:m+p},_=Math.floor((r.end-r.start)/2),n=h.getFragmentRequestForTime(C,b,m,{ignoreIsFinished:!0}),i(m,s,o,n)}function r(){m=NaN,v=null,_=NaN,b=null,T=!1,E=NaN,C=null,j=null}function i(e,t,n,r){var o;if(null===r)o=h.generateFragmentRequestForTime(C,b,e),i(e,t,n,o);else{var a=function s(r){f.off(c["default"].CHECK_FOR_EXISTENCE_COMPLETED,s,this),r.exists?t(r.request,e):n(r.request,e)};f.on(c["default"].CHECK_FOR_EXISTENCE_COMPLETED,a,this),j.checkForExistence(r)}}function o(e,t){var n,r,u;return T?void l(!1,t):(u=t-m,n=u>0?m-u:m+Math.abs(u)+_,void(n<v.start&&n>v.end?S((0,a["default"])(d).create(null,w)):(r=h.getFragmentRequestForTime(C,b,n,{ignoreIsFinished:!0}),i(n,s,o,r))))}function s(e,t){var n,r,o=e.startTime;if(!T){if(!b.fragmentDuration)return void S((0,a["default"])(d).create(o,w));if(T=!0,v.end=o+2*_,t===m)return r=t+E,n=h.getFragmentRequestForTime(C,b,r,{ignoreIsFinished:!0}),void i(r,function(){l(!0,r)},function(){S((0,a["default"])(d).create(r,w))},n)}l(!0,t)}function l(e,t){var n,r,u;e?v.start=t:v.end=t,n=Math.floor(v.end-v.start)<=E,n?S((0,a["default"])(d).create(e?t:t-E,w)):(u=(v.start+v.end)/2,r=h.getFragmentRequestForTime(C,b,u,{ignoreIsFinished:!0}),i(u,s,o,r))}var d=this.context,f=(0,u["default"])(d).getInstance(),h=e.adapter,g=e.timelineConverter,y=void 0,m=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0,w=void 0,S=void 0,j=void 0,C=void 0;return y={execute:n,reset:r},t(),y}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../../core/EventBus.js"),u=r(s),l=e("../../../core/events/Events.js"),c=r(l),d=e("../../../core/FactoryMaker.js"),f=r(d),p=43200;i.__dashjs_factory_name="LiveEdgeBinarySearchRule",n["default"]=f["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/EventBus.js":8,"../../../core/FactoryMaker.js":9,"../../../core/events/Events.js":11,"../SwitchRequest.js":109}],121:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){var n=e.getTrackInfo(),o=n.DVRWindow.end,s=a["default"].DEFAULT;if(n.useCalculatedLiveEdgeTime){var u=i.getExpectedLiveEdge();i.setExpectedLiveEdge(o),t((0,a["default"])(r).create(u,s))}else t((0,a["default"])(r).create(o,s))}var n=void 0,r=this.context,i=e.timelineConverter;return n={execute:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../SwitchRequest.js"),a=r(o),s=e("../../../core/FactoryMaker.js"),u=r(s);i.__dashjs_factory_name="LiveEdgeWithTimeSynchronizationRule",n["default"]=u["default"].getClassFactory(i),t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../SwitchRequest.js":109}],122:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){i=[],o=[],i.push((0,f["default"])(n).create({timelineConverter:(0,u["default"])(n).getInstance()})),o.push((0,c["default"])(n).create({timelineConverter:(0,u["default"])(n).getInstance(),adapter:(0,h["default"])(n).getInstance()}))}function t(e){switch(e){case g:return i;case y:return o;default:return null}}var n=this.context,r=void 0,i=void 0,o=void 0;return r={initialize:e,getRules:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../core/FactoryMaker.js"),a=r(o),s=e("../../../dash/utils/TimelineConverter.js"),u=r(s),l=e("./LiveEdgeBinarySearchRule.js"),c=r(l),d=e("./LiveEdgeWithTimeSynchronizationRule.js"),f=r(d),p=e("../../../dash/DashAdapter.js"),h=r(p),g="withAccurateTimeSourceRules",y="bestGuestRules";i.__dashjs_factory_name="SynchronizationRulesCollection";var m=a["default"].getSingletonFactory(i);m.TIME_SYNCHRONIZED_RULES=g,m.BEST_GUESS_RULES=y,n["default"]=m,t.exports=n["default"]},{"../../../core/FactoryMaker.js":9,"../../../dash/DashAdapter.js":13,"../../../dash/utils/TimelineConverter.js":21,"./LiveEdgeBinarySearchRule.js":120,"./LiveEdgeWithTimeSynchronizationRule.js":121}],123:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=c["default"].parseBuffer(e),r=(0,a["default"])(n).create();return r.setData(t),r}var t=void 0,n=this.context;return t={parse:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./IsoFile.js"),a=r(o),s=e("../../core/FactoryMaker.js"),u=r(s),l=e("codem-isoboxer"),c=r(l);i.__dashjs_factory_name="BoxParser",n["default"]=u["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9,"./IsoFile.js":128,"codem-isoboxer":6}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){a=!1}function t(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function n(){return a}function r(e){a=e}function i(e,t){if(!(e instanceof HTMLMediaElement))throw"element must be of type HTMLMediaElement.";var n=e.canPlayType(t);return"probably"===n||"maybe"===n}var o=void 0,a=void 0;return o={supportsMediaSource:t,supportsEncryptedMedia:n,supportsCodec:i,setEncryptedMediaSupported:r},e(),o}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="Capabilities",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],125:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function n(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function r(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end?(this.customTimeRangeArray.splice(t,1),!0):!1}function i(e){return this.customTimeRangeArray[e].start}function o(e){return this.customTimeRangeArray[e].end}var a=[],s=0;return{customTimeRangeArray:a,length:s,add:e,clear:t,remove:n,mergeRanges:r,start:i,end:o}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="CustomTimeRanges",n["default"]=a["default"].getClassFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],126:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){l=(0,u["default"])(i).getInstance()}function t(e){if(void 0!==s)return s;s=!1;var t,n="1",r="1";try{t=window[e]}catch(i){return o("Warning: DOMStorage access denied: "+i.message),s}if(!t||e!==g&&e!==y)return s;try{t.setItem(n,r),t.removeItem(n),s=!0}catch(i){o("Warning: DOMStorage is supported, but cannot be used: "+i.message)}return s}function n(e){if(!t(g)||!l.getLastMediaSettingsCachingInfo().enabled)return null;var n="video"===e?h:p,r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=l.getLastMediaSettingsCachingInfo().ttl||!1,o=r.settings;return i&&(localStorage.removeItem(n),o=null),o}function r(e){var n=NaN;if(t(g)&&l.getLastBitrateCachingInfo().enabled){var r="video"===e?d:f,i=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=l.getLastBitrateCachingInfo().ttl||!1,s=parseInt(i.bitrate,10);isNaN(s)||a?a&&localStorage.removeItem(r):(n=s,o("Last saved bitrate for "+e+" was "+s))}return n}var i=this.context,o=(0,c["default"])(i).getInstance().log,a=void 0,s=void 0,l=void 0;return a={getSavedBitrateSettings:r,getSavedMediaSettings:n,isSupported:t},e(),a}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o),s=e("../models/MediaPlayerModel.js"),u=r(s),l=e("../../core/Debug.js"),c=r(l),d="dashjs_vbitrate",f="dashjs_abitrate",p="dashjs_asettings",h="dashjs_vsettings",g="localStorage",y="sessionStorage";i.__dashjs_factory_name="DOMStorage";var m=a["default"].getSingletonFactory(i);m.STORAGE_TYPE_LOCAL=g,m.STORAGE_TYPE_SESSION=y,m.LOCAL_STORAGE_VIDEO_BITRATE_KEY=d,m.LOCAL_STORAGE_AUDIO_BITRATE_KEY=f,m.LOCAL_STORAGE_AUDIO_SETTINGS_KEY=p,m.LOCAL_STORAGE_VIDEO_SETTINGS_KEY=h,n["default"]=m,t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/FactoryMaker.js":9,"../models/MediaPlayerModel.js":80}],127:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){d.trigger(u["default"].ERROR,{error:"capability",event:e})}function t(e,t,n){d.trigger(u["default"].ERROR,{error:"download",event:{id:e,url:t,request:n}})}function n(e,t,n){d.trigger(u["default"].ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n}})}function r(e,t,n){d.trigger(u["default"].ERROR,{error:"cc",event:{message:e,id:t,cc:n}})}function i(e){d.trigger(u["default"].ERROR,{error:"mediasource",event:e})}function o(e){d.trigger(u["default"].ERROR,{error:"key_session",event:e})}function s(e){d.trigger(u["default"].ERROR,{error:"key_message",event:e})}var l=void 0,c=this.context,d=(0,a["default"])(c).getInstance();return l={capabilityError:e,downloadError:t,manifestError:n,timedTextError:r,mediaSourceError:i,mediaKeySessionError:o,mediaKeyMessageError:s}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/EventBus.js"),a=r(o),s=e("../../core/events/Events.js"),u=r(s),l=e("../../core/FactoryMaker.js"),c=r(l);i.__dashjs_factory_name="ErrorHandler",n["default"]=c["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11}],128:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e&&c&&c.boxes&&0!==c.boxes.length?u(c.fetch(e)):null}function t(e){for(var t,n=c.fetchAll(e),r=[],i=0,o=n.length;o>i;i++)t=u(n[i]),t&&r.push(t);return r}function n(e){c=e}function r(){if(!c||!c.boxes||!c.boxes.length)return null;var e=c.boxes[c.boxes.length-1].type,n=t(e);return n[n.length-1]}function i(){return c._cursor.offset}function o(){d={offset:"_offset",size:"size",type:"type"},f={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},p={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},h={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},g={timescale:"timescale"},y={sequence_number:"sequence_number"},m={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},v={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},_={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},b={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}function s(e,t,n){for(var r in n)t[r]=e[n[r]]}function u(e){if(!e)return null;
var t,n,r=new a["default"];switch(s(e,r,d),e.hasOwnProperty("_incomplete")&&(r.isComplete=!e._incomplete),r.type){case"sidx":if(s(e,r,f),r.references)for(t=0,n=r.references.length;n>t;t++)s(e.references[t],r.references[t],p);break;case"emsg":s(e,r,h);break;case"mdhd":s(e,r,g);break;case"mfhd":s(e,r,y);break;case"tfhd":s(e,r,m);break;case"tfdt":s(e,r,v);break;case"trun":if(s(e,r,_),r.samples)for(t=0,n=r.samples.length;n>t;t++)s(e.samples[t],r.samples[t],b)}return r}var l=void 0,c=void 0,d=void 0,f=void 0,p=void 0,h=void 0,g=void 0,y=void 0,m=void 0,v=void 0,_=void 0,b=void 0;return l={getBox:e,getBoxes:t,setData:n,getLastBox:r,getOffset:i},o(),l}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../vo/IsoBox.js"),a=r(o),s=e("../../core/FactoryMaker.js"),u=r(s);i.__dashjs_factory_name="IsoFile",n["default"]=u["default"].getClassFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9,"../vo/IsoBox.js":137}],129:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e,t){p=e,g=t,v=!1,_=NaN,T=null,y=(0,h["default"])(s).getInstance(),E=a["default"].BEST_GUESS_RULES,l.on(f["default"].STREAM_INITIALIZED,o,this)}function t(){v=!1,_=NaN}function n(){return T}function r(){l.off(f["default"].STREAM_INITIALIZED,o,this),t(),T=null,p=null,g=null,v=!1,_=NaN,E=null,y=null}function i(e){var t=((new Date).getTime()-_)/1e3;T=e.value,l.trigger(f["default"].LIVE_EDGE_SEARCH_COMPLETED,{liveEdge:T,searchTime:t,error:null===T?new u["default"](m,"live edge has not been found",null):null})}function o(e){!g.isDynamic()||v||e.error||(E=p.isTimeSyncCompleted()?a["default"].TIME_SYNCHRONIZED_RULES:a["default"].BEST_GUESS_RULES,b=(0,a["default"])(s).getInstance().getRules(E),v=!0,_=(new Date).getTime(),y.applyRules(b,g,i,null,function(e,t){return t}))}var s=this.context,l=(0,c["default"])(s).getInstance(),d=void 0,p=void 0,g=void 0,y=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0;return d={initialize:e,abortSearch:t,getLiveEdge:n,reset:r}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../rules/synchronization/SynchronizationRulesCollection.js"),a=r(o),s=e("../vo/Error.js"),u=r(s),l=e("../../core/EventBus.js"),c=r(l),d=e("../../core/events/Events.js"),f=r(d),p=e("../rules/RulesController.js"),h=r(p),g=e("../../core/FactoryMaker.js"),y=r(g),m=1;i.__dashjs_factory_name="LiveEdgeFinder";var v=y["default"].getSingletonFactory(i);v.LIVE_EDGE_NOT_FOUND_ERROR_CODE=m,n["default"]=v,t.exports=n["default"]},{"../../core/EventBus.js":8,"../../core/FactoryMaker.js":9,"../../core/events/Events.js":11,"../rules/RulesController.js":108,"../rules/synchronization/SynchronizationRulesCollection.js":122,"../vo/Error.js":135}],130:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){return e}function t(e){return e}var n=void 0;return n={modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o);i.__dashjs_factory_name="RequestModifier",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/FactoryMaker.js":9}],131:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(e){e&&e.videoModel&&(G=e.videoModel)}function t(e){var t,n=new u["default"]([],"",!1);if(A=n.xml_str2json(e),!A)throw"TTML document could not be parsed";G.getTTMLRenderingDiv()&&(t="html");var s=o(A,"http://www.w3.org/ns/ttml");if(s&&a(A,s),D=A.tt.head.layout.region_asArray,I=A.tt.head.styling.style_asArray,!i()){var l="TTML document has incorrect structure";throw l}var c=E(),d=G.getElement().clientWidth,g=G.getElement().clientHeight,y=[d/c[0],g/c[1]];N["font-size"]=y[1]+"px;";for(var m=[],v=0;v<D.length;v++)m.push(_(JSON.parse(JSON.stringify(D[v])),y));var b=o(A.tt,"http://www.w3.org/ns/ttml#parameter");A.tt.hasOwnProperty(b+":frameRate")&&(A.tt.frameRate=parseInt(A.tt[b+":frameRate"],10));var T=[],M=A.tt.body_asArray[0].__children;return M.forEach(function(e){var n=e.div.p_asArray;if(!n||0===n.length){var i="TTML document does not contain any cues";throw i}var o,a,s,u;n.forEach(function(n){if(n.hasOwnProperty("begin")&&n.hasOwnProperty("end"))o=r(n.begin),a=r(n.end);else{if(!n.span.hasOwnProperty("begin")||!n.span.hasOwnProperty("end"))throw i="TTML document has incorrect timing value";s=r(n.span.begin),u=r(n.span.end)}if(void 0!==n["smpte:backgroundImage"])for(var l=A.tt.head.metadata.image_asArray,v=0;v<l.length;v++)"#"+l[v]["xml:id"]==n["smpte:backgroundImage"]&&T.push({start:s||o,end:u||a,id:l[v]["xml:id"],data:"data:image/"+l[v].imagetype.toLowerCase()+";base64, "+l[v].__text,type:"image"});else if("html"===t){k={},R={},P={};var _="";if((n.hasOwnProperty("id")||n.hasOwnProperty("xml:id"))&&(_=n["xml:id"]||n.id),(isNaN(o)||isNaN(a))&&(isNaN(s)||isNaN(u)))throw i="TTML document has incorrect timing value";var b=j(n,e.div,y),E=C(n,y),M=E[1];E=E[0];var O=document.createElement("div");O.className=M;var x=n.__children,I=S(x,y);I.className="cueDirUniWrapper",f("unicode-bidi",E)&&(I.style.cssText+=p("unicode-bidi",E),h("unicode-bidi",E)),f("direction",E)&&(I.style.cssText+=p("direction",E),h("direction",E)),f("padding-left",E)&&f("padding-right",E)&&(I.innerHTML=w(I,E)),f("padding-left",E)&&f("padding-right",E)&&(h("padding-left",E),h("padding-right",E));var D="";if(f("regionID",b)){var L=p("regionID",b);D=L.slice(L.indexOf(":")+1,L.length-1)}E&&(O.style.cssText=E.join(" ")+"display:flex;"),b&&(b=b.join(" ")),O.appendChild(I);var N=document.createElement("div");N.appendChild(O),N.id="subtitle_"+_,N.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+b,0===Object.keys(P).length&&(P.defaultFontSize="100"),T.push({start:s||o,end:u||a,type:"html",cueHTMLElement:N,regions:m,regionID:D,cueID:_,videoHeight:g,videoWidth:d,cellResolution:c,fontSize:P||{defaultFontSize:"100"},lineHeight:k,linePadding:R})}else{var F="",B=n.__children;B.length&&B.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?F+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(F+="\n"))})}else F+=e.hasOwnProperty("br")?"\n":e["#text"].replace(/[\r\n]+/gm," ").trim()}),T.push({start:s||o,end:u||a,data:F,type:"text"})}})}),T}function n(){x=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,P={},k={},R={},L={top:"85%;",left:"5%;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},N={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},F={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;","default":"font-family: monospace, sans-serif;"},B={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},U={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},H={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},K={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},V={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},q={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"}}function r(e){var t,n,r,i=x.test(e);if(!i)return NaN;if(t=e.split(":"),n=parseFloat(t[0])*l+parseFloat(t[1])*c+parseFloat(t[2]),t[3]){if(r=A.tt.frameRate,!r||isNaN(r))return NaN;n+=parseFloat(t[3])/r}return n}function i(){var e=A.hasOwnProperty("tt"),t=e?A.tt.hasOwnProperty("head"):!1,n=t?A.tt.head.hasOwnProperty("layout"):!1,r=t?A.tt.head.hasOwnProperty("styling"):!1,i=e?A.tt.hasOwnProperty("body"):!1;return e&&t&&n&&r&&i}function o(e,t){var n=Object.keys(e).filter(function(n){return("xmlns"===n.split(":")[0]||"xmlns"===n.split(":")[1])&&e[n]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=n.length?null:n[0]}function a(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(("object"==typeof e[n]||e[n]instanceof Object)&&!Array.isArray(e[n]))a(e[n],t);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)a(e[n][r],t);var i=n.slice(n.indexOf(t)+t.length+1);e[i]=e[n],delete e[n]}}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function d(e){var t=e.slice(1),n=t.match(/.{2}/g),r=parseFloat(parseInt(parseInt(n[3],16)/255*1e3,10)/1e3),i=n.slice(0,3).map(function(e){return parseInt(e,16)});return"rgba("+i.join(",")+","+r+");"}function f(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return!0;return!1}function p(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return t[n];return null}function h(e,t){t.splice(t.indexOf(p(e,t)),1)}function g(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)e[n]&&e[n].split(":")[0].indexOf(t[r].split(":")[0])>-1&&e.splice(n,1);return e.concat(t)}function y(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=r.replace("ebutts:","");i=i.replace("xml:",""),i=i.replace("tts:",""),i=s(i),e[i]=e[r],delete e[r]}if("line-padding"in e){var o=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(R[e.id]=o);var a=o*t[0]+"px;";n.push("padding-left:"+a),n.push("padding-right:"+a)}if("font-size"in e){var u=parseFloat(e["font-size"].slice(e["font-size"].indexOf(":")+1,e["font-size"].indexOf("%")));"id"in e&&(P[e.id]=u);var l=u/100*t[1]+"px;";n.push("font-size:"+l)}if("line-height"in e)if("normal"===e["line-height"])n.push("line-height: normal;");else{var c=parseFloat(e["line-height"].slice(e["line-height"].indexOf(":")+1,e["line-height"].indexOf("%")));"id"in e&&(k[e.id]=c);var p=c/100*t[1]+"px;";n.push("line-height:"+p)}"font-family"in e&&(e["font-family"]in F?n.push(F[e["font-family"]]):n.push("font-family:"+e["font-family"]+";")),"text-align"in e&&e["text-align"]in B&&(n.push(B[e["text-align"]][0]),n.push(B[e["text-align"]][1])),"multi-row-align"in e&&(f("text-align",n)&&"auto"!=e["multi-row-align"]&&h("text-align",n),e["multi-row-align"]in U&&n.push(U[e["multi-row-align"]]));var g;return"background-color"in e&&(e["background-color"].indexOf("#")>-1&&e["background-color"].length-1===8?(g=d(e["background-color"]),n.push("background-color: "+g)):n.push("background-color:"+e["background-color"]+";")),"color"in e&&(e.color.indexOf("#")>-1&&e.color.length-1===8?(g=d(e.color),n.push("color: "+g)):n.push("color:"+e.color+";")),"wrap-option"in e&&(e["wrap-option"]in H?n.push(H[e["wrap-option"]]):n.push("white-space:"+e["wrap-option"])),"unicode-bidi"in e&&(e["unicode-bidi"]in K?n.push(K[e["unicode-bidi"]]):n.push("unicode-bidi:"+e["unicode-bidi"])),"font-style"in e&&n.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&n.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&n.push("direction:"+e.direction+";"),"text-decoration"in e&&n.push("text-decoration:"+e["text-decoration"]+";"),A.tt.hasOwnProperty("xml:space")&&"preserve"===A.tt["xml:space"]&&n.push("white-space: pre;"),n}function m(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function v(e,t){var n=[],r=e.match(/\S+/g);return r.forEach(function(e){var r=m(I,e);if(r){var i=y(JSON.parse(JSON.stringify(r)),t);n=n.concat(i)}}),n}function _(e,t){var n=[];for(var r in e){var i=r.replace("tts:","");i=i.replace("xml:",""),i=s(i),e[i]=e[r],i!==r&&delete e[r]}if("extent"in e){var o=e.extent.split(/\s/);n.push("width: "+o[0]+";"),n.push("height: "+o[1]+";")}if("origin"in e){var a=e.origin.split(/\s/);n.push("left: "+a[0]+";"),n.push("top: "+a[1]+";")}if("display-align"in e&&n.push(V[e["display-align"]]),"writing-mode"in e&&n.push(q[e["writing-mode"]]),"style"in e){var u=v(e.style,t);n=n.concat(u)}return"padding"in e&&n.push("padding:"+e.padding+";"),"overflow"in e&&n.push("overflow:"+e.overflow+";"),"show-background"in e&&n.push("show-background:"+e["show-background"]+";"),"id"in e&&n.push("regionID:"+e.id+";"),n}function b(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function T(e,t){var n=[],r=e.match(/\S+/g);return r.forEach(function(e){var r=b(D,e);if(r){var i=_(JSON.parse(JSON.stringify(r)),t);n=n.concat(i)}}),n}function E(){var e=[32,15];return A.tt.hasOwnProperty("ttp:cellResolution")?A.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function w(e,t){for(var n=p("padding-left",t),r=p("padding-right",t),i=n.concat(" "+r),o="",a="",s="",u=Array.prototype.slice.call(e.children),l=e.getElementsByClassName("lineBreak")[0],c=u.indexOf(l),d=[];-1!=c;)d.push(c),c=u.indexOf(l,c+1);var f="</span>",h="<br>",g='<span class="spanPadding" style="-webkit-box-decoration-break: clone; ';if(d.length)d.forEach(function(e,t){if(0===t){for(var n="",r=0;e>r;r++)o+=u[r].outerHTML,0===r&&(n=i.concat(u[r].style.cssText));o=g+n+'">'+o}for(var l="",c=e+1;c<u.length;c++)a+=u[c].outerHTML,c===u.length-1&&(l+=i.concat(u[c].style.cssText));a=g+l+'">'+a,o&&a&&t===d.length-1?s+=o+f+h+a+f:o&&a&&t!==d.length-1?s+=o+f+h+a+f+h:o&&!a?s+=o+f:!o&&a&&t===d.length-1?s+=a+f:!o&&a&&t!==d.length-1&&(s+=a+f+h)});else{for(var y="",m=0;m<u.length;m++)y+=u[m].style.cssText;s=g+i+y+'">'+e.innerHTML+f}return s}function S(e,t){var n=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var r=e.span.__children,i=document.createElement("span");if(e.span.hasOwnProperty("style")){var o=v(e.span.style,t);i.className="spanPadding "+e.span.style,i.style.cssText=o.join(" ")}r.forEach(function(e){if(!r.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);i.appendChild(t)}else if("br"in e){i.hasChildNodes()&&n.appendChild(i);var o=document.createElement("br");o.className="lineBreak",n.appendChild(o);var a=document.createElement("span");a.className=i.className,a.style.cssText=i.style.cssText,i=a}}),n.appendChild(i)}else if(e.hasOwnProperty("br")){var a=document.createElement("br");a.className="lineBreak",n.appendChild(a)}else if(e.hasOwnProperty("#text")){var s=document.createElement("span");s.textContent=e["#text"],n.appendChild(s)}}),n}function j(e,t,n){var r,i,o=[],a=e.region,s=t.region;return s&&(r=T(s,n)),a?(i=o.concat(T(a,n)),o=r?g(r,i):i):r&&(o=r),M(o,L),o}function C(e,t){var n,r,i,o=[],a=e.style,s=A.tt.body.style,u=A.tt.body.div.style,l="";return s&&(n=v(s,t),l="paragraph "+s),u&&(r=v(u,t),n?(r=g(n,r),l+=" "+u):l="paragraph "+u),a?(i=v(a,t),n&&r?(o=g(r,i),l+=" "+a):n?(o=g(n,i),l+=" "+a):r?(o=g(r,i),l+=" "+a):(o=i,l="paragraph "+a)):n&&!r?o=n:!n&&r&&(o=r),M(o,N),[o,l]}function M(e,t){for(var n in t)t.hasOwnProperty(n)&&(f(n,e)||e.push(n+":"+t[n]))}var O=void 0,x=void 0,A=void 0,I=void 0,D=void 0,P=void 0,k=void 0,R=void 0,L=void 0,N=void 0,F=void 0,B=void 0,U=void 0,H=void 0,K=void 0,V=void 0,q=void 0,G=void 0;return O={parse:t,setConfig:e},n(),O}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o),s=e("../../../externals/xml2json.js"),u=r(s),l=3600,c=60;i.__dashjs_factory_name="TTMLParser",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../../externals/xml2json.js":4,"../../core/FactoryMaker.js":9}],132:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){function e(){c=/(?:\r\n|\r|\n)/gm,d=/-->/,f=/(^[\s]+|[\s]+$)/g,p=/\s\b/g}function t(e){var t,i,a=[];e=e.split(c),t=e.length,i=-1;for(var u=0;t>u;u++){var l=e[u];if(l.length>0&&"WEBVTT"!==l&&l.match(d)){var p=r(l),h=p.cuePoints,g=p.styles,y=o(e,u+1),m=n(h[0].replace(f,"")),v=n(h[1].replace(f,""));!isNaN(m)&&!isNaN(v)&&m>=i&&v>m?""!==y?(i=m,a.push({start:m,end:v,data:y,styles:g})):s("Skipping cue due to empty/malformed cue text"):s("Skipping cue due to incorrect cue timing")}}return a}function n(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function r(e){var t=e.split(d),n=t[1].split(p);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:i(n)}}function i(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function o(e,t){for(var n,r=t,i="",o="";""!==e[r]&&r<e.length;)r++;if(n=r-t,n>1)for(var a=0;n>a;a++){if(o=e[t+a],o.match(d)){i="";break}i+=o,a!==n-1&&(i+="\n")}else o=e[t],o.match(d)||(i=o);return decodeURI(i)}var a=this.context,s=(0,u["default"])(a).getInstance().log,l=void 0,c=void 0,d=void 0,f=void 0,p=void 0;return l={parse:t},e(),l}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../core/FactoryMaker.js"),a=r(o),s=e("../../core/Debug.js"),u=r(s);i.__dashjs_factory_name="VTTParser",n["default"]=a["default"].getSingletonFactory(i),t.exports=n["default"]},{"../../core/Debug.js":7,"../../core/FactoryMaker.js":9}],133:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.mediaType=null,this.bitrate=null,this.qualityIndex=NaN};n["default"]=i,t.exports=n["default"]},{}],134:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN};n["default"]=i,t.exports=n["default"]},{}],135:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(e,t,n){r(this,o),this.code=e||null,this.message=t||null,this.data=n||null};n["default"]=i,t.exports=n["default"]},{}],136:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.action=o.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",n["default"]=i,t.exports=n["default"]},{}],137:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};n["default"]=i,t.exports=n["default"]},{}],138:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};n["default"]=i,t.exports=n["default"]},{}],139:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};n["default"]=i,t.exports=n["default"]},{}],140:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};n["default"]=i,t.exports=n["default"]},{}],141:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0};n["default"]=i,t.exports=n["default"]},{}],142:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};n["default"]=i,t.exports=n["default"]},{}],143:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};n["default"]=i,t.exports=n["default"]},{}],144:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};n["default"]=i,t.exports=n["default"]},{}],145:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this._s=void 0};n["default"]=i,t.exports=n["default"]},{}],146:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.t=null,this.level=null};n["default"]=i,t.exports=n["default"]},{}],147:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../controllers/BufferController.js"),a=r(o),s=function u(){i(this,u),this.target=null,this.state=a["default"].BUFFER_EMPTY};n["default"]=s,t.exports=n["default"]},{"../../controllers/BufferController.js":43}],148:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.time=null,this.range=null,this.manifestInfo=null};n["default"]=i,t.exports=n["default"]},{}],149:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.time=null,this.droppedFrames=null};n["default"]=i,t.exports=n["default"]},{}],150:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null};i.Trace=function(){function e(){r(this,e),this.s=null,this.d=null,this.b=[]}return e}(),i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",n["default"]=i,t.exports=n["default"]},{}],151:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]};i.StreamInfo=function(){function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null}return e}(),i.TrackInfo=function(){function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}return e}(),n["default"]=i,t.exports=n["default"]},{}],152:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.Trace=function(){function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}return e}(),i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start",i.Trace.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",i.Trace.REBUFFERING_REASON="rebuffering",i.Trace.USER_REQUEST_STOP_REASON="user_request",i.Trace.END_OF_PERIOD_STOP_REASON="end_of_period",i.Trace.END_OF_CONTENT_STOP_REASON="end_of_content",i.Trace.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",i.Trace.FAILURE_STOP_REASON="failure",n["default"]=i,t.exports=n["default"]},{}],153:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.t=null,this.mt=null,this.to=null,this.lto=null};n["default"]=i,t.exports=n["default"]},{}],154:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.loadingRequests=[],this.executedRequests=[]};n["default"]=i,t.exports=n["default"]},{}],155:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};n["default"]=i,t.exports=n["default"]},{}],156:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function o(){r(this,o),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};n["default"]=i,t.exports=n["default"]},{}]},{},[5]),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsContribHls=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){return e.start(t)+"-"+e.end(t)},i=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},o=function(e){return e>=32&&126>e?String.fromCharCode(e):"."},a={hexDump:function(e){for(var t=Array.prototype.slice.call(e),n=16,r="",a=void 0,s=void 0,u=0;u<t.length/n;u++)a=t.slice(u*n,u*n+n).map(i).join(""),s=t.slice(u*n,u*n+n).map(o).join(""),r+=a+" "+s+"\n";return r},tagDump:function(e){return a.hexDump(e.bytes)},textRanges:function(e){var t="",n=void 0;for(n=0;n<e.length;n++)t+=r(e,n)+" ";return t}};n["default"]=a,t.exports=n["default"]},{}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4],o=void 0,a=void 0,s=void 0,u=[],l=[],c=void 0,d=void 0,f=void 0,p=void 0,h=void 0,g=void 0;for(o=0;256>o;o++)l[(u[o]=o<<1^283*(o>>7))^o]=o;for(a=s=0;!r[a];a^=c||1,s=l[s]||1)for(p=s^s<<1^s<<2^s<<3^s<<4,p=p>>8^255&p^99,r[a]=p,i[p]=a,f=u[d=u[c=u[a]]],g=16843009*f^65537*d^257*c^16843008*a,h=257*u[p]^16843008*p,o=0;4>o;o++)t[o][a]=h=h<<24^h>>>8,n[o][p]=g=g<<24^g>>>8;for(o=0;5>o;o++)t[o]=t[o].slice(0),n[o]=n[o].slice(0);return e},a=null,s=function(){function e(t){r(this,e),a||(a=o()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var n=void 0,i=void 0,s=void 0,u=void 0,l=void 0,c=this._tables[0][4],d=this._tables[1],f=t.length,p=1;if(4!==f&&6!==f&&8!==f)throw new Error("Invalid aes key size");for(u=t.slice(0),l=[],this._key=[u,l],n=f;4*f+28>n;n++)s=u[n-1],(n%f===0||8===f&&n%f===4)&&(s=c[s>>>24]<<24^c[s>>16&255]<<16^c[s>>8&255]<<8^c[255&s],
n%f===0&&(s=s<<8^s>>>24^p<<24,p=p<<1^283*(p>>7))),u[n]=u[n-f]^s;for(i=0;n;i++,n--)s=u[3&i?n:n-4],4>=n||4>i?l[i]=s:l[i]=d[0][c[s>>>24]]^d[1][c[s>>16&255]]^d[2][c[s>>8&255]]^d[3][c[255&s]]}return i(e,[{key:"decrypt",value:function(e,t,n,r,i,o){var a=this._key[1],s=e^a[0],u=r^a[1],l=n^a[2],c=t^a[3],d=void 0,f=void 0,p=void 0,h=a.length/4-2,g=void 0,y=4,m=this._tables[1],v=m[0],_=m[1],b=m[2],T=m[3],E=m[4];for(g=0;h>g;g++)d=v[s>>>24]^_[u>>16&255]^b[l>>8&255]^T[255&c]^a[y],f=v[u>>>24]^_[l>>16&255]^b[c>>8&255]^T[255&s]^a[y+1],p=v[l>>>24]^_[c>>16&255]^b[s>>8&255]^T[255&u]^a[y+2],c=v[c>>>24]^_[s>>16&255]^b[u>>8&255]^T[255&l]^a[y+3],y+=4,s=d,u=f,l=p;for(g=0;4>g;g++)i[(3&-g)+o]=E[s>>>24]<<24^E[u>>16&255]<<16^E[l>>8&255]<<8^E[255&c]^a[y++],d=s,s=u,u=l,l=c,c=d}}]),e}();n["default"]=s,t.exports=n["default"]},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},u=e("../stream"),l=r(u),c=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,l["default"]),this.jobs=[],this.delay=1,this.timeout_=null}return o(t,e),a(t,[{key:"processJob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),t}(l["default"]);n["default"]=c,t.exports=n["default"]},{"../stream":13}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./aes"),s=r(a),u=e("./async-stream"),l=r(u),c=e("pkcs7"),d=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},f=function(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),i=new s["default"](Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),a=new Int32Array(o.buffer),u=void 0,l=void 0,c=void 0,f=void 0,p=void 0,h=void 0,g=void 0,y=void 0,m=void 0;for(u=n[0],l=n[1],c=n[2],f=n[3],m=0;m<r.length;m+=4)p=d(r[m]),h=d(r[m+1]),g=d(r[m+2]),y=d(r[m+3]),i.decrypt(p,h,g,y,a,m),a[m]=d(a[m]^u),a[m+1]=d(a[m+1]^l),a[m+2]=d(a[m+2]^c),a[m+3]=d(a[m+3]^f),u=p,l=h,c=g,f=y;return o};n.decrypt=f;var p=function(){function e(t,n,r,o){i(this,e);var a=e.STEP,s=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),f=0;for(this.asyncStream_=new l["default"],this.asyncStream_.push(this.decryptChunk_(s.subarray(f,f+a),n,r,u)),f=a;f<s.length;f+=a)r=new Uint32Array([d(s[f-4]),d(s[f-3]),d(s[f-2]),d(s[f-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(f,f+a),n,r,u));this.asyncStream_.push(function(){o(null,(0,c.unpad)(u))})}return o(e,[{key:"decryptChunk_",value:function(e,t,n,r){return function(){var i=f(e,t,n);r.set(i,e.byteOffset)}}}]),e}();n.Decrypter=p,p.STEP=32e3,n["default"]={Decrypter:p,decrypt:f}},{"./aes":2,"./async-stream":3,pkcs7:38}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./decrypter"),o=e("./async-stream"),a=r(o);n["default"]={decrypt:i.decrypt,Decrypter:i.Decrypter,AsyncStream:a["default"]},t.exports=n["default"]},{"./async-stream":3,"./decrypter":4}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./line-stream"),o=r(i),a=e("./parse-stream"),s=r(a),u=e("./parser"),l=r(u);n["default"]={LineStream:o["default"],ParseStream:s["default"],Parser:l["default"]},t.exports=n["default"]},{"./line-stream":7,"./parse-stream":8,"./parser":9}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},u=e("../stream"),l=r(u),c=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.buffer=""}return o(t,e),a(t,[{key:"push",value:function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}]),t}(l["default"]);n["default"]=c,t.exports=n["default"]},{"../stream":13}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},u=e("../stream"),l=r(u),c=function(){var e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},d=function(e){for(var t=e.split(c()),n=t.length,r={},i=void 0;n--;)""!==t[n]&&(i=/([^=]*)=(.*)/.exec(t[n]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),r[i[0]]=i[1]);return r},f=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return o(t,e),a(t,[{key:"push",value:function(e){var t=void 0,n=void 0;if(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==e.length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});if(0!==e.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:e.slice(1)});if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=d(t[1]),n.attributes.RESOLUTION){var r=n.attributes.RESOLUTION.split("x"),i={};r[0]&&(i.width=parseInt(r[0],10)),r[1]&&(i.height=parseInt(r[1],10)),n.attributes.RESOLUTION=i}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}return void this.trigger("data",n)}return(t=/^#EXT-X-ENDLIST/.exec(e))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(t=/^#EXT-X-DISCONTINUITY/.exec(e))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(t=/^#EXT-X-KEY:?(.*)$/.exec(e))?(n={type:"tag",tagType:"key"},t[1]&&(n.attributes=d(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n)):void this.trigger("data",{type:"tag",data:e.slice(4,e.length)})}}}]),t}(l["default"]);n["default"]=f,t.exports=n["default"]},{"../stream":13}],9:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},l=e("../stream"),c=i(l),d=e("./line-stream"),f=i(d),p=e("./parse-stream"),h=i(p),g="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,y=function(e){function t(){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.lineStream=new f["default"],this.parseStream=new h["default"],this.lineStream.pipe(this.parseStream);var e=this,n=[],r={},i=void 0,a=function(){};this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",function(t){({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function o(){var o={};"length"in t&&(r.byterange=o,o.length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&(r.byterange=o,o.offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>=0&&(r.duration=t.duration),this.manifest.segments=n},key:function(){return t.attributes?"NONE"===t.attributes.METHOD?void(i=null):t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void("undefined"!=typeof t.attributes.IV&&(i.iv=t.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return isFinite(t.number)?void(this.manifest.mediaSequence=t.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){return isFinite(t.number)?void(this.manifest.discontinuitySequence=t.number):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){return/VOD|EVENT/.test(t.playlistType)?void(this.manifest.playlistType=t.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},"stream-inf":function(){return this.manifest.playlists=n,t.attributes?(r.attributes||(r.attributes={}),void(r.attributes=(0,g.mergeOptions)(r.attributes,t.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){r.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},targetduration:function(){return!isFinite(t.duration)||t.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):void(this.manifest.targetDuration=t.duration)},totalduration:function(){return!isFinite(t.duration)||t.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):void(this.manifest.totalDuration=t.duration)}})[t.tagType]||a).call(e)},uri:function(){r.uri=t.uri,n.push(r),!this.manifest.targetDuration||"duration"in r||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),i&&(r.key=i),r={}},comment:function(){}})[t.type].call(e)})}return a(t,e),s(t,[{key:"push",value:function(e){this.lineStream.push(e)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),t}(c["default"]);n["default"]=y,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../stream":13,"./line-stream":7,"./parse-stream":8}],10:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},l=e("./resolve-url"),c=i(l),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,f=e("./stream"),p=i(f),h=e("./m3u8"),g=i(h),y=function(e,t){for(var n=!1,r=(0,d.mergeOptions)(e,{}),i=e.playlists.length,o=void 0;i--;)if(o=r.playlists[i],o.uri===t.uri){if(o.segments&&t.segments&&o.segments.length===t.segments.length&&o.mediaSequence===t.mediaSequence)continue;r.playlists[i]=(0,d.mergeOptions)(o,t),r.playlists[t.uri]=r.playlists[i],o.segments&&(r.playlists[i].segments=m(o.segments,t.segments,t.mediaSequence-o.mediaSequence)),n=!0}return n?r:null},m=function(e,t,n){var r=t.slice(),i=void 0,o=void 0;for(n=n||0,i=Math.min(e.length,t.length+n),o=n;i>o;o++)r[o-n]=(0,d.mergeOptions)(e[o],r[o-n]);return r},v=function(e){function t(e,n,r){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var i=this,a=void 0,s=void 0,l=void 0,d=void 0,f=void 0;if(this.hls_=n,this.trackExpiredTime_=!1,!e)throw new Error("A non-empty playlist URL is required");d=function(e,t,n){i.setBandwidth(l||e),l=null,n&&(i.state=n),i.error={playlist:i.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2},i.trigger("error")},f=function(e,t){var n=void 0,r=void 0,o=void 0;i.setBandwidth(l||e),l=null,i.state="HAVE_METADATA",n=new g["default"].Parser,n.push(e.responseText),n.end(),n.manifest.uri=t,o=y(i.master,n.manifest),r=1e3*(n.manifest.targetDuration||10),o?(i.master=o,i.updateMediaPlaylist_(n.manifest)):r/=2,i.media().endList||(window.clearTimeout(s),s=window.setTimeout(function(){i.trigger("mediaupdatetimeout")},r)),i.trigger("loadedplaylist")},i.state="HAVE_NOTHING",this.expired_=0,a=this.dispose,i.dispose=function(){l&&(l.onreadystatechange=null,l.abort(),l=null),window.clearTimeout(s),a.call(this)},i.media=function(e){var t=i.state,n=void 0;if(!e)return i.media_;if("HAVE_NOTHING"===i.state)throw new Error("Cannot switch media playlist from "+i.state);if("string"==typeof e){if(!i.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=i.master.playlists[e]}if(n=!i.media_||e.uri!==i.media_.uri,i.master.playlists[e.uri].endList)return l&&(l.onreadystatechange=null,l.abort(),l=null),i.state="HAVE_METADATA",i.media_=e,void(n&&i.trigger("mediachange"));if(n){if(i.state="SWITCHING_MEDIA",l){if((0,c["default"])(i.master.uri,e.uri)===l.url)return;l.onreadystatechange=null,l.abort(),l=null}l=this.hls_.xhr({uri:(0,c["default"])(i.master.uri,e.uri),withCredentials:r},function(n,r){return n?d(r,e.uri,t):(f(r,e.uri),void("HAVE_MASTER"===t?i.trigger("loadedmetadata"):i.trigger("mediachange")))})}},i.setBandwidth=function(e){i.bandwidth=e.bandwidth},i.on("firstplay",function(){this.trackExpiredTime_=!0}),i.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",l=this.hls_.xhr({uri:(0,c["default"])(i.master.uri,i.media().uri),withCredentials:r},function(e,t){return e?d(t,i.media().uri):void f(t,i.media().uri)}))}),l=this.hls_.xhr({uri:e,withCredentials:r},function(t,n){var r=void 0,o=void 0;if(l=null,t)return i.error={status:n.status,message:"HLS playlist request error at URL: "+e,responseText:n.responseText,code:2},i.trigger("error");if(r=new g["default"].Parser,r.push(n.responseText),r.end(),i.state="HAVE_MASTER",r.manifest.uri=e,r.manifest.playlists){for(i.master=r.manifest,o=i.master.playlists.length;o--;)i.master.playlists[i.master.playlists[o].uri]=i.master.playlists[o];return i.trigger("loadedplaylist"),void(l||i.media(r.manifest.playlists[0]))}return i.master={uri:window.location.href,playlists:[{uri:e}]},i.master.playlists[e]=i.master.playlists[0],f(n,e),i.trigger("loadedmetadata")})}return a(t,e),s(t,[{key:"updateMediaPlaylist_",value:function(e){var t=void 0,n=void 0,r=void 0;if(t=this.media_,this.media_=this.master.playlists[e.uri],t&&this.trackExpiredTime_&&e.uri===t.uri){if(e.segments.length){if(void 0!==e.segments[0].start)return void(this.expired_=e.segments[0].start);if(void 0!==e.segments[0].end)return void(this.expired_=e.segments[0].end-e.segments[0].duration)}for(n=e.mediaSequence-t.mediaSequence-1;n>=0;n--)if(r=t.segments[n]){if(void 0!==r.end)return void(this.expired_=r.end);if(void 0!==r.start)return void(this.expired_=r.start+r.duration);this.expired_+=r.duration}else this.expired_+=t.targetDuration||10}}},{key:"getMediaIndexForTime_",value:function(e){var t=void 0,n=void 0,r=e,i=this.media_.segments.length,o=i-1,a=void 0,s=void 0,u=void 0,l=void 0;if(!this.media_)return 0;if(0>e)return 0;for(t=0;i>t;t++)if(n=this.media_.segments[t],n.end){if(n.end>e){l=n.end,s=t;break}u=n.end,a=t+1}if(void 0!==a){for(e-=u,t=a;(s||i)>t;t++)if(n=this.media_.segments[t],e-=n.duration,0>e)return t;return t>=s?a+Math.floor((r-u)/(l-u)*(s-a)):o}if(void 0!==s){for(e=l-e,t=s;t>=0;t--)if(n=this.media_.segments[t],e-=n.duration,0>e)return t;return 0===e?0:-1}if(e-=this.expired_,0>e)return-1;for(t=0;i>t;t++)if(n=this.media_.segments[t],e-=n.duration,0>e)return t;return o}}]),t}(p["default"]);n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./m3u8":6,"./resolve-url":12,"./stream":13}],11:[function(e,t,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,r={UNSAFE_LIVE_SEGMENTS:3},i=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if("undefined"!=typeof i.start)return{result:i.start,precise:!0};if("undefined"!=typeof i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=e.segments[r],"undefined"!=typeof i.end)return{result:n+i.end,precise:!0};if(n+=i.duration,"undefined"!=typeof i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}},o=function(e,t){for(var n=0,r=void 0,i=t-e.mediaSequence;i<e.segments.length;i++){if(r=e.segments[i],"undefined"!=typeof r.start)return{result:r.start-n,precise:!0};if(n+=r.duration,"undefined"!=typeof r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}},a=function(e,t){var n=void 0,r=void 0;return"undefined"==typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(n=i(e,t),n.precise?n.result:(r=o(e,t),r.precise?r.result:n.result))},s=function(e,t,n){if(!e)return 0;if("undefined"==typeof n&&(n=!0),"undefined"==typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return window.Infinity}return a(e,t,n)};n.duration=s;var u=function(e){var n=void 0,i=void 0;return e.segments?e.endList?(0,t.createTimeRange)(0,s(e)):(n=a(e,e.mediaSequence),i=a(e,e.mediaSequence+Math.max(0,e.segments.length-r.UNSAFE_LIVE_SEGMENTS)),(0,t.createTimeRange)(n,i)):(0,t.createTimeRange)()};n.seekable=u,r.duration=s,r.seekable=u,n["default"]=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("global/document"),o=r(i),a=function(e,t){var n=o["default"].querySelector("base"),r=o["default"].querySelector("head"),i=o["default"].createElement("a"),a=n,s=void 0,u=void 0;return n?s=n.href:a=r.appendChild(o["default"].createElement("base")),a.href=e,i.href=t,u=i.href,n?n.href=s:r.removeChild(a),u};n["default"]=a,t.exports=n["default"]},{"global/document":16}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.listeners={}}return i(e,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n=void 0;return this.listeners[e]?(n=this.listeners[e].indexOf(t),this.listeners[e].splice(n,1),n>-1):!1}},{key:"trigger",value:function(e){var t=void 0,n=void 0,r=void 0,i=void 0;if(t=this.listeners[e])if(2===arguments.length)for(r=t.length,n=0;r>n;++n)t[n].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),r=t.length,n=0;r>n;++n)t[n].apply(this,i)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),e}();n["default"]=o,t.exports=n["default"]},{}],14:[function(e,t,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,i=function(){var e=function t(e,n){if(e=(0,r.mergeOptions)({timeout:45e3},e),t.beforeRequest&&"function"==typeof t.beforeRequest){var i=t.beforeRequest(e);i&&(e=i)}var o=(0,r.xhr)(e,function(e,t){!e&&o.response&&(o.responseTime=(new Date).getTime(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=o.response.byteLength||o.response.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),e||o.timedout?o.timedout=o.timedout||"ETIMEDOUT"===e.code:o.timedout=!1,e||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(o&&(o.response||o.responseText)))),n(e,o)});return o.requestTime=(new Date).getTime(),o};return e};n["default"]=i,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){},{}],16:[function(e,t,n){(function(n){var r="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},i=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var o=r["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":15}],17:[function(e,t,n){"use strict";var r,i=e("../utils/stream.js");r=function(){var e,t=0;r.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=e[t+5],i=(16&r)>>4;return i?n+20:n+10},this.parseAdtsSize=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3,i=6144&e[t+3];return i|r|n},this.push=function(n){var r,i,o,a=0,s=0;for(void 0!==e&&e.length?(o=e.length,e=new Uint8Array(n.byteLength+o),e.set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-s>=10;)if(e[s]!=="I".charCodeAt(0)||e[s+1]!=="D".charCodeAt(0)||e[s+2]!=="3".charCodeAt(0))if(e[s]&!0&&240===(240&e[s+1])){if(a=this.parseAdtsSize(e,s),a>e.length)break;i={type:"audio",data:e.subarray(s,s+a),pts:t,dts:t},this.trigger("data",i),s+=a}else s++;else{if(a=this.parseId3TagSize(e,s),a>e.length)break;r={type:"timed-metadata",data:e.subarray(s,s+a)},this.trigger("data",r),s+=a}}},r.prototype=new i,t.exports=r},{"../utils/stream.js":36}],18:[function(e,t,n){"use strict";var r,i=e("../utils/stream.js"),o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=function(){var e,t;r.prototype.init.call(this),e=this,this.push=function(e){var n,r,i,a,s,u,l=0,c=0;if("audio"===e.type)for(t?(a=t,t=new Uint8Array(a.byteLength+e.data.byteLength),t.set(a),t.set(e.data,a.byteLength)):t=e.data;l+5<t.length;)if(255===t[l]&&240===(246&t[l+1])){if(r=2*(1&~t[l+1]),n=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,s=1024*((3&t[l+6])+1),u=9e4*s/o[(60&t[l+2])>>>2],i=l+n,t.byteLength<i)return;if(this.trigger("data",{pts:e.pts+c*u,dts:e.dts+c*u,sampleCount:s,audioobjecttype:(t[l+2]>>>6&3)+1,channelcount:(1&t[l+2])<<3|(192&t[l+3])>>>6,samplerate:o[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+r,i)}),t.byteLength===i)return void(t=void 0);c++,t=t.subarray(i)}else l++},this.flush=function(){this.trigger("done")}},r.prototype=new i,t.exports=r},{"../utils/stream.js":36}],19:[function(e,t,n){"use strict";var r,i,o=e("../utils/stream.js"),a=e("../utils/exp-golomb.js");i=function(){var e,t,n=0;i.prototype.init.call(this),this.push=function(r){var i;for(t?(i=new Uint8Array(t.byteLength+r.data.byteLength),i.set(t),i.set(r.data,t.byteLength),t=i):t=r.data;n<t.byteLength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}this.trigger("data",t.subarray(n+3,e-2));do e++;while(1!==t[e]&&e<t.length);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")}},i.prototype=new o,r=function(){var e,t,n,o,s,u,l,c=new i;r.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,o=e.dts,c.push(e))},c.on("data",function(r){var i={trackId:t,pts:n,dts:o,data:r};switch(31&r[0]){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp",i.escapedRBSP=s(r.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp",i.escapedRBSP=s(r.subarray(1)),i.config=u(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",i)}),c.on("done",function(){e.trigger("done")}),this.flush=function(){c.flush()},l=function(e,t){var n,r,i=8,o=8;for(n=0;e>n;n++)0!==o&&(r=t.readExpGolomb(),o=(i+r+256)%256),i=0===o?i:o},s=function(e){for(var t,n,r=e.byteLength,i=[],o=1;r-2>o;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;t>o;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},u=function(e){var t,n,r,i,o,s,u,c,d,f,p,h,g=0,y=0,m=0,v=0;if(t=new a(e),n=t.readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),(100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n||138===n||139===n||134===n)&&(o=t.readUnsignedExpGolomb(),3===o&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==o?8:12,h=0;p>h;h++)t.readBoolean()&&(6>h?l(16,t):l(64,t));if(t.skipUnsignedExpGolomb(),s=t.readUnsignedExpGolomb(),0===s)t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),h=0;u>h;h++)t.skipExpGolomb();return t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),f=t.readBits(1),0===f&&t.skipBits(1),t.skipBits(1),
t.readBoolean()&&(g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(c+1)-2*g-2*y,height:(2-f)*(d+1)*16-2*m-2*v}}},r.prototype=new o,t.exports={H264Stream:r,NalByteStream:i}},{"../utils/exp-golomb.js":35,"../utils/stream.js":36}],20:[function(e,t,n){t.exports={adts:e("./adts"),h264:e("./h264")}},{"./adts":18,"./h264":19}],21:[function(e,t,n){"use strict";var r;r=function(e,t){var n,i=0,o=16384,a=function(e,t){var n,r=e.position+t;r<e.bytes.byteLength||(n=new Uint8Array(2*r),n.set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},s=r.widthBytes||new Uint8Array("width".length),u=r.heightBytes||new Uint8Array("height".length),l=r.videocodecidBytes||new Uint8Array("videocodecid".length);if(!r.widthBytes){for(n=0;n<"width".length;n++)s[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)u[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)l[n]="videocodecid".charCodeAt(n);r.widthBytes=s,r.heightBytes=u,r.videocodecidBytes=l}switch(this.keyFrame=!1,e){case r.VIDEO_TAG:this.length=16,o*=6;break;case r.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case r.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw"Error Unknown TagType"}this.bytes=new Uint8Array(o),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var r,i=t||0;n=n||e.byteLength,r=i+n,a(this,n),this.bytes.set(e.subarray(i,r),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(i>0)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===i+4?this.length-=4:i>0&&(t=i+4,n=this.length-t,this.position=i,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),i=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(s,this.position),this.position+=5;else if("height"===e)this.bytes.set(u,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var e,n;switch(this.bytes[0]){case r.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case r.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;break;case r.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return n=this.length-11,this.bytes[1]=(16711680&n)>>>16,this.bytes[2]=(65280&n)>>>8,this.bytes[3]=(255&n)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=r.frameTime(this.bytes),this}},r.AUDIO_TAG=8,r.VIDEO_TAG=9,r.METADATA_TAG=18,r.isAudioFrame=function(e){return r.AUDIO_TAG===e[0]},r.isVideoFrame=function(e){return r.VIDEO_TAG===e[0]},r.isMetaData=function(e){return r.METADATA_TAG===e[0]},r.isKeyFrame=function(e){return r.isVideoFrame(e)?23===e[11]:r.isAudioFrame(e)?!0:!!r.isMetaData(e)},r.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},t.exports=r},{}],22:[function(e,t,n){t.exports={tag:e("./flv-tag"),Transmuxer:e("./transmuxer"),tools:e("../tools/flv-inspector")}},{"../tools/flv-inspector":33,"./flv-tag":21,"./transmuxer":23}],23:[function(e,t,n){"use strict";var r,i,o,a,s,u,l,c=e("../utils/stream.js"),d=e("./flv-tag.js"),f=e("../m2ts/m2ts.js"),p=e("../codecs/adts.js"),h=e("../codecs/h264").H264Stream;s=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},u=function(e,t){var n=new d(d.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},l=function(e,t){var n,r=new d(d.VIDEO_TAG,!0);for(r.dts=t,r.pts=t,r.writeByte(1),r.writeByte(e.profileIdc),r.writeByte(e.profileCompatibility),r.writeByte(e.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(e.sps[0].length),r.writeBytes(e.sps[0]),r.writeByte(e.pps.length),n=0;n<e.pps.length;++n)r.writeShort(e.pps[n].length),r.writeBytes(e.pps[n]);return r},o=function(e){var t,n=[];o.prototype.init.call(this),this.push=function(t){s(e,t),e&&void 0===e.channelcount&&(e.audioobjecttype=t.audioobjecttype,e.channelcount=t.channelcount,e.samplerate=t.samplerate,e.samplingfrequencyindex=t.samplingfrequencyindex,e.samplesize=t.samplesize,e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){var r,i,o,a=[];if(0===n.length)return void this.trigger("done");for(o=-(1/0);n.length;)r=n.shift(),(e.extraData!==t||r.pts-o>=1e3)&&(i=new d(d.METADATA_TAG),i.pts=r.pts,i.dts=r.dts,i.writeMetaDataDouble("audiocodecid",10),i.writeMetaDataBoolean("stereo",2===e.channelcount),i.writeMetaDataDouble("audiosamplerate",e.samplerate),i.writeMetaDataDouble("audiosamplesize",16),a.push(i),t=e.extraData,i=new d(d.AUDIO_TAG,!0),i.pts=r.pts,i.dts=r.dts,i.view.setUint16(i.position,e.extraData),i.position+=2,i.length=Math.max(i.length,i.position),a.push(i),o=r.pts),i=new d(d.AUDIO_TAG),i.pts=r.pts,i.dts=r.dts,i.writeBytes(r.data),a.push(i);t=null,this.trigger("data",{track:e,tags:a}),this.trigger("done")}},o.prototype=new c,i=function(e){var t,n,r=[];i.prototype.init.call(this),this.finishFrame=function(n,r){r&&(t&&e&&e.newMetadata&&(r.keyFrame||0===n.length)&&(n.push(u(t,r.pts)),n.push(l(e,r.pts)),e.newMetadata=!1),r.endNalUnit(),n.push(r))},this.push=function(t){s(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),r.push(t)},this.flush=function(){for(var i,o=[];r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return void this.trigger("done");for(;r.length;)i=r.shift(),"seq_parameter_set_rbsp"===i.nalUnitType?(e.newMetadata=!0,t=i.config,e.width=t.width,e.height=t.height,e.sps=[i.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===i.nalUnitType?(e.newMetadata=!0,e.pps=[i.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===i.nalUnitType?(n&&this.finishFrame(o,n),n=new d(d.VIDEO_TAG),n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(i.data);n&&this.finishFrame(o,n),this.trigger("data",{track:e,tags:o}),this.trigger("done")}},i.prototype=new c,a=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,a.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}},a.prototype=new c,a.prototype.flush=function(){var e,t,n,r,i={tags:{},captions:[],metadata:[]};if(!(this.pendingTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),i.tags.videoTags=this.videoTags,i.tags.audioTags=this.audioTags,n=0;n<this.pendingCaptions.length;n++)t=this.pendingCaptions[n],t.startTime=t.startPts-r,t.startTime/=9e4,t.endTime=t.endPts-r,t.endTime/=9e4,i.captions.push(t);for(n=0;n<this.pendingMetadata.length;n++)e=this.pendingMetadata[n],e.cueTime=e.pts-r,e.cueTime/=9e4,i.metadata.push(e);i.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.trigger("data",i),this.trigger("done")}},r=function(e){var t,n,s,u,l,c,g,y,m,v=this;r.prototype.init.call(this),e=e||{},this.metadataStream=new f.MetadataStream,e.metadataStream=this.metadataStream,t=new f.TransportPacketStream,n=new f.TransportParseStream,s=new f.ElementaryStream,u=new p,l=new h,m=new a(e),t.pipe(n).pipe(s),s.pipe(l),s.pipe(u),s.pipe(this.metadataStream).pipe(m),y=new f.CaptionStream,l.pipe(y).pipe(m),s.on("data",function(e){var t,n,r;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(r=e.tracks[t]);n&&!c&&(m.numberOfTracks++,c=new i(n),l.pipe(c).pipe(m)),r&&!g&&(m.numberOfTracks++,g=new o(r),u.pipe(g).pipe(m))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},m.on("data",function(e){v.trigger("data",e)}),m.on("done",function(){v.trigger("done")}),this.getFlvHeader=function(e,t,n){var r,i,o,a=new Uint8Array(9),s=new DataView(a.buffer);return e=e||0,t=void 0===t?!0:t,n=void 0===n?!0:n,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(t?4:0)|(n?1:0)),s.setUint32(5,a.byteLength),0>=e?(i=new Uint8Array(a.byteLength+4),i.set(a),i.set([0,0,0,0],a.byteLength),i):(r=new d(d.METADATA_TAG),r.pts=r.dts=0,r.writeMetaDataDouble("duration",e),o=r.finalize().length,i=new Uint8Array(a.byteLength+o),i.set(a),i.set(s.byteLength,o),i)}},r.prototype=new c,t.exports=r},{"../codecs/adts.js":18,"../codecs/h264":19,"../m2ts/m2ts.js":27,"../utils/stream.js":36,"./flv-tag.js":21}],24:[function(e,t,n){"use strict";var r={codecs:e("./codecs"),mp4:e("./mp4"),flv:e("./flv"),mp2t:e("./m2ts")};t.exports=r},{"./codecs":20,"./flv":22,"./m2ts":26,"./mp4":30}],25:[function(e,t,n){"use strict";var r=4,i=128,o=e("../utils/stream"),a=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},o=0,a=0;t<e.byteLength&&e[t]!==i;){for(;255===e[t];)o+=255,t++;for(o+=e[t++];255===e[t];)a+=255,t++;if(a+=e[t++],!n.payload&&o===r){n.payloadType=o,n.payloadSize=a,n.payload=e.subarray(t,t+a);break}t+=a,o=0,a=0}return n},s=function(e){return 181!==e.payload[0]?null:49!==(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},u=function(e,t){var n,r,i,o,a=[];if(!(64&t[0]))return a;for(r=31&t[0],n=0;r>n;n++)i=3*n,o={type:3&t[i+2],pts:e},4&t[i+2]&&(o.ccData=t[i+3]<<8|t[i+4],a.push(o));return a},l=function(){l.prototype.init.call(this),this.captionPackets_=[],this.field1_=new S,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};l.prototype=new o,l.prototype.push=function(e){var t,n;"sei_rbsp"===e.nalUnitType&&(t=a(e.escapedRBSP),t.payloadType===r&&(n=s(t),n&&(this.captionPackets_=this.captionPackets_.concat(u(e.pts,n)))))},l.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.sort(function(e,t){return e.pts-t.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var c={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},d=function(e){return null===e?"":(e=c[e]||e,String.fromCharCode(e))},f=0,p=5152,h=5167,g=5157,y=5158,m=5159,v=5165,_=5153,b=5164,T=5166,E=14,w=function(){for(var e=[],t=E+1;t--;)e.push("");return e},S=function(){S.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=w(),this.nonDisplayed_=w(),this.lastControlCode_=null,this.push=function(e){if(0===e.type){var t,n,r,i;if(t=32639&e.ccData,t===this.lastControlCode_)return void(this.lastControlCode_=null);switch(4096===(61440&t)?this.lastControlCode_=t:this.lastControlCode_=null,t){case f:break;case p:this.mode_="popOn";break;case h:this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;break;case g:this.topRow_=E-1,this.mode_="rollUp";break;case y:this.topRow_=E-2,this.mode_="rollUp";break;case m:this.topRow_=E-3,this.mode_="rollUp";break;case v:this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;break;case _:"popOn"===this.mode_?this.nonDisplayed_[E]=this.nonDisplayed_[E].slice(0,-1):this.displayed_[E]=this.displayed_[E].slice(0,-1);break;case b:this.flushDisplayed(e.pts),this.displayed_=w();break;case T:this.nonDisplayed_=w();break;default:if(r=t>>>8,i=255&t,r>=16&&23>=r&&i>=64&&127>=i&&(16!==r||96>i)&&(r=32,i=null),(17===r||25===r)&&i>=48&&63>=i&&(r=14850474,i=""),16===(240&r))return;this[this.mode_](e.pts,r,i)}}}};S.prototype=new o,S.prototype.flushDisplayed=function(e){var t,n;for(n=0;n<this.displayed_.length;n++)t=this.displayed_[n],t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t.trim()})},S.prototype.popOn=function(e,t,n){var r=this.nonDisplayed_[E];r+=d(t),r+=d(n),this.nonDisplayed_[E]=r},S.prototype.rollUp=function(e,t,n){var r=this.displayed_[E];""===r&&(this.flushDisplayed(e),this.startPts_=e),r+=d(t),r+=d(n),this.displayed_[E]=r},S.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;E>e;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[E]=""},t.exports={CaptionStream:l,Cea608Stream:S}},{"../utils/stream":36}],26:[function(e,t,n){t.exports=e("./m2ts")},{"./m2ts":27}],27:[function(e,t,n){"use strict";var r,i,o,a=e("../utils/stream.js"),s=e("./caption-stream"),u=e("./stream-types"),a=e("../utils/stream.js"),l=e("./stream-types.js"),c=188,d=71,r=function(){var e=new Uint8Array(c),t=0;r.prototype.init.call(this),this.push=function(n){var r,i=0,o=c;for(t?(r=new Uint8Array(n.byteLength+t),r.set(e.subarray(0,t)),r.set(n,t),t=0):r=n;o<r.byteLength;)r[i]!==d||r[o]!==d?(i++,o++):(this.trigger("data",r.subarray(i,o)),i+=c,o+=c);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===c&&e[0]===d&&(this.trigger("data",e),t=0),this.trigger("done")}};r.prototype=new a,i=function(){var e,t,n,r;i.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i,o,a;if(1&e[5]){for(r.programMapTable={},n=(15&e[1])<<8|e[2],i=3+n-4,o=(15&e[10])<<8|e[11],a=12+o;i>a;)r.programMapTable[(31&e[a+1])<<8|e[a+2]]=e[a],a+=((15&e[a+3])<<8|e[a+4])+5;for(t.programMapTable=r.programMapTable;r.packetsWaitingForPmt.length;)r.processPes_.apply(r,r.packetsWaitingForPmt.shift())}},this.push=function(t){var n={},r=4;n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid?(n.type="pat",e(t.subarray(r),n),this.trigger("data",n)):n.pid===this.pmtPid?(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.streamType=this.programMapTable[n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},i.prototype=new a,i.STREAM_TYPES={h264:27,adts:15},o=function(){var e,t={data:[],size:0},n={data:[],size:0},r={data:[],size:0},i=function(e,t){var n;t.dataAlignmentIndicator=0!==(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},a=function(t,n){var r,o=new Uint8Array(t.size),a={type:n},s=0;if(t.data.length){for(a.trackId=t.data[0].pid;t.data.length;)r=t.data.shift(),o.set(r.data,s),s+=r.data.byteLength;i(o,a),t.size=0,e.trigger("data",a)}};o.prototype.init.call(this),e=this,this.push=function(i){({pat:function(){},pes:function(){var e,o;switch(i.streamType){case u.H264_STREAM_TYPE:case l.H264_STREAM_TYPE:e=t,o="video";break;case u.ADTS_STREAM_TYPE:e=n,o="audio";break;case u.METADATA_STREAM_TYPE:e=r,o="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&a(e,o),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var t,n,r={type:"metadata",tracks:[]},o=i.programMapTable;for(t in o)o.hasOwnProperty(t)&&(n={timelineStartInfo:{baseMediaDecodeTime:0}},n.id=+t,o[t]===l.H264_STREAM_TYPE?(n.codec="avc",n.type="video"):o[t]===l.ADTS_STREAM_TYPE&&(n.codec="adts",n.type="audio"),r.tracks.push(n));e.trigger("data",r)}})[i.type]()},this.flush=function(){a(t,"video"),a(n,"audio"),a(r,"timed-metadata"),this.trigger("done")}},o.prototype=new a;var f={PAT_PID:0,MP2T_PACKET_LENGTH:c,TransportPacketStream:r,TransportParseStream:i,ElementaryStream:o,CaptionStream:s.CaptionStream,Cea608Stream:s.Cea608Stream,MetadataStream:e("./metadata-stream")};for(var p in u)u.hasOwnProperty(p)&&(f[p]=u[p]);t.exports=f},{"../utils/stream.js":36,"./caption-stream":25,"./metadata-stream":28,"./stream-types":29,"./stream-types.js":29}],28:[function(e,t,n){"use strict";var r,i=e("../utils/stream"),o=e("./stream-types"),a=function(e,t,n){var r,i="";for(r=t;n>r;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},s=function(e,t,n){return decodeURIComponent(a(e,t,n))},u=function(e,t,n){return unescape(a(e,t,n))},l=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},c={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=s(e.data,1,t),e.value=s(e.data,t+1,e.data.length-1);break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=s(e.data,1,t),e.url=s(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=u(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};r=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},i=0,a=[],s=0;if(r.prototype.init.call(this),this.dispatchType=o.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,r,o,u,d,f;if("timed-metadata"===e.type){if(e.dataAlignmentIndicator&&(s=0,a.length=0),0===a.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))return void(n.debug&&console.log("Skipping unrecognized metadata packet"));if(a.push(e),s+=e.data.byteLength,1===a.length&&(i=l(e.data.subarray(6,10)),i+=10),!(i>s)){for(t={data:new Uint8Array(i),frames:[],pts:a[0].pts,dts:a[0].dts},d=0;i>d;)t.data.set(a[0].data.subarray(0,i-d),d),d+=a[0].data.byteLength,s-=a[0].data.byteLength,a.shift();r=10,64&t.data[5]&&(r+=4,r+=l(t.data.subarray(10,14)),i-=l(t.data.subarray(16,20)));do{if(o=l(t.data.subarray(r+4,r+8)),1>o)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(f=String.fromCharCode(t.data[r],t.data[r+1],t.data[r+2],t.data[r+3]),u={id:f,data:t.data.subarray(r+10,r+o+10)},u.key=u.id,c[u.id]&&(c[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var p=u.data,h=(1&p[3])<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;h*=4,h+=3&p[7],u.timeStamp=h,this.trigger("timestamp",u)}t.frames.push(u),r+=10,r+=o}while(i>r);this.trigger("data",t)}}}},r.prototype=new i,t.exports=r},{"../utils/stream":36,"./stream-types":29}],29:[function(e,t,n){"use strict";t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],30:[function(e,t,n){t.exports={generator:e("./mp4-generator"),Transmuxer:e("./transmuxer").Transmuxer,AudioSegmentStream:e("./transmuxer").AudioSegmentStream,VideoSegmentStream:e("./transmuxer").VideoSegmentStream,tools:e("../tools/mp4-inspector")}},{"../tools/mp4-inspector":34,"./mp4-generator":31,"./transmuxer":32}],31:[function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,d,f,p,h,g,y,m,v,_,b,T,E,w,S,j,C,M,O,x,A,I,D,P,k,R,L,N,F,B;!function(){var e;C={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};for(e in C)C.hasOwnProperty(e)&&(C[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);M=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),O=new Uint8Array([0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),I=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:A,audio:I},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),N=L,F=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=L,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}(),r=function(e){var t,n,r,i=[],o=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)o+=i[t].byteLength;for(n=new Uint8Array(o+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength),r.setUint32(0,n.byteLength),n.set(e,4),t=0,o=8;t<i.length;t++)n.set(i[t],o),o+=i[t].byteLength;return n},i=function(){return r(C.dinf,r(C.dref,R))},o=function(e){return r(C.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(){return r(C.ftyp,M,O,M,x)},v=function(e){return r(C.hdlr,D[e])},s=function(e){return r(C.mdat,e)},m=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),r(C.mdhd,t)},y=function(e){return r(C.mdia,m(e),v(e.type),l(e))},u=function(e){return r(C.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return r(C.minf,"video"===e.type?r(C.vmhd,P):r(C.smhd,k),i(),b(e))},c=function(e,t){for(var n=[],i=t.length;i--;)n[i]=w(t[i]);return r.apply(null,[C.moof,u(e)].concat(n))},d=function(e){for(var t=e.length,n=[];t--;)n[t]=h(e[t]);return r.apply(null,[C.moov,p(4294967295)].concat(n).concat(f(e)))},f=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return r.apply(null,[C.mvex].concat(n))},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return r(C.mvhd,t)},_=function(e){var t,n,i=e.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,o[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return r(C.sdtp,o)},b=function(e){return r(C.stbl,T(e),r(C.stts,B),r(C.stsc,N),r(C.stsz,F),r(C.stco,L))},function(){var e,t;T=function(n){return r(C.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):t(n))},e=function(e){var t,n=e.sps||[],i=e.pps||[],o=[],a=[];for(t=0;t<n.length;t++)o.push((65280&n[t].byteLength)>>>8),o.push(255&n[t].byteLength),o=o.concat(Array.prototype.slice.call(n[t]));for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));return r(C.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r(C.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(o).concat([i.length]).concat(a))),r(C.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},t=function(e){return r(C.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),o(e))}}(),E=function(){return r(C.styp,M,O,M)},g=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return r(C.tkhd,t)},w=function(e){var t,n,i,o,a;return t=r(C.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),n=r(C.tfdt,new Uint8Array([0,0,0,0,e.baseMediaDecodeTime>>>24&255,e.baseMediaDecodeTime>>>16&255,e.baseMediaDecodeTime>>>8&255,255&e.baseMediaDecodeTime])),a=88,"audio"===e.type?(i=j(e,a),r(C.traf,t,n,i)):(o=_(e),i=j(e,o.length+a),r(C.traf,t,n,i,o))},h=function(e){return e.duration=e.duration||4294967295,r(C.trak,g(e),y(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),r(C.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,r=0,i=0,o=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,n|r|i|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var i,o,a,s;for(o=e.samples||[],t+=20+16*o.length,i=n(o,t),s=0;s<o.length;s++)a=o[s],i=i.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return r(C.trun,new Uint8Array(i))},e=function(e,t){var i,o,a,s;for(o=e.samples||[],t+=20+8*o.length,i=n(o,t),s=0;s<o.length;s++)a=o[s],i=i.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return r(C.trun,new Uint8Array(i))},j=function(n,r){return"audio"===n.type?e(n,r):t(n,r)}}(),t.exports={ftyp:a,mdat:s,moof:c,moov:d,initSegment:function(e){var t,n=a(),r=d(e);return t=new Uint8Array(n.byteLength+r.byteLength),t.set(n),t.set(r,n.byteLength),t}}},{}],32:[function(e,t,n){"use strict";var r,i,o,a,s,u,l,c,d,f,p=e("../utils/stream.js"),h=e("./mp4-generator.js"),g=e("../m2ts/m2ts.js"),y=e("../codecs/adts.js"),m=e("../codecs/h264").H264Stream,v=e("../aac");s=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},d=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},f=function(e){var t,n,r=0;for(t=0;t<e.length;t++)n=e[t],r+=n.data.byteLength;return r},i=function(e){var t=[],n=0,r=0;i.prototype.init.call(this),this.push=function(n){u(e,n),e&&(e.audioobjecttype=n.audioobjecttype,e.channelcount=n.channelcount,e.samplerate=n.samplerate,e.samplingfrequencyindex=n.samplingfrequencyindex,e.samplesize=n.samplesize),t.push(n)},this.setEarliestDts=function(t){r=t-e.timelineStartInfo.baseMediaDecodeTime},this.flush=function(){var r,i,o,a;return 0===t.length?void this.trigger("done"):(r=this.trimAdtsFramesByEarliestDts_(t),e.samples=this.generateSampleTable_(r),o=h.mdat(this.concatenateFrameData_(r)),t=[],c(e),i=h.moof(n,[e]),a=new Uint8Array(i.byteLength+o.byteLength),n++,a.set(i),a.set(o,i.byteLength),l(e),this.trigger("data",{track:e,boxes:a}),void this.trigger("done"))},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=r?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=r?(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0):!1}))},this.generateSampleTable_=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},this.concatenateFrameData_=function(e){var t,n,r=0,i=new Uint8Array(f(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}},i.prototype=new p,r=function(e){var t,n,i=0,o=[];r.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(r){u(e,r),"seq_parameter_set_rbsp"!==r.nalUnitType||t||(t=r.config,e.width=t.width,e.height=t.height,e.sps=[r.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility),"pic_parameter_set_rbsp"!==r.nalUnitType||n||(n=r.data,e.pps=[r.data]),o.push(r)},this.flush=function(){for(var t,n,r,a,s,l;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();return 0===o.length?(this.resetStream_(),void this.trigger("done")):(t=this.groupNalsIntoFrames_(o),r=this.groupFramesIntoGops_(t),r[0][0].keyFrame||(n=this.getGopForFusion_(o[0],e),n?(r.unshift(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.pts=n.pts,r.dts=n.dts,r.duration+=n.duration):r=this.extendFirstKeyFrame_(r)),u(e,r),e.samples=this.generateSampleTable_(r),s=h.mdat(this.concatenateNalData_(r)),this.gopCache_.unshift({gop:r.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],c(e),this.trigger("timelineStartInfo",e.timelineStartInfo),a=h.moof(i,[e]),l=new Uint8Array(a.byteLength+s.byteLength),
i++,l.set(a),l.set(s,a.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),void this.trigger("done"))},this.resetStream_=function(){l(e),t=void 0,n=void 0},this.getGopForFusion_=function(t){var n,r,i,o,a,s=45e3,u=1e4,l=1/0;for(a=0;a<this.gopCache_.length;a++)o=this.gopCache_[a],i=o.gop,e.pps&&d(e.pps[0],o.pps[0])&&e.sps&&d(e.sps[0],o.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration,n>=-u&&s>=n&&(!r||l>n)&&(r=o,l=n)));return r?r.gop:null},this.extendFirstKeyFrame_=function(e){var t;return e[0][0].keyFrame||(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,n,r=[],i=[];for(r.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),r=[n],r.byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return(i.length&&!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i},this.groupFramesIntoGops_=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),r=[n],r.nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},this.generateSampleTable_=function(e,t){var n,r,i,o,a,u=t||0,l=[];for(n=0;n<e.length;n++)for(o=e[n],r=0;r<o.length;r++)a=o[r],i=s(),i.dataOffset=u,i.compositionTimeOffset=a.pts-a.dts,i.duration=a.duration,i.size=4*a.length,i.size+=a.byteLength,a.keyFrame&&(i.flags.dependsOn=2),u+=i.size,l.push(i);return l},this.concatenateNalData_=function(e){var t,n,r,i,o,a,s=0,u=e.byteLength,l=e.nalCount,c=u+4*l,d=new Uint8Array(c),f=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(o=i[n],r=0;r<o.length;r++)a=o[r],f.setUint32(s,a.data.byteLength),s+=4,d.set(a.data,s),s+=a.data.byteLength;return d}},r.prototype=new p,u=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},l=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},c=function(e){var t,n=9e4,r=e.minSegmentDts-e.timelineStartInfo.dts,i=e.minSegmentPts-e.minSegmentDts;e.baseMediaDecodeTime=e.timelineStartInfo.baseMediaDecodeTime,e.baseMediaDecodeTime+=r,e.baseMediaDecodeTime-=i,e.baseMediaDecodeTime=Math.max(0,e.baseMediaDecodeTime),"audio"===e.type&&(t=e.samplerate/n,e.baseMediaDecodeTime*=t,e.baseMediaDecodeTime=Math.floor(e.baseMediaDecodeTime))},a=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,"undefined"!=typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,a.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}},a.prototype=new p,a.prototype.flush=function(){var e,t,n,r,i=0,o={captions:[],metadata:[]},a=0;if(!(0===this.pendingTracks.length||this.remuxTracks&&this.pendingTracks.length<this.numberOfTracks)){for(this.videoTrack?a=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,n=h.initSegment(this.pendingTracks),o.data=new Uint8Array(n.byteLength+this.pendingBytes),o.data.set(n),i+=n.byteLength,r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],i),i+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)e=this.pendingCaptions[r],e.startTime=e.startPts-a,e.startTime/=9e4,e.endTime=e.endPts-a,e.endTime/=9e4,o.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)t=this.pendingMetadata[r],t.cueTime=t.pts-a,t.cueTime/=9e4,o.metadata.push(t);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)}},o=function(e){var t,n,s,u,c,d,f,p,h,_,b,T,E,w=this;this.setupAacPipeline=function(){this.metadataStream=new g.MetadataStream,e.metadataStream=this.metadataStream,p=new v,d=new y,T=new a(e),E=p,p.pipe(d),p.pipe(this.metadataStream),this.metadataStream.pipe(T),this.metadataStream.on("timestamp",function(e){p.setTimestamp(e.timeStamp)}),this.addAacListener()},this.addAacListener=function(){p.on("data",function(e){if("timed-metadata"===e.type){var t={timelineStartInfo:{baseMediaDecodeTime:0},codec:"adts",type:"audio"};t&&!_&&(T.numberOfTracks++,_=new i(t),d.pipe(_).pipe(T))}})},this.setupTsPipeline=function(){this.metadataStream=new g.MetadataStream,e.metadataStream=this.metadataStream,s=new g.TransportPacketStream,u=new g.TransportParseStream,c=new g.ElementaryStream,d=new y,f=new m,b=new g.CaptionStream,T=new a(e),E=s,s.pipe(u).pipe(c),c.pipe(f),c.pipe(d),c.pipe(this.metadataStream).pipe(T),f.pipe(b).pipe(T),this.addTsListener()},this.addTsListener=function(){c.on("data",function(e){var o;if("metadata"===e.type){for(o=e.tracks.length;o--;)t||"video"!==e.tracks[o].type?n||"audio"!==e.tracks[o].type||(n=e.tracks[o],n.timelineStartInfo.baseMediaDecodeTime=w.baseMediaDecodeTime):(t=e.tracks[o],t.timelineStartInfo.baseMediaDecodeTime=w.baseMediaDecodeTime);t&&!h&&(T.numberOfTracks++,h=new r(t),h.on("timelineStartInfo",function(e){n&&(n.timelineStartInfo=e,_.setEarliestDts(e.dts))}),f.pipe(h).pipe(T)),n&&!_&&(T.numberOfTracks++,_=new i(n),d.pipe(_).pipe(T))}})},o.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,void 0===e.aacfile?this.setupTsPipeline():this.setupAacPipeline(),this.setBaseMediaDecodeTime=function(e){this.baseMediaDecodeTime=e,n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,l(n),n.timelineStartInfo.baseMediaDecodeTime=e),t&&(h.gopCache_=[],t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,l(t),t.timelineStartInfo.baseMediaDecodeTime=e)},this.push=function(e){E.push(e)},this.flush=function(){E.flush()},T.on("data",function(e){w.trigger("data",e)}),T.on("done",function(){w.trigger("done")})},o.prototype=new p,t.exports={Transmuxer:o,VideoSegmentStream:r,AudioSegmentStream:i}},{"../aac":17,"../codecs/adts.js":18,"../codecs/h264":19,"../m2ts/m2ts.js":27,"../utils/stream.js":36,"./mp4-generator.js":31}],33:[function(e,t,n){"use strict";var r={8:"audio",9:"video",18:"metadata"},i=function(e){return"0x"+("00"+e.toString(16)).slice(-2).toUpperCase()},o=function(e){for(var t,n=[];e.byteLength>0;){switch(t=0,e.byteLength){default:n.push(i(e[t++]));case 7:n.push(i(e[t++]));case 6:n.push(i(e[t++]));case 5:n.push(i(e[t++]));case 4:n.push(i(e[t++]));case 3:n.push(i(e[t++]));case 2:n.push(i(e[t++]));case 1:n.push(i(e[t++]))}e=e.subarray(t)}return n.join(" ")},a=function(e,t){var n=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],r=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return t=t||{},t.avcPacketType=n[e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-r:r,1===e[0]?t.nalUnitTypeRaw=o(e.subarray(4,100)):t.data=o(e.subarray(4)),t},s=function(e,t){var n=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],r=e[0]&parseInt("00001111",2);return t=t||{},t.frameType=n[(e[0]&parseInt("11110000",2))>>>4],t.codecID=r,7===r?a(e.subarray(1),t):t},u=function(e,t){var n=["AAC Sequence Header","AAC Raw"];return t=t||{},t.aacPacketType=n[e[0]],t.data=o(e.subarray(1)),t},l=function(e,t){var n=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],r=["5.5-kHz","11-kHz","22-kHz","44-kHz"],i=(e[0]&parseInt("11110000",2))>>>4;return t=t||{},t.soundFormat=n[i],t.soundRate=r[(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10===i?u(e.subarray(1),t):t},c=function(e){return{tagType:r[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]}},d=function(e){var t=c(e);switch(e[0]){case 8:l(e.subarray(11),t);break;case 9:s(e.subarray(11),t);break;case 18:}return t},f=function(e){var t,n,r=9,i=[];for(r+=4;r<e.byteLength;)t=e[r+1]<<16,t|=e[r+2]<<8,t|=e[r+3],t+=11,n=e.subarray(r,r+t),i.push(d(n)),r+=t+4;return i},p=function(e){return JSON.stringify(e,null,2)};t.exports={inspectTag:d,inspect:f,textify:p}},{}],34:[function(e,t,n){(function(e){"use strict";var n,r,i=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},o=function(e){return new Date(1e3*e-20828448e5)},a=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},s=function(e){var t,n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=n){if(n=r.getUint32(t),t+=4,0>=n)return;switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push(31&e[t])}}return i},u={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:n(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,r,i,o=new DataView(e.buffer,e.byteOffset,e.byteLength),a={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(r=6,i=0;s>i;i++)n=o.getUint16(r),r+=2,a.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;t>i;i++)n=o.getUint16(r),r+=2,a.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return a},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:i(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(i(e.subarray(r,r+4))),r+=4;return n},dinf:function(e){return{boxes:n(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:n(e.subarray(8))}},hdlr:function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:n.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:i(t.subarray(8,12)),name:""},o=8;for(o=24;o<t.byteLength;o++){if(0===t[o]){o++;break}r.name+=String.fromCharCode(t[o])}return r.name=decodeURIComponent(e.escape(r.name)),r},mdat:function(e){return{byteLength:e.byteLength,nals:s(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(r+=4,i.creationTime=o(n.getUint32(r)),r+=8,i.modificationTime=o(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=o(n.getUint32(r)),r+=4,i.modificationTime=o(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,t=n.getUint16(r),i.language+=String.fromCharCode((t>>10)+96),i.language+=String.fromCharCode(((960&t)>>5)+96),i.language+=String.fromCharCode((31&t)+96),i},mdia:function(e){return{boxes:n(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:n(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(r.streamDescriptor=n(e.subarray(28))[0]),r},moof:function(e){return{boxes:n(e)}},moov:function(e){return{boxes:n(e)}},mvex:function(e){return{boxes:n(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=o(t.getUint32(n)),n+=8,r.modificationTime=o(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=8,r.duration=t.getUint32(n)):(r.creationTime=o(t.getUint32(n)),n+=4,r.modificationTime=o(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=4,r.duration=t.getUint32(n)),n+=4,r.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=t.getUint32(n),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(t=24;i;t+=12,i--)r.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return r},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:n(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.chunkOffsets.push(n.getUint32(t));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:n(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},styp:function(e){return u.ftyp(e)},tfdt:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],o=2&r.flags[2],a=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),o&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),a&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),r},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=o(t.getUint32(n)),n+=8,r.modificationTime=o(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=8,r.duration=t.getUint32(n)):(r.creationTime=o(t.getUint32(n)),n+=4,r.modificationTime=o(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=4,r.duration=t.getUint32(n)),n+=4,n+=8,r.layer=t.getUint16(n),n+=2,r.alternateGroup=t.getUint16(n),n+=2,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.height=t.getUint16(n)+t.getUint16(n+2)/16,r},traf:function(e){return{boxes:n(e)}},trak:function(e){return{boxes:n(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],o=4&n.flags[2],s=1&n.flags[1],u=2&n.flags[1],l=4&n.flags[1],c=8&n.flags[1],d=r.getUint32(4),f=8;for(i&&(n.dataOffset=r.getUint32(f),f+=4),o&&d&&(t={flags:a(e.subarray(f,f+4))},f+=4,s&&(t.duration=r.getUint32(f),f+=4),u&&(t.size=r.getUint32(f),f+=4),c&&(t.compositionTimeOffset=r.getUint32(f),f+=4),n.samples.push(t),d--);d--;)t={},s&&(t.duration=r.getUint32(f),f+=4),u&&(t.size=r.getUint32(f),f+=4),l&&(t.flags=a(e.subarray(f,f+4)),f+=4),c&&(t.compositionTimeOffset=r.getUint32(f),f+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};n=function(e){for(var t,n,r,o,a,s=0,l=[],c=new ArrayBuffer(e.length),d=new Uint8Array(c),f=0;f<e.length;++f)d[f]=e[f];for(t=new DataView(c);s<e.byteLength;)n=t.getUint32(s),r=i(e.subarray(s+4,s+8)),o=n>1?s+n:e.byteLength,a=(u[r]||function(e){return{data:e}})(e.subarray(s+8,o)),a.size=n,a.type=r,l.push(a),s=o;return l},r=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(e,i){return n+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var r=n+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var o=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return o?1===o.length?r+"<"+o.join("").slice(1)+">":r+"<\n"+o.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+r(e.boxes,t+1):"")}).join("\n")},t.exports={inspect:n,textify:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t,n){"use strict";var r;r=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,o=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");o.set(e.subarray(i,i+a)),n=new DataView(o.buffer).getUint32(0),r=8*a,t-=a},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,i=Math.floor(e/8),e-=8*i,t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),o=n>>>32-i;return r-=i,r>0?n<<=i:t>0&&this.loadWord(),i=e-i,i>0?o<<i|this.readBits(i):o},this.skipLeadingZeros=function(){var e;for(e=0;r>e;++e)if(0!==(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.exports=r},{}],36:[function(e,t,n){"use strict";var r=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t].push(n)},this.off=function(t,n){var r;return e[t]?(r=e[t].indexOf(n),e[t].splice(r,1),r>-1):!1},this.trigger=function(t){var n,r,i,o;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;i>r;++r)n[r].call(this,arguments[1]);else{for(o=[],r=arguments.length,r=1;r<arguments.length;++r)o.push(arguments[r]);for(i=n.length,r=0;i>r;++r)n[r].apply(this,o)}},this.dispose=function(){e={}}}};r.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(){e.flush()}),e},r.prototype.push=function(e){this.trigger("data",e)},r.prototype.flush=function(){this.trigger("done")},t.exports=r},{}],37:[function(e,t,n){"use strict";var r;t.exports=function(e){var t=r[e.byteLength%16||0],n=new Uint8Array(e.byteLength+t.length);return n.set(e),n.set(t,e.byteLength),n},r=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],38:[function(e,t,n){"use strict";n.pad=e("./pad.js"),n.unpad=e("./unpad.js")},{"./pad.js":37,"./unpad.js":39}],39:[function(e,t,n){"use strict";t.exports=function(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}},{}],40:[function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,o=r(i),a=function(e){Object.defineProperties(e.frame,{id:{get:function(){return o["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return o["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return o["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},s=function(e,t,n){var r=window.WebKitDataCue||window.VTTCue;t&&t.forEach(function(e){this.inbandTextTrack_.addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n&&n.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var n=new r(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,a(n),this.metadataTrack_.addCue(n)},this)},e)};n["default"]=s,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){n.captions&&n.captions.length&&!e.inbandTextTrack_&&(e.inbandTextTrack_=t.player_.addTextTrack("captions","cc1")),n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=t.player_.addTextTrack("metadata","Timed Metadata"),e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)};n["default"]=r,t.exports=n["default"]},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={TIME_BETWEEN_TICKS:Math.floor(1e3/480),TIME_PER_TICK:Math.floor(1e3/240),BYTES_PER_CHUNK:1024,MIN_CHUNK:1024,MAX_CHUNK:1048576};n["default"]=r,t.exports=n["default"]},{}],43:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,c=i(l),d=e("./flash-source-buffer"),f=i(d),p=e("./flash-constants"),h=i(p),g=function(e){function t(){var e=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=document.getElementById(t.swfId),e.player_=(0,c["default"])(e.swfObj.parentNode),e.tech_=e.swfObj.tech,e.readyState="open",e.tech_.on("seeking",function(){for(var t=e.sourceBuffers.length;t--;)e.sourceBuffers[t].abort()}),e.swfObj&&e.swfObj.vjs_load()})}return a(t,e),s(t,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(e){var t=void 0;if(0!==e.indexOf("video/mp2t"))throw new Error("NotSupportedError (Video.js)");return t=new f["default"](this),this.sourceBuffers.push(t),t}},{key:"endOfStream",value:function(e){"network"===e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),t}(c["default"].EventTarget);n["default"]=g;try{Object.defineProperty(g.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(e){var t=void 0,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",e),n>e)for(t=0;t<this.sourceBuffers.length;t++)this.sourceBuffers[t].remove(e,n);return e}})}catch(y){g.prototype.duration=NaN}for(var m in h["default"])g[m]=h["default"][m];t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-constants":42,"./flash-source-buffer":44}],44:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,c=i(l),d=e("mux.js"),f=i(d),p=e("./remove-cues-from-track"),h=i(p),g=e("./create-text-tracks-if-necessary"),y=i(g),m=e("./add-text-track-data"),v=i(m),_=e("./flash-constants"),b=i(_),T=function(e){window.setTimeout(e,b["default"].TIME_BETWEEN_TICKS)},E=function(e){function t(e){var n=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var r=void 0;this.chunkSize_=b["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource=e,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new f["default"].flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),r=window.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader()))),this.mediaSource.swfObj.vjs_appendBuffer(r),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.segmentParser_=new f["default"].flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN)}}),Object.defineProperty(this,"buffered",{get:function(){return c["default"].createTimeRanges(this.mediaSource.swfObj.vjs_getProperty("buffered"))}}),this.mediaSource.player_.on("seeked",function(){(0,h["default"])(0,1/0,n.metadataTrack_),(0,h["default"])(0,1/0,n.inbandTextTrack_)})}return a(t,e),s(t,[{key:"appendBuffer",value:function(e){var t=this,n=void 0,r=524288,i=0;if(this.updating)throw n=new Error("SourceBuffer.append() cannot be called while an update is in progress"),n.name="InvalidStateError",n.code=11,n;this.updating=!0,this.mediaSource.readyState="open",this.trigger({type:"update"
});var o=function a(){t.segmentParser_.push(e.subarray(i,i+r)),i+=r,T(i<e.byteLength?a:t.segmentParser_.flush.bind(t.segmentParser_))};o()}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(e,t){(0,h["default"])(e,t,this.metadataTrack_),(0,h["default"])(e,t,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(e){var t=this;(0,y["default"])(this,this.mediaSource,e),(0,v["default"])(this,e.captions,e.metadata),T(function(){var n=t.convertTagsToData_(e);0===t.buffer_.length&&T(t.processBuffer_.bind(t)),n&&(t.buffer_.push(n),t.bufferSize_+=n.byteLength)})}},{key:"processBuffer_",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0,o=0,a=0,s=+new Date,u=void 0;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));do{for(a++,e=this.buffer_[0].subarray(o,o+this.chunkSize_),e.byteLength<this.chunkSize_||this.buffer_[0].byteLength===o+this.chunkSize_?(o=0,this.buffer_.shift()):o+=this.chunkSize_,this.bufferSize_-=e.byteLength,r="",n=e.byteLength,t=0;n>t;t++)r+=String.fromCharCode(e[t]);i=window.btoa(r),this.mediaSource.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+i+"</string></arguments></invoke>"),u=new Date-s}while(this.buffer_.length&&u<b["default"].TIME_PER_TICK);this.buffer_.length&&o&&(this.buffer_[0]=this.buffer_[0].subarray(o)),u>=b["default"].TIME_PER_TICK&&(this.chunkSize_=Math.floor(this.chunkSize_*(a/4))),this.chunkSize_=Math.max(b["default"].MIN_CHUNK,Math.min(this.chunkSize_,b["default"].MAX_CHUNK)),0!==this.bufferSize_?T(this.processBuffer_.bind(this)):(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(e){var t=0,n=this.mediaSource.tech_,r=0,i=void 0,o=void 0,a=void 0,s=[],u=this.getOrderedTags_(e);for(isNaN(this.basePtsOffset_)&&u.length&&(this.basePtsOffset_=u[0].pts),n.buffered().length&&(r=n.buffered().end(0)-this.timestampOffset),r=Math.max(r,n.currentTime()-this.timestampOffset),r*=1e3,r+=this.basePtsOffset_,i=0;i<u.length;i++)u[i].pts>=r&&s.push(u[i]);if(0!==s.length){for(i=0;i<s.length;i++)t+=s[i].bytes.byteLength;for(a=new Uint8Array(t),i=0,o=0;i<s.length;i++)a.set(s[i].bytes,o),o+=s[i].bytes.byteLength;return a}}},{key:"getOrderedTags_",value:function(e){for(var t=e.tags.videoTags,n=e.tags.audioTags,r=void 0,i=[];t.length||n.length;)r=t.length?n.length&&n[0].dts<t[0].dts?n.shift():t.shift():n.shift(),i.push(r.finalize());return i}}]),t}(c["default"].EventTarget);n["default"]=E,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":40,"./create-text-tracks-if-necessary":41,"./flash-constants":42,"./remove-cues-from-track":46,"mux.js":24}],45:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,c=i(l),d=e("./virtual-source-buffer"),f=i(d),p=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){var r=("00"+Number(t).toString(16)).slice(-2),i=("00"+Number(n).toString(16)).slice(-2);return"avc1."+r+"00"+i})},h=function(e){function t(){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c["default"].EventTarget);var e=this,n=void 0;this.mediaSource_=new window.MediaSource;for(n in this.mediaSource_)n in t.prototype||"function"!=typeof this.mediaSource_[n]||(this[n]=this.mediaSource_[n].bind(this.mediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return e.duration_===1/0?e.duration_:e.mediaSource_.duration},set:function(t){return e.duration_=t,t!==1/0?void(e.mediaSource_.duration=t):void 0}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?c["default"].createTimeRanges([[0,e.mediaSource_.duration]]):e.mediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return e.mediaSource_.readyState}}),this.sourceBuffers=[],["sourceopen","sourceclose","sourceended"].forEach(function(e){this.mediaSource_.addEventListener(e,this.trigger.bind(this))},this),this.on("sourceopen",function(t){var n=document.querySelector('[src="'+e.url_+'"]');n&&(e.player_=(0,c["default"])(n.parentNode))}),this.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0})}return a(t,e),s(t,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),n.name="InvalidStateError",n.code=11,n;(t>this.mediaSource_.duration||isNaN(this.mediaSource_.duration))&&(this.mediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,o=/avc1\.[\da-f]+/i,a=/mp4a\.\d+.\d+/i;return/^video\/mp2t/i.test(e)?(n=e.split(";").slice(1).join(";"),n=p(n),r=(n.match(o)||[])[0],i=(n.match(a)||[])[0],r&&r.length||(r="avc1.4d400d"),i&&i.length||(i="mp4a.40.2"),t=new f["default"](this,[r,i]),this.sourceBuffers.push(t),t):(t=this.mediaSource_.addSourceBuffer(e),this.sourceBuffers.push(t),t)}}]),t}(c["default"].EventTarget);n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./virtual-source-buffer":49}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){var r=void 0,i=void 0;if(n)for(r=n.cues.length;r--;)i=n.cues[r],i.startTime<=t&&i.endTime>=e&&n.removeCue(i)};n["default"]=r,t.exports=n["default"]},{}],47:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("mux.js"),o=r(i),a=void 0,s={},u=function(e){e.on("data",function(e){var t=e.data;e.data=t.buffer,postMessage({action:"data",segment:e,byteOffset:t.byteOffset,byteLength:t.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){postMessage({action:"caption",data:e})}),e.on("done",function(e){postMessage({action:"done"})})},l={init:function(e){s=e&&e.options||{},this.defaultInit()},defaultInit:function(){a&&a.dispose(),a=new o["default"].mp4.Transmuxer(s),u(a)},push:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);a.push(t)},reset:function(){this.defaultInit()},setTimestampOffset:function(e){var t=e.timestampOffset||0;a.setBaseMediaDecodeTime(Math.round(9e4*t))},flush:function(e){a.flush()}},c=function(e){e.onmessage=function(e){a||"init"===e.data.action||l.defaultInit(),e.data&&e.data.action&&l[e.data.action]&&l[e.data.action](e.data)}};n["default"]=c,t.exports=n["default"]},{"mux.js":24}],48:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./flash-media-source"),o=r(i),a=e("./html-media-source"),s=r(a),u=window.videojs,l=0,c={mode:"auto"};u.mediaSources={};var d=function(e,t){var n=u.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},f=function(){return!!window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},p=function(e){var t=u.mergeOptions(c,e);return this.MediaSource={open:d,supportsNativeMediaSources:f},"html5"===t.mode||"auto"===t.mode&&f()?new s["default"]:new o["default"]};n.MediaSource=p,p.open=d,p.supportsNativeMediaSources=f;var h={createObjectURL:function(e){var t="blob:vjs-media-source/",n=void 0;return e instanceof s["default"]?(n=window.URL.createObjectURL(e.mediaSource_),e.url_=n,n):e instanceof o["default"]?(n=t+l,l++,u.mediaSources[n]=e,n):(n=window.URL.createObjectURL(e),e.url_=n,n)}};n.URL=h,u.MediaSource=p,u.URL=h},{"./flash-media-source":43,"./html-media-source":45}],49:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,c=i(l),d=e("./create-text-tracks-if-necessary"),f=i(d),p=e("./remove-cues-from-track"),h=i(p),g=e("./add-text-track-data"),y=i(g),m=e("webworkify"),v=i(m),_=e("./transmuxer-worker"),b=i(_),T=function(e,t,n){return function(){return e[t]&&e[t].updating?void 0:e.trigger(n)}},E=function(e){function t(e,n){var r=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,c["default"].EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=e,this.codecs_=n,this.transmuxer_=(0,v["default"])(b["default"]),this.transmuxer_.postMessage({action:"init",options:{remux:!1}}),this.transmuxer_.onmessage=function(e){return"data"===e.data.action?r.data_(e):"done"===e.data.action?r.done_(e):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function(){return this.bufferUpdating_||this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating}}),Object.defineProperty(this,"buffered",{get:function(){var e=null,t=null,n=0,r=[],i=[];if(!(this.videoBuffer_&&0!==this.videoBuffer_.buffered.length||this.audioBuffer_&&0!==this.audioBuffer_.buffered.length))return c["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;for(var o=this.videoBuffer_.buffered,a=this.audioBuffer_.buffered,s=o.length;s--;)r.push({time:o.start(s),type:"start"}),r.push({time:o.end(s),type:"end"});for(s=a.length;s--;)r.push({time:a.start(s),type:"start"}),r.push({time:a.end(s),type:"end"});for(r.sort(function(e,t){return e.time-t.time}),s=0;s<r.length;s++)"start"===r[s].type?(n++,2===n&&(e=r[s].time)):"end"===r[s].type&&(n--,1===n&&(t=r[s].time)),null!==e&&null!==t&&(i.push([e,t]),e=null,t=null);return c["default"].createTimeRanges(i)}})}return a(t,e),s(t,[{key:"data_",value:function(e){var t=e.data.segment,n=this.mediaSource_.mediaSource_;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),"video"===t.type?this.videoBuffer_||(this.videoBuffer_=n.addSourceBuffer('video/mp4;codecs="'+this.codecs_[0]+'"'),this.videoBuffer_.addEventListener("updatestart",T(this,"audioBuffer_","updatestart")),this.videoBuffer_.addEventListener("update",T(this,"audioBuffer_","update")),this.videoBuffer_.addEventListener("updateend",T(this,"audioBuffer_","updateend"))):"audio"===t.type?this.audioBuffer_||(this.audioBuffer_=n.addSourceBuffer('audio/mp4;codecs="'+this.codecs_[1]+'"'),this.audioBuffer_.addEventListener("updatestart",T(this,"videoBuffer_","updatestart")),this.audioBuffer_.addEventListener("update",T(this,"videoBuffer_","update")),this.audioBuffer_.addEventListener("updateend",T(this,"videoBuffer_","updateend"))):"combined"===t.type&&(this.videoBuffer_||(this.videoBuffer_=n.addSourceBuffer('video/mp4;codecs="'+this.codecs_.join(",")+'"'),this.videoBuffer_.addEventListener("updatestart",T(this,"videoBuffer_","updatestart")),this.videoBuffer_.addEventListener("update",T(this,"videoBuffer_","update")),this.videoBuffer_.addEventListener("updateend",T(this,"videoBuffer_","updateend")))),(0,f["default"])(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(){this.processPendingSegments_()}},{key:"appendBuffer",value:function(e){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(e,t){this.videoBuffer_&&this.videoBuffer_.remove(e,t),this.audioBuffer_&&this.audioBuffer_.remove(e,t),(0,h["default"])(e,t,this.metadataTrack_),(0,h["default"])(e,t,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,r=t.data;return"combined"===n&&(n="video"),e[n].segments.push(r),e[n].bytes+=r.byteLength,t.captions&&(e.captions=e.captions.concat(t.captions)),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),(0,y["default"])(this,e.captions,e.metadata),this.concatAndAppendSegments_(e.video,this.videoBuffer_),this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,r=void 0;e.bytes&&(r=new Uint8Array(e.bytes),e.segments.forEach(function(e){r.set(e,n),n+=e.byteLength}),t.appendBuffer(r))}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(c["default"].EventTarget);n["default"]=E,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":40,"./create-text-tracks-if-necessary":41,"./remove-cues-from-track":46,"./transmuxer-worker":47,webworkify:50}],50:[function(e,t,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e){for(var t,n=Object.keys(o),s=0,u=n.length;u>s;s++){var l=n[s];if(o[l].exports===e){t=l;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},s=0,u=n.length;u>s;s++){var l=n[s];c[l]=l}i[t]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[t]=t,i[d]=[Function(["require"],"require("+a(t)+")(self)"),f];var p="("+r+")({"+Object.keys(i).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(d)+"])",h=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(h.createObjectURL(new Blob([p],{type:"text/javascript"})))}},{}],51:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},l=e("./playlist-loader"),c=i(l),d=e("./playlist"),f=i(d),p=e("./xhr"),h=i(p),g=e("./decrypter"),y=e("./bin-utils"),m=i(y),v=e("videojs-contrib-media-sources"),_=e("./m3u8"),b=i(_),T="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,E=i(T),w=e("./resolve-url"),S=i(w),j={PlaylistLoader:c["default"],Playlist:f["default"],Decrypter:g.Decrypter,AsyncStream:g.AsyncStream,decrypt:g.decrypt,utils:m["default"],xhr:(0,h["default"])()};j.GOAL_BUFFER_LENGTH=30,j.canPlaySource=function(){return E["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},j.findSoleUncommonTimeRangesEnd_=function(e,t){var n=void 0,r=void 0,i=void 0,o=[],a=[],s=function(e){return e[0]<=i&&e[1]>=i};if(e)for(n=0;n<e.length;n++)r=e.start(n),i=e.end(n),a.push([r,i]);if(t)for(n=0;n<t.length;n++)r=t.start(n),i=t.end(n),a.some(s)||o.push(i);return 1!==o.length?null:o[0]},j.supportsNativeHls=function(){var e=document.createElement("video"),t=void 0,n=void 0;return E["default"].getComponent("Html5").isSupported()?(t=e.canPlayType("application/x-mpegURL"),n=e.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(t)||/probably|maybe/.test(n)):!1}(),j.isSupported=function(){return E["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},j.comparePlaylistBandwidth=function(e,t){var n=void 0,r=void 0;return e.attributes&&e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||window.Number.MAX_VALUE,t.attributes&&t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||window.Number.MAX_VALUE,n-r},j.comparePlaylistResolution=function(e,t){var n=void 0,r=void 0;return e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||window.Number.MAX_VALUE,t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||window.Number.MAX_VALUE,n===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r};var C=1.2,M=3e5,O=1/30,x=E["default"].getComponent("Component"),A=500,I=function(e){return e.retries&&e.retries>=2},D=function(e,t){var n=void 0;return e?(n=getComputedStyle(e),n?n[t]:""):""},P=function(e,t,n){if(e){var r=e.segments[t],i=e.segments[t-1];n&&r&&(r.end=n,i?i.end&&(r.duration=r.end-i.end):r.duration=r.end)}},k=function(e,t,n,r){if(!e)return!1;var i=e.segments,o=n===i.length-1,a=r.length&&i[i.length-1].end<=r.end(0);return e.endList&&"open"===t.readyState&&(o||a)},R=function(e){var t={codecCount:0,videoCodec:null,audioProfile:null};return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,t.videoCodec=/(^|\s|,)+(avc1)[^ ,]*/i.exec(e),t.videoCodec=t.videoCodec&&t.videoCodec[2],t.audioProfile=/(^|\s|,)+mp4a.\d+\.(\d+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},L=function(e){return function(t){var n=void 0,r=[],i=this.tech_,o=i.buffered();if("undefined"==typeof t&&(t=i.currentTime()),!this.mediaSource||this.mediaSource.mediaSource_&&!this.mediaSource.mediaSource_.sourceBuffers.length)return E["default"].createTimeRanges([]);if(o&&o.length)for(n=0;n<o.length;n++)e(o.start(n),o.end(n),t)&&r.push([o.start(n),o.end(n)]);return E["default"].createTimeRanges(r)}},N=function(e){function t(e,n){var r=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var i=void 0;e.options_&&e.options_.playerId&&(i=(0,E["default"])(e.options_.playerId),i.hls||Object.defineProperty(i,"hls",{get:function(){return E["default"].log.warn("player.hls is deprecated. Use player.tech.hls instead."),r}})),this.tech_=e,this.source_=n.source,this.mode_=n.mode,this.pendingSegment_=null,this.bandwidth=n.bandwidth||4194304,this.bytesReceived=0,this.loadingState_="none","none"!==this.tech_.preload()&&(this.loadingState_="meta"),this.startCheckingBuffer_(),this.on(this.tech_,"seeking",function(){this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.stopCheckingBuffer_()}),this.on(this.tech_,"play",this.play)}return a(t,e),s(t,[{key:"src",value:function(e){var t=this,n=void 0;e&&(this.mediaSource=new E["default"].MediaSource({mode:this.mode_}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen.bind(this)),this.options_={},"undefined"!=typeof this.source_.withCredentials?this.options_.withCredentials=this.source_.withCredentials:E["default"].options.hls&&(this.options_.withCredentials=E["default"].options.hls.withCredentials),this.playlists=new j.PlaylistLoader(this.source_.src,this.tech_.hls,this.options_.withCredentials),this.tech_.one("canplay",this.setupFirstPlay.bind(this)),this.playlists.on("loadedmetadata",function(){n=t.playlists.media(),n.endList&&"metadata"!==t.tech_.preload()&&"none"!==t.tech_.preload()&&(t.loadingState_="segments"),t.setupSourceBuffer_(),t.setupFirstPlay(),t.fillBuffer(),t.tech_.trigger("loadedmetadata")}),this.playlists.on("error",function(){t.blacklistCurrentPlaylist_(t.playlists.error)}),this.playlists.on("loadedplaylist",function(){var e=t.playlists.media(),r=void 0;return e?(t.updateDuration(t.playlists.media()),r=t.seekable(),t.duration()===1/0&&0!==r.length&&t.mediaSource.addSeekableRange_(r.start(0),r.end(0)),void(n=e)):void t.playlists.media(t.selectPlaylist())}),this.playlists.on("mediachange",function(){t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.tech_.el()&&this.tech_.src(E["default"].URL.createObjectURL(this.mediaSource)))}},{key:"handleSourceOpen",value:function(){this.sourceBuffer||this.setupSourceBuffer_(),this.tech_.autoplay()&&this.play()}},{key:"excludeIncompatibleVariants_",value:function(e){var t=this.playlists.master,n=2,r=null,i=null,o=void 0;e.attributes&&e.attributes.CODECS&&(o=R(e.attributes.CODECS),r=o.videoCodec,i=o.audioProfile,n=o.codecCount),t.playlists.forEach(function(e){var t={codecCount:2,videoCodec:null,audioProfile:null};e.attributes&&e.attributes.CODECS&&(t=R(e.attributes.CODECS)),t.codecCount!==n&&(e.excludeUntil=1/0),t.videoCodec!==r&&(e.excludeUntil=1/0),("5"===t.audioProfile&&"5"!==i||"5"===i&&"5"!==t.audioProfile)&&(e.excludeUntil=1/0)})}},{key:"setupSourceBuffer_",value:function(){var e=this.playlists.media(),t=void 0;e&&"open"===this.mediaSource.readyState&&(t="video/mp2t",e.attributes&&e.attributes.CODECS&&(t+='; codecs="'+e.attributes.CODECS+'"'),this.sourceBuffer=this.mediaSource.addSourceBuffer(t),this.excludeIncompatibleVariants_(e),this.sourceBuffer.addEventListener("updateend",this.updateEndHandler_.bind(this)))}},{key:"setupFirstPlay",value:function(){var e=void 0,t=this.playlists.media();this.duration()===1/0&&0===this.tech_.played().length&&!this.tech_.paused()&&this.sourceBuffer&&t&&this.tech_.readyState()>=1&&(this.playlists.trigger("firstplay"),e=this.seekable(),e.length&&this.tech_.setCurrentTime(e.end(0)))}},{key:"play",value:function(){return this.loadingState_="segments",this.tech_.ended()&&this.tech_.setCurrentTime(0),0===this.tech_.played().length?this.setupFirstPlay():void(this.duration()===1/0&&this.tech_.currentTime()<this.seekable().start(0)&&this.tech_.setCurrentTime(this.seekable().start(0)))}},{key:"setCurrentTime",value:function(e){var t=this.findBufferedRange_();return this.playlists&&this.playlists.media()&&this.playlists.media().segments?t&&t.length?e:this.pendingSegment_&&this.pendingSegment_.buffered?e:(this.lastSegmentLoaded_=null,this.cancelSegmentXhr(),this.keyXhr_&&(this.keyXhr_.aborted=!0,this.cancelKeyXhr()),void this.fillBuffer(this.playlists.getMediaIndexForTime_(e))):0}},{key:"duration",value:function(){var e=this.playlists;return e?this.mediaSource?this.mediaSource.duration:j.Playlist.duration(e.media()):0}},{key:"seekable",value:function n(){var e=void 0,n=void 0;return this.playlists&&(e=this.playlists.media())?(n=j.Playlist.seekable(e),0===n.length?n:0===n.start(0)?E["default"].createTimeRanges([[this.playlists.expired_,this.playlists.expired_+n.end(0)]]):n):E["default"].createTimeRanges()}},{key:"updateDuration",value:function(e){var t=this,n=this.mediaSource.duration,r=j.Playlist.duration(e),i=this.tech_.buffered(),o=function a(){t.mediaSource.duration=r,t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",a)};i.length>0&&(r=Math.max(r,i.end(i.length-1))),n!==r&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",o):this.sourceBuffer&&this.sourceBuffer.updating||(this.mediaSource.duration=r,this.tech_.trigger("durationchange")))}},{key:"resetSrc_",value:function(){this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&"open"===this.mediaSource.readyState&&this.sourceBuffer.abort()}},{key:"cancelKeyXhr",value:function(){this.keyXhr_&&(this.keyXhr_.onreadystatechange=null,this.keyXhr_.abort(),this.keyXhr_=null)}},{key:"cancelSegmentXhr",value:function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null),this.pendingSegment_=null}},{key:"dispose",value:function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),u(Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"selectPlaylist",value:function(){var e=void 0,t=this.playlists.master.playlists.slice(),n=[],r=+new Date,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0;for(t.sort(j.comparePlaylistBandwidth),t=t.filter(function(e){return"undefined"!=typeof e.excludeUntil?r>=e.excludeUntil:!0}),i=t.length;i--;)o=t[i],o.attributes&&o.attributes.BANDWIDTH&&(e=o.attributes.BANDWIDTH*C,e<this.bandwidth&&(n.push(o),a||(a=o)));for(i=n.length,n.sort(j.comparePlaylistResolution),o=null,c=parseInt(D(this.tech_.el(),"width"),10),d=parseInt(D(this.tech_.el(),"height"),10);i--;)if(o=n[i],o.attributes&&o.attributes.RESOLUTION&&o.attributes.RESOLUTION.width&&o.attributes.RESOLUTION.height){var f=o.attributes.RESOLUTION;if(f.width===c&&f.height===d){s=null,l=o;break}if(f.width<c&&f.height<d)break;(!s||f.width<u.width&&f.height<u.height)&&(s=o,u=s.attributes.RESOLUTION)}return s||l||a||t[0]}},{key:"checkBuffer_",value:function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=window.setTimeout(this.checkBuffer_.bind(this),A)}},{key:"startCheckingBuffer_",value:function(){this.checkBuffer_()}},{key:"stopCheckingBuffer_",value:function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"fillBuffer",value:function(e){var t=this.tech_,n=t.currentTime(),r=0!==this.tech_.buffered().length,i=this.findBufferedRange_(),o=!(i&&i.length),a=0,s=0,u=void 0,l=void 0,c=void 0;if("segments"===this.loadingState_&&t.currentSrc()&&this.playlists&&!this.segmentXhr_&&!this.pendingSegment_&&"HAVE_NOTHING"!==this.playlists.state&&this.playlists.media()&&this.playlists.media().segments&&"SWITCHING_MEDIA"!==this.playlists.state){if("undefined"==typeof e)if(i&&i.length){if(a=i.end(0),e=this.playlists.getMediaIndexForTime_(a),s=Math.max(0,a-n),s>=j.GOAL_BUFFER_LENGTH)return}else e=this.playlists.getMediaIndexForTime_(this.tech_.currentTime());if(u=this.playlists.media().segments[e]){if(this.lastSegmentLoaded_&&this.playlistUriToUrl(this.lastSegmentLoaded_.uri)===this.playlistUriToUrl(u.uri)&&this.lastSegmentLoaded_.byterange===u.byterange)return this.fillBuffer(e+1);l={uri:this.playlistUriToUrl(u.uri),mediaIndex:e,mediaSequence:this.playlists.media().mediaSequence,playlist:this.playlists.media(),currentBufferedEnd:a,bytes:null,encryptedBytes:null,decrypter:null,buffered:null,timestampOffset:null},e>0&&(c=j.Playlist.duration(l.playlist,l.playlist.mediaSequence+e)+this.playlists.expired_),this.tech_.seeking()&&o?l.playlist.discontinuityStarts.length&&(l.timestampOffset=c):u.discontinuity&&i.length?l.timestampOffset=i.end(0):!r&&this.tech_.currentTime()>.05&&(l.timestampOffset=c),this.loadSegment(l)}}}},{key:"playlistUriToUrl",value:function(e){var t=void 0;return t=this.playlists.media().uri===this.source_.src?(0,S["default"])(this.source_.src,e):(0,S["default"])((0,S["default"])(this.source_.src,this.playlists.media().uri||""),e)}},{key:"byterangeStr_",value:function(e){var t=void 0,n=void 0;return n=e.offset+e.length-1,t=e.offset,"bytes="+t+"-"+n}},{key:"segmentXhrHeaders_",value:function(e){var t={};return"byterange"in e&&(t.Range=this.byterangeStr_(e.byterange)),t}},{key:"setBandwidth",value:function(e){this.segmentXhrTime=e.roundTripTime,this.bandwidth=e.bandwidth,this.bytesReceived+=e.bytesReceived||0,this.tech_.trigger("bandwidthupdate")}},{key:"blacklistCurrentPlaylist_",value:function(e){var t=void 0,n=void 0;return(t=e.playlist||this.playlists.media())?(t.excludeUntil=Date.now()+M,(n=this.selectPlaylist())?(E["default"].log.warn("Problem encountered with the current HLS playlist. Switching to another playlist."),this.playlists.media(n)):(E["default"].log.warn("Problem encountered with the current HLS playlist. No suitable alternatives found."),this.error=e,this.mediaSource.endOfStream("network"))):(this.error=e,this.mediaSource.endOfStream("network"))}},{key:"loadSegment",value:function(e){var t=this,n=e.playlist.segments[e.mediaIndex],r=0,i=this.seekable(),o=this.tech_.currentTime();this.sourceBuffer&&!this.sourceBuffer.updating&&(r=i.length&&i.start(0)>0&&i.start(0)<o?i.start(0):o-60,r>0&&this.sourceBuffer.remove(0,r)),n.key&&this.fetchKey_(n),this.segmentXhr_=this.tech_.hls.xhr({uri:e.uri,responseType:"arraybuffer",withCredentials:this.source_.withCredentials,timeout:1.5*n.duration*1e3,headers:this.segmentXhrHeaders_(n)},function(r,i){return t.segmentXhr_&&i===t.segmentXhr_?(t.segmentXhr_=null,i.timedout?(t.bandwidth=1,t.playlists.media(t.selectPlaylist())):!i.aborted&&r?t.blacklistCurrentPlaylist_({status:i.status,message:"HLS segment request error at URL: "+e.uri,code:i.status>=500?4:2}):void(i.response&&(t.lastSegmentLoaded_=n,t.setBandwidth(i),n.key?e.encryptedBytes=new Uint8Array(i.response):e.bytes=new Uint8Array(i.response),t.pendingSegment_=e,t.tech_.trigger("progress"),t.drainBuffer(),t.playlists.media(t.selectPlaylist())))):void 0})}},{key:"drainBuffer",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;if(this.pendingSegment_&&this.sourceBuffer&&!this.pendingSegment_.buffered&&!this.sourceBuffer.updating){
if(e=this.pendingSegment_,t=e.mediaIndex,n=e.playlist,r=e.bytes,i=n.segments[t],i.key&&!r){if(I(i.key))return this.blacklistCurrentPlaylist_({message:"HLS segment key request error.",code:4});if(!i.key.bytes)return;if(e.decrypter)return;return a=i.key.iv||new Uint32Array([0,0,0,t+n.mediaSequence]),o=new j.Decrypter(e.encryptedBytes,i.key.bytes,a,function(t,n){t&&E["default"].log.warn(t),e.bytes=n}),void(e.decrypter=o)}this.pendingSegment_.buffered=this.tech_.buffered(),null!==e.timestampOffset&&(this.sourceBuffer.timestampOffset=e.timestampOffset),this.sourceBuffer.appendBuffer(r)}}},{key:"updateEndHandler_",value:function(){var e=this.pendingSegment_,t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;if(!e)return void(this.pendingSegment_=null);if(e.buffered){if(this.pendingSegment_=null,t=e.playlist,n=e.mediaIndex+(e.mediaSequence-t.mediaSequence),r=this.findBufferedRange_(),a=k(t,this.mediaSource,n,r),e.playlist.uri!==this.playlists.media().uri)return a?this.mediaSource.endOfStream():this.fillBuffer();if(i=this.seekable(),this.tech_.seeking()&&0===r.length&&i.length&&this.tech_.currentTime()<i.start(0)){var s=this.findNextBufferedRange_();s.length&&(E["default"].log("tried seeking to",this.tech_.currentTime(),"but that was too early, retrying at",s.start(0)),this.tech_.setCurrentTime(s.start(0)+O))}return o=j.findSoleUncommonTimeRangesEnd_(e.buffered,this.tech_.buffered()),P(t,n,o),a?this.mediaSource.endOfStream():null!==o||e.buffered.length!==this.tech_.buffered().length?(this.updateDuration(t),void this.fillBuffer()):void this.fillBuffer(n+1)}}},{key:"fetchKey_",value:function(e){var t=this,n=void 0,r=void 0,i=void 0;return!this.keyXhr_&&(r=this.options_,i=function(n){return function(r,i){var o=void 0;return t.keyXhr_=null,r||!i.response||16!==i.response.byteLength?(n.retries=n.retries||0,n.retries++,void(i.aborted||t.fetchKey_(e))):(o=new DataView(i.response),n.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),void t.checkBuffer_())}},n=e.key)?n.bytes||I(n)?void 0:void(this.keyXhr_=this.tech_.hls.xhr({uri:this.playlistUriToUrl(n.uri),responseType:"arraybuffer",withCredentials:r.withCredentials},i(n))):void 0}}]),t}(x);n["default"]=N,N.prototype.findBufferedRange_=L(function(e,t,n){return n>=e-O&&t+O>=n}),N.prototype.findNextBufferedRange_=L(function(e,t,n){return e-O>=n});var F=function B(e){return{canHandleSource:function(e){return B.canPlayType(e.type)},handleSource:function(t,n){return"flash"===e&&n.setTimeout(function(){n.trigger("loadstart")},1),n.hls=new N(n,{source:t,mode:e}),n.hls.xhr=(0,h["default"])(),E["default"].Hls.xhr.beforeRequest&&(n.hls.xhr.beforeRequest=E["default"].Hls.xhr.beforeRequest),n.hls.src(t.src),n.hls},canPlayType:function(e){return B.canPlayType(e)}}};F.canPlayType=function(e){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return j.supportsNativeHls?!1:t.test(e)},"undefined"!=typeof E["default"].MediaSource&&"undefined"!=typeof E["default"].URL||(E["default"].MediaSource=v.MediaSource,E["default"].URL=v.URL),v.MediaSource.supportsNativeMediaSources()&&E["default"].getComponent("Html5").registerSourceHandler(F("html5")),window.Uint8Array&&E["default"].getComponent("Flash").registerSourceHandler(F("flash")),E["default"].HlsHandler=N,E["default"].HlsSourceHandler=F,E["default"].Hls=j,E["default"].m3u8=b["default"],n["default"]={Hls:j,HlsHandler:N,HlsSourceHandler:F},t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":1,"./decrypter":5,"./m3u8":6,"./playlist":11,"./playlist-loader":10,"./resolve-url":12,"./xhr":14,"videojs-contrib-media-sources":48}]},{},[51])(51)}),!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(n){"use strict";function r(e,t){var n,i=t.options_;this.tech_=t,this.el_=t.el(),e.src&&(t.isReady_=!1,n=e.src,this.keySystemOptions_=r.buildDashJSProtData(e.keySystemOptions),r.context_=r.context_||{},this.mediaPlayer_=a.MediaPlayer(r.context_).create(),r.useVideoJSDebug&&r.useVideoJSDebug(this.mediaPlayer_),this.mediaPlayer_.initialize(),this.mediaPlayer_.attachView(this.el_),i.autoplay||this.mediaPlayer_.setAutoPlay(!1),this.mediaPlayer_.retrieveManifest(n,o.bind(this,this.initializeDashJS)))}var i=e("global/window"),o="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,a="undefined"!=typeof window?window.dashjs:"undefined"!=typeof n?n.dashjs:null,s=function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e){return"[object Object]"===Object.prototype.toString.call(e)},l=function(e,t){var n,r,i,o;o={};for(n in t)t.hasOwnProperty(n)&&(r=e[n],i=t[n],u(r)&&u(i)?e[n]=l(r,i):e[n]=t[n]);return e};r.prototype.initializeDashJS=function(e,t){var n={};return t?(this.tech_.triggerReady(),void this.dispose()):(r.getWidevineProtectionData&&(n=r.getWidevineProtectionData(e),this.keySystemOptions_=l(this.keySystemOptions_,n)),void this.resetSrc_(o.bind(this,function(){this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(e),this.tech_.triggerReady()})))},r.hideErrors=function(e){e.className+=" vjs-dashjs-hide-errors"},r.showErrors=function(e){setTimeout(function(){e.className=e.className.replace(" vjs-dashjs-hide-errors","")},250)},r.buildDashJSProtData=function(e){var t,n,r,i={};if(!e||!s(e))return i;for(r=0;r<e.length;r++)t=e[r],n=l({},t.options),n.licenseUrl&&(n.serverURL=n.licenseUrl,delete n.licenseUrl),i[t.name]=n;return i},r.prototype.resetSrc_=function(e){this.el_&&(this.el_.src="",this.el_.setMediaKeys?this.el_.setMediaKeys(null).then(e,e):e())},r.prototype.dispose=function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.resetSrc_(function(){})},o.DashSourceHandler=function(){return{canHandleSource:function(e){var t=/\.mpd/i;return o.DashSourceHandler.canPlayType(e.type)?"probably":t.test(e.src)?"maybe":""},handleSource:function(e,t){return new r(e,t)},canPlayType:function(e){return o.DashSourceHandler.canPlayType(e)}}},o.DashSourceHandler.canPlayType=function(e){var t=/^application\/dash\+xml/i;return t.test(e)?"probably":""},i.MediaSource&&o.getComponent("Html5").registerSourceHandler(o.DashSourceHandler(),0),o.Html5DashJS=r,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":1}]},{},[2]);